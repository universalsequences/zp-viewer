(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{2553:function(e,t,n){"use strict";var r=n(3),a=n(4),c=n(7),o=n(11),s=n(1),i=n(0),u=n.n(i),l=n(12),f=n(205),d=n.n(f);function m(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=Object(s.a)(e);if(t){var a=Object(s.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(o.a)(this,n)}}var p=function(e){Object(c.a)(n,e);var t=m(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(a.a)(n,[{key:"render",value:function(){return 0===this.props.numPending?u.a.createElement("div",null):u.a.createElement("div",{className:"pending-transactions"},"Syncing ",this.props.numPending," items",u.a.createElement(d.a,{sizeUnit:"px",size:8,color:"#6200ff",loading:!0}))}}]),n}(i.Component);t.a=Object(l.b)(function(e,t){return{numPending:e.transactions.pendingTransactions.length}},null)(p)},2558:function(e,t,n){"use strict";n.d(t,"b",function(){return r}),n.d(t,"c",function(){return a}),n.d(t,"a",function(){return c});var r="SEQUENCE_ANNOTATION",a="SEQUENCE_TAG",c="SAMPLE_ANNOTATION"},2582:function(e,t,n){"use strict";var r=n(0),a=n.n(r),c=n(9),o=(n(80),n(713)),s=(n(400),n(2699)),i=(n(297),n(544),n(12));t.a=Object(i.b)(function(e,t){return{pulledEffects:e.effects.pulledEffects,currentSubSequence:t.subSequence||t.sequencerEngine.currentSubSequence}},function(e){return{setPulledEffects:function(t){return e(Object(c.De)(t))}}})(function(e){var t=e.setHeight,n=e.containerRef,c=e.sizeRef,i=e.setSize,u=e.size,l=e.all,f=e.pulledEffects,d=e.sequencerEngine,m=e.setPulledEffects,p=e.scale,b=e.currentSubSequence,v=(e.playhead,e.noWrapper),g=e.elements,h=e.ordering,E=e.setOrdering,k=Object(r.useRef)(),O=Object(r.useRef)({}),j=Object(r.useCallback)(function(e){m(f.filter(function(t){return t!==e}))},[f]),y=Object(r.useCallback)(function(e){return!!e&&(Object(o.a)(e)?l||Object(o.a)(e).subSequence===b||Object(o.a)(e)===b:!(!e.instrument||!e.instrument.context||e.instrument.context.subSequence!==b)||e.track===b)},[b,l]);Object(r.useEffect)(function(){if(k.current){var e=k.current.getBoundingClientRect().height;t(e)}},[f,t]);var S=f.filter(y),w=S.map(function(e){return a.a.createElement(s.a,{key:e.id,isStatic:!v,scale:p,elements:g||O,sizeRef:c,setOrdering:E,ordering:h,containerRef:n,size:u,setSize:i,effects:S,onDelete:function(){return j(e)},sequencerEngine:d,fx:e})});return v?w:a.a.createElement("div",{ref:k,className:"pulled-effects"},w)})},2598:function(e,t,n){"use strict";var r=n(10),a=n(8),c=n(0),o=n(9),s=n(3),i=n(4),u=function(){function e(t,n){Object(s.a)(this,e),this.root={x:0,y:0,w:t,h:n}}return Object(i.a)(e,[{key:"fit",value:function(e){var t,n,r;for(t=0;t<e.length;t++)r=e[t],(n=this.findNode(this.root,r.w,r.h))&&(r.fit=this.splitNode(n,r.w,r.h))}},{key:"findNode",value:function(e,t,n){return e.used?this.findNode(e.right,t,n)||this.findNode(e.down,t,n):t<=e.w&&n<=e.h?e:null}},{key:"splitNode",value:function(e,t,n){return e.used=!0,e.down={x:e.x,y:e.y+n,w:e.w,h:e.h-n},e.right={x:e.x+t,y:e.y,w:e.w-t,h:n},e}}]),e}();n.d(t,"a",function(){return l});var l=function(e){e.ref;var t=e.elements,n=e.subSequence,s=e.presentationMode;return{arrangeWindows:Object(c.useCallback)(function(){if(t.current){var e=n.sequencerEngine.state.windows.moduleSizes[n.id],c=n.state.windows.selectedElements,i=[];for(var l in c)c[l]&&i.push(l);var f=[],d=[];for(var m in t.current)if(!(i.length>0)||i.includes(m)){var p=t.current[m].current;if(p){var b={element:p,id:m,h:p.offsetHeight+15,w:p.offsetWidth+15};f.push(b),d.push(Object(a.a)({},b,{x:p.offsetLeft,y:p.offsetTop}))}}f.sort(function(e,t){return Math.max(t.w,t.h)-Math.max(e.w,e.h)});var v,g,h=e.width||200,E=e.height||200;if(i.length>0)v=Math.min.apply(Math,Object(r.a)(d.map(function(e){return e.x}))),g=Math.min.apply(Math,Object(r.a)(d.map(function(e){return e.y}))),h=Math.max.apply(Math,Object(r.a)(d.map(function(e){return e.x+e.w})))-v,E=Math.max.apply(Math,Object(r.a)(d.map(function(e){return e.y+e.h})))-g;new u(h,2*E).fit(f);for(var k={},O=0,j=f;O<j.length;O++){var y=j[O];y.fit&&(i.length>0?k[y.id]={x:y.fit.x+v,y:y.fit.y+g}:k[y.id]=Object(a.a)({},y.fit))}console.log("BULK ARRANGING"),s?n.dispatch(Object(o.gb)(k)):n.dispatch(Object(o.hb)(k))}},[t,n,s])}}},2602:function(e,t,n){"use strict";var r=n(0),a=n.n(r),c=n(1183),o=n(12);n(1517);t.a=Object(o.b)(function(e,t){return{pads:t.subSequence?t.subSequence.pads:t.sequencerEngine.currentSubSequence.pads}},function(e){return{}})(function(e){var t=e.pads,n=e.scrollContainer;return a.a.createElement("div",{className:"pads-container"},t.map(function(e,t){return a.a.createElement(c.a,{key:t,scrollContainer:n,pad:e})}))})},2604:function(e,t,n){"use strict";var r=n(3),a=n(4),c=n(7),o=n(11),s=n(1),i=n(0),u=n.n(i),l=n(12),f=n(44),d=n(85);function m(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=Object(s.a)(e);if(t){var a=Object(s.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(o.a)(this,n)}}var p=function(e){Object(c.a)(n,e);var t=m(n);function n(e){var a;return Object(r.a)(this,n),(a=t.call(this,e)).state={clockDragging:!1,clockStartDragY:void 0,clockDragY:void 0},a}return Object(a.a)(n,[{key:"onClockMouseLeave",value:function(e){void 0!=this.seekTimer&&(clearInterval(this.seekTimer),this.seekTimer=void 0)}},{key:"onClockMouseDown",value:function(e){var t=this;void 0!==this.props.sequencerEngine&&(this.state.clockStartDragY=e.clientY,this.seekTimer=setInterval(function(){if(void 0!==t.state.clockDragY){var e=t.state.clockStartDragY-t.state.clockDragY,n=t.props.sequencerEngine.trackStep+5*e;n<0&&(n=0),t.props.sequencerEngine.seekToTrackStep(n)}},50))}},{key:"onClockMouseUp",value:function(e){clearInterval(this.seekTimer),this.seekTimer=void 0}},{key:"onClockMouseMove",value:function(e){this.state.clockDragY=e.clientY}},{key:"onClickMetronome",value:function(){void 0!==this.props.sequencerEngine&&(this.props.sequencerEngine.metronomeOn=!this.props.sequencerEngine.metronomeOn)}},{key:"render",value:function(){var e=this,t=Math.ceil(this.props.currentGlobalStep/32);t=isNaN(t)?1:t;var n=1+Math.floor(this.props.currentGlobalStep/8)%4,r=1+Math.floor(this.props.currentGlobalStep/2)%4,a="clock ";this.props.clockTick&&(a+="percentage-"+this.props.clockTick);var c="metronome";return this.props.metronomeOn&&(this.props.currentGlobalStep/4%4>=2&&(c+=" off-beat"),c+=" on"),u.a.createElement("div",{className:a,onMouseLeave:function(t){return e.onClockMouseLeave(t)},onMouseDown:function(t){return e.onClockMouseDown(t)},onMouseUp:function(t){return e.onClockMouseUp(t)},onMouseMove:function(t){return e.onClockMouseMove(t)}},u.a.createElement("div",{className:"track-time"},t),u.a.createElement("div",{className:"divider"},"."),u.a.createElement("div",{className:"time"},n),u.a.createElement("div",{className:"divider"},"."),u.a.createElement("div",{className:"time"},r),u.a.createElement(d.a,{element:f.Q,onClick:function(){return e.onClickMetronome()},className:c},u.a.createElement("div",{className:"dot first"}),u.a.createElement("div",{className:"dot second"})))}}]),n}(i.Component);t.a=Object(l.b)(function(e,t){if(void 0===t.sequencerEngine)return{currentStep:0,currentGlobalStep:0,clockTick:0,metronomeOn:!1};var n=t.sequencerEngine.getSequenceId();return{currentStep:e.sequencer.currentStep[n]||0,currentGlobalStep:e.sequencer.currentGlobalStep[n]||0,clockTick:e.clock.clockTick,metronomeOn:t.sequencerEngine.metronomeOn}},null)(p)},2632:function(e,t,n){"use strict";var r=n(0),a=n.n(r),c=n(12),o=n(14),s=n.n(o);n(205);t.a=Object(c.b)(function(e,t){t.sequencerEngine,t.id,t.renderLength;return{currentTime:e.freeze.offlineEngine&&e.freeze.offlineEngine.context&&Math.floor(e.freeze.offlineEngine.context._context.currentTime),currentExportInfo:e.freeze.currentExportInfo}},null)(function(e){var t=e.currentTime,n=void 0===t?0:t,r=e.renderLength,c=e.width,o=void 0===c?380:c,i=e.currentExportInfo,u=n/(r*(new s.a.Time("1n").toMilliseconds()/1e3)),l={width:o*u},f=i;return a.a.createElement("div",{className:"progress-bar"},a.a.createElement("div",{className:"inner-progress-bar"},a.a.createElement("div",{className:"progress",style:l}),a.a.createElement("div",{className:"loading-text"},f?"Exporting "+f.name+" "+(f.index+1)+"/"+f.total+" ":"Exporting Project ","(",Math.round(100*u),"%)...")))})},2637:function(e,t,n){"use strict";var r=n(0),a=n.n(r),c=n(9),o=n(12);t.a=Object(o.b)(function(e,t){return{drawingEdge:e.pads.drawingEdges[t.pad.subSequence.id]}},function(e){return{setDrawingPadEdge:function(t,n){return e(Object(c.Pb)(t,n))}}})(function(e){var t=e.setDrawingPadEdge,n=e.isSpeaker,c=e.drawingEdge,o=e.fx,s=e.pad,i=e.id,u="effect-input-"+(void 0===i?o.id:i),l=Object(r.useCallback)(function(e){if(c){var r=c.effect,a=c.rack,i=c.outputNumber;(a=a||s.effectRack).connectNodes(r,n?void 0:o,i),t(s.subSequence.id,void 0)}},[c]);return a.a.createElement("div",{onMouseUp:l,id:u,className:"effect-input"})})},2638:function(e,t,n){"use strict";var r=n(0),a=n.n(r),c=n(80),o=n(105),s=n(255),i=n(1144),u=n(9),l=n(12);t.a=Object(l.b)(function(e,t){return{}},function(e){return{setDrawingPadEdge:function(t,n){return e(Object(u.Pb)(t,n))}}})(function(e){var t=e.isControl,n=e.containerRef,u=e.pad,l=e.setDrawingPadEdge,f=e.fx,d=e.rack,m=e.id,p=void 0===m?f.id:m,b=e.coords,v=e.nodeRef,g=e.outputNumber,h="effect-output-"+p;void 0!==g&&(h="effect-output-"+g+"-"+p);var E=Object(r.useRef)(void 0),k=Object(s.a)({ref:E}),O=k.onContextMenu,j=k.dropdownPos,y=k.setDropdownPos,S=Object(r.useRef)({x:0,y:0});Object(r.useEffect)(function(){if(b&&v&&v.current){var e=b.x,t=b.y;e+=v.current.offsetWidth+20,S.current.x=e,S.current.y=t}},[b]);var w=Object(r.useCallback)(function(e){n.current.getBoundingClientRect();var r=e.clientX,a=e.clientY,c=(u.state.spatial.edgesPadding,{effect:t?f.inputNode:f,outputNumber:g,rack:d,x1:r,y1:a,x2:r,y2:a});e.stopPropagation(),l(u.subSequence.id,c)},[]),C=f.getEffectType&&f.getEffectType()===c.c,x={};return f.numberOfOutputs>1&&(x.top=30+20*g+"%"),a.a.createElement("div",{ref:E,style:x,onContextMenu:O,id:h,onMouseDown:w,className:"effect-output"},!t&&a.a.createElement(i.a,{isMidi:C,setDropdownPos:y,outputNumber:g,dropdownPosRef:S,effectOptions:C?o.e:Object(o.a)(),initializeEffect:C?o.c:o.b,dropdownPos:j,effect:f,node:u}))})},2641:function(e,t,n){"use strict";n.d(t,"a",function(){return s});var r=n(2),a=n.n(r),c=n(13),o=n(30),s=function(){var e=Object(c.a)(a.a.mark(function e(){var t,n,r,c,s,i,u,l,f;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.a.eth.getBlockNumber();case 2:t=e.sent,n=null,r=new Date,c=r.getDate(),s=r.getMonth(),t-=6e3*c,i=s,u={},l=0;case 11:if(!(l<12)){e.next=23;break}return e.next=14,o.a.eth.getBlock(t);case 14:n=e.sent,r=new Date(1e3*n.timestamp),f=new Date(r.getFullYear(),r.getMonth(),0).getDate(),u[i--]=t,t-=6600*f;case 20:l++,e.next=11;break;case 23:return e.abrupt("return",u);case 24:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()},2644:function(e,t,n){"use strict";var r=n(6),a=n(0),c=n.n(a),o=n(9),s=n(12),i=function(e){var t="ztoolbar-option  ";return e.expanded&&(t+=" selected"),e.hideOnPadSequencer&&(t+=" hide-on-pad-sequencer"),c.a.createElement("div",Object.assign({},e,{className:t}),c.a.createElement("img",Object.assign({},e,{onClick:function(){return 0}})))},u=function(e){e.subSequence;var t=e.type,n=e.drag;return c.a.createElement("div",{className:"modulator-expansion"},c.a.createElement("div",{className:"modulator-type"},"MODULE_ENVELOPE"===t?"Envelopes":"LFOs"),[1,2,3,4].map(function(e){return c.a.createElement("div",{draggable:!0,onDragStart:function(){return n(t+" "+e)},className:"modulator-number"},e)}))};t.a=Object(s.b)(function(e,t){var n=t.subpatch||t.subSequence;return{uxLocked:e.zobject.uxLocked,showLFOs:e.sequencer.showLFOs,showEnvelopes:e.sequencer.showEnvelopes,showPadSequencer:e.spatial.showPadSequencer,presentationMode:n.presentationMode}},function(e){return{setShowEnvelopes:function(t){return e(Object(o.Rf)(t))},setShowLFOs:function(t){return e(Object(o.Xf)(t))},setTypeDragging:function(t){return e(Object(o.ki)(t))},setUXLocked:function(t){return e(Object(o.Fh)(t))},setShowModulators:function(t){return e(Object(o.ag)(t))},setPresentationMode:function(t){return e(Object(o.we)(t))}}})(function(e){e.setPresentationMode;var t=e.presentationMode,n=e.showPadSequencer,o=e.setShowEnvelopes,s=e.showLFOs,l=e.showEnvelopes,f=e.setShowLFOs,d=e.children,m=e.subpatch,p=e.subSequence,b=e.setTypeDragging,v=e.setUXLocked,g=(e.setShowModulators,e.uxLocked),h=Object(a.useState)(void 0),E=Object(r.a)(h,2),k=E[0],O=E[1],j=Object(a.useState)(void 0),y=Object(r.a)(j,2),S=y[0],w=y[1],C=Object(a.useRef)(0);Object(a.useEffect)(function(){return k?window.addEventListener("mouseup",x):window.removeEventListener("mouseup",x),function(){return window.removeEventListener("mouseup",x)}},[k,O]);var x=Object(a.useCallback)(function(){O(void 0)},[k,O]),N=Object(a.useCallback)(function(e){b(e),w(void 0),e.includes("LFO")||e.includes("MODULE_ENVELOPE")||O(void 0),C.current++},[O,w]),q=Object(a.useCallback)(function(e){var t=C.current;setTimeout(function(){t===C.current&&w(e)},250)},[w]),M=Object(a.useCallback)(function(){C.current++,w(void 0)},[]),D=Object(a.useCallback)(function(){v(!g)},[g]),R=Object(a.useCallback)(function(){var e=m||p;console.log("setting presentation mode = ",!e.presentationMode,e),e.presentationMode=!e.presentationMode},[m,p,t]),T="",P=0;if(S)switch(S){case"zobject":T="Drag an object into the canvas",P=0;break;case"zmessage":T="Drag a message box into the canvas",P=1;break;case"zcomment":T="Drag a comment box into the canvas",P=2;break;case"zbutton":T="Drag a button into the canvas",P=3;break;case"ztoggle":T="Drag a toggle into the canvas",P=5;break;case"znumber":T="Drag a number button into the canvas",P=6;break;case"zpad":T="Drag a drum pad into the canvas",P=5;break;case"sequencer":T="Drag a step sequencer into the canvas",P=7;break;case"zlock":T="Toggle the UI to lock in place or be editable",P=8}var z="zobject-toolbar";return n&&(z+=" showing-pad-sequencer"),c.a.createElement("div",{className:z},S&&c.a.createElement("div",{className:"toolbar-tooltip",style:{left:25*P}},T),c.a.createElement(i,{onMouseOver:function(){return q("zobject")},onMouseLeave:M,hideOnPadSequencer:!0,draggable:"true",onDragStart:function(){return N("zobject")},src:"/zobject-light.svg"}),c.a.createElement(i,{onMouseLeave:M,hideOnPadSequencer:!0,onMouseOver:function(){return q("zmessage")},draggable:"true",onDragStart:function(){return N("zmessage")},src:"/zmessage-light.svg"}),c.a.createElement(i,{onMouseLeave:M,hideOnPadSequencer:!0,onMouseOver:function(){return q("zcomment")},draggable:"true",onDragStart:function(){return N("zcomment")},src:"/zcomment-light.svg"}),c.a.createElement(i,{draggable:"true",hideOnPadSequencer:!0,onMouseLeave:M,onMouseOver:function(){return q("zbutton")},onDragStart:function(){return N("zbutton")},src:"/zbutton-light.svg"}),c.a.createElement(i,{draggable:"true",onMouseLeave:M,hideOnPadSequencer:!0,onMouseOver:function(){return q("ztoggle")},onDragStart:function(){return N("ztoggle")},src:"/ztoggle-light.svg"}),c.a.createElement(i,{draggable:"true",onMouseLeave:M,hideOnPadSequencer:!0,onMouseOver:function(){return q("znumber")},onDragStart:function(){return N("znumber")},src:"/znumber-light.svg"}),!m&&c.a.createElement(i,{draggable:"true",onMouseLeave:M,hideOnPadSequencer:!0,onMouseOver:function(){return q("zpad")},onDragStart:function(){return N("zpad")},src:"/zpad-light.svg"}),!m&&c.a.createElement(i,{className:s?"expanded":"",expanded:s,draggable:"false",onClick:function(){return f(!s)},src:"/zlfo-light.svg"}),!m&&c.a.createElement(i,{draggable:"false",expanded:l,className:l?"expanded":"",onClick:function(){return o(!l)},src:"/zenvelope-light.svg"}),k&&c.a.createElement(u,{drag:N,subSequence:p,type:k}),c.a.createElement(i,{onClick:function(){console.log("CLICKED TOGGLE"),R()},expanded:t,onMouseOver:function(){return q("zlock")},hideOnPadSequencer:!0,onMouseLeave:M,className:"presentation-icon",src:"/presentation-mode.svg"}),c.a.createElement(i,{onClick:D,onMouseOver:function(){return q("zlock")},hideOnPadSequencer:!0,onMouseLeave:M,expanded:g,src:g?"/zlock-closed.svg":"/zlock-open.svg"}),m&&d)})},2687:function(e,t,n){"use strict";var r=n(2),a=n.n(r),c=n(13),o=n(3),s=n(4),i=n(18),u=n(7),l=n(11),f=n(1),d=n(76),m=n(6),p=n(0),b=n.n(p),v=n(109),g=n.n(v),h=n(963),E=n(201),k=n(75),O=n(12),j=(n(2798),Object(O.b)(function(e,t){return{}},function(e){return{}})(function(e){var t=e.sequencerEngine,n=e.onClickCancel,r=Object(p.useState)(""),o=Object(m.a)(r,2),s=o[0],i=o[1],u=Object(p.useState)(8),l=Object(m.a)(u,2),f=l[0],v=l[1],O=Object(p.useState)(.1),j=Object(m.a)(O,2),y=j[0],S=j[1],w=Object(p.useState)(!1),C=Object(m.a)(w,2),x=C[0],N=C[1],q=Object(p.useState)(!1),M=Object(m.a)(q,2),D=(M[0],M[1]),R=Object(p.useCallback)(Object(c.a)(a.a.mark(function e(){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return N(!0),e.next=3,Object(h.c)(t,s,f,y*Math.pow(10,18));case 3:D(!0),N(!1);case 5:case"end":return e.stop()}},e)})),[y,s,f,N,D]);return b.a.createElement(d.a,{dialogClassName:"mint-modal preset-modal render-modal",show:!0,onHide:n},b.a.createElement(d.a.Header,{closeButton:!0},b.a.createElement(d.a.Title,null,"Mint NFT")),b.a.createElement(d.a.Body,null,x?b.a.createElement(E.a,{text:"Minting your nft"}):b.a.createElement("div",null,b.a.createElement("input",{placeholder:"Title your work",value:s,type:"text",onChange:function(e){return i(e.target.value)}}),b.a.createElement("div",{className:"editions"},b.a.createElement("div",{className:"value"},"Editions: ",f),b.a.createElement(g.a,{value:f,change:function(e){return v(e.target.value)},step:1,max:1e3,min:1,orientation:"horizontal",reversed:!1})),b.a.createElement("div",{className:"price"},b.a.createElement("div",{className:"value"},"Price: ",y," eth"),b.a.createElement(g.a,{value:y,change:function(e){return S(e.target.value)},step:.001,max:1,min:.001,orientation:"horizontal",reversed:!1})))),b.a.createElement(d.a.Footer,null,b.a.createElement(k.b,{variant:"secondary",onClick:R},"Mint!"),b.a.createElement(k.b,{variant:"primary",onClick:n},"Cancel")))})),y=n(9),S=n(10),w=n(33);function C(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return x(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return x(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var c,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,c=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw c}}}}function x(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var N=function(){var e=Object(c.a)(a.a.mark(function e(){var t,n,r,c,o,s;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.a.encryption.getPotentialUsers();case 2:t=e.sent,[],n=[],r=C(t),e.prev=6,r.s();case 8:if((c=r.n()).done){e.next=16;break}return o=c.value,e.next=12,w.a.users.getUserName(o);case 12:(s=e.sent)&&""!==s&&n.push({id:o,userName:s});case 14:e.next=8;break;case 16:e.next=21;break;case 18:e.prev=18,e.t0=e.catch(6),r.e(e.t0);case 21:return e.prev=21,r.f(),e.finish(21);case 24:return console.log("USERS =",n),e.abrupt("return",n);case 26:case"end":return e.stop()}},e,null,[[6,18,21,24]])}));return function(){return e.apply(this,arguments)}}(),q=Object(O.b)(function(e,t){return{}},function(e){return{}})(function(e){var t=e.onSharedWithChanged,n=(e.guildId,Object(p.useState)("")),r=Object(m.a)(n,2),a=r[0],c=r[1],o=Object(p.useState)([]),s=Object(m.a)(o,2),i=s[0],u=s[1],l=Object(p.useState)([]),f=Object(m.a)(l,2),d=f[0],v=f[1],g=Object(p.useState)([]),h=Object(m.a)(g,2),E=h[0],k=h[1];Object(p.useEffect)(function(){},[u]),Object(p.useEffect)(function(){t(i)},[i]),Object(p.useEffect)(function(){N().then(function(e){return v(e)})},[v]);var O=Object(p.useCallback)(function(e){u([].concat(Object(S.a)(i),[e])),c(""),k([])},[i,u,k]),j=Object(p.useCallback)(function(e){"Enter"===e.key&&O(a)},[u,a,i]);Object(p.useEffect)(function(){if(""===a.trim())k([]);else{var e=d.filter(function(e){return e.userName.toLowerCase().includes(a.toLowerCase())});k(e)}},[a,k]);var y=Object(p.useCallback)(function(e){u(i.filter(function(t){return t!==e}))},[u,i]);return b.a.createElement("div",{className:"share-with-people"},b.a.createElement("div",{className:"people-input-container"},i.map(function(e){return b.a.createElement("div",{className:"shared-user"},e,b.a.createElement("div",{onClick:function(){return y(e)},className:"delete-user"},"x"))}),b.a.createElement("input",{placeholder:"Type collaborators to share this with",className:"people-input",value:a,type:"text",onKeyDown:j,onChange:function(e){return c(e.target.value)}})),b.a.createElement("div",{className:"auto-completion-users"},E.map(function(e){return b.a.createElement("div",{onClick:function(){return O(e.userName)},className:"auto-completed-user"},e.userName)})))}),M=n(90);function D(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return R(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return R(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var c,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,c=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw c}}}}function R(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var T=function(e){return new Promise(function(){var t=Object(c.a)(a.a.mark(function t(n){var r,c,o,s,i,u,l,f,d,m,p;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=w.a.users,c=w.a.guilds,o=void 0,s=Object(S.a)(e),t.t0=e,t.next=6,r.getUserName();case 6:t.t1=t.sent,t.t0.push.call(t.t0,t.t1),i=D(e),t.prev=9,i.s();case 11:if((u=i.n()).done){t.next=23;break}return l=u.value,t.next=15,r.getUserId(l);case 15:return f=t.sent,t.next=18,c.getGuildsForUser(f);case 18:d=t.sent,d=new Set(d.map(function(e){return e.guildId})),o=void 0===o?d:P(o,d);case 21:t.next=11;break;case 23:t.next=28;break;case 25:t.prev=25,t.t2=t.catch(9),i.e(t.t2);case 28:return t.prev=28,i.f(),t.finish(28);case 31:if(o=Array.from(o),m=void 0,0!==o.length){t.next=40;break}return t.delegateYield(a.a.mark(function t(){var o,i,u,l,f,d,p;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return o=e.join(","),t.next=3,c.newGuild(o);case 3:i=t.sent;case 4:return t.next=7,c.getGuildsForUser();case 7:if(u=t.sent,console.log("GUILDS found =",u),!(m=u.find(function(e){return e.name===o}))){t.next=13;break}return m=m.guildId,t.abrupt("break",17);case 13:return t.next=15,Object(M.a)(2e3);case 15:t.next=4;break;case 17:c.saveGuildKey(m,i),n(m),l=D(s),t.prev=20,l.s();case 22:if((f=l.n()).done){t.next=31;break}return d=f.value,t.next=26,r.getUserId(d);case 26:return p=t.sent,t.next=29,c.requestToAddMember(m,p);case 29:t.next=22;break;case 31:t.next=36;break;case 33:t.prev=33,t.t0=t.catch(20),l.e(t.t0);case 36:return t.prev=36,l.f(),t.finish(36);case 39:return t.abrupt("return",{v:void 0});case 40:case"end":return t.stop()}},t,null,[[20,33,36,39]])})(),"t3",35);case 35:if("object"!==typeof(p=t.t3)){t.next=38;break}return t.abrupt("return",p.v);case 38:t.next=41;break;case 40:m=o[0];case 41:n(m);case 42:case"end":return t.stop()}},t,null,[[9,25,28,31]])}));return function(e){return t.apply(this,arguments)}}())},P=function(e,t){var n,r=[],a=D(e);try{for(a.s();!(n=a.n()).done;){var c=n.value;t.has(c)&&r.push(c)}}catch(u){a.e(u)}finally{a.f()}var o,s=D(t);try{for(s.s();!(o=s.n()).done;){var i=o.value;e.has(i)&&r.push(i)}}catch(u){s.e(u)}finally{s.f()}return new Set(r)},z=n(2632),L=n(294);function I(e){var t=e.sequencerEngine,n=(e.selectedGuild,t.getAllRecordingsToSave().length);return 0===n?b.a.createElement("div",null):b.a.createElement("div",{className:"save-recordings"},"You have ",n," new sounds to",b.a.createElement("span",{onClick:function(){return t.saveAnyNewRecordings(0)},className:"save-recordings-button"},"save"),".")}n(1519),n(55);var A=n(45),U=n(267);function G(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=Object(f.a)(e);if(t){var a=Object(f.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(l.a)(this,n)}}var F=function(e){Object(u.a)(n,e);var t=G(n);function n(e){var r;return Object(o.a)(this,n),(r=t.call(this,e)).state={sequenceHash:void 0,creatingLink:!1},r}return Object(s.a)(n,[{key:"getLink",value:function(){return window.explore?"https://zequencer.io/explore/"+this.state.sequenceHash:"https://zequencer.io/v3/"+this.state.sequenceHash}},{key:"copyLink",value:function(){var e=this,t=this.linkInput;t.select(),t.setSelectionRange(0,99999),document.execCommand("copy"),this.setState({copied:!0}),setTimeout(function(){return e.setState({copied:!1})},1e3)}},{key:"createLink",value:function(){var e=Object(c.a)(a.a.mark(function e(){var t;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({creatingLink:!0}),e.next=3,this.props.sequencerEngine.save(void 0,U.c,!1);case 3:t=e.sent,this.setState({sequenceHash:t,creatingLink:!1});case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"exportToWAV",value:function(){Object(L.a)(this.props.sequencerEngine)}},{key:"render",value:function(){var e=this;return b.a.createElement("div",{className:"link-creator"},b.a.createElement(A.a,{condition:void 0===this.state.sequenceHash},b.a.createElement("div",{onClick:function(){return e.createLink()},className:"link-button"},"Create Public Link")),b.a.createElement(A.a,{condition:void 0!==this.state.sequenceHash},b.a.createElement("div",null,"Link: ",b.a.createElement("input",{type:"text",value:this.getLink(),id:"linkInput",ref:function(t){e.linkInput=t}})),b.a.createElement("div",{onClick:function(){return e.copyLink()},className:"small-button pink-button"},"Copy Link"),b.a.createElement("div",{className:"clear-fix"}),b.a.createElement(A.a,{condition:this.state.copied},b.a.createElement("div",{className:"copied-info"},"Copied to clipboard!"))),b.a.createElement("div",{onClick:function(){return e.props.onClickExport()},className:"link-button export-to-wav-btn"},"Export to WAV"))}}]),n}(p.Component),H=n(1518),B=(n(205),n(1520),n(288),n(63)),Y=(n(1521),n(278),n(44)),_=(n(607),n(1065));function W(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=Object(f.a)(e);if(t){var a=Object(f.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(l.a)(this,n)}}var X=function(e){Object(u.a)(n,e);var t=W(n);function n(e){var r;return Object(o.a)(this,n),(r=t.call(this,e)).state={nameValue:"",numTokens:1,saveOption:U.b,metamaskInstalled:!0,showBuying:!1,sequenceHash:void 0,copied:!1,selectedGuild:void 0,guildOptions:[],renderLength:64,mintNFT:!1,renderOption:_.b,shareWith:[],formingGuild:!1},r.input=void 0,r.onClickDone=r.onClickDone.bind(Object(i.a)(r)),r.onClickCancel=r.onClickCancel.bind(Object(i.a)(r)),r.onClickExport=r.onClickExport.bind(Object(i.a)(r)),w.a.tokenizedSequences.callback=function(){return r.onBalanceUpdated()},r}return Object(s.a)(n,[{key:"shouldComponentUpdate",value:function(e){return e.show&&e.show!==this.props.show&&this.getGuilds(),e.show||e.show===this.props.show||(this.state.sequenceHash=void 0,this.state.copied=!1),!0}},{key:"getGuilds",value:function(){var e=Object(c.a)(a.a.mark(function e(){var t;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.a.guilds.getGuildsForUser();case 2:t=e.sent,void 0!==this.props.selectedGuild&&this.setState({saveOption:U.a}),this.setState({selectedGuild:this.props.selectedGuild||t[0],guildOptions:t.filter(function(e){return e.name.split(",").length<2})});case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(e){var t=this;if(this.props.show!=e.show){this.input&&this.input.focus();var n=this.props.sequencerEngine.sequenceId;0===n&&-1===n&&void 0===n||w.a.guildSequences.getGuildSequence(n).then(function(e){e?(console.log("GUILD SEQUENCE =",e),t.setState({sequenceGuildId:e.guildId})):t.setState({sequenceGuildId:void 0})})}return!0}},{key:"onClickDone",value:function(){var e=Object(c.a)(a.a.mark(function e(){var t,n;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.setState({showExportMode:!1}),!this.state.showBuying){e.next=6;break}w.a.tokenizedSequences.buyTokens(parseInt(this.state.numTokens)),this.setState({onPurchased:!0,showBuying:!1}),e.next=18;break;case 6:if(t=this.state.shareWith,n=void 0,!(this.state.saveOption===U.b&&t.length>0)){e.next=17;break}return this.setState({formingGuild:!0}),e.next=12,T(t);case 12:n=e.sent,this.setState({formingGuild:!1}),this.props.onSave(this.state.nameValue,U.a,{guildId:n}),e.next=18;break;case 17:this.props.onSave(this.state.nameValue,this.state.saveOption,this.state.selectedGuild);case 18:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"onClickCancel",value:function(){if(this.state.showBuying)this.setState({showBuying:!1});else{this.setState({showExportMode:!1,mintNFT:!1}),this.props.onHide();var e=this.props.sequencerEngine.state.freeze.offlineEngine;console.log("OFFLINE ENGINE =",e),e&&(console.log("SUSPENDING"),e.stop(),e.context._context.suspend(e.context._context.currentTime+.5).then(function(){console.log("DISPOSING"),e.dispose()}))}}},{key:"onInputType",value:function(e){this.setState({nameValue:e})}},{key:"handleCheckboxChange",value:function(e){this.setState({saveOption:e.target.name})}},{key:"onTokenType",value:function(e){""===e&&this.setState({numTokens:0}),Object(B.a)(e)&&this.setState({numTokens:e})}},{key:"onSelectGuild",value:function(e){this.setState({selectedGuild:e})}},{key:"showExportMode",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.setState({showExportMode:e})}},{key:"onClickExport",value:function(){var e=this;this.setState({bouncing:!0}),setTimeout(Object(c.a)(a.a.mark(function t(){return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(L.a)(e.props.sequencerEngine,e.state.renderLength,e.state.renderOption);case 2:e.setState({bouncing:!1}),e.onClickCancel(),e.onClickCancel();case 5:case"end":return t.stop()}},t)})),80)}},{key:"onChangeRenderLength",value:function(e){try{var t=parseInt(e);this.setState({renderLength:t})}catch(n){}}},{key:"login",value:function(){this.props.setShowLogin(!0)}},{key:"render",value:function(){var e=this;return this.state.mintNFT?b.a.createElement(j,{onClickCancel:function(){return e.onClickCancel()},sequencerEngine:this.props.sequencerEngine}):this.state.showExportMode?b.a.createElement(d.a,{dialogClassName:"preset-modal render-modal",show:this.props.show,onHide:this.onClickCancel},b.a.createElement(d.a.Header,{closeButton:!0},b.a.createElement(d.a.Title,null,"Export Project")),b.a.createElement(d.a.Body,null,b.a.createElement("div",{className:"render-options"},b.a.createElement("div",{className:"render-label"},"Rendered Track"),b.a.createElement("div",{onClick:function(){return e.setState({renderOption:_.b})},className:this.state.renderOption===_.b?"selected render-option":"render-option"},"Master"),b.a.createElement("div",{onClick:function(){return e.setState({renderOption:_.a})},className:this.state.renderOption===_.a?"selected render-option":"render-option"},"Groups")),b.a.createElement("div",{className:"render-length"},b.a.createElement("div",{className:"render-label"},"Render Length"),b.a.createElement("input",{onChange:function(t){return e.onChangeRenderLength(t.target.value)},className:"render-length-input",value:this.state.renderLength})),this.state.bouncing?b.a.createElement(z.a,{renderLength:this.state.renderLength}):""),b.a.createElement(d.a.Footer,null,this.state.bouncing?"":b.a.createElement(k.b,{variant:"secondary",onClick:this.onClickExport},"Export"),this.state.bouncing?"":b.a.createElement(k.b,{variant:"primary",onClick:this.onClickCancel},"Cancel"))):this.props.userToken?b.a.createElement(d.a,{dialogClassName:"preset-modal",show:this.props.show,onHide:this.onClickCancel},b.a.createElement(d.a.Header,{closeButton:!0},b.a.createElement(d.a.Title,null,"Save Project")),b.a.createElement(d.a.Body,null,b.a.createElement("input",{value:this.state.nameValue,onChange:function(t){return e.onInputType(t.target.value)},ref:function(t){e.input=t},placeholder:"Type name of project",className:"tag-input"}),b.a.createElement("form",null,b.a.createElement("input",{name:U.c,type:"checkbox",checked:this.state.saveOption===U.c,onChange:function(t){return e.handleCheckboxChange(t)}}),b.a.createElement("label",{onMouseOver:function(){return e.props.setContextualHelp(Y.mb)},onMouseLeave:function(){return e.props.setContextualHelp(void 0)}},"Public"),b.a.createElement("input",{name:U.b,value:U.b,type:"checkbox",checked:this.state.saveOption===U.b,onChange:function(t){return e.handleCheckboxChange(t)}}),b.a.createElement("label",{onMouseOver:function(){return e.props.setContextualHelp(Y.kb)},onMouseLeave:function(){return e.props.setContextualHelp(void 0)}},"Private"),b.a.createElement("input",{name:U.a,value:U.a,type:"checkbox",checked:this.state.saveOption===U.a,onChange:function(t){return e.handleCheckboxChange(t)}}),b.a.createElement("label",{onMouseOver:function(){return e.props.setContextualHelp(Y.kb)},onMouseLeave:function(){return e.props.setContextualHelp(void 0)}},"Guild")),b.a.createElement(I,{selectedGuild:this.state.selectedGuild,sequencerEngine:this.props.sequencerEngine}),b.a.createElement(A.a,{condition:this.state.saveOption===U.b},b.a.createElement(q,{guildId:this.state.sequenceGuildId,onSharedWithChanged:function(t){return e.setState({shareWith:t})}}),this.state.formingGuild?b.a.createElement(E.a,{text:"Creating encrypted group"}):""),b.a.createElement(A.a,{condition:this.state.saveOption===U.a},b.a.createElement(H.a,{onSelectGuild:function(t){return e.onSelectGuild(t)},selectedGuild:this.state.selectedGuild,guildOptions:this.state.guildOptions})),b.a.createElement(F,{onClickMint:function(){return e.setState({mintNFT:!0})},onClickExport:function(){return e.showExportMode(!0)},sequencerEngine:this.props.sequencerEngine})),this.state.formingGuild?"":b.a.createElement(d.a.Footer,null,b.a.createElement(k.b,{variant:"secondary",onClick:this.onClickDone},"Save"),b.a.createElement(k.b,{variant:"primary",onClick:this.onClickCancel},"Cancel"))):b.a.createElement(d.a,{dialogClassName:"preset-modal save-modal",show:this.props.show,onHide:this.onClickCancel},b.a.createElement(d.a.Header,{closeButton:!0},b.a.createElement(d.a.Title,null,"Save Sequence")),b.a.createElement(d.a.Body,null,b.a.createElement("div",{className:"no-metamask"},b.a.createElement("span",{onClick:function(){return e.login()},className:"login-btn"},"Login")," to save your song to your account."),b.a.createElement(F,{onClickMint:function(){return e.setState({mintNFT:!0})},onClickExport:function(){return e.showExportMode(!0)},sequencerEngine:this.props.sequencerEngine})),b.a.createElement(d.a.Footer,null,b.a.createElement(k.b,{variant:"secondary",onClick:this.onClickCancel},"Done")))}}]),n}(p.Component);t.a=Object(O.b)(function(e){return{selectedGuild:e.guilds.selectedGuild,userToken:e.sequencer.userToken}},function(e){return{setShowLogin:function(t){return e(Object(y.Yf)(t))},setContextualHelp:function(t){return e(Object(y.wb)(t))}}})(X)},2699:function(e,t,n){"use strict";var r=n(8),a=n(0),c=n.n(a),o=n(2637),s=n(541),i=n(542),u=n(2638),l=n(6),f=n(719),d=n(1411),m=n(782),p=n(302),b=n(31),v=n(553),g=n(216),h=n(791),E=n(1062),k=n(12),O=new b.a,j=Object(k.b)(function(e,t){return{}},function(e){return{}})(function(e){var t=e.onDeleteEffect,n=e.sequencerEngine,r=e.instrumentPart,o=Object(a.useState)(void 0),s=Object(l.a)(o,2),i=s[0],u=s[1],b=Object(a.useState)(void 0),k=Object(l.a)(b,2),j=k[0],y=k[1],S=r.effect,w=r.instrument,C=r.track,x=r.type,N=r.subType,q="",M=c.a.createElement("div",{className:"pulled-header"},w&&x===g.d&&c.a.createElement("div",{className:"lfo-name"},"LFO ",w.number),w&&"MODULE_ENVELOPE"===x&&c.a.createElement("div",{className:"lfo-name"},"Envelope ",w.number),C&&c.a.createElement("div",{style:{backgroundColor:O.getColorForTrack(C)},className:"effect-from"},C.envelopesTrack?C.name:C.trackNumber+1+". "+C.getName()),c.a.createElement("div",{onClick:t,className:"delete-button"},"-")),D=O.getColorForTrack(C);if(x===g.e)q=c.a.createElement(v.a,{isDraggable:!1,setOscillatorDetails:u,oscillatorDetails:i,showWaveform:j,setShowWaveform:y,color:D,sequencerEngine:n,instrument:w});else if("SYNTH_ENVELOPE"===x){var R;"Amp"===N?R=w.ampEnvelope:"A"===N?R=w.oscillatorNodes[1].ampEnvelope:"B1"===N?R=w.oscillatorNodes[2].ampEnvelope:"B2"===N&&(R=w.oscillatorNodes[3].ampEnvelope),console.log("subtype = ",N),q=c.a.createElement(p.a,{instrument:w,width:200,fillColor:D,lineColor:D,sequencerEngine:n,envelope:R,name:N,hasRelease:!0,hasLevel:!1})}else"MODULE_ENVELOPE"===x?q=c.a.createElement(p.a,{name:"Env "+N,envelope:w,width:200,hasRelease:!0,hasLevel:!1,sequencerEngine:n}):x===g.f?q=c.a.createElement(E.a,{effect:S}):x===g.c?q=c.a.createElement(h.a,{isDraggable:!1,effect:S}):x===g.b?q=c.a.createElement(m.a,{isDraggable:!1,effect:S}):x===g.a?q=c.a.createElement(d.a,{isDraggable:!1,color:D,sequencerEngine:n,instrument:w}):x===g.d&&(q=c.a.createElement(f.a,{isDraggable:!1,hideName:!0,lfo:w,sequencerEngine:n}));return c.a.createElement("div",{className:"pulled-instrument"},M,q)}),y=n(705),S=n(80),w=n(400),C=n(297),x=n(544);n(1516),t.a=Object(k.b)(function(e,t){return{coords:e.windows.windowPositions[t.fx.id],isCollapsed:e.effects.effectCollapsed[t.fx.id],numberOfOutputs:t.fx.numberOfOutputs,isSelected:e.windows.selectedElements[t.fx.id]}},function(e){return{}})(function(e){var t=e.fx,n=e.scale,l=e.containerRef,f=e.sequencerEngine,d=e.setSize,m=e.elements,p=e.size,b=e.sizeRef,v=e.setOrdering,g=e.ordering,h=e.rack,E=e.coords,k=e.isSelected,O=e.onDelete,N=e.showDelete,q=e.isCollapsed,M=e.pad,D=e.isStatic,R=Object(a.useRef)(void 0),T=Object(y.a)({scale:n,ref:R,sequencerEngine:f,sizeRef:b,windowPosition:E,containerRef:l,size:p,setSize:d,elements:m,element:t,expand:q,setOrdering:v,ordering:g}),P=T.style,z=T.onContextMenu,L=T.isDragging,I=T.onMouseDown,A=T.onMouseUp,U=(T.setCoords,"pulled-effect");L&&(U+=" dragging"),k&&(U+=" selected");var G=Object(r.a)({},P);E&&(G.left=E.x,G.top=E.y);var F=t.numberOfOutputs||1,H=new Array(F).fill(0).map(function(e,t){return t});return[c.a.createElement("div",{key:1,style:G,onContextMenu:z,onMouseDown:D?function(){return[]}:I,onMouseUp:D?function(){return[]}:A,ref:R,className:U},t.instrument?c.a.createElement(j,{onDeleteEffect:O,showStar:!0,sequencerEngine:f,instrumentPart:t}):t.getEffectType()===S.a?c.a.createElement(w.a,{showDelete:N,isDraggable:!1,sequencerEngine:f,showStar:!0,featured:!0,track:t.track,compact:!0,instrument:!0,onDeleteEffect:O,effect:t,send:void 0}):t.getEffectType()===S.b?c.a.createElement(x.a,{featured:!0,isDraggable:!1,sequencerEngine:f,showStar:!0,onDeleteEffect:O,effect:t,track:t.track,onEffectsChange:function(){return[]}}):c.a.createElement(C.a,{showDelete:N,isDraggable:!1,featured:!0,sequencerEngine:f,track:t.track,showStar:!0,compact:!0,instrument:!0,onDeleteEffect:O,effect:t,send:void 0}),M&&c.a.createElement(o.a,{containerRef:l,fx:t,pad:M}),M&&H.map(function(e){return c.a.createElement(u.a,{nodeRef:R,rack:h,coords:E,outputNumber:e,containerRef:l,fx:t,pad:M})}),c.a.createElement(s.a,{effect:t}),c.a.createElement(i.a,{subSequence:t.track&&t.track.subSequence,containerRef:l,scale:n,effect:t}))]})},2705:function(e,t,n){"use strict";var r=n(6),a=n(0),c=n.n(a),o=n(30),s=n(65),i=n(2558),u=n(12),l=n(205),f=n.n(l),d=n(43),m=n(33),p=n(75),b={},v=function(e){var t=e.annotation,n=e.style,i=Object(a.useState)(""),u=Object(r.a)(i,2),l=u[0],f=u[1],p=Object(a.useState)(""),v=Object(r.a)(p,2),g=v[0],h=v[1];return Object(a.useEffect)(function(){var e=o.a.utils.fromAscii(t.annotationData),n=Object(s.a)(e);b[n]?f(b[n]):d.a.getJson(n).then(function(e){b[n]=e,f(e)}),m.a.users.getUserName(t.address).then(function(e){return h(e)})},[t,f,h]),c.a.createElement("div",{style:n,className:"annotation"},c.a.createElement("div",{className:"author"},g,":"),c.a.createElement("div",{className:"content"},l))};t.a=Object(u.b)(function(e,t){return{numPending:e.transactions.pendingTransactions.length}},null)(function(e){var t=e.work,n=e.contentId,o=void 0===n?t&&t.newSequence:n,s=e.numPending,u=e.linkType,l=void 0===u?i.b:u,d=e.color,b=Object(a.useState)(""),g=Object(r.a)(b,2),h=g[0],E=g[1],k=Object(a.useState)(!1),O=Object(r.a)(k,2),j=(O[0],O[1]),y=Object(a.useState)([]),S=Object(r.a)(y,2),w=S[0],C=S[1],x=Object(a.useCallback)(function(e){E(e.target.value)},[E]),N=Object(a.useCallback)(function(){m.a.xanadu.newAnnotationContent(l,o,h).then(function(e){return j(!0)}),E(""),j(!0)},[o,h,E,j]);Object(a.useEffect)(function(){o&&m.a.xanadu.getAnnotations(l,o).then(function(e){C(e)})},[o,C,s]);var q={};return d&&(q.backgroundColor=d),c.a.createElement("div",null,c.a.createElement(p.g,{style:q,className:"annotation-text",onChange:x,type:"textarea",value:h}),c.a.createElement("div",{style:q,onClick:N,className:"submit-button"},"Annotate"),c.a.createElement("div",{style:q,className:"annotations"},c.a.createElement(f.a,{sizeUnit:"px",size:10,color:"#42f4f1",loading:s>0}),w.map(function(e){return c.a.createElement(v,{style:q,key:e.annotationData,annotation:e})})))})},2711:function(e,t,n){"use strict";var r=n(10),a=n(0),c=n.n(a),o=n(12);n(2803);function s(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var c,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,c=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw c}}}}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var u={0:"January",1:"February",2:"March",3:"April",4:"May",5:"June",6:"July",7:"August",8:"September",9:"October",10:"November",11:"December"};t.a=Object(o.b)(function(e,t){return{}},function(e){return{}})(function(e){var t,n=e.currentMonth,a=e.onClickMonth,o=e.months,i=((new Date).getMonth(),(new Date).getFullYear()),l=[],f=Object.keys(o).map(function(e){return parseInt(e)}).sort(function(e,t){return t-e}),d=s(f=[].concat(Object(r.a)(f),Object(r.a)(f)).slice(0,12));try{for(d.s();!(t=d.n()).done;){var m=t.value;l.push({number:m,month:u[(12+m)%12],isCurrent:m===n}),m%12===0&&l.push({number:m-1,year:--i})}}catch(p){d.e(p)}finally{d.f()}return c.a.createElement("div",{className:"months"},l.map(function(e){var t=e.month,n=e.number,r=e.isCurrent,o=e.year;return o?c.a.createElement("div",{onClick:function(){return a(n)},className:"month year"},o):c.a.createElement("div",{onClick:function(){return a(n)},className:r?"month current":"month"},t)}))})},2718:function(e,t,n){"use strict";var r=n(10),a=n(82),c=n(0),o=n.n(c),s=(n(640),n(2786)),i=(n(1085),n(2719),n(2699)),u=n(12);t.a=Object(u.b)(function(e,t){var n=t.track.effectRack&&t.track.effectRack.id;return{effects:e.pads.trackMidiEffects[t.track.id],isCollapsed:e.effects.effectCollapsed[n]}},function(e){return{}})(function(e){var t=e.track,n=(e.effects,e.isCollapsed),u=Object(a.a)(e,["track","effects","isCollapsed"]),l=Object(c.useCallback)(function(e){t.effectRack.deleteEffect(e),t.updateMidiEffectsRedux()},[]);return t.effectRack&&t.zObject&&!n?[o.a.createElement(s.a,Object.assign({isMidi:!0,key:5,pad:t},u)),,].concat(Object(r.a)(t.effectRack.effects.map(function(e){return o.a.createElement(i.a,Object.assign({onDelete:l,key:e.id,fx:e,rack:t.effectRack,showDelete:!0,sequencerEngine:t.sequencerEngine,pad:t},u))}))):[]})},2719:function(e,t,n){"use strict";var r=n(8),a=n(82),c=n(0),o=n.n(c),s=n(105),i=n(31),u=n(198),l=n(1144),f=n(255),d=n(2637),m=n(2638),p=n(705),b=n(9),v=n(12),g=new i.a;t.a=Object(v.b)(function(e,t){return{coords:e.windows.windowPositions[t.pad.effectRack.id],isCollapsed:e.effects.effectCollapsed[t.pad.effectRack.id],isSelected:e.windows.selectedElements[t.pad.effectRack.id],isMacroMapping:e.effects.isMacroMapping,hidden:e.spatial.hiddenObjects[t.pad.id]}},function(e,t){return{setParameterToMap:function(t){return e(Object(b.Zd)(t))},setIsCollapsed:function(n){return e(Object(b.Wb)(t.pad.effectRack.id,n))}}})(function(e){var t=e.pad,n=e.setIsCollapsed,i=e.isCollapsed,b=e.coords,v=e.isSelected,h=Object(a.a)(e,["pad","setIsCollapsed","isCollapsed","coords","isSelected"]),E=Object(c.useRef)(void 0),k=Object(c.useRef)(void 0),O=t.fxMacro.macroParameter;Object(c.useEffect)(function(){n(t.effectRack.isCollapsed)},[]),Object(c.useEffect)(function(){t.effectRack.isCollapsed=i},[i]);var j=Object(f.a)({ref:E}),y=j.onContextMenu,S=j.dropdownPos,w=j.setDropdownPos,C=Object(c.useRef)({x:0,y:0}),x=Object(p.a)(Object(r.a)({ref:E,element:t.effectRack,windowPosition:b,sequencerEngine:t.sequencerEngine},h)),N=x.style,q=(x.isDragging,x.onMouseDown),M=x.onMouseUp;x.setCoords;Object(c.useEffect)(function(){b&&(C.current={x:b.x+100,y:b.y+50})},[b]);var D=Object(c.useCallback)(function(e){e.stopPropagation(),h.isMacroMapping&&(O.isMapped||h.setParameterToMap(O));var r=(new Date).getTime();e.stopPropagation(),r-k.current<=450&&(t.effectRack.isCollapsed=!i,n(!i)),k.current=r},[h.isMacroMapping,n,i]),R="pad-effect-control";i||(R+=" expanded"),v&&(R+=" selected");var T=Object(r.a)({},N,{backgroundColor:g.getColorForHash(t.effectRack.id)});return b&&(T.left=b.x,T.top=b.y),h.isMacroMapping&&(R+=" plane-mapping"),h.hidden?"":[o.a.createElement("div",{onClick:D,key:1,onContextMenu:function(e){y(e),x.onContextMenu(e)},onMouseDown:q,onMouseUp:M,ref:E,style:T,className:R},o.a.createElement("div",{className:"control-inner"},o.a.createElement(u.a,{color:"white",name:"",parameter:t.fxMacro.macroParameter}),o.a.createElement(l.a,{allowSendsOnly:!0,effectOptions:s.a,initializeEffect:s.b,addToBack:!1,dropdownPosRef:C,setDropdownPos:w,dropdownPos:S,node:t}),o.a.createElement(d.a,{containerRef:h.containerRef,pad:t,fx:t.effectRack}),!i&&o.a.createElement(m.a,{outputNumber:0,isControl:!0,containerRef:h.containerRef,pad:t,fx:t.effectRack}),o.a.createElement("div",{className:"control-name"},"FX")))]})},2720:function(e,t,n){"use strict";var r=n(6),a=n(0),c=n.n(a),o=n(2644),s=(n(316),n(1130),n(9)),i=n(12);n(2821);t.a=Object(i.b)(function(e,t){return{collapsed:e.pads.modulesCollapsed[t.subSequence.id],isCurrent:t.subSequence===t.subSequence.sequencerEngine.currentSubSequence}},function(e,t){return{setCollapsed:function(n){return e(Object(s.wd)(t.subSequence.id,n))},setModuleColor:function(n){return e(Object(s.xd)(t.subSequence.id,n))}}})(function(e){var t=e.subSequence,n=e.collapsed,s=e.isCurrent,i=e.setCollapsed,u=e.setModuleColor,l=Object(a.useState)(t.color),f=Object(r.a)(l,2),d=(f[0],f[1]),m=Object(a.useState)(!1),p=Object(r.a)(m,2),b=(p[0],p[1],Object(a.useCallback)(function(e){t.color=e.hex,d(e.hex),u(e.hex)},[t,d]),"module-tab grids-name");s&&(b+=" selected");var v=Object(a.useCallback)(function(){t.sequencerEngine.switchToSubSequence(t.id)},[t]);return c.a.createElement("div",{onMouseDown:v,className:b},t.name,!n&&c.a.createElement(o.a,{subSequence:t}),c.a.createElement("div",{onClick:function(){return i(!n)},className:"collapse-button"},c.a.createElement("div",{className:n?"arrow-left":"arrow-down"})))})},2721:function(e,t,n){"use strict";var r=n(10),a=n(82),c=n(0),o=n.n(c),s=(n(640),n(2786)),i=(n(1085),n(2719)),u=n(2699),l=n(12);t.a=Object(l.b)(function(e,t){return{effects:e.pads.padEffects[t.pad.id],isCollapsed:e.effects.effectCollapsed[t.pad.effectRack.id]}},function(e){return{}})(function(e){var t=e.pad,n=e.effects,l=e.isCollapsed,f=Object(a.a)(e,["pad","effects","isCollapsed"]),d=Object(c.useCallback)(function(e){console.log("on delete fx =",e),t.effectRack.deleteEffect(e),t.updateEffectRedux()},[]);return t.effectRack&&n&&0!==n.length?l?[o.a.createElement(i.a,Object.assign({key:0,pad:t},f))]:[o.a.createElement(i.a,Object.assign({key:0,pad:t},f)),o.a.createElement(s.a,Object.assign({key:5,pad:t},f)),,].concat(Object(r.a)(t.effectRack.effects.map(function(e){return o.a.createElement(u.a,Object.assign({onDelete:d,key:e.id,rack:t.effectRack,fx:e,showDelete:!0,sequencerEngine:t.sequencerEngine,pad:t},f))}))):[]})},2722:function(e,t,n){"use strict";var r=n(8),a=n(0),c=n.n(a),o=(n(640),n(966)),s=n(541),i=n(542),u=n(705),l=n(9),f=n(1183),d=n(12);t.a=Object(d.b)(function(e,t){return{coords:e.windows.windowPositions[t.pad.id],hidden:e.spatial.hiddenObjects[t.pad.id],isSelectedZObject:e.zobject.selectedZObject===t.pad,isSelected:e.windows.selectedElements[t.pad.id],isCurrent:t.pad.subSequence===t.pad.sequencerEngine.currentSubSequence,padsExpand:e.pads.padsExpand}},function(e){return{setSelectedZObject:function(t){return e(Object(l.Cf)(t))}}})(function(e){var t=e.hidden,n=e.setOrdering,l=e.ordering,d=e.scale,m=e.pad,p=e.scrollContainer,b=e.elements,v=e.sizeRef,g=e.size,h=e.setSize,E=e.isCurrent,k=e.padsExpand,O=e.coords,j=e.isSelected,y=(e.setSelectedZObject,e.isSelectedZObject,Object(a.useRef)(void 0)),S=Object(u.a)({scale:d,ref:y,sequencerEngine:m.sequencerEngine,windowPosition:O,sizeRef:v,containerRef:p,size:g,setSize:h,elements:b,element:m,isPad:!0,expand:k,setOrdering:n,ordering:l}),w=S.style,C=S.onContextMenu,x=S.onMouseDown,N=S.onMouseUp;S.setCoords;Object(a.useEffect)(function(){O&&(m.x=O.x,m.y=O.y)},[O]);var q="pulled-pad";E&&(q+=" current"),j&&(q+=" selected");var M=Object(r.a)({},w);return O&&(M.left=O.x,M.top=O.y),k&&k.pad===m&&(q+=" expanded"),t?"":c.a.createElement("div",{style:M,onMouseDown:function(e){x(e)},onContextMenu:C,onMouseUp:N,ref:y,className:q},c.a.createElement(f.a,{isPulled:!0,scrollContainer:p,pad:m}),c.a.createElement(o.a,{isRoot:!0,useClick:!0,hideNumber:!0,sequencerEngine:m.sequencerEngine,node:m}),c.a.createElement(s.a,{effect:m}),c.a.createElement(i.a,{subSequence:m.subSequence,containerRef:p,effect:m}))})},2723:function(e,t,n){},2776:function(e,t,n){"use strict";var r=n(8),a=n(6),c=n(0),o=n.n(c),s=n(10),i=n(48),u=n(41),l=n.n(u),f=n(105),d=n(297),m=n(12),p=Object(m.b)(function(e,t){return{pulledEffects:e.effects.pulledEffects}},function(e){return{}})(function(e){var t=e.track,n=e.pulledEffects,r=Object(c.useState)(t.midiEffects.effects),u=Object(a.a)(r,2),m=u[0],p=u[1],b=Object(c.useCallback)(function(e){var n=Object(f.c)(e,t);t.sequencerEngine.operationManager.dispatch(Object(i.b)(n,t)),p(Object(s.a)(t.midiEffects.effects))},[p,m,t]),v=Object(c.useCallback)(function(){p(Object(s.a)(t.midiEffects.effects))},[m,p]);return o.a.createElement("div",{className:"effects-overview"},m.map(function(e){return o.a.createElement(d.a,{sequencerEngine:t.sequencerEngine,isPulled:n.includes(e),key:e.id,onDeleteEffect:v,effect:e,track:t,tracks:t.sequencerEngine.tracks,onEffectsChange:function(){return[]}})}),o.a.createElement("div",{className:"add-effect-type"},o.a.createElement(l.a,{className:"delay-time-dropdown",option:void 0,options:f.e,onChange:function(e){return b(e.value)},placeholder:"MIDI FX"})))}),b=Object(m.b)(function(e,t){var n=t.pad.sequencerEngine.tracks[e.mix.selectedTrack];return{selectedTrack:e.mix.selectedTrack,loaded:n&&n.getSampler(0),tracks:t.pad.tracks}},function(e){return{}})(function(e){e.div,e._track,e.pad,e.selectedTrack}),v=n(794),g=n(68),h=n(60),E=Object(m.b)(function(e,t){return{}},function(e){return{}})(function(e){var t=e.track,n=Object(c.useRef)(void 0),r="";return t.getTrackType()===h.f?r=o.a.createElement(b,{div:n,pad:t,_track:t}):t.getTrackType()===h.b&&t.getInstrumentType()===g.f&&(r=o.a.createElement(v.a,{sequencerEngine:t.sequencerEngine,track:t,instrument:t.instrument})),o.a.createElement("div",{ref:n,className:"instrument-overview"},r)}),k=n(400),O=Object(m.b)(function(e,t){return{pulledEffects:e.effects.pulledEffects}},function(e){return{}})(function(e){var t=e.track,n=e.pulledEffects,r=Object(c.useState)(t.effects),u=Object(a.a)(r,2),d=u[0],m=u[1],p=Object(c.useCallback)(function(e){var n=Object(f.b)(e,t.sequencerEngine);n.enable(!0),t.sequencerEngine.operationManager.dispatch(Object(i.b)(n,t)),m(Object(s.a)(t.effects))},[m,d,t]),b=Object(c.useCallback)(function(){m(Object(s.a)(t.effects))},[d,m]);return o.a.createElement("div",{className:"effects-overview"},d.map(function(e){return o.a.createElement(k.a,{sequencerEngine:t.sequencerEngine,isPulled:n.includes(e),key:e.id,onDeleteEffect:b,effect:e,track:t,tracks:t.sequencerEngine.tracks,onEffectsChange:function(){return[]}})}),o.a.createElement("div",{className:"add-effect-type"},o.a.createElement(l.a,{className:"delay-time-dropdown",option:void 0,options:f.a,onChange:function(e){return p(e.value)},placeholder:"Audio FX"})))}),j=n(755),y=n(9),S=Object(m.b)(function(e,t){var n=t.track;n&&n.tracks&&n.tracks[0]&&(n=n.tracks[0].track);var r=e.mix.selectedTrack===t.track.trackNumber&&t.track.sequencerEngine.currentSubSequence===t.track.subSequence,a=(e.tracks.trackIsEnabled[t.track.subSequence.id]||{})[t.track.id];return{isSelected:r,id:void 0===n?0:void 0!==n.sample&&void 0!==n.sample.getId()?n.sample.getId():n.presetName||n.getName(),isEnabled:a,numEffects:n.effects.length}},function(e){return{setTrackDragging:function(t){return e(Object(y.ah)(t))}}})(function(e){var t=e.track,n=e.isSelected,r=e.isEnabled,s=e.setTrackDragging,i=e.setExpandTrack,u=e.numEffects,l=Object(j.a)(t,t.sample),f=Object(c.useState)(void 0),d=Object(a.a)(f,2),m=d[0],b=d[1],v="tr-overview";n&&(v+=" selected"),Object(c.useEffect)(function(){i(m?{id:t.id,numEffects:u}:void 0)},[u,m,i,t]);var g=Object(c.useCallback)(function(){t.sequencerEngine.selectTrack(t.trackNumber)},[t]);return o.a.createElement("div",{onClick:g,className:v},o.a.createElement("div",{className:"tr-inner"},o.a.createElement("div",{className:"track-number"},t.trackNumber+1),o.a.createElement("div",{onClick:function(){return t.toggleEnabled()},className:r?"dot enabled":"dot"}),o.a.createElement("div",{onClick:function(){return b("M_FX"===m?void 0:"M_FX")},className:"M_FX"===m?"m-fx showing":"m-fx"},"m. fx"),o.a.createElement("img",{className:"right-arr",src:"/right-arrow.svg"}),o.a.createElement("div",{draggable:!0,onMouseDown:function(e){return e.stopPropagation()},onDragStart:function(e){e.stopPropagation(),s(t)},onDragOver:function(e){return e.preventDefault()},onClick:function(){return b("INST"===m?void 0:"INST")},style:{backgroundColor:t.color},className:"INST"===m?"inst showing":"inst"},l),o.a.createElement("img",{className:"right-arr",src:"/right-arrow.svg"}),o.a.createElement("div",{onClick:function(){return b("A_FX"===m?void 0:"A_FX")},className:"A_FX"===m?"a-fx showing":"a-fx"},"fx")),"INST"===m&&o.a.createElement(E,{track:t}),"A_FX"===m&&o.a.createElement(O,{track:t}),"M_FX"===m&&o.a.createElement(p,{track:t}))}),w=n(705);n(2820),Object(m.b)(function(e,t){return{coords:e.windows.windowPositions[t.subSequence.id],numTracks:t.subSequence.tracks&&t.subSequence.tracks.length}},function(e){return{}})(function(e){var t=e.setOrdering,n=e.ordering,s=e.scale,i=e.subSequence,u=e.scrollContainer,l=e.elements,f=e.sizeRef,d=e.size,m=e.setSize,p=(e.isCurrent,e.padsExpand,e.coords),b=(e.isSelected,Object(c.useRef)(void 0)),v=Object(c.useState)(void 0),g=Object(a.a)(v,2),h=g[0],E=g[1],k=Object(w.a)({scale:s,ref:b,sequencerEngine:i.sequencerEngine,windowPosition:p,sizeRef:f,expand:h?i.tracks.length+h.id+h.numEffects:i.tracks.length,containerRef:u,size:d,setSize:m,elements:l,element:i,setOrdering:t,ordering:n}),O=k.style,j=(k.onContextMenu,k.onMouseDown),y=k.onMouseUp;k.setCoords;Object(c.useEffect)(function(){p&&(i.x=p.x,i.y=p.y)},[p]);var C=Object(r.a)({},O);return p&&(C=Object(r.a)({},O,{top:p.y,left:p.x})),o.a.createElement("div",{style:C,className:"module-overview",onMouseDown:j,onMouseUp:y,ref:b},i.tracks.map(function(e){return o.a.createElement(S,{setExpandTrack:E,track:e})}))})},2780:function(e,t,n){"use strict";var r=n(10),a=n(8),c=n(6),o=n(0),s=n.n(o),i=(n(2776),n(1141)),u=n(2718),l=n(2720),f=n(223),d=n(1146),m=n(9),p=n(1145),b=n(2721),v=n(1165),g=n(2784),h=n(2722),E=(n(2602),n(518)),k=n(2598),O=n(105),j=n(255),y=n(221),S=n(136),w=n(2582),C=n(256),x=n(12);function N(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-40,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:6,r=arguments.length>3?arguments[3]:void 0,a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-40,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:6;return(e-t)/(n-t)}(e,t,n,r);return r*Math.pow(a,2)}var q=function(e,t){return Math.abs(e.y-t.y)},M=Object(x.b)(function(e,t){return{playing:t.track.notesTriggered&&Object.keys(t.track.notesTriggered).length>0,notesTriggered:t.track.notesTriggered,disabled:t.track.disabled,volume:t.track.sequencerEngine.playing?t.track.pattern.volume:t.track.volumeParameter.get()}},function(e){return{setParameterSliderDown:function(t){return e(Object(m.Yd)(t))}}})(function(e){var t=e.track,n=e.playing,r=e.notesTriggered,a=e.setParameterSliderDown,i=e.toggled,u=e.setSelectedTrack,l=t.disabled,f=Object(o.useState)(!0),d=Object(c.a)(f,2),m=d[0],p=(d[1],Object(o.useRef)(void 0)),b=Object(o.useState)(void 0),v=Object(c.a)(b,2),g=v[0],h=v[1],E=Object(o.useState)(!1),k=Object(c.a)(E,2),O=k[0],j=k[1],y=Object(o.useState)(!1),S=Object(c.a)(y,2),w=S[0],x=S[1],M=Object(o.useRef)(0),D="grid";n&&(D+=" pressed"),l&&(D+=" disabled");var R={},T=r&&Object.keys(r)[0];T&&(T=parseInt(T),R.filter="hue-rotate("+4*T+"deg)");var P=Object(o.useCallback)(function(e){if(O){e.preventDefault(),e.stopPropagation();var n=e.clientY;e.touches&&(n=e.touches[0].clientY);var r=p.current.getBoundingClientRect(),a=p.current.offsetHeight,c=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-40,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:6,r=arguments.length>3?arguments[3]:void 0,a=(e=Math.min(Math.max(0,e),r))/r,c=Math.pow(a,.5);return t+(n-t)*c}(a-(n-r.top),-65,6,a);t.setVolume(c,!1,!1),x({x:e.clientX,y:e.clientY})}},[x,O,t]),z={height:N(t.volumeParameter.get(),-65,6,p.current&&p.current.offsetHeight)},L=Object(o.useCallback)(function(e){i?u(t):(a(t.volumeParameter),j(!0),h({x:e.clientX,y:e.clientY}),M.current=(new Date).getTime())},[j,h,i,u,t]),I=Object(o.useCallback)(function(e){var n=(new Date).getTime();w&&q(g,w),(!w||q(g,w)<=8)&&n-M.current<250&&(t.disabled=!t.disabled),x(void 0),j(!1),a(void 0)},[x,j,w,g]);return Object(o.useEffect)(function(){p.current.addEventListener("touchmove",P,{capture:!0})},[P,x,O,t]),s.a.createElement("div",{ref:p,onMouseMove:P,onMouseDown:L,onTouchStart:L,onMouseUp:I,onMouseLeave:function(){j(!1),x(void 0),a(void 0)},style:R,className:D},m?s.a.createElement(C.a,{onMouseDown:function(e){return e.stopPropagation()},showPresetName:!0,track:t}):"",s.a.createElement("div",{className:O?"volume-indicator":"volume-indicator skinny",style:z}))});n(2723);function D(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return R(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return R(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var c,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,c=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw c}}}}function R(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}t.a=Object(x.b)(function(e,t){return{pulledEffects:e.effects.pulledEffects,pulledSequencers:e.pads.sequencers,numTracks:t.subSequence.tracks&&t.subSequence.tracks.length,collapsed:e.pads.modulesCollapsed[t.subSequence.id]}},function(e){return{setPulledEffects:function(t){return e(Object(m.De)(t))},setSelectedPulledElements:function(t){return e(Object(m.uf)(t))},setSize:function(t){return e(Object(m.yd)(5,t))}}})(function(e){var t=e.setSize,n=e.isExplore,m=e.scale,C=(e.showEffects,e.pulledEffects),x=e.setPulledEffects,N=e.setSelectedPulledElements,q=e.toggled,R=e.setSelectedTrack,T=e.subSequence,P=e.collapsed,z=Object(o.useRef)(void 0),L=Object(o.useRef)({}),I=Object(j.a)({ref:z}),A=I.onContextMenu,U=I.dropdownPos,G=(I.setDropdowPos,Object(E.a)({ref:z})),F=G.sizeRef,H=G.ordering,B=G.setOrdering,Y=Object(o.useRef)(U),_={width:500,height:500},W=Object(k.a)({ref:z,elements:L,subSequence:T,size:_}).arrangeWindows,X=Object(o.useState)(void 0),V=Object(c.a)(X,2),J=V[0],Z=V[1],$=Object(f.a)({containerRef:z,scale:m}).getXY,K=Object(d.a)({elements:L}).getSelection,Q=Object(o.useCallback)(function(e){var t=$(e),n=t.x,r=t.y;Z({x1:n,y1:r,x2:n,y2:r})},[Z,m]),ee=Object(o.useCallback)(function(e){var t=$(e),n=t.x,r=t.y;Z(Object(a.a)({},J,{x2:n,y2:r}))},[J,Z,m]),te=Object(o.useCallback)(function(e){if(J&&J.x2-J.x1>1){var t,n={},r=D(K(J));try{for(r.s();!(t=r.n()).done;)n[t.value.id]=!0}catch(a){r.e(a)}finally{r.f()}N(n)}J&&Z(void 0)},[J,Z]);Object(o.useEffect)(function(){U&&(Y.current=U)},[U]);var ne=[0,1,2],re=T.tracks,ae=void 0===re?[]:re;ae=ae.filter(function(e){return n||void 0===e.pad});var ce=Object(o.useCallback)(function(e){var t=Object(O.c)(e,T),n=Y.current,a=n.x,c=n.y;t.x=a,t.y=c,T.midiEffects.addEffect(t),x([].concat(Object(r.a)(C),[t]))},[T,C]),oe=Object(o.useCallback)(function(e){T.sequencerEngine.switchToSubSequence(T.id)},[T]),se=Object(o.useCallback)(function(){var e=T.createSequencer(),t=Y.current,n=t.x,r=t.y;e.x=n,e.y=r},[T]),ie=Object(o.useCallback)(function(){var e=T.createPad(),t=Y.current,n=t.x,r=t.y;e.x=n,e.y=r},[T]);if(!T||!T.tracks)return[];var ue=s.a.createElement("div",null,!n&&s.a.createElement(p.a,{selection:J,scale:m,elements:L,containerRef:z}),s.a.createElement(y.a,{className:"midi-context",dropdownPos:U?{x:U.x/m,y:U.y/m}:void 0},s.a.createElement(S.a,{onMouseDown:se},"New Sequencer"),s.a.createElement(S.a,{onMouseDown:ie},"New Pad"),s.a.createElement(S.a,{onMouseDown:W},"Arrange Windows"),s.a.createElement("div",{className:"context-divider"}),O.e.map(function(e){var t=e.label,n=e.value;return s.a.createElement(S.a,{onMouseDown:function(){return ce(n)}},t)})),n&&s.a.createElement("div",{className:"grid-rows"},[0,1,2,3,4].map(function(e){return s.a.createElement("div",{key:e,className:"grid-row"},ne.map(function(t){return ae[3*e+t]?s.a.createElement(M,{scale:m,toggled:q,setSelectedTrack:R,key:3*e+t,track:ae[3*e+t],row:e,col:t}):""}))})),s.a.createElement(w.a,{scale:m,sizeRef:F,setSize:t,size:_,ordering:H,setOrdering:B,playhead:!0,elements:L,containerRef:z,noWrapper:!0,sequencerEngine:T.sequencerEngine,subSequence:T}),!n&&T.pads.map(function(e){return s.a.createElement(h.a,{key:e.id,scale:m,size:_,ordering:H,setOrdering:B,setSize:t,sizeRef:F,elements:L,scrollContainer:z,pad:e})}),!n&&s.a.createElement(v.a,{containerRef:z,scale:m,subSequence:T}),!n&&T.tracks.map(function(e){return s.a.createElement(u.a,{scale:m,ordering:H,setOrdering:B,size:_,setSize:t,sizeRef:F,elements:L,containerRef:z,track:e})}),!n&&T.pads.filter(function(e){return e.effectRack}).map(function(e){return s.a.createElement(b.a,{scale:m,ordering:H,setOrdering:B,size:_,setSize:t,sizeRef:F,elements:L,containerRef:z,pad:e})}),!n&&T.sequencers.map(function(e){return s.a.createElement(g.a,{ordering:H,setOrdering:B,scrollContainer:z,scale:m,size:_,setSize:t,sizeRef:F,elements:L,sequencer:e})}));return s.a.createElement("div",{onClick:oe,onMouseDown:Q,onMouseMove:ee,onMouseUp:te,onContextMenu:A,className:P?"grids collapsed":"grids not-collapsed"},s.a.createElement(l.a,{subSequence:T}),s.a.createElement("div",{ref:z,style:{},className:"grids-inner"},P?s.a.createElement(i.a,{subSequence:T}):ue))})},2784:function(e,t,n){"use strict";var r=n(20),a=n(8),c=n(6),o=n(0),s=n.n(o),i=n(966),u=n(717),l=n(1433),f=n(31),d=n(256),m=n(12),p=n(9),b=new f.a,v=Object(m.b)(function(e,t){var n=e.mix.selectedTrack===t.track.trackNumber,r=t.track,a=r;return r&&r.tracks&&r.tracks[0]&&(a=r.tracks[0].track),{trackId:r.id,id:a.presetName?a.presetName:void 0!==a.sample&&void 0!==a.sample.getId()?a.sample.getId():a.getName(),isSelectedTrack:n,resolution:e.sequencer.displayResolution,muted:e.tracks.trackMutes[t.track.id],trackLength:r.length}},function(e){return{setStepNumberDraggingFrom:function(t){return e(Object(p.Ig)(t))},setSelectedPianoRollSteps:function(t){return e(Object(p.rf)(t))},setStepsSelection:function(t){return e(Object(p.Mg)(t))},mouseDown:function(t){return e(Object(p.n)(t))}}})(function(e){var t=e.track,n=e.id,r=e.isSelectedTrack,a=e.resolution,c=e.mouseDown,i=e.setSelectedPianoRollSteps,f=e.setStepsSelection,m=e.onTrackRendered,p=e.setStepNumberDraggingFrom,v=e.isHiding,g=e.setIsHiding,h=e.sequencerScale,E=e.muted,k=e.trackLength,O=Object(o.useRef)(void 0),j=b.getColorForTrack(t),y=b.brighten(void 0===n?"#353535c7":j,.64),S=t.sequencerEngine;Object(o.useEffect)(function(){setTimeout(function(){m(t,O)},100)},[k]);var w=Object(o.useCallback)(function(){c(!1);var e=S.store.getState().steps.stepsSelection;if(void 0!==e&&e.toStep-e.fromStep>0){var n=t.getEasyPattern().getSelectedSteps(e,a);0===n.length?i(void 0):i(n)}f(void 0),p(void 0)},[t,a]),C=Object(o.useCallback)(function(e){t.sequencerEngine.selectTrack(t.trackNumber)},[t]),x=Object(o.useCallback)(function(){g(v===t?void 0:t)},[v,g]),N=v===t;if(v&&v!==t)return[];var q="track";return v&&(q+=" hiding"),q+=r?" selected":" not-selected",E&&(q+=" muted"),s.a.createElement("div",{ref:O,style:{},onMouseDown:C,onMouseUp:w,className:q},s.a.createElement("div",{className:"track-inner"},s.a.createElement(d.a,{hasBorder:!0,isSelectedTrack:r,onMouseDown:function(e){e.stopPropagation(),C()},track:t,sample:t.sample,onClickThumbnail:x}),N?s.a.createElement(u.a,{color:y,track:t}):s.a.createElement(l.a,{sequencerScale:h,key:1,isSelectedTrack:r,sequencerEngine:t.sequencerEngine,store:t.sequencerEngine.store,trackNumber:t.trackNumber,id:n,trackColor:y,sample:t.sample,track:t,isMini:!0,trackData:t})),s.a.createElement("div",{style:{color:j},className:"delete-track-trash",onClick:function(){return t.sequencerEngine.deleteTrack(t.trackNumber)}},"x"))}),g=n(705),h=n(329);function E(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return k(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return k(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var c,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,c=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw c}}}}function k(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}t.a=Object(m.b)(function(e,t){return{coords:e.windows.windowPositions[t.sequencer.id],isSelected:e.windows.selectedElements[t.sequencer.id],tracks:t.sequencer.tracks,numTracks:t.sequencer.tracks.length,isStarred:e.effects.effectStarred[t.sequencer.id]}},function(e,t){return{setStarred:function(n){return e(Object(p.bc)(t.sequencer.id,n))},setTrackDragging:function(t){return e(Object(p.ah)(t))},setSampleDragging:function(t){return e(Object(p.Pe)(t))},setSampleTagDragging:function(t){return e(Object(p.Te)(t))}}})(function(e){var t=e.sequencer,n=e.scale,u=(e.pad,e.scrollContainer),l=e.elements,f=e.sizeRef,d=e.size,m=e.setSize,p=e.isCurrent,b=e.setTrackDragging,k=e.numTracks,O=e.setOrdering,j=e.isStarred,y=e.setStarred,S=e.coords,w=e.ordering,C=e.setSampleDragging,x=e.setSampleTagDragging,N=e.isSelected,q=Object(o.useRef)(void 0),M=Object(o.useState)({}),D=Object(c.a)(M,2),R=D[0],T=D[1],P=Object(o.useState)(!1),z=Object(c.a)(P,2),L=z[0],I=z[1],A=Object(o.useRef)(void 0),U=Object(o.useRef)(void 0),G=Object(o.useCallback)(function(e,t){var n=Object(a.a)({},R);n[e.id]=t,T(n)},[R,T]),F=l?Object(g.a)({scale:n,ref:q,sizeRef:f,sequencerEngine:t.sequencerEngine,windowPosition:S,containerRef:u,size:d,setSize:m,elements:l,element:t,setOrdering:O,ordering:w}):{},H=F.setWindowScale,B=F.style,Y=F.adjust,_=F.windowScale,W=F.onContextMenu,X=F.onMouseDown,V=F.onMouseUp,J=(F.setCoords,F.startResizing);Object(o.useEffect)(function(){S&&(t.x=S.x,t.y=S.y)},[S]),Object(o.useEffect)(function(){l&&setTimeout(function(){if(A.current)if(A.current.clientHeight<A.current.scrollHeight){var e={x:U.current,y:A.current.scrollHeight+30};H(e)}else Y(t.x,t.y)},50)},[k,H]),Object(o.useEffect)(function(){_&&(U.current=_.x)},[_]);var Z=Object(o.useCallback)(function(e){e.stopPropagation(),t.sequencerEngine.switchToSubSequence(t.subSequence.id);var n=t.sequencerEngine.state,r=n.tracks.trackDragging,a=n.selector,c=a.sampleDragging,o=a.sampleTagDragging,s=t.subSequence,i=t.sequencerEngine;if((r||c||o)&&s.pads.length,r){var u,l=E(t.subSequence.sequencers);try{for(l.s();!(u=l.n()).done;){var f=u.value;if(f!==t&&f.tracks.includes(r)){f.removeTrack(r);break}}}catch(m){l.e(m)}finally{l.f()}t.addTrack(r)}else if(c)i.addSound(c).then(function(e){return t.addTrack(e)});else if(o){var d=i.state.selector.sampleTagDragging;Array.isArray(d)||(d=[d]),i.searchForSounds(d,void 0,void 0,void 0,!0).then(function(e){return t.addTrack(e)})}b(void 0),C(void 0),x(void 0)},[]),$=Object(a.a)({},B);_&&0!==_.x&&(L?($.minWidth=_.x,$.minHeight=_.y):($.width=_.x,$.height=_.y)),S&&($.left=S.x,$.top=S.y);var K=L||!_?1:_.x/420;1!=K&&(t.scale=K);var Q="pulled-sequencer";return p&&(Q+=" current"),N&&(Q+=" selected"),s.a.createElement("div",{style:$,onDrop:Z,onContextMenu:W,onMouseDown:X,onMouseUp:V,ref:q,className:Q},s.a.createElement("div",{className:"pulled-header"},s.a.createElement("div",{className:"header-name"},"Sequencer"),s.a.createElement("div",{onClick:function(){return y(!j)},className:j?"starred star":"star"},s.a.createElement("span",null,"\u2606")),s.a.createElement("div",{onClick:function(){return t.dispose()},className:"delete-button"},"x")),s.a.createElement("div",{style:l&&K&&!L?{width:$.width/K,maxHeight:$.height/K,transform:"scale("+.95*K+")"}:{},ref:A,className:"inner-sequencer"},0===t.tracks.length&&s.a.createElement("div",{className:"drop-here"},"Drop Tracks Here"),t.tracks.map(function(e){var t;return s.a.createElement(v,(t={onTrackRendered:G,sequencerScale:K,key:e.id,setIsHiding:I,isHiding:L},Object(r.a)(t,"key",e.id),Object(r.a)(t,"scrollContainer",u),Object(r.a)(t,"track",e),t))})),s.a.createElement("div",{onMouseDown:function(e){return J(h.b,e)},className:"top-left-edge"}),s.a.createElement("div",{onMouseDown:function(e){return J(h.a,e)},className:"top-right-edge"}),s.a.createElement("div",{onMouseDown:function(e){return J(h.d,e)},className:"bottom-left-edge"}),s.a.createElement("div",{onMouseDown:function(e){return J(h.c,e)},className:"bottom-right-edge"}),t.tracks.map(function(e,r){return s.a.createElement(i.a,{sequencerScale:K,isMidi:!0,trackPositions:R,number:r,containerRef:u,sequencerEngine:t.sequencerEngine,scale:n,node:e})}))})},2786:function(e,t,n){"use strict";var r=n(8),a=n(82),c=n(0),o=n.n(c),s=n(105),i=new(n(31).a),u=n(1144),l=n(255),f=n(2637),d=(n(2638),n(705)),m=n(12);t.a=Object(m.b)(function(e,t){return t.pad.effectRack?{coords:e.windows.windowPositions[t.pad.effectRack.outputNode.id],isSelected:e.windows.selectedElements[t.pad.effectRack.outputNode.id]}:{}},function(e){return{}})(function(e){var t=e.isMidi,n=e.pad,m=e.isSelected,p=e.coords,b=Object(a.a)(e,["isMidi","pad","isSelected","coords"]),v=Object(c.useRef)(void 0),g=Object(l.a)({ref:v}),h=g.onContextMenu,E=g.dropdownPos,k=g.setDropdownPos,O=Object(c.useRef)({x:0,y:0}),j=Object(d.a)(Object(r.a)({ref:v,element:n.effectRack&&n.effectRack.outputNode,windowPosition:p,sequencerEngine:n.sequencerEngine},b)),y=j.style,S=(j.isDragging,j.onMouseDown),w=j.onMouseUp,C=(j.setCoords,function(e){var t=e.id;return{backgroundColor:i.getColorForHash(t)}}({id:n&&n.effectRack&&n.effectRack.id}));Object(c.useEffect)(function(){p&&(O.current={x:p.x+150,y:p.y+150})},[p]);var x="pad-effect-control speakers";m&&(x+=" selected");var N=Object(r.a)({},y,C);return t&&(delete N.backgroundColor,x+=" midi-speakers"),p&&(N.left=p.x,N.top=p.y),n&&n.effectRack?[o.a.createElement("div",{key:1,onContextMenu:function(e){h(e),j.onContextMenu(e)},onMouseDown:S,onMouseUp:w,ref:v,style:N,className:x},t?o.a.createElement("div",{className:"speaker-name"},"Out"):o.a.createElement("img",{draggable:!1,src:"/speakers.svg"}),t?"":o.a.createElement(u.a,{effectOptions:s.a,initializeEffect:s.b,dropdownPosRef:O,dropdownPos:E,setDropdownPos:k,node:n}),o.a.createElement(f.a,{isSpeaker:!0,id:n.effectRack.id+"-speakers",containerRef:b.containerRef,pad:n,fx:n.effectRack.outputNode}))]:""})},2798:function(e,t,n){},2803:function(e,t,n){},2820:function(e,t,n){},2821:function(e,t,n){}}]);