(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{2239:function(e,t,n){"use strict";var a=n(2),r=n(4),i=n(6),s=n(11),c=n(1),u=n(0),o=n.n(u),l=n(12),d=n(177),f=n.n(d);function m(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,a=Object(c.a)(e);if(t){var r=Object(c.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(s.a)(this,n)}}var h=function(e){Object(i.a)(n,e);var t=m(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(r.a)(n,[{key:"render",value:function(){return 0===this.props.numPending?o.a.createElement("div",null):o.a.createElement("div",{className:"pending-transactions"},"Syncing ",this.props.numPending," items",o.a.createElement(f.a,{sizeUnit:"px",size:8,color:"#6200ff",loading:!0}))}}]),n}(u.Component);t.a=Object(l.b)(function(e,t){return{numPending:e.transactions.pendingTransactions.length}},null)(h)},2244:function(e,t,n){"use strict";var a=n(2),r=n(4),i=n(6),s=n(11),c=n(1),u=n(0),o=n.n(u),l=n(12),d=n(988),f=n(2239),m=n(989);n(2246);function h(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,a=Object(c.a)(e);if(t){var r=Object(c.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(s.a)(this,n)}}var p=function(e){Object(i.a)(n,e);var t=h(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(r.a)(n,[{key:"onClickSequencer",value:function(){window.location="/create/"}},{key:"onClickSampler",value:function(){"DISCOVER"!==this.props.view&&(window.location="/discover/")}},{key:"onClickExplore",value:function(){"EXPLORE"!==this.props.view&&(window.location="/explore/")}},{key:"onClickLogo",value:function(){window.location="/"}},{key:"render",value:function(){var e=this,t=this.props.view||"",n="DISCOVER"===t?"navigator-button selected":"navigator-button",a="EXPLORE"===t?"navigator-button selected":"navigator-button";return o.a.createElement("div",{className:"navigator"},o.a.createElement(m.a,{show:this.props.showLogin}),o.a.createElement("div",{onClick:function(){return e.onClickLogo()},className:"universal-sequences-logo "+t},"ZEQUENCER"),o.a.createElement("div",{onClick:function(){return e.onClickSequencer()},className:"navigator-button"},"CREATE"),o.a.createElement("div",{onClick:function(){return e.onClickExplore()},className:a},"EXPLORE"),o.a.createElement("div",{onClick:function(){return e.onClickSampler()},className:n},"SAMPLE"),o.a.createElement("div",{className:"guilds-menu-container"},o.a.createElement(f.a,{store:this.props.store}),o.a.createElement(d.a,{store:this.props.store})))}}]),n}(u.Component);t.a=Object(l.b)(function(e){return{showLogin:e.sequencer.showLogin}},null)(p)},2246:function(e,t,n){},2423:function(e,t,n){"use strict";n.r(t);var a=n(2),r=n(4),i=n(6),s=n(11),c=n(1),u=n(0),o=n.n(u),l=n(2244),d=n(3),f=n.n(d),m=n(13),h=n(18),p=n(12),v=n(177),g=n.n(v),b=n(989),y=n(42);function E(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,a=Object(c.a)(e);if(t){var r=Object(c.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(s.a)(this,n)}}var k=function(e){Object(i.a)(n,e);var t=E(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(r.a)(n,[{key:"render",value:function(){var e="potential-member ";return this.props.isSelected&&(e+="selected"),o.a.createElement("div",{onClick:this.props.onClick,className:e},o.a.createElement("div",{className:"user-name"},this.props.userName),o.a.createElement("div",{className:"user-id"},this.props.userId))}}]),n}(u.Component),N=n(1002),w=n(75),O=n(32);function C(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,a=Object(c.a)(e);if(t){var r=Object(c.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(s.a)(this,n)}}var j=function(e){Object(i.a)(n,e);var t=C(n);function n(e){var r;return Object(a.a)(this,n),(r=t.call(this,e)).state={addingMember:!1,users:[]},r}return Object(r.a)(n,[{key:"editGuildName",value:function(){this.props.onNameChange(this.props.guild.name)}},{key:"addMember",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];e&&this.getPotentialUsers(),this.setState({addingMember:e})}},{key:"getPotentialUsers",value:function(){var e=Object(m.a)(f.a.mark(function e(){var t;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=new N.a(O.a,!1),e.next=3,t.executeQuery();case 3:return e.next=5,t.getNext();case 5:if(e.t0=e.sent,e.t1=void 0,e.t0===e.t1){e.next=16;break}return e.t2=this,e.next=11,this.getUsersFromResults(t.results);case 11:e.t3=e.sent,e.t4={users:e.t3},e.t2.setState.call(e.t2,e.t4),e.next=3;break;case 16:return e.t5=this,e.next=19,this.getUsersFromResults(t.results);case 19:e.t6=e.sent,e.t7={users:e.t6},e.t5.setState.call(e.t5,e.t7);case 22:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"getUsersFromResults",value:function(){var e=Object(m.a)(f.a.mark(function e(t){var n,a,r,i,s,c;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(a in n=new Set,t)n.add(t[a].user);new Set(this.props.guild.members.map(function(e){return e.userId.trim().toUpperCase()})),n=Array.from(n),r={},e.t0=f.a.keys(n);case 6:if((e.t1=e.t0()).done){e.next=15;break}return i=e.t1.value,s=n[i].trim(),e.next=11,O.a.users.getUserName(s);case 11:c=e.sent,r[s]=c,e.next=6;break;case 15:return e.abrupt("return",r);case 16:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.props.guild;return o.a.createElement("div",{className:"guild-details"},o.a.createElement("div",{className:"details-header"},o.a.createElement(y.a,{condition:this.props.isEditingName},o.a.createElement(w.h,{className:"guild-name-input-group"},o.a.createElement(w.g,{onChange:function(t){return e.props.onNameChange(t.target.value)},value:this.props.name,placeholder:"Type name for guild",id:"guild-name-input"}))),o.a.createElement(y.a,{condition:!this.props.isEditingName},o.a.createElement("div",{onClick:function(){return e.editGuildName()},className:"guild-name"},t.name)),o.a.createElement("div",{className:"make-default-button"},"Make Default Guild")),this.getAddMemberFlow(),this.getShowMembersFlow())}},{key:"getAddMemberFlow",value:function(){var e=this;return this.state.addingMember?o.a.createElement("div",null,o.a.createElement("div",{className:"add-members-header"},"Add member"),Object.keys(this.state.users).map(function(t){return o.a.createElement(k,{isSelected:e.props.usersSelected.has(t),onClick:function(){return e.props.selectUser(t)},userId:t,userName:e.state.users[t]})})):o.a.createElement("div",null)}},{key:"getShowMembersFlow",value:function(){var e=this;return this.state.addingMember?o.a.createElement("div",null):o.a.createElement("div",null,o.a.createElement("div",{className:"members-heading"},o.a.createElement("div",null,"Members"),o.a.createElement("div",{onClick:function(){return e.addMember()},className:"add-member-button"},"+")),o.a.createElement("div",{className:"guild-members"},this.props.guild.members.map(function(e){return o.a.createElement(G,{member:e})})))}}]),n}(u.Component),G=function(e){Object(i.a)(n,e);var t=C(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(r.a)(n,[{key:"render",value:function(){return o.a.createElement("div",{className:"guild-member"},this.props.member.userName)}}]),n}(u.Component),R=j;function x(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,a=Object(c.a)(e);if(t){var r=Object(c.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(s.a)(this,n)}}var S=function(e){Object(i.a)(n,e);var t=x(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(r.a)(n,[{key:"render",value:function(){return o.a.createElement("div",{onClick:this.props.onClickGuild,className:"guild-item"},o.a.createElement("div",{className:"guild-name"},this.props.guild.name),o.a.createElement("div",{className:"members-count"},this.props.guild.members.length," members"))}}]),n}(u.Component);function P(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,a=Object(c.a)(e);if(t){var r=Object(c.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(s.a)(this,n)}}var U=function(e){Object(i.a)(n,e);var t=P(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(r.a)(n,[{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"guilds-list"},this.props.guilds.map(function(t){return o.a.createElement(S,{onClickGuild:function(){return e.props.onClickGuild(t)},guild:t})}))}}]),n}(u.Component),B=n(1332),M=n(1264);function F(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,a=Object(c.a)(e);if(t){var r=Object(c.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(s.a)(this,n)}}var L=function(e){Object(i.a)(n,e);var t=F(n);function n(e){var r;return Object(a.a)(this,n),(r=t.call(this,e)).state={editingGuild:void 0,editingName:!1,guilds:[],waitingForNewGuild:!1,creatingNewGuild:!1,name:"",passphrase:"",usersSelected:new Set},r.onNameChange=r.onNameChange.bind(Object(h.a)(r)),r.onPassphraseChange=r.onPassphraseChange.bind(Object(h.a)(r)),r.onClickGuild=r.onClickGuild.bind(Object(h.a)(r)),r.getGuilds(),O.a.guilds.newGuildCallback=function(){return r.getGuilds()},r}return Object(r.a)(n,[{key:"shouldComponentUpdate",value:function(e){return e.userToken!==this.props.userToken&&this.getGuilds(),!0}},{key:"selectUser",value:function(e){this.state.usersSelected.has(e)?this.state.usersSelected.delete(e):this.state.usersSelected.add(e),this.setState(this.state)}},{key:"onNameChange",value:function(e){this.setState({name:e,editingName:!0})}},{key:"doneEditing",value:function(){var e=Object(m.a)(f.a.mark(function e(){var t;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.state.editingName&&this.state.editingGuild&&this.state.editingGuild.name!==this.state.name&&(this.state.editingGuild.name=this.state.name,O.a.guilds.setGuildName(this.state.editingGuild.guildId,this.state.name)),this.state.usersSelected.size>0&&(t=this.state.editingGuild.guildId,this.state.usersSelected.forEach(function(){var e=Object(m.a)(f.a.mark(function e(n){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.a.guilds.requestToAddMember(t,n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}())),this.setState({editingGuild:void 0,editingName:!1});case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"onClickGuild",value:function(e){this.setState({name:"",editingGuild:e})}},{key:"onPassphraseChange",value:function(e){this.setState({passphrase:e})}},{key:"createNewGuild",value:function(e,t){O.a.guilds.newGuild(e,t),this.setState({waitingForNewGuild:!0})}},{key:"onClickNewGuild",value:function(e){e||this.createNewGuild(this.state.name,this.state.passphrase),this.setState({creatingNewGuild:e})}},{key:"getGuilds",value:function(){var e=Object(m.a)(f.a.mark(function e(){var t,n,a,r;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.a.guilds.getGuildsForUser();case 2:t=e.sent,e.t0=f.a.keys(t);case 4:if((e.t1=e.t0()).done){e.next=13;break}return n=e.t1.value,a=t[n],e.next=9,O.a.guilds.getUsersInGuild(a.guildId);case 9:r=e.sent,a.members=r,e.next=4;break;case 13:this.setState({waitingForNewGuild:!1,guilds:t});case 14:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return this.state.editingGuild?o.a.createElement("div",{className:"content-view"},o.a.createElement("div",{className:"inner-content-view"},o.a.createElement(R,{selectUser:function(t){return e.selectUser(t)},usersSelected:this.state.usersSelected,name:this.state.name,isEditingName:this.state.editingName,onNameChange:function(t){return e.onNameChange(t)},guild:this.state.editingGuild,onFinishEditing:function(){return e.onClickGuild(void 0)}})),o.a.createElement("div",{onClick:function(){return e.doneEditing()},className:"add-guilds-button"},o.a.createElement("div",{className:"button-text"},this.state.usersSelected.size>0?"Add Members to Guild":"Done"))):o.a.createElement("div",{className:"content-view"},o.a.createElement(b.a,{show:this.props.showLogin}),o.a.createElement("div",{className:"inner-content-view"},o.a.createElement("div",{className:"sub-header"},o.a.createElement("div",null,this.state.creatingNewGuild?"Create New Guild":"Guilds")),o.a.createElement("div",{className:"clear-fix"}),o.a.createElement(y.a,{condition:this.state.waitingForNewGuild},o.a.createElement("div",{className:"creating-new-guild"},"Creating new guild"),o.a.createElement(g.a,{sizeUnit:"px",size:10,color:"#123abc",loading:this.state.waitingForNewGuild})),o.a.createElement(y.a,{condition:this.state.creatingNewGuild},o.a.createElement(M.a,{onPassphraseChange:this.onPassphraseChange,onNameChange:this.onNameChange,passphrase:this.state.passphrase,name:this.state.name})),o.a.createElement(y.a,{condition:!this.state.creatingNewGuild},o.a.createElement(U,{onClickGuild:function(t){return e.onClickGuild(t)},guilds:this.state.guilds}),o.a.createElement(B.a,{ethereum:O.a}))),o.a.createElement("div",{onClick:function(){return e.onClickNewGuild(!e.state.creatingNewGuild)},className:"add-guilds-button"},o.a.createElement(y.a,{condition:this.state.creatingNewGuild},o.a.createElement("div",{className:"button-text"},"Done")),o.a.createElement(y.a,{condition:!this.state.creatingNewGuild},o.a.createElement("div",{className:"big-plus"},"+"),o.a.createElement("div",{className:"button-text"},"New Guild"))))}}]),n}(u.Component),I=Object(p.b)(function(e){return{showLogin:e.sequencer.showLogin,userToken:e.sequencer.userToken}},null)(L),A=(n(1022),n(1021)),T=n(51);function q(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,a=Object(c.a)(e);if(t){var r=Object(c.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(s.a)(this,n)}}var z=function(e){Object(i.a)(n,e);var t=q(n);function n(e){var r;return Object(a.a)(this,n),r=t.call(this,e),T.a.setStore(r.props.store),O.a.store=r.props.store,T.a.setEthereum(O.a),T.a.checkLogin(),O.a.guilds.initGuilds(),O.a.crypto.store=r.props.store,r}return Object(r.a)(n,[{key:"render",value:function(){return o.a.createElement("div",{className:"guilds-page"},o.a.createElement(A.a,{crypto:O.a.crypto,show:!0}),o.a.createElement(l.a,{store:this.props.store}),o.a.createElement(I,{store:this.props.store}))}}]),n}(u.Component);t.default=z}}]);