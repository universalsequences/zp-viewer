(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{2320:function(e,t,n){"use strict";var a=n(0),r=n.n(a),c=n(78),s=n(40),o=n(12),i=n(8);t.a=Object(o.b)(function(e,t){return{rolling:e.sequencer.trackRolling,quantized:e.sequencer.quantized}},function(e){return{setTrackRolling:function(t){return e(Object(i.jh)(t))},setQuantized:function(t){return e(Object(i.ze)(t))}}})(function(e){var t=e.rolling,n=e.setTrackRolling,a=e.quantized,o=e.setQuantized;return r.a.createElement("div",{className:"live-buttons"},r.a.createElement(c.a,{onClick:function(){return n(!t)},className:t?"live-button selected":"live-button",element:s.xb},r.a.createElement("img",{className:"roll-icon",src:"/roll-light.png"})),r.a.createElement(c.a,{onClick:function(){return o(!a)},className:a?"live-button":"live-button selected",element:s.nb},r.a.createElement("img",{className:"quantize-btn",src:a?"/quantized.svg":"/unquantized.svg"})))})},2322:function(e,t,n){},2381:function(e,t,n){},2382:function(e,t,n){},2383:function(e,t,n){},2384:function(e,t,n){},2385:function(e,t,n){},2386:function(e,t,n){},2387:function(e,t,n){},2414:function(e,t,n){"use strict";n.r(t);var a=n(7),r=n(0),c=n.n(r),s=n(94),o=n(1259),i=n(2261),u=n(1336),l=n(1234),f=n(608),b=n(12),d=Object(b.b)(function(e,t){return{}},function(e){return{}})(function(e){Object(l.a)(e);var t=Object(r.useState)(0),n=Object(a.a)(t,2),s=n[0],o=n[1],i=Object(r.useCallback)(function(){window.fps&&o(window.fps)},[o]);return Object(f.a)(i,500),c.a.createElement("div",{className:"frames-per-second"},Math.round(s)," F.P.S.")}),m=n(45),g=n(2323),E=n(92),p=n(2284),v=n(855),j=n(2288),O=n(1328),h=n(1020),w=n(10),S=n(85),k=n(8),q=function(e,t){var n=[],a=e;for(a&&a.subSequence&&a.subSequence.zObject&&n.push(a);a&&a.subSequence&&a.subSequence.zObject;)a=a.subSequence.zObject,n.push(a);0===n.length&&(n=[e]);var r=n.map(function(e,n){return e.message?e._text:e.zObject&&"comment"===e.zObject.name?y(t,e.text):"subpatch"===e.name&&e.args[0]&&""!==e.args[0].trim()?e.args[0]:e.name});return{tree:n,list:r}},y=function(e,t){var n=t.indexOf(e);return"..."+t.slice(n,n+12)+"..."},N=(n(2381),Object(b.b)(function(e,t){return{recentSubPatches:e.zobject.recentSubPatches}},function(e){return{setViewableSubPatches:function(t){return e(Object(k.Hh)(t))}}})(function(e){var t=e.recentSubPatches,n=e.setViewableSubPatches,s=e.clear,o=Object(r.useState)(-1),i=Object(a.a)(o,2),u=i[0],l=i[1],f=Object(r.useCallback)(function(e){var t=e.sequencerEngine.state.zobject.viewableSubPatches;n([].concat(Object(w.a)(t),[e])),s()},[]);Object(r.useEffect)(function(){return window.addEventListener("keydown",b),function(){return window.removeEventListener("keydown",b)}},[l,u]);var b=Object(r.useCallback)(function(e){var n=t.length;if("ArrowDown"===e.key)u=Object(S.a)(u+1,Math.min(10,n)),l(u);else if("ArrowUp"===e.key)u=Object(S.a)(u-1,Math.min(10,n)),l(u);else if("Enter"===e.key){var a=t[u];a&&f(a)}},[l,u,t]);return 0===t.length?"":c.a.createElement("div",{className:"recent-subpatches"},c.a.createElement("div",{className:"recent-title"},"Recently opened"),t.slice(0,10).map(function(e,t){return c.a.createElement("div",{onClick:function(){return f(e)},className:t===u?"recent selected":"recent"},c.a.createElement("img",{src:"/subpatch-light.svg"}),q(e.zObject,"").list.map(function(e,t){return c.a.createElement("span",{className:0===t?"main-name":""},e)}))}))})),C=Object(b.b)(function(e,t){return{}},function(e){return{}})(function(e){var t=e.setMode;return c.a.createElement("div",{className:"quick-actions"},c.a.createElement("div",{onClick:function(){return t("RECENT_SAMPLES")},className:"pushable action"},"Recent Samples"),c.a.createElement("div",{onClick:function(){return t("ALL_SAMPLES")},className:"pushable action"},"All Samples"))}),P=(n(2382),Object(b.b)(function(e,t){return{}},function(e){return{setFullScreenZObject:function(t){return e(Object(k.sc)(t))}}})(function(e){var t=e.zobject,n=e.setFullScreenZObject,s=Object(r.useState)(!1),o=Object(a.a)(s,2),i=o[0],u=o[1],l=Object(r.useCallback)(function(){var e=t.sequencerEngine.state.zobject.fullScreenZObject;n(e?Array.isArray(e)?[].concat(Object(w.a)(e),[t]):[e,t]:t)},[t]);return c.a.createElement("div",{className:"zobject-command"},c.a.createElement("div",{onClick:function(){return u(!i)},className:"collapse-btn"},c.a.createElement("div",{className:i?"arrow-up":"arrow-down"})),i&&c.a.createElement("div",{className:"command-menu"},c.a.createElement("div",{onClick:l,className:"command-option"},"Add to Full-Screen")))})),x=n(394),M=n(2327),T=Object(b.b)(function(e,t){return{}},function(e){return{}})(function(e){var t=e.mode,n=e.searchTerm,a=(e.selector,e.sequencerEngine);return c.a.createElement("div",null,c.a.createElement(M.a,{defaultGroupBy:"RECENT_SAMPLES"===t?x.a:x.d,quickAddSearchText:n,sequencerEngine:a}))}),L=n(84),D=n(184),R=n(3),A=n.n(R),z=n(13),I=n(273),F=n(272),Z=n(679),W=n(97),B=(n(125),n(138)),X=n(173),_=n(550),H=["Multiband Compressor","Flam","Max","Poly","First","Last","Staccato","Dot","Dash 1","Dash 2","Rest","Otherwise","Accent","Legato","R.Every","Double","Later","Regular","Flat","Thick","Split","Piano","Pianissimo"],U=Object.keys,V=(Object.values,function(e,t){return t=t.toLowerCase(),U(e).filter(function(e){return e.toLowerCase().includes(t)}).filter(function(e){return!H.includes(e)})}),G=function(){var e=Object(z.a)(A.a.mark(function e(t,n){return A.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=V(B.b,t),e.t1=V(X.b,t),e.t2=V(_.b,t),e.t3=J(t,n),e.next=6,Y(t,n);case 6:return e.t4=e.sent,e.next=9,Q(t,n);case 9:return e.t5=e.sent,e.abrupt("return",{AUDIO_FX:e.t0,MIDI_FX:e.t1,LIVE_FX:e.t2,OBJECTS:e.t3,SAMPLES:e.t4,SYNTHS:e.t5});case 11:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}(),J=function(e,t){var n=Object(I.a)(t.currentSubSequence,!0);return e=e.toLowerCase(),n.filter(function(t){return"string"===typeof t.name&&t.name.toLowerCase().includes(e)||t.args&&"string"===typeof t.args[0]&&t.args[0].toLowerCase().includes(e)||t.text&&"string"===typeof t.text&&t.text.toLowerCase().includes(e)||t._text&&"string"===typeof t._text&&t._text.toLowerCase().includes(e)||t.text&&"number"===typeof t.text&&t.text.toString().includes(e)}).filter(function(e){return!e.getObjectType||e.getObjectType()!==W.a})},Y=function(){var e=Object(z.a)(A.a.mark(function e(t,n){var a;return A.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Z.b)(t);case 2:return a=e.sent,e.next=5,n.searcher.freeTextSearch(t);case 5:return e.sent,e.abrupt("return",a);case 7:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}(),Q=function(){var e=Object(z.a)(A.a.mark(function e(t,n){var a;return A.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(F.c)(void 0,"MULTI_SYNTH",[],0,8359897,!1,void 0,t);case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}(),K=(n(2322),function(e){var t=e.name,n=(e.onClick,e.results),a=e.priorLength,r=void 0===a?0:a,s=e.cursor,o=e.setCursor,i=e.term,u=e.scrollRef;return n&&0!==n.length?[c.a.createElement("div",{className:"type-name"},t)].concat(Object(w.a)(n.map(function(e,n){return c.a.createElement($,{type:t,onClick:function(){return o(n+r)},isCursor:n+r===s,x:e,scrollRef:u,term:i})}))):""}),$=function(e){var t=e.isCursor,n=e.type,a=e.x,s=e.term,o=e.scrollRef,i=e.onClick,u=Object(r.useRef)();return Object(r.useEffect)(function(){if(t){var e=u.current.offsetTop+50,n=o.current.scrollTop;e>n+o.current.offsetHeight&&o.current.scrollTo(0,e-130),e>141&&e-150<n&&o.current.scrollTo(0,e-130)}},[t]),c.a.createElement("div",{onClick:i,ref:u,className:t?"cursor result":"result"},"Samples"===n?c.a.createElement("img",{src:"/waveform-icon.svg"}):n.includes("FX")?c.a.createElement("img",{src:"/effects-icon.svg"}):"Synth Presets"===n?c.a.createElement("img",{src:"/synth-icon.svg"}):"","string"===typeof a?a:"Synth Presets"===n?a.title:c.a.createElement(ee,{isCursor:t,term:s,zobject:a}))},ee=function(e){var t=e.zobject,n=e.term,a=e.isCursor,r=q(t,n),s=r.tree,o=r.list,i=void 0;if("script"===t.name){var u=t.effect.outlets[Object.keys(t.effect.outlets)[0]];u&&(u.connections.some(function(e){return"fragment shader"===e.destType})?i="fragment shader":u.connections.some(function(e){return"vertex shader"===e.destType})&&(i="vertex shader"))}return t.args&&"string"===typeof t.args[0]&&!i&&(i=t.args[0]),c.a.createElement("div",{className:"zobject-preview"},t.message?c.a.createElement("img",{className:"object-icon",src:t.type===L.c?"/znumber-light.svg":"/zmessage-light.svg"}):t.zObject&&"comment"===t.zObject.name?c.a.createElement("img",{className:"object-icon",src:"/zcomment-light.svg"}):"subpatch"===t.name?c.a.createElement("img",{className:"object-icon",src:"/subpatch-light.svg"}):c.a.createElement("img",{className:"object-icon",src:"/zobject-light.svg"}),s.map(function(e,t){return c.a.createElement("div",{key:t,className:t>0?"tree-part spatch":"main-part tree-part"},o[t])}),i&&c.a.createElement("div",{className:"custom-type"},i),a&&c.a.createElement(P,{zobject:t}))},te=function(e){return e?e.length:0},ne=Object(b.b)(function(e,t){return{}},function(e){return{setWindowPosition:function(t,n){return e(Object(k.Nh)(t,n))},setViewableZObjects:function(t){return e(Object(k.Ih)(t))},setShowEditorBottom:function(t){return e(Object(k.Lf)(t))},setViewableSubPatches:function(t){return e(Object(k.Hh)(t))},setFullScreenZObject:function(t){return e(Object(k.sc)(t))}}})(function(e){var t=e.searchTerm,n=e.sequencerEngine,s=e.hide,o=e.inputRef,i=e.setShowEditorBottom,u=e.setWindowPosition,l=e.setViewableZObjects,f=e.setViewableSubPatches,b=e.setFullScreenZObject,d=Object(r.useState)({}),m=Object(a.a)(d,2),g=m[0],E=m[1],p=Object(r.useState)(0),v=Object(a.a)(p,2),j=v[0],O=v[1],h=Object(r.useState)(!1),S=Object(a.a)(h,2),k=S[0],q=S[1],y=Object(r.useRef)(void 0);Object(r.useEffect)(function(){""===t?E({}):G(t,n).then(E)},[t,E]),Object(r.useEffect)(function(){O(0)},[g,O]);var N=Object(r.useCallback)(function(){return te(g.AUDIO_FX)+te(g.MIDI_FX)+te(g.LIVE_FX)+te(g.OBJECTS)+te(g.SAMPLES)+te(g.SYNTHS)},[g]);Object(r.useEffect)(function(){return window.addEventListener("keydown",C),function(){return window.removeEventListener("keydown",C)}},[g,k,j,O,s,q]);var C=Object(r.useCallback)(function(e){if(k)"ArrowLeft"===e.key&&q(!1);else{if("ArrowUp"===e.key)return e.preventDefault(),M(),!1;if("ArrowDown"===e.key)return e.preventDefault(),x(),!1;if("Enter"===e.key)return e.preventDefault(),P(g,j,e.metaKey||e.ctrlKey),!1;if("Escape"===e.key){if(n.state.zobject.viewableSubPatches.length>0||n.state.zobject.viewableZObjects.length>0)return;return e.preventDefault(),s(),!1}"ArrowRight"===e.key&&P(g,j,!1,!0)}},[g,j,O,s,q,k]);Object(r.useEffect)(function(){k&&o.current.blur()},[k]);var P=Object(r.useCallback)(function(e,t,a,r){var c=e.AUDIO_FX||[],o=e.MIDI_FX||[],d=e.LIVE_FX||[],m=e.OBJECTS||[],g=e.SAMPLES||[],E=e.SYNTHS||[],p=[].concat(Object(w.a)(c),Object(w.a)(o),Object(w.a)(d),Object(w.a)(m),Object(w.a)(g),Object(w.a)(E)),v=([].concat(Object(w.a)(c),Object(w.a)(o),Object(w.a)(d),Object(w.a)(m)),p[t]);if(v)if(te([].concat(Object(w.a)(c),Object(w.a)(o),Object(w.a)(d),Object(w.a)(m)))<=t&&te([].concat(Object(w.a)(c),Object(w.a)(o),Object(w.a)(d),Object(w.a)(m),Object(w.a)(g)))>t){if(r)return void q(v);a?n.scripting.runScript("/"+v+"/"):n.scripting.runScript("/"+v)}else if(t>=te([].concat(Object(w.a)(c),Object(w.a)(o),Object(w.a)(d),Object(w.a)(m),Object(w.a)(g))))a?n.auditionPreset(v,n.getSelectedTrack().trackNumber):n.loadPreset(v,!0);else if(te([].concat(Object(w.a)(c),Object(w.a)(o),Object(w.a)(d)))>t)n.scripting.runScript("+"+v),i(D.a);else{var j=n.state.zobject.fullScreenZObject;if(j&&"three.canvas"!==j.name&&("subpatch"!==v.name||v.effect.isCustom))if(Array.isArray(j))b([].concat(Object(w.a)(j),[v.zObject||v]));else{var O=[j,v.zObject||v];b(O)}else if("subpatch"!==v.name||v.effect.isCustom){v.zObject&&(v=v.zObject);var h=n.state.zobject.viewableZObjects;u({x:100,y:100}),l([].concat(Object(w.a)(h),[v]))}else{var S=n.state.zobject.viewableSubPatches;u({x:100,y:100}),f([].concat(Object(w.a)(S),[v.effect]))}}s()},[s,q]),x=Object(r.useCallback)(function(){O(Math.min(j+1,N()-1))},[g,j,O]),M=Object(r.useCallback)(function(){0===j&&o.current.blur(),O(Math.max(0,j-1))},[j,O]);return Object(r.useEffect)(function(){q(!1)},[t,q]),k?c.a.createElement(T,{searchTerm:k,sequencerEngine:n}):c.a.createElement("div",{ref:y,className:""===t?"search-results empty":"search-results"},c.a.createElement(K,{scrollRef:y,cursor:j,term:t,name:"Create Audio FX",setCursor:O,results:g.AUDIO_FX}),c.a.createElement(K,{scrollRef:y,cursor:j,term:t,priorLength:te(g.AUDIO_FX),setCursor:O,name:"Create Midi FX",results:g.MIDI_FX}),c.a.createElement(K,{scrollRef:y,cursor:j,term:t,setCursor:O,priorLength:te(g.AUDIO_FX)+te(g.MIDI_FX),name:"Create Live FX",results:g.LIVE_FX}),c.a.createElement(K,{scrollRef:y,cursor:j,term:t,name:"Objects (in project)",setCursor:O,priorLength:te(g.AUDIO_FX)+te(g.MIDI_FX)+te(g.LIVE_FX),results:g.OBJECTS}),c.a.createElement(K,{scrollRef:y,cursor:j,term:t,priorLength:te(g.AUDIO_FX)+te(g.MIDI_FX)+te(g.OBJECTS)+te(g.LIVE_FX),name:"Samples",setCursor:O,results:g.SAMPLES}),c.a.createElement(K,{scrollRef:y,cursor:j,term:t,name:"Synth Presets",setCursor:O,priorLength:te(g.AUDIO_FX)+te(g.MIDI_FX)+te(g.OBJECTS)+te(g.SAMPLES)+te(g.LIVE_FX),results:g.SYNTHS}))}),ae=n(596),re=n(9),ce=n(67);function se(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return oe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return oe(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var a=0,r=function(){};return{s:r,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var c,s=!0,o=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){o=!0,c=e},f:function(){try{s||null==n.return||n.return()}finally{if(o)throw c}}}}function oe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var ie=function(e,t){var n=Object(r.useCallback)(function(t){return e.dispatch(t)},[e]),a=function(){n(Object(k.b)())};return{onDrop:Object(r.useCallback)(function(){var r=Object(z.a)(A.a.mark(function r(c){var s,o,i,u,l,f,b,d,m,g,E,p,v,j,O,h,S,q,y,N,C,P,x,M,T,L,D;return A.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(s=e.state,o=s.instruments,i=s.tracks,u=s.effects,l=s.presets,f=s.selector,b=s.sequencer,d=t(c),m=d.x,g=d.y,E=e.state.spatial.editorPadding,m-=Math.max(0,E.x),g-=Math.max(0,E.y),!o.pullablePartDragging){r.next=13;break}return(p=Object(re.a)({},o.pullablePartDragging)).x=m,p.y=g,v=[].concat(Object(w.a)(u.pulledEffects),[p]),n(Object(k.ye)(v)),a(),r.abrupt("return");case 13:if(!i.trackDragging){r.next=18;break}return(j=i.trackDragging).subSequence.createZTrack(j,m,g),a(),r.abrupt("return");case 18:if(void 0===f.sampleDragging){r.next=44;break}O=se(e.currentSubSequence.pads),r.prev=20,O.s();case 22:if((h=O.n()).done){r.next=31;break}if(S=h.value,!(q=S.containsSample(f.sampleDragging))){r.next=29;break}return S.removeTrack(q),a(),r.abrupt("return");case 29:r.next=22;break;case 31:r.next=36;break;case 33:r.prev=33,r.t0=r.catch(20),O.e(r.t0);case 36:return r.prev=36,O.f(),r.finish(36);case 39:y=f.sampleDragging,e.addSound(y,void 0),a(),r.next=74;break;case 44:if(!f.samplesDragging){r.next=73;break}N=0,C=se(f.samplesDragging),r.prev=47,C.s();case 49:if((P=C.n()).done){r.next=62;break}if(x=P.value,!(N>4)){r.next=53;break}return r.abrupt("break",62);case 53:if(M=x,"string"!==typeof x){r.next=58;break}return M=new ce.a(x),r.next=58,M.load();case 58:e.addSound(M),N++;case 60:r.next=49;break;case 62:r.next=67;break;case 64:r.prev=64,r.t1=r.catch(47),C.e(r.t1);case 67:return r.prev=67,C.f(),r.finish(67);case 70:a(),r.next=74;break;case 73:f.sampleTagDragging&&(e.searchForSounds([f.sampleTagDragging]),a());case 74:l.presetDragging&&(e.loadPreset(l.presetDragging,!0),a()),(T=b.effectDragging||u.midiEffectDragging)&&Object.keys(T).length>1&&((L=T.effect).x=m,L.y=g,D=[].concat(Object(w.a)(u.pulledEffects),[L]),n(Object(k.ye)(D)),a());case 77:case"end":return r.stop()}},r,null,[[20,33,36,39],[47,64,67,70]])}));return function(e){return r.apply(this,arguments)}}(),[e])}},ue=Object(b.b)(function(e,t){return{}},function(e){return{setQuickAddSearchText:function(t){return e(Object(k.Ae)(t))},setShowSearchWindow:function(t){return e(Object(k.fg)(t))}}})(function(e){var t=e.showing,n=e.setShowSearchWindow,s=e.sequencerEngine,o=e.setQuickAddSearchText,i=Object(r.useRef)(void 0),u=Object(r.useRef)(0),l=Object(r.useRef)(void 0),f=Object(r.useState)(void 0),b=Object(a.a)(f,2),d=b[0],m=b[1],g=Object(r.useState)(""),E=Object(a.a)(g,2),p=E[0],v=E[1],j=Object(r.useState)(""),O=Object(a.a)(j,2),h=O[0],w=O[1],S=ie(s,function(){return{x:0,y:0}}).onDrop;Object(r.useEffect)(function(){return function(){return o(void 0)}},[]),Object(r.useEffect)(function(){u.current++;var e=u.current;setTimeout(function(){e===u.current&&w(p)},100)},[p,w]);var k=Object(ae.a)({ref:i}),q=(k.setCoords,k.onMouseUp,k.onMouseDown,k.coords);Object(r.useEffect)(function(){t&&l.current&&l.current.focus()},[t]),Object(r.useEffect)(function(){return window.addEventListener("keydown",y),function(){return window.removeEventListener("keydowwn",y)}},[]);var y=function(e){"ArrowDown"===e.key||e.key},P={left:q&&q.x,top:q&&q.y},x="search-background";t||(x+=" hide"),Object(r.useEffect)(function(){return window.addEventListener("click",M),function(){return window.removeEventListener("click",M)}},[]);var M=function(){n(!1)};return c.a.createElement("div",{onDrop:S,className:x},c.a.createElement("div",{style:P,onClick:function(e){return e.stopPropagation()},ref:i,className:"search-window"},c.a.createElement("div",{onClick:M,className:"delete-btn"},"x"),c.a.createElement("img",{src:"/search.svg",className:"search-icon"}),c.a.createElement("input",{ref:l,className:"search-text",value:p,onChange:function(e){return v(e.target.value)},placeholder:"Search for objects & actions"}),"RECENT_SAMPLES"===d||"ALL_SAMPLES"===d?c.a.createElement(T,{mode:d,searchTerm:p,sequencerEngine:s}):c.a.createElement(ne,{hide:function(){return n(!1)},searchTerm:h,inputRef:l,sequencerEngine:s}),void 0===d&&""===p&&c.a.createElement(C,{setMode:m,sequencerEngine:s}),""===p&&c.a.createElement(N,{clear:M})))}),le=n(1327),fe=n(271);n(2383);function be(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return de(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return de(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var a=0,r=function(){};return{s:r,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var c,s=!0,o=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){o=!0,c=e},f:function(){try{s||null==n.return||n.return()}finally{if(o)throw c}}}}function de(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var me=function(e){var t,n=[],a=be(e);try{for(a.s();!(t=a.n()).done;){var r=t.value,c=r.effect.getOutboundNodes(),s=!1;for(var o in c){var i=c[o][0];if(i&&i.node&&i.node.zObject&&"three.canvas"===i.node.zObject.name){n.push(i.node.zObject),s=!0,i.node.zObject.pluginViewerFor=r;break}}s||n.push(r)}}catch(u){a.e(u)}finally{a.f()}return n},ge=Object(b.b)(function(e,t){var n=e.spatial.showEditorBottom;return{bottomHeight:n===D.b?e.arrangement.bottomHeight:n===D.a?280:40,leftSidebarWidth:e.spatial.leftSidebarWidth,pluginsLoaded:e.plugins.pluginsLoaded,showPluginsPane:e.plugins.showPluginsPane}},function(e){return{setShowPluginsPane:function(t){return e(Object(k.bg)(t))},setPluginsPaneHeight:function(t){return e(Object(k.qe)(t))},setSelectedPulledElements:function(t){return e(Object(k.pf)(t))}}})(function(e){var t=e.setSelectedPulledElements,n=e.pluginsLoaded,a=e.leftSidebarWidth,s=e.setShowPluginsPane,o=e.showPluginsPane,i=e.bottomHeight,u=e.setPluginsPaneHeight,l={bottom:i,left:a,width:window.innerWidth-a-240};n&&(n=me(n));var f=n?Math.max.apply(Math,Object(w.a)(n.map(function(e){return e.height||100}))):void 0;return f=Math.min(300,f)+30,l.minHeight=f,o||(l.height=40,l.minHeight=40),Object(r.useEffect)(function(){u(f)},[f]),n&&0!==n.length?c.a.createElement("div",{onMouseDown:function(){return t({})},style:l,className:o?"plugins-pane showing":"plugins-pane"},c.a.createElement("div",{className:"collapse-and-label"},c.a.createElement("div",{onClick:function(){return s(!o)},className:"collapse-container"},c.a.createElement("div",{className:o?"arrow-right":"arrow-up"})),c.a.createElement("div",{className:"plugins-label"},c.a.createElement("img",{src:"/plugin-icon.svg"}))),o&&c.a.createElement("div",{className:"plugins-container"},n.map(function(e){return c.a.createElement(fe.a,{forceShow:!0,zobject:e})}))):[]}),Ee=n(2283),pe=n(598),ve=n(2324),je=n(23),Oe=n(163),he=n(2253),we=n(1024),Se=n(1004),ke=n(1007),qe=n(96),ye=n(229),Ne=n(129),Ce=n(454),Pe=Object(b.b)(function(e,t){return{presentationMode:e.spatial.presentationMode,pulledEffects:e.effects.pulledEffects}},function(e){return{setPulledEffects:function(t){return e(Object(k.ye)(t))}}})(function(e){var t=e.dropdownPosRef,n=e.subSequence,a=e.scale,s=e.dropdownPos,o=e.pulledEffects,i=e.setPulledEffects,u=e.elements,l=Object(he.a)({elements:u,subSequence:n,presentationMode:n.presentationMode}).arrangeWindows,f=Object(r.useCallback)(function(){var e=t.current,a=e.x,r=e.y;n.encapsulateObjects(a,r)},[n]),b=Object(r.useCallback)(function(){for(var e=n.sequencerEngine.state.windows.selectedElements,t=0,a=Object.keys(e);t<a.length;t++){var r=a[t],c=n.sequencerEngine.findNodeById(r);c&&c.setAttribute("Include in Presentation",!0)}},[n]),d=Object(r.useCallback)(function(e){var a=Object(qe.c)(e,n),r=t.current,c=r.x,s=r.y;a.x=c,a.y=s,n.midiEffects.addEffect(a),i([].concat(Object(w.a)(o),[a]))},[n,o]),m=n.state.windows.selectedElements,g=Object.keys(m).filter(function(e){return m[e]});return c.a.createElement(ye.a,{className:"midi-context",dropdownPos:s?{x:s.x/a,y:s.y/a}:void 0},g.length>0&&c.a.createElement(Ne.a,{onMouseDown:f},"Encapsulate Objects"),g.length>0&&c.a.createElement(Ne.a,{onMouseDown:b},"Include in Presentation",c.a.createElement("img",{src:"/presentation-mode.svg"})),g.length>0&&c.a.createElement(Ne.a,{onMouseDown:l},"Pack Objects"),c.a.createElement(Ne.a,{onMouseDown:function(){return Object(ke.a)(n.sequencerEngine,n)}},"Segment All Cables"),c.a.createElement("div",{className:"context-divider"}),c.a.createElement(Ce.a,{name:"Midi Effects"},qe.e.map(function(e){var t=e.label,n=e.value;return c.a.createElement(Ne.a,{onMouseDown:function(){return d(n)}},t)})))}),xe=n(288),Me=n(1005),Te=n(190),Le=n(2262),De=n(609),Re=(Object(b.b)(function(e,t){return t.sequencerEngine?{selectedTrack:t.sequencerEngine.getSelectedTrack()}:{}},function(e){return{}})(function(e){var t=e.selectedTrack;return t?(console.log("track =",t),c.a.createElement("div",{className:"cirklon-element"},c.a.createElement(De.a,{track:t}))):""}),n(1321)),Ae=n(1282),ze=n(2249),Ie=(n(2384),Object(b.b)(function(e,t){return{numPads:t.sequencerEngine.currentSubSequence&&t.sequencerEngine.currentSubSequence.pads.length}},function(e){return{setShowPadSequencer:function(t){return e(Object(k.Xf)(t))}}})(function(e){var t=e.pad,n=e.sequencerEngine,s=e.setShowPadSequencer,o=Object(r.useState)(void 0),i=Object(a.a)(o,2),u=i[0],l=i[1],f=Object(r.useState)(""),b=Object(a.a)(f,2),d=b[0],m=b[1],g=Object(r.useRef)(),E=Object(r.useCallback)(function(e){m(e.target.value)},[m]),p=Object(r.useCallback)(function(e){"Enter"===e.key&&(u.name=d,l(void 0))},[u,l,d]),v=Object(r.useCallback)(function(){m(g.current.name),l(g.current)},[m,l]),j=Object(Oe.a)(v,250),O=n.currentSubSequence.pads,h=Object(r.useCallback)(function(e){var t=n.state.tracks.trackDragging;if(console.log("on drop called with pad/trackDragging",e,t),t){for(var a=-1,r=0;r<e.slots.length;r++)if(!e.slots[r]){a=r;break}console.log("slot number=",a),a>-1&&e.addTrack(t,a)}},[]);return c.a.createElement("div",{className:"pad-tabs"},O.map(function(e,n){return c.a.createElement("div",{onDrop:function(){return h(e)},onClick:function(t){g.current=e,s(e),j(t)},className:function(){var n=t===e?"pad-option selected":"pad-option";return e===u&&(n+=" editing"),n}()},u===e?c.a.createElement("input",{onChange:E,placeholder:"Enter name",onKeyDown:p,type:"text",value:d,className:"pad-name-input"}):e.name||"Pad "+(n+1))}),c.a.createElement("div",{onClick:function(){var e=n.currentSubSequence.createPad();s(e)},className:"pushable new-pad-btn"},"+"))})),Fe=n(991),Ze=n(1322),We=(n(2385),Object(b.b)(function(e,t){return{tracks:t.pad.tracks,showEditorBottom:e.spatial.showEditorBottom,bottomHeight:e.arrangement.bottomHeight,editorBottomHeight:t.editorBottomRef.current&&t.editorBottomRef.current.offsetHeight,pluginsPaneHeight:e.plugins.pluginsPaneHeight||0,leftSidebarWidth:e.spatial.leftSidebarWidth}},function(e){return{setShowPadSequencer:function(t){return e(Object(k.Xf)(t))},setSelectedZObject:function(t){return e(Object(k.xf)(t))},setShowFreezeModal:function(t){return e(Object(k.Pf)(t))}}})(function(e){var t=e.leftSidebarWidth,n=e.pad,s=e.showEditorBottom,o=e.bottomHeight,i=e.setShowPadSequencer,u=e.setSelectedZObject,l=e.pluginsPaneHeight,f=e.editorBottomRef,b=e.editorBottomHeight,d=e.setShowFreezeModal,m=Object(r.useRef)(void 0),g=Object(r.useState)(0),E=Object(a.a)(g,2),p=(E[0],E[1]),v={},j=Object(r.useCallback)(function(){d(!0)},[n]);s===D.b?v.marginBottom=o:s===D.a?(console.log("editor bottom height",b,f),v.marginBottom=b||400):v.marginBottom=40,v.marginBottom+=l+20;var O=n.slotTracks;return O.sort(function(e,t){return e.trackNumber-t.trackNumber}),c.a.createElement("div",{style:v,onClick:function(){return u(void 0)},className:"pad-sequencer",ref:m},c.a.createElement(ze.a,{setHeight:p,sequencerEngine:n.sequencerEngine}),c.a.createElement(Re.a,{fillSize:!0,sequencerEngine:n.sequencerEngine,scale:1,scrollContainer:m}),c.a.createElement("div",{style:{left:t},className:"pad-sequencer-toolbar"},c.a.createElement("div",{className:"inner-toolbar"},c.a.createElement("div",{onClick:function(){return i(void 0)},className:"arrow-container pad-sequencer-back"},c.a.createElement("div",{className:"arrow-left"})),c.a.createElement(Ie,{pad:n,sequencerEngine:n.sequencerEngine}),c.a.createElement("div",{onClick:j,className:"pushable freeze-pad"},c.a.createElement("img",{src:"/freeze-icon.svg"})," Freeze"))),O.map(function(e){return c.a.createElement(Ze.a,{forceShow:!0,track:e,scrollContainer:m})}))})),Be=n(2331),Xe=(n(1338),Object(b.b)(function(e,t){return{leftSidebarWidth:e.spatial.leftSidebarWidth,showThemeGrid:e.sequencer.showThemeGrid,showPadSequencer:e.spatial.showPadSequencer,position:e.spatial.position,loadingSequence:e.sequencer.loadingSequence,currentSubSequence:t.sequencerEngine&&t.sequencerEngine.currentSubSequence}},function(e){return{setShowTrackInstrument:function(t){return e(Object(k.ng)(t))},setPulledEffects:function(t){return e(Object(k.ye)(t))},setSelectedPulledElements:function(t){return e(Object(k.pf)(t))},setSelectedZObject:function(t){return e(Object(k.xf)(t))}}})(function(e){var t,n=e.sequencerEngine,s=e.editorBottomRef,o=e.leftSidebarWidth,i=(e.setShowTrackInstrument,e.showPadSequencer),u=e.currentSubSequence,l=(e.setPulledEffects,e.setSelectedZObject),f=(e.setSelectedPulledElements,e.showThemeGrid),b=Object(r.useRef)(),d=Object(r.useRef)(void 0),m=Object(r.useRef)(void 0),g=Object(r.useState)(1),E=Object(a.a)(g,2),p=E[0],v=E[1],j=Object(Te.a)({containerRef:b,scale:p}).getXY,O=Object(xe.a)({ref:b}),h=O.onContextMenu,w=O.dropdownPos,S=(O.setDropdowPos,Object(r.useRef)(w)),q=Object(r.useRef)({}),y=Object(Me.a)({elements:q}).getSelection,N=u,C=Object(r.useCallback)(function(e){var t=j(e,!0),a=t.x,r=t.y,c=n.state.spatial.editorPadding;a-=Math.max(0,c.x),r-=Math.max(0,c.y),e.stopPropagation(),e.preventDefault(),N.createZObject(a,r)},[N]),P=Object(Oe.a)(C);Object(r.useEffect)(function(){w&&(S.current=w)},[w]);var x=Object(Ae.a)({scrollRef:b,sequencerEngine:n,context:n&&n.currentSubSequence}).onMouseMove;Object(r.useEffect)(function(){n&&n.dispatch(Object(k.fd)(b))},[n]);var M=ie(n,j).onDrop;if(!n)return 0;var T={paddingLeft:o},L="editor no-select";return f&&(L+=" show-grid"),c.a.createElement("div",{onContextMenu:h,style:T,onClick:P,onDrop:M,ref:b,className:L},!i&&c.a.createElement(Pe,{elements:q,subSequence:N,scale:p,dropdownPosRef:S,dropdownPos:w}),!i&&c.a.createElement(Se.a,{dropdownPos:w,getXY:j,scale:p,sequencerEngine:n,setSelectedZObject:l,onMouseMove:x,getSelection:y,editorRef:b}),i?c.a.createElement(We,{editorBottomRef:s,pad:!0===i?N.pads[0]:i}):c.a.createElement(Be.a,(t={editorRef:b,edgesRef:d,innerRef:m,scale:p,setScale:v,elements:q,dropdownPosRef:S,key:N.id},Object(je.a)(t,"scale",1),Object(je.a)(t,"showEffects",!0),Object(je.a)(t,"subSequence",N),Object(je.a)(t,"sequencerEngine",n),t),c.a.createElement(we.a,{edgesRef:d,containerRef:b,scale:p,subSequence:N}),c.a.createElement(Re.a,{sequencerEngine:n,scrollContainer:b}),c.a.createElement(Le.a,{scrollContainer:b,sequencerEngine:n})),i&&c.a.createElement(Le.a,{scrollContainer:b,sequencerEngine:n}))})),_e=n(99),He=n(997),Ue=Object(b.b)(function(e,t){return{viewMode:e.sequencer.viewMode}},function(e){return{setViewMode:function(t){return e(Object(k.Gh)(t))},setContextualHelp:function(t,n){return e(Object(k.vb)(t,n))}}})(function(e){return c.a.createElement("div",{className:"view-buttons"},c.a.createElement("img",Object(je.a)({onClick:function(){return e.setViewMode(E.e)},src:"/mix-view.svg",className:"view-mode-icon"},"className",e.viewMode===E.e?"view-mode-icon selected":"view-mode-icon")),c.a.createElement("img",{src:"/arrangement-view.svg",onClick:function(){return e.setViewMode(E.a)},className:e.viewMode===E.a?"view-mode-icon selected":"view-mode-icon"}),c.a.createElement("img",{src:"/arrangement-view.svg",onClick:function(){return e.setViewMode(E.b)},className:e.viewMode===E.b?"view-mode-icon selected":"view-mode-icon"}))}),Ve=n(2250),Ge=n(2238),Je=n(2320),Ye=n(75),Qe=Object(b.b)(function(e,t){return{}},function(e){return{setShowProjectsModal:function(t){return e(Object(k.dg)(t))},setShowSearchWindow:function(t){return e(Object(k.fg)(t))},setShowSettings:function(t){return e(Object(k.ig)(t))}}})(function(e){var t=Object(r.useState)(!1),n=Object(a.a)(t,2),s=n[0],o=n[1];return c.a.createElement(Ye.c,{className:"logo-dropdown view-dropdown guilds-dropdown",show:s?"true":"false",isOpen:s,toggle:function(){return o(!s)}},c.a.createElement(Ye.f,{size:"sm",caret:!0,color:"primary"},c.a.createElement("img",{src:"/smol-logo4.svg"})),c.a.createElement(Ye.e,null,c.a.createElement(Ye.d,{onClick:function(){return e.setShowSearchWindow(!0)}},"Search ",c.a.createElement("div",{className:"key-shortcut"},"/")),c.a.createElement(Ye.d,{onClick:function(){return e.setShowSettings(!0)}},"Settings"),c.a.createElement(Ye.d,{onClick:function(){return e.setShowProjectsModal(!0)}},"Open Project")))}),Ke=n(2258),$e=n(1036),et=n(597),tt=n(988),nt=n(2286),at=n(2276),rt=(n(2386),Object(b.b)(function(e,t){return{showLFOs:e.sequencer.showLFOs,showEnvelopes:e.sequencer.showEnvelopes,show:e.spatial.sidebarsShowing,showMoulators:e.spatial.showModulators,viewMode:e.sequencer.viewMode,showSave:e.toolbar.showSaveModal}},function(e){return{setShowEnvelopes:function(t){return e(Object(k.Mf)(t))},setShowLFOs:function(t){return e(Object(k.Sf)(t))},setShowSave:function(t){return e(Object(k.eg)(t))}}})(function(e){var t=e.showSave,n=e.setShowSave,a=Object(_e.a)(e,["showSave","setShowSave"]),s=Object(r.useRef)(),o=Object(r.useCallback)(function(e,t,r){a.sequencerEngine.save(e,t,!0,r),n(!1)},[n,a.sequencerEngine]);Object(r.useEffect)(function(){return window.addEventListener("keydown",i),function(){return window.removeEventListener("keydown",i)}},[a.showLFOs,a.showEnvelopes]);var i=Object(r.useCallback)(function(e){},[a.showLFOs,a.showEnvelopes]);return c.a.createElement("div",{ref:s,className:"top-toolbar"},c.a.createElement("div",{className:"main-row toolbar-row"},c.a.createElement(Qe,a),a.sequencerEngine?a.viewMode===E.a?c.a.createElement(Fe.a,{sequencerEngine:a.sequencerEngine}):c.a.createElement(at.a,{subSequence:a.sequencerEngine.currentSubSequence}):"",a.sequencerEngine&&c.a.createElement($e.a,{sequencerEngine:a.sequencerEngine}),a.sequencerEngine&&c.a.createElement(Ke.a,{sequencerEngine:a.sequencerEngine}),a.sequencerEngine&&c.a.createElement(et.a,{sequencerEngine:a.sequencerEngine}),a.sequencerEngine&&c.a.createElement(Je.a,{sequencerEngine:a.sequencerEngine}),a.sequencerEngine&&c.a.createElement(Ue,{sequencerEngine:a.sequencerEngine}),c.a.createElement("div",{className:"menu-and-transactions"},c.a.createElement(Ge.a,null),a.sequencerEngine&&c.a.createElement(tt.a,{store:a.sequencerEngine.store})),c.a.createElement("div",{onClick:function(){return n(!0)},className:"pushable save-project-button"},"Save"),c.a.createElement(He.a,{sequencerEngine:a.sequencerEngine}),c.a.createElement(nt.a,{sequencerEngine:a.sequencerEngine,onSave:function(e,t,n){return o(e,t,n)},onHide:function(){return n(!1)},show:t})),(a.showLFOs||a.showEnvelopes)&&c.a.createElement("div",{className:a.showLFOs?"overlaying toolbar-row showLFOs":"showEnvelopes overlaying toolbar-row"},c.a.createElement(Ve.a,{scrollContainer:s,sequencerEngine:a.sequencerEngine,envelopesTrack:a.sequencerEngine.envelopesTrack,lfosTrack:a.sequencerEngine.lfosTrack})))})),ct=n(433),st=n(603),ot=(n(2273),n(39)),it=n.n(ot),ut=Object(b.b)(function(e,t){return{currentSubSequence:t.sequencerEngine.currentSubSequence}},function(e){return{}})(function(e){var t=e.sequencerEngine,n=e.currentSubSequence,a=e.style,r=t.subSequences.map(function(e,t){return{label:e.name,value:e.id}});return c.a.createElement("div",{style:a,className:"subsequence-navigator"},c.a.createElement(it.a,{onChange:function(e){return t.switchToSubSequence(e.value)},value:r.find(function(e){return e.value===n.id}),options:r}),c.a.createElement("div",{onClick:function(){return t.newSubSequence()},className:"new-sub-btn"},"+"),c.a.createElement("div",{onClick:function(){return t.deleteSubSequence()},className:"delete-sub-btn"},"-"))}),lt=(n(2239),n(1230)),ft=n(2312),bt=n(1235),dt=n(322),mt=n(44),gt=n(215),Et=Object(b.b)(function(e,t){var n=(e.tracks.trackIsEnabled[t.track.subSequence.id]||{})[t.track.id];return{name:t.track.presetName||t.track.name,enabled:void 0!==n&&n,solo:e.tracks.trackSolos[t.track.id],muted:e.tracks.trackMutes[t.track.id],planeMapping:e.effects.planeMapping,leftSidebarWidth:e.spatial.leftSidebarWidth}},function(e){return{setTrackDragging:function(t){return e(Object(k.Vg)(t))},setShowEditorBottom:function(t){return e(Object(k.Lf)(t))},setSelectedZObject:function(t){return e(Object(k.xf)(t))}}})(function(e){var t=e.track,n=e.setTrackDragging,a=e.selectedZObject,s=e.setSelectedZObject,o=e.enabled,i=e.solo,u=e.muted,l=e.planeMapping,f=e.setShowEditorBottom,b=e.leftSidebarWidth,d=t.sequencerEngine,m=Object(r.useRef)(),g=Object(xe.a)({ref:m,useTop:!1}),E=g.onContextMenu,p=g.dropdownPos,v=g.setDropdownPos;Object(r.useEffect)(function(){p&&t.sequencerEngine.selectTrack(t.trackNumber)},[p,t]);var j=Object(r.useCallback)(function(){f(t.sequencerEngine.state.spatial.showEditorBottom===D.b?void 0:D.b)},[t]),O=Object(r.useCallback)(function(){l&&l.randomlyMapParameters(t),d.selectTrack(t.trackNumber),s(t)},[t,l]),h=Object(Oe.a)(j,250,O),w=Object(r.useCallback)(function(){t.sequencerEngine.deleteTrack(t.trackNumber)},[t]),S=Object(r.useCallback)(function(){t.sequencerEngine.operationManager.dispatch(Object(mt.B)(t,!u))},[u,t]),k=Object(r.useCallback)(function(){t.solo(!i)},[i,t]),q=a===t?"selected track-option":"track-option";l&&(q+=" plane-mapping");var y={};y.maxWidth=100*b/240;var N=t.presetName||t.name||t.getName();return c.a.createElement("div",{ref:m,onContextMenu:E,draggable:!0,onDragOver:function(e){return e.preventDefault()},onDragStart:function(e){e.stopPropagation(),n(t)},onClick:h,className:q},c.a.createElement(bt.a,{dropdownPos:p,setDropdownPos:v,track:t}),c.a.createElement("div",{style:{marginRight:15*b/240,marginLeft:5*b/240},onClick:function(){return b>70?w():0},className:"delete-btn"},b>70?"x":""),c.a.createElement(lt.a,{track:t}),t.instrument?c.a.createElement(ft.a,{track:t}):c.a.createElement(gt.a,{hasInner:!0,track:t}),b>140&&c.a.createElement("div",{style:y,className:"ztrack-name"},Object(dt.a)(N)),b>100&&c.a.createElement("div",{onClick:k,className:i?"solo soloed":"solo"},"S"),b>70&&c.a.createElement("div",{onClick:S,className:u?"mute muted":"mute"},"M"),c.a.createElement("div",{onClick:function(){return t.toggleEnabled()},className:o?"dot enabled track-arm":"dot track-arm"}),c.a.createElement("div",{style:{transform:"translate(".concat(b-8,"px, 0px")},className:"track-tooltip"},c.a.createElement("div",{className:"t-row"},t.instrument?c.a.createElement(ft.a,{track:t}):c.a.createElement(gt.a,{hasInner:!0,track:t}),c.a.createElement("div",{className:"track-number track-name"},t.trackNumber+1),c.a.createElement("div",{className:"track-name"},N)),c.a.createElement("div",{className:"t-tags"},t.sample&&t.sample.tags&&t.sample.tags.map(function(e){return c.a.createElement("span",{className:"t-tag"},e)}))))}),pt=Object(b.b)(function(e,t){var n=t.pad.id;return{_tracks:t.pad.tracks,_tracksLength:t.pad.tracks.length,hidden:e.spatial.hiddenObjects[n],locked:e.spatial.lockedObjects[n]}},function(e){return{setShowPadSequencer:function(t){return e(Object(k.Xf)(t))},setUXLockObject:function(t,n){return e(Object(k.yh)(t,n))},setUXHideObject:function(t,n){return e(Object(k.xh)(t,n))}}})(function(e){var t=e.setShowPadSequencer,n=e.pad,a=e.isSelected,r=e.number,s=e.leftSidebarWidth,o=e.selectedZObject;e.setSelectedZObject,e.hidden,e.locked,e.setUXLockObject,e.setUXHideObject;return c.a.createElement("div",{className:a?"pad-container selected":"pad-container"},c.a.createElement("div",{onClick:function(){return t(n)},className:n===o?"selected zpad":"zpad"},c.a.createElement("img",{className:s<100?"pad-icon object-icon skinny":"pad-icon object-icon",src:"/zpad-light.svg"}),s>100&&(n.name||"Pad "+r)),c.a.createElement("div",{className:"pad-tracks"},n.tracks.filter(function(e){return e}).map(function(e){return c.a.createElement(Et,{selectedZObject:o,track:e})})))}),vt=(n(2313),n(2332),Object(b.b)(function(e,t){var n=t.sequencerEngine&&t.sequencerEngine.currentSubSequence;return n?{pads:n.pads,selectedZObject:e.zobject.selectedZObject,showPadSequencer:e.spatial.showPadSequencer,show:e.spatial.sidebarsShowing,tracks:t.sequencerEngine.tracks&&t.sequencerEngine.tracks.length,leftSidebarWidth:e.spatial.leftSidebarWidth}:{}},function(e){return{setSelectedZObject:function(t){return e(Object(k.xf)(t))},setViewableSubPatches:function(t){return e(Object(k.Hh)(t))},setWindowPosition:function(t,n){return e(Object(k.Nh)(t,n))},setViewableZObjects:function(t){return e(Object(k.Ih)(t))},setLeftSidebarWidth:function(t){return e(Object(k.Zc)(t))}}})(function(e){var t=e.setWindowPosition,n=e.show,s=e.setSelectedZObject,o=e.setViewableSubPatches,i=e.setViewableZObjects,u=e.leftSidebarWidth,l=e.setLeftSidebarWidth,f=e.sequencerEngine,b=e.selectedZObject,d=e.pads,m=e.showPadSequencer,g=Object(r.useState)(!1),E=Object(a.a)(g,2),p=E[0],v=E[1],j=Object(r.useState)(""),O=Object(a.a)(j,2),h=O[0],S=(O[1],Object(r.useState)("Tracks")),k=Object(a.a)(S,2),q=(k[0],k[1]);Object(r.useEffect)(function(){return window.addEventListener("mousemove",y),window.addEventListener("mouseup",N),function(){window.removeEventListener("mousemove",y),window.removeEventListener("mouseup",N)}},[p,v]);var y=Object(r.useCallback)(function(e){p&&l(Math.max(50,Math.min(240,e.pageX)))},[p]),N=Object(r.useCallback)(function(){p&&v(!1)},[p,v]);Object(r.useEffect)(function(){b&&b.getObjectType()===W.c?q("Tracks"):q("Objects")},[q,b]);var C=Object(r.useCallback)(function(e){var n=void 0;if(e.effect&&e.effect.zObjects)n=e.effect.id,o([e.effect]);else if(e.subSequence.zObjects&&e.subSequence.inletObjects){var a=e.state.zobject.viewableZObjects;t(e.window.id,{x:100,y:100}),i([].concat(Object(w.a)(a),[e]))}n&&t(n,0,0),s(e)},[]);Object(Oe.a)(C,250,function(e){return s(e)});if(!n)return"";var P=c.a.createElement("div",{className:"object-explorer"},f&&""===h&&d.map(function(e,t){return c.a.createElement(pt,{isSelected:m===e,leftSidebarWidth:u,number:t+1,selectedZObject:b,pad:e})}));return c.a.createElement("div",{style:{width:u,minWidth:u},className:"sidebar left-sidebar"},c.a.createElement(ut,{style:u<140?{display:"none"}:{},sequencerEngine:f}),c.a.createElement(Fe.a,{sequencerEngine:f}),P,c.a.createElement("div",{onMouseDown:function(){return v(!0)},className:"right-edge"}))})),jt=n(14),Ot=n.n(jt),ht=n(432),wt=(n(51),n(32)),St=function(){var e=Object(z.a)(A.a.mark(function e(t,n){var a;return A.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.map(function(e){return e.uploadAudioBuffer(n)}),t.forEach(function(e){return e.title=e.name}),e.next=4,Promise.all(a);case 4:e.sent,0===n&&wt.a.newSamplesWithMetadata(t,n);case 6:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}(),kt=(n(2387),Object(b.b)(function(e,t){return{userToken:e.sequencer.userToken,samplesToSave:e.samples.samplesToSave,guildId:e.guilds.selectedGuild?e.guilds.selectedGuild.guildId:0}},function(e){return{setShowLogin:function(t){return e(Object(k.Tf)(t))},setUploadingFile:function(t){return e(Object(k.Bh)(t))},setSamplesToSave:function(t){return e(Object(k.Re)(t))},setRecentlyAddedSounds:function(t){return e(Object(k.Ce)(t))}}})(function(e){var t=e.setShowLogin,n=e.userToken,s=e.setRecentlyAddedSounds,o=e.setSamplesToSave,i=e.sequencerEngine,u=e.setUploadingFile,l=e.samplesToSave,f=e.guildId,b=Object(r.useState)(!1),d=Object(a.a)(b,2),m=d[0],g=d[1],E=Object(r.useRef)(void 0),p=Object(r.useState)([]),v=Object(a.a)(p,2),j=v[0],O=v[1],h=Object(r.useState)([]),k=Object(a.a)(h,2),q=(k[0],k[1],Object(r.useState)("")),y=Object(a.a)(q,2),N=y[0],C=y[1],P=Object(r.useRef)(new ht.a(Ot.a.Master.context)),x=Object(r.useState)(void 0),M=Object(a.a)(x,2),T=M[0],L=M[1],D=Object(r.useCallback)(function(e,t){e||(e=l[t]),e&&(P.current.setBuffer(e.audioBuffer),P.current.playSound(0),L(t))},[L,l]);Object(r.useEffect)(function(){return window.addEventListener("keydown",R),function(){return window.removeEventListener("keydown",R)}},[l,L,T,O,j,N]);var R=Object(r.useCallback)(function(e){"Enter"===e.key?A():"ArrowUp"===e.key?D(void 0,Object(S.a)(T-1,l.length)):"ArrowDown"===e.key&&D(void 0,Object(S.a)(T+1,l.length))},[l,L,T,O,j,N]),A=Object(r.useCallback)(function(){O([].concat(Object(w.a)(j),[N])),C("")},[N,j,O,C]);Object(r.useEffect)(function(){l.forEach(function(e){return e.tags=Array.from(new Set([].concat(Object(w.a)(e.tags),Object(w.a)(j))))})},[j,l]);var z=Object(r.useCallback)(function(){if(arguments.length>0&&void 0!==arguments[0]&&arguments[0]||0!==f){u(!0);var e=l;St(l,f).then(function(t){console.log("finished bulk uploading..."),s(e),u(!1)}),o([])}else g(!0)},[f,g,l]),I=Object(ae.a)({ref:E,initialCoords:{x:500,y:300}}),F=(I.setCoords,I.onMouseUp),Z=I.onMouseDown,W=I.coords;return l&&0!==l.length?c.a.createElement("div",{ref:E,className:"samples-to-save",onMouseUp:F,onMouseDown:Z,style:W?{top:W.y,left:W.x}:{}},m&&c.a.createElement("div",{className:"confirmation"},c.a.createElement("div",{className:"confirmation-text"},"Are you sure you want to save this samples publicly? Anyone will be able to see them."),c.a.createElement("div",{className:"buttons"},c.a.createElement("div",{onClick:function(){return z(!0)},className:"save-btn pushable"},"Yes"),c.a.createElement("div",{onClick:function(){return g(!1)},className:"save-btn pushable cancel"},"Cancel"))),c.a.createElement("div",{className:"samples-list"},l.map(function(e,t){return c.a.createElement("div",{onClick:function(){return D(e,t)},className:t===T?"sample-to-save selected":"sample-to-save"},c.a.createElement("div",{className:"sts-name"},e.name),e.tags&&e.tags.map(function(e){return c.a.createElement("div",{className:"sts-tag"},e)}))})),c.a.createElement("div",{className:"tags-editor"},c.a.createElement("div",{className:"tags-container"},j.map(function(e){return c.a.createElement("div",{className:"tag-option"},e)})),c.a.createElement("div",{className:"tag-input-container"},c.a.createElement("input",{placeholder:"Enter tags for these sounds",value:N,onChange:function(e){return C(e.target.value)},className:"tag-input"}),c.a.createElement("div",{onClick:A,className:"add-btn pushable"},"+"))),n?c.a.createElement("div",{className:"buttons"},c.a.createElement(tt.a,{store:i.store}),c.a.createElement("div",{onClick:function(){return z(!1)},className:"save-btn pushable"},"Save ",0===f?"Publicly":" to Guild")):c.a.createElement("div",{className:"buttons"},c.a.createElement("span",{onClick:function(){return t(!0)},className:"pushable show-login-btn"},"Login")," to save these sounds.")):""})),qt=n(1260);n(1032),n(1033),n(1034),n(845),n(1339),n(1008),n(1009),n(1010),n(606),n(1011),n(1012),n(1013),n(1016),n(1350),n(1329),n(848),n(998),n(1014),n(1022),n(1330),n(852),n(993),n(1015),n(1017),n(849),n(1035),t.default=Object(b.b)(function(e,t){return{theme:e.sequencer.wallpaper?"dark":e.sequencer.theme,backgroundColor:e.sequencer.backgroundColor,presentationMode:!1,showPianoRoll:e.sequencer.showPianoRoll,showSearchWindow:e.spatial.showSearchWindow,viewMode:e.sequencer.viewMode,creatingNewPack:e.packs.creatingNewPack,packToEdit:e.packs.packToEdit,fullScreenZObject:e.zobject.fullScreenZObject,wallpaper:e.sequencer.wallpaper,showPadSequencer:e.spatial.showPadSequencer}},function(e){return{setFullScreenZObject:function(t){return e(Object(k.sc)(t))},setSelectedZObject:function(t){return e(Object(k.xf)(t))},setWallpaper:function(t){return e(Object(k.Jh)(t))},setTheme:function(t){return e(Object(k.Ng)(t))},setShowThemeGrid:function(t){return e(Object(k.kg)(t))},setArrangementBottomHeight:function(t){return e(Object(k.C)(t))},setBackgroundColor:function(t){return e(Object(k.bb)(t))}}})(function(e){var t=Object(r.useRef)(void 0),n=Object(r.useRef)(void 0),l=e.sequencerEngine?[void 0,b,void 0]:Object(ct.a)(e),f=Object(a.a)(l,3),b=(f[0],f[1]);f[2];e.sequencerEngine&&(b=e.sequencerEngine);var w=Object(st.a)({sequencerEngine:b});Object(a.a)(w,1)[0];if(Object(O.a)({theme:e.theme,backgroundColor:e.backgroundColor}),Object(r.useEffect)(function(){if(window.isNFT)return!1;var t=s.a.getItem("wallpaper");t&&e.setWallpaper(t),(t=s.a.getItem("theme"))&&e.setTheme(t),(t=s.a.getItem("show-theme-grid"))&&e.setShowThemeGrid(JSON.parse(t)),(t=s.a.getItem("backgroundColor"))&&e.setBackgroundColor(t)},[]),e.fullScreenZObject)return c.a.createElement("div",{ref:t,className:"v3 dark no-select full-screen"},c.a.createElement(p.a,{containerRef:t}),e.showSearchWindow&&c.a.createElement(ue,{sequencerEngine:b,showing:e.showSearchWindow}),c.a.createElement("div",{onClick:function(){return e.setSelectedZObject(void 0)},className:"editor full-screen-editor"},!window.isNFT&&c.a.createElement(d,null),c.a.createElement(u.a,{sequencerEngine:b}),c.a.createElement("img",{className:"pushable expand-icon",onClick:function(){return e.setFullScreenZObject(void 0)},src:"/expand-icon.svg"}),Array.isArray(e.fullScreenZObject)?c.a.createElement("div",{className:"multi-full-screen"},e.fullScreenZObject.map(function(e){return c.a.createElement(v.default,{key:e.id,isMulti:!0,sequencerEngine:b,zObject:e})})):c.a.createElement(v.default,{isMulti:!0,sequencerEngine:b,zObject:e.fullScreenZObject})));var S={},k="v3 no-select dark ";return e.wallpaper&&(S.backgroundImage="url("+m.a.getHashUrl(e.wallpaper)+")",k+=" has-wallpaper"),e.showPadSequencer&&(k+=" showing-pad-sequencer"),"light"===e.theme?k+=" light-theme":k+=" dark-theme",e.presentationMode&&(k+=" presentation-mode"),c.a.createElement("div",{style:S,ref:t,className:k},c.a.createElement(pe.a,{sequencerEngine:b}),c.a.createElement(o.a,null),c.a.createElement(qt.a,null),c.a.createElement(rt,{sequencerEngine:b}),c.a.createElement(u.a,{sequencerEngine:b}),c.a.createElement(p.a,{containerRef:t}),c.a.createElement(kt,{sequencerEngine:b}),b&&c.a.createElement(j.a,{sequencerEngine:b}),e.creatingNewPack||e.packToEdit?c.a.createElement(h.a,{json:e.packToEdit}):"",e.showSearchWindow&&c.a.createElement(ue,{sequencerEngine:b,showing:e.showSearchWindow}),e.showPianoRoll?c.a.createElement(Ee.a,{sequencerEngine:b}):e.viewMode===E.a?c.a.createElement(g.a,{sequencerEngine:b}):e.viewMode===E.e?c.a.createElement(i.a,{sequencerEngine:b}):c.a.createElement("div",{className:"editor-and-sidebars"},c.a.createElement(vt,{sequencerEngine:b}),c.a.createElement(Xe,{editorBottomRef:n,isDocumentation:e.isDocumentation,sequencerEngine:b}),c.a.createElement(ve.a,{sequencerEngine:b}),b&&c.a.createElement(ge,{scrollRef:t,sequencerEngine:b}),b&&c.a.createElement(le.a,{editorBottomRef:n,scrollRef:t,sequencerEngine:b})))})}}]);