(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{2555:function(e,t,n){"use strict";var r=n(3),a=n(4),c=n(7),o=n(11),s=n(1),i=n(0),u=n.n(i),l=n(2693),d=n(12),f=n(44),m=n(2631);n(2797);function p(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=Object(s.a)(e);if(t){var a=Object(s.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(o.a)(this,n)}}var b=function(e){Object(c.a)(n,e);var t=p(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(a.a)(n,[{key:"getContextualHelp",value:function(){var e=this.props.contextualHelp;if(!e)return void 0!==this.props.sequencerEngine?this.props.padMappings&&Object.keys(this.props.padMappings).length>0?u.a.createElement(l.a,{mini:!0,sequencerEngine:this.props.sequencerEngine,keyboardEngine:this.props.sequencerEngine.keyboardEngine}):u.a.createElement(m.a,Object.assign({},this.props,{helper:!0,mini:!0,sequencerEngine:this.props.sequencerEngine,keyboardEngine:this.props.sequencerEngine.keyboardEngine})):"";var t=e.element,n=e.arg,r=f.z[t];if("function"===typeof r&&(r=r(n)),void 0!==r)return Array.isArray(r)||(r=[r]),r.map(function(e,t){return u.a.createElement("div",{key:t,className:0===t?"doc-line":"rest doc-line"},e)});if(t.documentation){var a=t.prettyName||t.name;return Array.isArray(t.documentation)?u.a.createElement("div",null,t.documentation.map(function(e,t){return u.a.createElement("div",{key:t,className:0===t?"doc-line":"rest doc-line"},0===t?a+": "+e:e)})):a+": "+t.documentation}}},{key:"render",value:function(){var e=void 0===this.props.contextualHelp?"contextual-help empty":"contextual-help text";return u.a.createElement("div",{className:e},this.getContextualHelp())}}]),n}(i.Component);t.a=Object(d.b)(function(e){return{contextualHelp:e.sequencer.contextualHelp,padMappings:e.keyboard.padMappings}},null)(b)},2557:function(e,t,n){"use strict";var r=n(3),a=n(4),c="CijdTZuyBVDePURSejQHGgfMsTjgfJSxarjJkWBo",o=n(288),s=function(){function e(){Object(r.a)(this,e),this.titleToLabels={},this.nameToLabelInfo={},this.nameToLabel={},this.idToReleases={}}return Object(a.a)(e,[{key:"getLabels",value:function(e){var t=this;return new Promise(function(n,r){void 0===t.titleToLabels[e]?t.searchYoutubeTitle(e).then(function(r){var a=[];null!==r&&void 0!==r.label||n(a),r.label.map(function(c){return t.getLabelInfo(c,function(c){if(null!==c){var o={id:c.id,name:c.name};"images"in c&&(o.thumbnail=c.images[0].uri),a.push(o),t.titleToLabels[e]=a,a.length==r.label.length&&n(a)}else n(a)})})}).catch(function(e){r(e)}):n(t.titleToLabels[e])})}},{key:"getReleaseInfo",value:function(e){return new Promise(function(t,n){var r="https://api.discogs.com/releases/"+e;o.get(r).then(function(e){if(void 0!==e.data){var n=e.data;t(n)}else t(void 0)})})}},{key:"searchRecords",value:function(e){return new Promise(function(t,n){console.log("searchinng name=",e);var r="https://api.discogs.com/database/search?q="+e.split(/\s/g).join("+")+"&type=release&token="+c;o.get(r).then(function(e){if(void 0!==e.data.results){var n=e.data.results;t(n)}else t([])})})}},{key:"searchLabel",value:function(e,t){var n=this;if(void 0!==this.nameToLabel[e])return t(this.nameToLabel[e]);var r=e,a="https://api.discogs.com/database/search?q="+(r=r.split(/\s/g).join("+"))+"&type=label&token="+c;o.get(a).then(function(r){if(void 0!==r.data.results){var a=r.data.results[0];n.nameToLabel[e]=a,t(a)}})}},{key:"getLabelInfo",value:function(e,t){this.searchLabel(e,function(e){var n="https://api.discogs.com/labels/"+e.id+"?token="+c;o.get(n).then(function(e){t(e.data)}).catch(function(e){t(null)})})}},{key:"getLabelReleases",value:function(e,t){var n=this;return new Promise(function(r,a){if(void 0===n.idToReleases[e+"_"+t]){var s="https://api.discogs.com/labels/"+e+"/releases?token="+c+"&page="+t+"&per_page=8";o.get(s).then(function(a){n.idToReleases[e+"_"+t]=a.data,r(a.data)}).catch(function(e){a(e)})}else r(n.idToReleases[e+"_"+t])})}},{key:"searchYoutubeTitle",value:function(e){return new Promise(function(t,n){var r=function(e,t){var n,r,a=[],e=e||"";function c(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}var o=["Full Album","Full vinyl","LP","[dubstep]","(full album)","[electro]","[edm]","[house music]","[glitch hop]","[video]","[official video]","(official video)","(official music video)","(lyrics)","[ official video ]","[official music video]","[free download]","[free dl]","( 1080p )","(with lyrics)","(high res / official video)","(music video)","[music video]","[hd]","(hd)","[hq]","(hq)","(original mix)","[original mix]","[lyrics]","[free]","[trap]","[monstercat release]","[monstercat freebie]","[monstercat]","[edm.com premeire]","[edm.com exclusive]","[enm release]","[free download!]","[monstercat free release]"];o.forEach(function(t){e=(e=(e=(e=(e=(e=e.replace(t+" - ","").trim()).replace(t.toUpperCase()+" - ","").trim()).replace(t.toLowerCase()+" - ","").trim()).replace(t,"").trim()).replace(t.toUpperCase(),"").trim()).replace(t.toLowerCase(),"").trim()});for(var s=(e=(e=e.replace(/ *\([^)]*\) */g,"").trim()).replace(/ *\[[^)]*\] */g,"").trim()).split(" - "),i=0;i<s.length;i++)o.indexOf(s[i].toLowerCase())>=0&&s.splice(i,1);2==s.length?(n=s[0],r=s[1]):s.length>2?(n=s[0],r=s[1]):(n=s[0],r=s[0]);o.forEach(function(e){r=r.replace(new RegExp(c(e),"i"),"").trim(),n=n.replace(new RegExp(c(e),"i"),"").trim()}),a.push(r.replace(/(.*)\((.*) remix\)/i,"$2").trim()),a.push(r.replace(/(.*) ft\.? (.*)/i,"$1").trim()),a.push(r.replace(/(.*) ft\.? (.*)/i,"$2").trim()),a.push(r.replace(/(.*) feat\.? (.*)/i,"$1").trim()),a.push(r.replace(/(.*) feat\.? (.*)/i,"$2").trim()),a.push(r.replace(/(.*) featuring (.*)/i,"$2").trim()),a.push(r.replace(/(.*) \(ft (.*)\)/i,"$1").trim()),a.push(r.replace(/(.*) \(ft (.*)\)/i,"$2").trim()),a.push(r.replace(/(.*) \(feat\.? (.*)\)/i,"$2").trim()),a.push(r.replace(/(.*) \(featuring (.*)\)/i,"$2").trim()),a.push(n.replace(/(.*) ft\.? (.*)/i,"$1").trim()),a.push(n.replace(/(.*) ft\.? (.*)/i,"$2").trim()),a.push(n.replace(/(.*) feat\.? (.*)/i,"$1").trim()),a.push(n.replace(/(.*) feat\.? (.*)/i,"$2").trim()),a.push(n.replace(/(.*) featuring (.*)/i,"$2").trim()),a.push(n.replace(/(.*) \(ft (.*)\)/i,"$1").trim()),a.push(n.replace(/(.*) \(ft (.*)\)/i,"$2").trim()),a.push(n.replace(/(.*) \(feat\.? (.*)\)/i,"$1").trim()),a.push(n.replace(/(.*) \(featuring (.*)\)/i,"$2").trim()),a.push(n.replace(/(.*) & (.*)/gi,"$1").trim()),a.push(n.replace(/(.*) & (.*)/gi,"$2").trim()),a.push(n.replace(/(.*) vs\.? (.*)/i,"$1").trim()),a.push(n.replace(/(.*) vs\.? (.*)/i,"$2").trim()),a.push(n.replace(/(.*) x (.*)/i,"$1").trim()),a.push(n.replace(/(.*) x (.*)/i,"$2").trim());var u={};return a.forEach(function(e){e!==r&&(u[e]=e)}),{artist:n,title:r,credits:Object.keys(u)}}(e),a=r.artist+" - "+r.title,s="https://api.discogs.com/database/search?q="+(a=a.split(/\s/g).join("+"))+"&token="+c;o.get(s).then(function(e){var n=e.data.results,a=null;for(var c in n)(null==a||n[c].year<a.year)&&n[c].title.includes(r.title)&&(a=n[c]);if(null==a)for(var c in n)return t(n[c]);t(a)}).catch(function(e){n(e)})})}}]),e}();t.a=s},2563:function(e,t,n){"use strict";var r=n(3),a=n(4),c=n(18),o=n(7),s=n(11),i=n(1),u=n(0),l=n.n(u),d=n(45),f=n(12),m=n(131),p=n(9),b=n(44),v=n(205),h=n.n(v),g=(n(75),n(43)),k=n(288),E=n.n(k);function O(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=Object(i.a)(e);if(t){var a=Object(i.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(s.a)(this,n)}}var j=new(n(31).a),S=function(e){Object(o.a)(n,e);var t=O(n);function n(e){var a;Object(r.a)(this,n),(a=t.call(this,e)).state={thumbnail:"",name:e.name,videoId:e.sample.videoId},a.apiKey="AIzaSyCf2k8RM7tFFlVGo4CVPvCsOhx86vWwTT0",a.getYoutubeTitle.bind(Object(c.a)(a)),a.getYoutubeThumbnail.bind(Object(c.a)(a));var o=a.props.sample.videoId;return void 0!==o&&""!==o&&a.getYoutubeThumbnail(o),a.props.coverArt&&a.getDiscogsThumbnail(a.props.coverArt),a.props.sample.coverArtHash&&a.getDiscogsThumbnail(a.props.sample.coverArtHash),a}return Object(a.a)(n,[{key:"shouldComponentUpdate",value:function(e,t){var n=!1;return e.showingWaveform!==this.props.showingWaveform&&(n=!0),e.id!==this.props.id&&(n=!0),e.selectedSampleTag!==this.props.selectedSampleTag&&(n=!0),e.sample.soundId===this.props.sample.soundId&&e.sample.ipfsHash===this.props.sample.ipfsHash||(n=!0),e.name!=this.state.name&&(this.state.name=e.name,n=!0),e.isCompactMode!==this.props.isCompactMode&&(n=!0),e.videoId!==this.props.videoId&&(this.getYoutubeThumbnail(e.videoId),n=!0),e.sample.videoId!==this.state.videoId&&(this.state.videoId=e.sample.videoId,this.getYoutubeThumbnail(this.state.videoId),n=!0),e.coverArt!==this.props.coverArt&&(this.getDiscogsThumbnail(e.coverArt),n=!0),e.sample.coverArtHash!==this.props.sample.coverArtHash&&(this.getDiscogsThumbnail(e.sample.coverArtHash),n=!0),void 0!==e.sample&&void 0!==e.name&&(this.state.name=e.name),t.thumbnail!==this.state.thumbnail&&(n=!0),e.isLoading!==this.props.isLoading&&(n=!0),n}},{key:"getYoutubeTitle",value:function(e){var t=this;if(void 0!==e&&null!==e&&""!==e){var n=e.split("="),r=this;if(n.length>1){var a=n[n.length-1];if(""===a)return this.state.name=this.props.name,void this.setState(this.state);E.a.get("https://www.googleapis.com/youtube/v3/videos?id="+a+"&key="+this.apiKey+"&fields=items(snippet(title))&part=snippet").then(function(e){return r.setState({name:void 0!==e.data.items[0]?t.truncateName(e.data.items[0].snippet.title):"Video deleted"})})}}else this.setState(this.state)}},{key:"getDiscogsThumbnail",value:function(e){this.state.thumbnail=g.a.getHashUrl(e),this.setState(this.state)}},{key:"getYoutubeThumbnail",value:function(e){if(""===e||void 0===e)return this.state.thumbnail="",void this.setState(this.state);var t="https://img.youtube.com/vi/"+e+"/1.jpg",n=this.state;n.thumbnail=t,this.setState(n)}},{key:"onClickTag",value:function(e){e===this.props.selectedSampleTag?this.props.setSelectedSampleTag(this.props.sample.getId(),void 0):this.props.setSelectedSampleTag(this.props.sample.getId(),e)}},{key:"onImgError",value:function(){this.setState({thumbnail:""})}},{key:"getTags",value:function(){return void 0!==this.props.selectedSampleTag?[this.props.selectedSampleTag]:this.props.isCompactMode&&this.props.sample.tags.length>0?[this.props.sample.tags[0]]:this.props.sample.tags}},{key:"truncateName",value:function(e){if(void 0===e||null===e)return null;var t=this.props.isCompactMode?14:y;return(e.length>t?e.substring(0,t)+"...":e).trim()}},{key:"onDragOver",value:function(e){e.stopPropagation()}},{key:"onDragStart",value:function(e){this.props.setSampleDragging(this.props.sample)}},{key:"setContextualHelp",value:function(e,t){e.stopPropagation(e),this.props.setContextualHelp(t)}},{key:"render",value:function(){var e=this,t=this.props.isBig?"big ":"";this.props.showingWaveform&&this.props.track&&(t+=" showing-waveform "),this.props.isCompactMode&&(t+=" compact ");var n={};if(""===this.state.thumbnail)if(this.props.track)n={backgroundColor:j.getColorForTrack(this.props.track)};else{var r=void 0!==this.props.sample.getId()?this.props.sample.getId():void 0!==this.props.name?this.props.name:"other instrument";n={backgroundColor:j.saturate(j.getColorForHash(r),3)}}var a=this.props.contextualHelp||b.Sb;return l.a.createElement("div",{className:"youtube-info"},l.a.createElement("div",null,this.props.showDelete?l.a.createElement("div",{className:"delete-button delete-track-button",onClick:this.props.onClickDelete},"x"):"",""===this.state.thumbnail?l.a.createElement("div",{draggable:!0,onDragStart:function(t){return e.onDragStart(t)},onDragOver:function(t){return e.onDragOver(t)},onMouseOver:function(t){return e.setContextualHelp(t,a)},onMouseLeave:function(){return e.props.setContextualHelp(void 0)},className:t+"sound-thumbnail",style:n,onClick:this.props.onClickThumbnail},l.a.createElement(h.a,{className:"track-loading-spinner",sizeUnit:"px",size:10,color:"white",loading:this.props.isLoading})):l.a.createElement("img",{draggable:!0,onDragStart:function(t){return e.onDragStart(t)},onDragOver:function(t){return e.onDragOver(t)},onMouseOver:function(t){return e.setContextualHelp(t,a)},onMouseLeave:function(){return e.props.setContextualHelp(void 0)},onError:function(){return e.onImgError()},className:this.props.isMuted?t+"muted youtube-thumbnail":t+"youtube-thumbnail",onClick:this.props.onClickThumbnail,src:this.state.thumbnail})),l.a.createElement(d.a,{condition:!this.props.hideName},l.a.createElement("div",{className:"youtube-name"},l.a.createElement("span",{onClick:this.props.onClickName},this.truncateName(this.state.name)))),this.props.children)}}]),n}(u.Component);var y=36;t.a=Object(f.b)(function(e,t){var n=e.tracks.selectedSampleTags[t.sample.getId()],r=t.track;return r&&r.tracks&&r.tracks[0]&&(r=r.tracks[0].track),{id:void 0===r?0:void 0!==r.sample&&void 0!==r.sample.getId()?r.sample.getId():r.presetName||r.getName(),selectedSampleTag:n,isCompactMode:e.sequencer.isCompactMode&&!t.isBig,showingWaveform:e.sequencer.showPianoRoll&&(e.arrangement.bottomMode===m.e||e.arrangement.bottomMode===m.b),isLoading:void 0!==t.track&&!!e.tracks.trackIsLoading[t.track.subSequence.id]&&!0===e.tracks.trackIsLoading[t.track.subSequence.id][t.track.trackNumber]}},function(e,t){return{setSelectedSampleTag:function(t,n){return e(Object(p.xf)(t,n))},setContextualHelp:function(t){return e(Object(p.wb)(t))},setSampleDragging:function(t){return e(Object(p.Pe)(t))}}})(S)},2571:function(e,t,n){"use strict";n(8);var r=n(2),a=n.n(r),c=n(13),o=(n(39),n(63)),s=n(55),i=n(33),u=(n(708),n(1131),n(208));n(29);function l(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return d(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return d(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var c,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,c=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw c}}}}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}n.d(t,"c",function(){return f}),n.d(t,"b",function(){return m}),n.d(t,"d",function(){return p}),n.d(t,"a",function(){return b});(new u.a).contractAddress;var f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50,t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3?arguments[3]:void 0,u=arguments.length>4?arguments[4]:void 0,l=arguments.length>5?arguments[5]:void 0,d=arguments.length>6?arguments[6]:void 0,f=arguments.length>7?arguments[7]:void 0,m=arguments.length>8?arguments[8]:void 0,p=void 0;if(Object(o.a)(t)){var b=parseInt(p);b>1945&&b<2200&&(p=b)}return new Promise(function(){var o=Object(c.a)(a.a.mark(function c(o,b){var v,h,g,k,E,O,j;return a.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(h=(v=d||{}).releaseId,g=v.videoId,0===n){a.next=5;break}a.t0=[n],a.next=8;break;case 5:return a.next=7,i.a.getGuildsWithAccess();case 7:a.t0=a.sent;case 8:return k=a.t0,E=m?m.packHash:void 0,a.next=12,s.a.getAccount();case 12:O=a.sent,j=JSON.stringify({size:Math.floor(e),pack:E,searchTerm:t,guildIds:k,groupBy:r,year:p,start:Math.floor(u),filterFavorites:l,releaseId:h,videoId:g,tag:f,user:O}),fetch("/searchByDay/",{method:"POST",body:j,headers:{Accept:"application/json","Content-Type":"application/json"}}).then(function(e){return e.json()}).then(function(e){e.sort(function(e,t){return t.blockNumber-e.blockNumber}),o(e)});case 15:case"end":return a.stop()}},c)}));return function(e,t){return o.apply(this,arguments)}}())},m=function(e){var t,n=[],r=l(e);try{for(r.s();!(t=r.n()).done;){var a=t.value,c=a.blockNumber,o=n[n.length-1];if(void 0===o)n.push({blockNumber:c,results:[a]});else{var s=o.blockNumber;Math.abs(s-c)<=6425?o.results.push(a):n.push({blockNumber:c,results:[a]})}}}catch(i){r.e(i)}finally{r.f()}return n},p=function(e,t){var n,r=l(e);try{for(r.s();!(n=r.n()).done;){var a,c=n.value,o=c.results,s={},i={},u={},d={},f=l(o);try{for(f.s();!(a=f.n()).done;){var m=a.value;if(m.discogsId)void 0===s[m.coverArtHash]&&(s[m.coverArtHash]=[]),s[m.coverArtHash].push(m);else if(m.videoId)void 0===u[m.videoId]&&(u[m.videoId]=[]),u[m.videoId].push(m);else{var p=m.tags[0]||"";""!==t&&m.tags.some(function(e){return!e.toLowerCase().includes(t.toLowerCase())})&&void 0===(p=m.tags.find(function(e){return!e.toLowerCase().includes(t.toLowerCase())&&"Resampled"!==e}))&&(p=m.tags[0]),void 0===d[p]&&(d[p]=[]),d[p].push(m),m.instrumentType&&(void 0===i[m.instrumentType]&&(i[m.instrumentType]=[]),i[m.instrumentType].push(m))}}}catch(b){f.e(b)}finally{f.f()}c.discogs=s,c.youtube=u,c.unsourced=d,c.instrumentTypes=i}}catch(b){r.e(b)}finally{r.f()}return e},b=function(){var e=Object(c.a)(a.a.mark(function e(t){var n;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(n in t)t[n];return e.abrupt("return",t);case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},2581:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r=n(288),a=n.n(r),c=n(43),o=function(e){return new Promise(function(t,n){a.a.get("http://0.0.0.0:9092/"+e,{responseType:"blob"}).then(function(e){var n=e.data;c.a.addBlob(n).then(function(e){console.log("Downloaded thumb = ",e),t(e)})})})}},2583:function(e,t,n){"use strict";var r=n(3),a=n(4),c=n(7),o=n(11),s=n(1),i=n(0),u=n.n(i),l=n(45),d=n(719),f=n(795),m=n(9),p=n(12),b=n(44);function v(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=Object(s.a)(e);if(t){var a=Object(s.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(o.a)(this,n)}}var h=function(e){Object(c.a)(n,e);var t=v(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(a.a)(n,[{key:"patternLocked",get:function(){return this.props.showLFOs?this.props.lfoPatternLocked:!!this.props.showEnvelopes&&this.props.envelopePatternLocked}},{key:"onClickLFOThumbnail",value:function(){this.props.setShowEnvelopes(!1),this.props.setShowLFOs(!this.props.showLFOs)}},{key:"onClickEnvelopeThumbnail",value:function(){this.props.setShowLFOs(!1),this.props.setShowEnvelopes(!this.props.showEnvelopes)}},{key:"onClickLock",value:function(){this.props.showLFOs?this.props.lfosTrack.togglePatternLocked():this.props.showEnvelopes&&this.props.envelopesTrack.togglePatternLocked()}},{key:"render",value:function(){var e=this,t=this.props.isMixView?"track flex lfos-track mix-view":"track flex lfos-track",n=this.props.showLFOs?"lfo-thumbnail selected":"lfo-thumbnail",r=this.props.showEnvelopes?"lfo-thumbnail selected":"lfo-thumbnail";return u.a.createElement("div",{key:"lfo-tracks",onClick:function(){return[]},className:t},u.a.createElement("a",{name:"lfos"}),u.a.createElement("a",{name:"envelopes"}),u.a.createElement("div",{className:"unselected youtube-container"},u.a.createElement("div",{className:"lfo-envelope-button-container"},u.a.createElement("div",{onMouseOver:function(){return e.props.setContextualHelp(b.M)},onMouseLeave:function(){return e.props.setContextualHelp(void 0)},onClick:function(){return e.onClickLFOThumbnail()},className:n},"LFO"),u.a.createElement("div",{onMouseOver:function(){return e.props.setContextualHelp(b.A)},onMouseLeave:function(){return e.props.setContextualHelp(void 0)},onClick:function(){return e.onClickEnvelopeThumbnail()},className:r},"ENV"))),u.a.createElement(l.a,{condition:this.props.showLFOs},u.a.createElement("div",{className:"lfo-effects-view"},this.props.lfosTrack.lfos.map(function(t){return u.a.createElement(d.a,{key:t.number,sequencerEngine:e.props.sequencerEngine,lfo:t})}))),u.a.createElement(l.a,{condition:this.props.showEnvelopes},u.a.createElement("div",{className:"lfo-effects-view"},this.props.envelopesTrack.envelopes.map(function(t){return u.a.createElement(f.a,{key:t.number,scrollContainer:e.props.scrollContainer,sequencerEngine:e.props.sequencerEngine,envelopeTrack:t})}))),u.a.createElement(l.a,{condition:this.props.showLFOs||this.props.showEnvelopes},u.a.createElement("div",{className:"lock-button-container"},u.a.createElement("img",{onClick:function(){return e.onClickLock()},className:"lock-button",src:this.patternLocked?"/closed-padlock.png":"/opened-padlock.png"}))))}}]),n}(i.Component);t.a=Object(p.b)(function(e,t){var n=(e.tracks.envelopePatternLocks[t.envelopesTrack.subSequence.id]||{})[t.sequencerEngine.currentPattern],r=(e.tracks.lfoPatternLocks[t.lfosTrack.subSequence.id]||{})[t.sequencerEngine.currentPattern];return{showLFOs:e.sequencer.showLFOs,showEnvelopes:e.sequencer.showEnvelopes,lfoPatternLocked:r,envelopePatternLocked:n}},function(e){return{setShowEnvelopes:function(t){return e(Object(m.Rf)(t))},setShowLFOs:function(t){return e(Object(m.Xf)(t))},setContextualHelp:function(t){return e(Object(m.wb)(t))}}})(h)},2597:function(e,t,n){"use strict";var r=n(10),a=n(6),c=n(0),o=n.n(c),s=n(12),i=n(400),u=n(2601),l=n(41),d=n.n(l),f=n(105),m=(n(1495),Object(s.b)(function(e,t){return t.masterChannel?{effects:t.masterChannel.effectsChain.effects}:{effects:t.send.effects}},null)(function(e){var t=Object(c.useState)(void 0),n=Object(a.a)(t,2),r=n[0],s=n[1],i=e.masterChannel||e.send,l=e.masterChannel?e.masterChannel.effectsChain.effects:e.send.effects,m=Object(c.useCallback)(function(t){var n=Object(f.b)(t.value,e.sequencerEngine);return n.enable(!0),n.wetParameter&&n.wetParameter.set(1),i.addEffect(n),s(t.value),!1},[s,e.sequencerEngine,i]);Object(c.useEffect)(function(){r&&s(void 0)},[r,s]);var p=Object(c.useCallback)(function(e,t){i.moveEffectTo(e,t),s({from:e,to:t})},[s,i]);return o.a.createElement("div",{className:"send"},o.a.createElement("div",{className:"name-and-chooser"},o.a.createElement("div",{className:"send-name"},e.name||e.send.name),o.a.createElement(d.a,{className:"send-effects-dropdown",options:Object(f.a)(),value:r,onChange:m,placeholder:"FX"})),l.map(function(e,t){return o.a.createElement(u.a,{key:e.id,moveEffectTo:p,effectNumber:t,effect:e})}))})),p=n(9);t.a=Object(s.b)(function(e,t){return{selectedEffect:e.effects.selectedSendEffect}},function(e,t){return{setSelectedSendEffect:function(t){return e(Object(p.yf)(t))}}})(function(e){var t=Object(c.useState)(e.sequencerEngine.sends.sends),n=Object(a.a)(t,2),s=n[0],u=n[1],l=Object(c.useRef)(void 0),d=Object(c.useCallback)(function(){e.setSelectedSendEffect(void 0)},[]);Object(c.useEffect)(function(){return function(){return e.setSelectedSendEffect(void 0)}},[]);var f="";if(e.selectedEffect){var p=s.find(function(t){return t.effects.indexOf(e.selectedEffect)>-1});if(!p){var b=e.sequencerEngine.channelMixer.masterChannel;b.effectsChain.effects.includes(e.selectedEffect)&&(p=b)}p&&(f=o.a.createElement(i.a,{sequencerEngine:e.sequencerEngine,noSelect:!0,scrollContainer:[e.scrollContainer,l],isDraggable:!1,onDeleteEffect:function(){return d()},effect:e.selectedEffect,send:p}))}var v=Object(c.useCallback)(function(){e.sequencerEngine.sends.createNewSend(),u(Object(r.a)(e.sequencerEngine.sends.sends))},[u]);return o.a.createElement("div",{ref:l,className:"track sends"},o.a.createElement("div",{className:"track-container"},o.a.createElement("div",{className:"track-header"},o.a.createElement("div",{className:"track-name-view"},"Routing")),o.a.createElement("div",{className:"sends-container"},s.filter(function(e){return!e.pad}).map(function(t,n){return o.a.createElement(m,{key:n,sequencerEngine:e.sequencerEngine,send:t})}),o.a.createElement(m,{name:"Mix",sequencerEngine:e.sequencerEngine,masterChannel:e.sequencerEngine.channelMixer.masterChannel}),f,o.a.createElement("div",{onClick:v,className:"new-send-button"},"New Send"))))})},2600:function(e,t,n){"use strict";var r=n(10),a=n(6),c=n(0),o=n.n(c),s=n(12);t.a=Object(s.b)(function(e,t){return{}},function(e){return{}})(function(e){var t=e.setTags,n=e.tags,s=e.placeholder,i=void 0===s?"Type tags":s,u=Object(c.useState)(""),l=Object(a.a)(u,2),d=l[0],f=l[1],m=Object(c.useCallback)(function(e){t(n.filter(function(t){return t!==e}))},[n,t]),p=Object(c.useCallback)(function(e){"Enter"===e.key&&(t([].concat(Object(r.a)(n),[d])),f(""))},[t,n,d]);return o.a.createElement("div",{className:"tags"},n.map(function(e){return o.a.createElement("div",{onClick:function(){return m(e)},className:"tag-option"},e)}),o.a.createElement("input",{placeholder:i,className:"tag-sample-input",onKeyDown:p,value:d,type:"text",onChange:function(e){return f(e.target.value)}}))})},2601:function(e,t,n){"use strict";var r=n(0),a=n.n(r),c=n(1427),o=n(12),s=n(9);n(1495);t.a=Object(o.b)(function(e,t){return{effectDragging:e.sequencer.effectDragging,isSelected:e.effects.selectedSendEffect===t.effect}},function(e,t){return{dragEffect:function(t){return e(Object(s.h)(t))},setSelectedSendEffect:function(t){return e(Object(s.yf)(t))}}})(function(e){var t=Object(r.useCallback)(function(t){e.dragEffect({effectNumber:e.effectNumber})},[e.effectNumber]),n=Object(r.useCallback)(function(t){if(t.stopPropagation(),void 0!==e.effectDragging){var n=e.effectDragging.effectNumber;e.moveEffectTo(n,e.effectNumber)}},[e.effectNumber,e.effectDragging]),o=Object(r.useCallback)(function(t){console.log("setting selected send effect=",e.isSelected?void 0:e.effect),e.setSelectedSendEffect(e.isSelected?void 0:e.effect)},[e.isSelected,e.effect]),s="send-effect";e.isSelected&&(s+=" selected");var i=e.effect.getParameters();return i.length>10&&(i=i.slice(0,10)),a.a.createElement("div",{onClick:o,onDragOver:function(e){e.preventDefault()},onDrop:n,onDragStart:t,draggable:!0,className:s},a.a.createElement("div",{className:"effect-name"},e.effect.name),i.map(function(e){return a.a.createElement(c.a,{key:e.id,parameter:e})}))})},2603:function(e,t,n){"use strict";var r=n(6),a=n(0),c=n.n(a),o=n(1081),s=n(41),i=n.n(s),u=n(297),l=n(31),d=(n(2601),n(105)),f=n(12),m=n(9);new l.a;t.a=Object(f.b)(function(e,t){var n=t.track.id,r=e.mix.selectedGroup,a=e.sequencer.currentSubSequence[t.sequencerEngine.engineId];return{selectedTrack:n,selectedGroup:r,effectsLength:t.track.midiEffects.effects.length,selectedEffect:void 0!==n?e.mix.selectedTrackMidiEffects[a]&&e.mix.selectedTrackMidiEffects[a][n]:void 0,currentSubSequence:e.sequencer.currentSubSequence[t.sequencerEngine.engineId]}},function(e,t){return{setSelectedEffect:function(t,n,r,a){return e(Object(m.lf)(t,n,r,"MIDI_FX",a))}}})(function(e){var t=e.currentSubSequence,n=e.track,s=e.sequencerEngine,l=e.selectedEffect,f=e.setSelectedEffect,m=Object(a.useState)(void 0),p=Object(r.a)(m,2),b=p[0],v=p[1],h=n?n.midiEffects.effects:[],g=Object(a.useCallback)(function(e,t){n.moveMidiEffectTo(e,t),v({from:e,to:t})},[n,v]),k=Object(a.useCallback)(function(){f(t,n.id,void 0,void 0)},[t,n]),E="";l&&h.some(function(e){return e.id===l.id})&&(E=c.a.createElement(u.a,{sequencerEngine:s,isDraggable:!1,track:n,compact:!0,noSelect:!0,onDeleteEffect:function(){return k()},effect:l,send:void 0}));var O=Object(a.useCallback)(function(e){var r=Object(d.c)(e.value,n);return n.midiEffects.addEffect(r),f(t,n.id,void 0,r),v(e.value),!1},[v,s,n]);Object(a.useEffect)(function(){b&&v(void 0)},[b,v]);return console.log("SELECTED EFFECT =",l),c.a.createElement("div",{className:"audio-effects"},c.a.createElement(i.a,{className:"send-effects-dropdown",options:d.e,value:b,onChange:O,placeholder:"MIDI FX"}),c.a.createElement("div",{style:{},className:"effects-channel-strip"},c.a.createElement("div",{className:"effects-list"},h.map(function(e,t){return c.a.createElement(o.a,{key:e.id,track:n,currentSubSequence:n,effectType:"MIDI_FX",moveEffectTo:g,effectNumber:t,effect:e})}))),l&&c.a.createElement("div",{className:"effects-view"},E))})},2625:function(e,t,n){"use strict";var r=n(3),a=n(4),c=n(18),o=n(7),s=n(11),i=n(1),u=n(0),l=n.n(u),d=n(1141),f=n(2684),m=n(131),p=(n(2771),n(2685)),b=(n(2626),n(1492),n(2777)),v=n(6),h=n(43),g=n(12),k=["A","B","C","D","E","F","G"],E=Object(g.b)(function(e,t){return{}},function(e){return{}})(function(e){var t=e.project,n=e.sequencerEngine,r=Object(u.useState)(void 0),a=Object(v.a)(r,2),c=a[0],o=a[1],s=Object(u.useState)([]),i=Object(v.a)(s,2),d=i[0],f=i[1],m=Object(u.useState)(void 0),p=Object(v.a)(m,2),b=p[0];p[1];Object(u.useEffect)(function(){h.a.getJson(t.newSequence).then(o)},[o]);var g=Object(u.useCallback)(function(e){n.loadSequence(t.newSequence,e)},[t]);return Object(u.useEffect)(function(){c&&f(c.subSequences)},[c,f]),l.a.createElement("div",{className:"module-option"},l.a.createElement("div",{className:"basic"},l.a.createElement("div",{className:"project-name"},t.title),l.a.createElement("div",{className:"module-types"},d.map(function(e,t){return l.a.createElement("div",{onClick:function(){return g(t)},className:"module-name"},k[t])}))),void 0!==b&&l.a.createElement("div",{className:"expansion"}))}),O=(n(2822),n(402)),j=n(967),S=(Object(g.b)(function(e,t){return{}},function(e){return{}})(function(e){var t=Object(u.useState)(!1),n=Object(v.a)(t,2),r=n[0],a=n[1],c=Object(u.useState)(""),o=Object(v.a)(c,2),s=o[0],i=o[1],d=Object(u.useState)([]),f=Object(v.a)(d,2),m=f[0],p=f[1],b=Object(u.useRef)(void 0),h=Object(O.a)(b,16,!0,s).size;return Object(u.useEffect)(function(){r&&Object(j.a)(s).then(p)},[r,p,s]),r?l.a.createElement("div",{className:"module-loader"},l.a.createElement("input",{type:"text",placeholder:"Search for modules",value:s,onChange:function(e){return i(e.target.value)}}),l.a.createElement("div",{ref:b,className:"module-list"},m.filter(function(e){return 0===e.guildId}).slice(0,h).map(function(t){return l.a.createElement(E,{key:t.newSequence,sequencerEngine:e.sequencerEngine,project:t})}))):l.a.createElement("div",null,l.a.createElement("div",{onClick:function(){return e.sequencerEngine.newSubSequence()},className:"needs-click module-loader new-module"},l.a.createElement("div",{className:"click-me"},"New Module")),l.a.createElement("div",{onClick:function(){return a(!0)},className:"needs-click module-loader"},l.a.createElement("div",{className:"click-me"},"Click to load modules")))}),n(1434)),y=(n(2780),Object(g.b)(function(e,t){return{modulesCollapsed:e.pads.modulesCollapsed}},function(e){return{}})(function(e){var t=e.scale,n=e.setScale,r=e.sequencerEngine,a=Object(u.useRef)(a);Object(u.useEffect)(function(){return a.current.addEventListener("mousewheel",c),function(){return a.current.removeEventListener("mousewheel",c)}},[n,t]);var c=Object(u.useCallback)(function(e){var r=e.deltaX,a=e.deltaY,c=(e.wheelDeltaX,e.wheelDeltaY);if(e.ctrlKey&&(Math.abs(c)>80||Math.abs(c)>40&&Math.abs(r)<20&&Math.abs(a)<20)){e.preventDefault();var o=1;o=c>0?t*c/115:Math.abs(t/(c/115)),window._scale=Math.max(.3,Math.min(1,o)),n(Math.max(.3,Math.min(1,o)))}},[n,t]),o={};return 1!==t&&(o.transform="scale("+t+")"),l.a.createElement("div",{ref:a,className:"grids-box"},l.a.createElement("div",{style:o,className:"grids-container"},r.subSequences.map(function(e){return l.a.createElement(b.a,{key:e.id,scale:t,showEffects:!0,subSequence:e,sequencerEngine:r})})),l.a.createElement(S.a,{sequencerEngine:r}))}),n(2597)),w=n(2772),C=n(8),N=Object(g.b)(function(e,t){return{}},function(e){return{}})(function(e){return l.a.createElement("div",null)}),q=n(1179),x=n(2555),T=(n(2631),n(1081)),M=n(41),P=n.n(M),R=n(400),D=n(31),A=(n(2601),n(105)),I=n(9),z=new D.a,L=Object(g.b)(function(e,t){var n=void 0===e.mix.selectedGroup?e.mix.selectedTrack:void 0,r=e.mix.selectedGroup,a=e.sequencer.currentSubSequence[t.sequencerEngine.engineId];return{selectedTrack:n,selectedGroup:r,selectedEffect:void 0!==n?e.mix.selectedTrackEffects[a]&&e.mix.selectedTrackEffects[a][n]:e.mix.selectedGroupEffects[a]&&e.mix.selectedGroupEffects[a][r],currentSubSequence:e.sequencer.currentSubSequence[t.sequencerEngine.engineId]}},function(e,t){return{setSelectedEffect:function(t,n,r,a){return e(Object(I.lf)(t,n,r,"AUDIO_FX",a))}}})(function(e){var t=e.currentSubSequence,n=e.selectedTrack,r=e.selectedGroup,a=e.sequencerEngine,c=e.selectedEffect,o=e.setSelectedEffect,s=Object(u.useState)(void 0),i=Object(v.a)(s,2),d=(i[0],i[1]),f=void 0;void 0!==n?f=a.tracks[n]:void 0!==r&&(f=a.groups.groups[r]);var m=a.tracks[n],p=a.groups.groups[r],b=f?f.effects:[],h=Object(u.useCallback)(function(e,t){f.moveEffectTo(e,t),d({from:e,to:t})},[f,d]),g=Object(u.useCallback)(function(){o(t,n,r,void 0)},[t,n,r]),k="";c&&b.some(function(e){return e.id===c.id})&&(k=l.a.createElement(R.a,{sequencerEngine:a,track:a.tracks[n],group:a.groups.groups[r],compact:!0,onDeleteEffect:function(){return g()},effect:c,send:void 0}));var E=Object(u.useCallback)(function(e){var t=Object(A.b)(e.value,a);return t.enable(!0),t.wetParameter&&t.wetParameter.set(1),f.effectsChain.addEffect(t),d(e.value),!1},[d,a,f]);m?m.presetName||m.getName():p&&p.groupNumber;var O={backgroundColor:m?z.getColorForTrack(m):p?z.getColorForTrack(p.tracks[0]):"black"};return l.a.createElement("div",{className:"audio-effects"},l.a.createElement("div",{style:O,className:"effects-channel-strip"},l.a.createElement(P.a,{className:"send-effects-dropdown",options:A.a,onChange:E,placeholder:"Audio FX"}),l.a.createElement("div",{className:"effects-list"},b.map(function(e,a){return l.a.createElement(T.a,{key:e.id,track:n,group:r,currentSubSequence:t,effectType:"AUDIO_FX",moveEffectTo:h,effectNumber:a,effect:e})}))),k)}),H=n(2603),F=new D.a,B=(Object(g.b)(function(e,t){var n=void 0===e.mix.selectedGroup?e.mix.selectedTrack:void 0;return Object(C.a)({selectedGroup:e.mix.selectedGroup,selectedTrack:n},e.tracks.groupTracks)},function(e){return{}})(function(e){var t=e.sequencerEngine,n=e.selectedGroup,r=e.selectedTrack,a=Object(u.useState)(1),c=Object(v.a)(a,2),o=c[0],s=c[1];if(!(t.tracks.length>0))return l.a.createElement("div",{className:"mix-effects-pane"});var i=t.tracks[r],d=t.groups.groups.find(function(e){return e.groupNumber===n}),f={backgroundColor:i?F.getColorForTrack(i):d?F.getColorForTrack(d.tracks[0]):"black"},m="";i?m=i.presetName||i.getName():d&&(m="Group "+(d.groupNumber+1));return l.a.createElement("div",{className:"mix-effects-pane"},l.a.createElement("div",{style:f,className:"mix-effects-header"},l.a.createElement("div",{className:"element-name"},m),l.a.createElement(N,{setOption:s,option:o}),i?l.a.createElement(q.a,{track:i}):""),l.a.createElement("div",{style:{},className:"mix-effects-inner"},void 0!==n?"":l.a.createElement(H.a,{sequencerEngine:t}),l.a.createElement(L,{sequencerEngine:t}),l.a.createElement(x.a,{sequencerEngine:t})))}),n(962));function U(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=Object(i.a)(e);if(t){var a=Object(i.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(s.a)(this,n)}}var G=function(e){Object(o.a)(n,e);var t=U(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(a.a)(n,[{key:"onClick",value:function(e,t){this.props.setMixViewMode(e),void 0!==t&&this.props.sequencerEngine.switchToSubSequence(t)}},{key:"render",value:function(){var e=this,t=this.props.sequencerEngine.subSequences.map(function(e){return e.id});return l.a.createElement("div",{className:"mix-tab"},t.map(function(t){return l.a.createElement(V,{key:t,onClick:function(){return e.onClick(B.i,t)},isCurrent:e.props.currentSubSequence===t,selected:e.props.mixViewMode===B.i&&e.props.currentSubSequence===t,name:e.props.sequencerEngine.getSubSequenceName(t)})}))}}]),n}(l.a.Component);function V(e){var t="mix-tab-option";return e.selected&&(t+=" selected"),e.isCurrent&&(t+=" current"),l.a.createElement("div",{onClick:e.onClick,className:t},e.name)}var W=Object(g.b)(function(e,t){return{currentSubSequence:e.sequencer.currentSubSequence[t.sequencerEngine.engineId],mixViewMode:e.mix.mixViewMode}},function(e){return{setMixViewMode:function(t){return e(Object(I.vd)(t))}}})(G),Z=(n(976),n(971)),X=n(60),K=n(68),Y=n(333),_=n(45),$=new D.a,J=$.getColor(1),Q=new Set(["clap","tom","toms","clave","perc","snare","kick","hi-hat","rim","side-stick","breaks","sub","ride","piano","violin"]);var ee=Object(g.b)(function(e,t){return{muted:t.track.muted}},null)(function(e){var t=Object(u.useState)(0),n=Object(v.a)(t,2),r=n[0],a=n[1],c=Object(u.useState)(0),o=Object(v.a)(c,2),s=o[0],i=o[1],d=Object(u.useState)({}),f=Object(v.a)(d,2),m=f[0],p=f[1],b=Object(u.useState)({}),h=Object(v.a)(b,2),g=h[0],k=h[1],E=Object(u.useCallback)(function(){e.track.mute(!e.track.muted)},[e.track]),O=Object(u.useCallback)(function(t){t.trackNumber===e.track.trackNumber&&setTimeout(function(){a((new Date).getTime()+t.duration+50);var e=1-t.sliceStartTime/t.sliceDuration,n=Object(C.a)({},g);n.borderBottomColor=$.brighten(J,e),k(n),setTimeout(j,1e3*t.duration)},t.time)},[e.track,e.currentSubSequenceId,g]),j=Object(u.useCallback)(function(t){void 0!==t&&t.trackNumber!==e.track.trackNumber||i((new Date).getTime())},[e.track]),S=function(){window.removeEventListener(Y.d,O),window.removeEventListener(Y.c,j)};Object(u.useEffect)(function(){return window.addEventListener(Y.d,O),window.addEventListener(Y.c,j),S},[]);var y=e.track.sample,w=void 0===y?void 0:y.getThumbnail();Object(u.useEffect)(function(){var t={},n=void 0;if(void 0===w||""===w){var r=y&&void 0!==y.getId()?y.getId():e.track.getName();n=$.getColorForHash(r),t.backgroundColor=n}e.muted?t.opacity=.2:t.opacity=1,p(t)},[e.track,e.muted]);var N="track-visualizer";r>s&&(N+=" triggering");var q=e.track,x=void 0;if(y&&y.tags&&((x=y.tags.find(function(e){return Q.has(e)}))||(x=y.tags[0])),q&&q.getInstrumentType()==K.f&&(x="Synth"),q&&q.getInstrumentType()===K.h){var T=q.instrument.getSamples();T[0]&&(x=T[0].tags.find(function(e){return Q.has(e)}))}var M="";return q&&q.getTrackType()===X.e&&(M=l.a.createElement(Z.a,{track:q}),N+=" is-multi "),l.a.createElement("div",{onClick:function(){return E()},style:Object(C.a)({},m,g),className:N},l.a.createElement(_.a,{condition:void 0!==w},l.a.createElement("img",{src:w})),!w&&x?l.a.createElement("span",{className:"inner-text"},x):"",M)});Object(g.b)(function(e,t){return{currentSubSequence:e.sequencer.currentSubSequence[t.sequencerEngine.engineId]}},null)(function(e){var t=e.sequencerEngine.tracks;return l.a.createElement("div",{className:"tracks-visualizer"},t.map(function(t){return l.a.createElement(ee,{currentSubSequenceId:e.currentSubSequence,track:t})}))}),n(2697);function te(e,t){var n=Array.from(e).filter(function(e){return t.has(e)});return new Set(n)}function ne(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=Object(i.a)(e);if(t){var a=Object(i.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(s.a)(this,n)}}var re=function(e){Object(o.a)(n,e);var t=ne(n);function n(e){var a;return Object(r.a)(this,n),(a=t.call(this,e)).state={},a}return Object(a.a)(n,[{key:"isToggled",value:function(){return this.props.track.isEnabled}},{key:"onToggleClicked",value:function(){this.props.track.toggleEnabled(),this.setState(this.state)}},{key:"render",value:function(){var e=this;return l.a.createElement("div",{onClick:function(){return e.onToggleClicked()},className:this.isToggled()?"toggled track-toggle-button":"track-toggle-button"})}}]),n}(u.Component);function ae(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=Object(i.a)(e);if(t){var a=Object(i.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(s.a)(this,n)}}var ce=function(e){Object(o.a)(n,e);var t=ae(n);function n(e){var a;return Object(r.a)(this,n),(a=t.call(this,e)).state={},a}return Object(a.a)(n,[{key:"onMuteClicked",value:function(){this.props.track.mute(!this.props.muted),this.setState(this.state)}},{key:"render",value:function(){var e=this;return l.a.createElement("div",{onClick:function(){return e.onMuteClicked()},className:this.props.muted?"muted track-mute-button":"track-mute-button"})}}]),n}(u.Component),oe=Object(g.b)(function(e,t){return{muted:e.tracks.trackMutes[t.track.trackNumber]}},null)(ce);function se(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=Object(i.a)(e);if(t){var a=Object(i.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(s.a)(this,n)}}var ie=function(e){Object(o.a)(n,e);var t=se(n);function n(e){var a;return Object(r.a)(this,n),(a=t.call(this,e)).state={},a}return Object(a.a)(n,[{key:"isGroupMuted",value:function(){return this.props.group.muted}},{key:"onGroupMuteClicked",value:function(){this.props.group.mute(!this.props.group.muted),this.setState(this.state)}},{key:"onTrackMuteClicked",value:function(){var e=this.props.group.tracks[0];e.mute(!e.muted),this.setState(this.state)}},{key:"isTrackMuted",value:function(){return this.props.group.tracks[0].muted}},{key:"render",value:function(){var e=this;return 1==this.props.group.tracks.length?l.a.createElement("div",{className:"group-top-buttons"},l.a.createElement("div",{className:"toggle-buttons-container"},l.a.createElement(re,{track:this.props.group.tracks[0]})),l.a.createElement("div",{onClick:function(){return e.onTrackMuteClicked()},className:this.props.muted?"muted group-mute-button":"group-mute-button"})):l.a.createElement("div",{className:"group-top-buttons"},l.a.createElement("div",{onClick:function(){return e.onGroupMuteClicked()},className:this.props.muted?"muted small-group-mute-button":"small-group-mute-button"}),l.a.createElement("div",{className:"toggle-buttons-container"},this.props.group.tracks.map(function(e){return l.a.createElement(re,{track:e})})),l.a.createElement("div",{className:"track-mute-buttons-container"},this.props.group.tracks.map(function(e){return l.a.createElement(oe,{track:e})})))}}]),n}(u.Component),ue=Object(g.b)(function(e,t){var n=e.tracks.groupMutes[t.group.groupNumber];return 1==t.group.tracks.length&&(n=e.tracks.trackMutes[t.group.tracks[0].trackNumber]),{muted:n}},null)(ie),le=n(1142);function de(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=Object(i.a)(e);if(t){var a=Object(i.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(s.a)(this,n)}}var fe=0,me=new D.a,pe=new Set(["hi-hat","kick","snare","clap","crash","ride","breaks","tom"]);var be=function(e){Object(o.a)(n,e);var t=de(n);function n(e){var a;return Object(r.a)(this,n),(a=t.call(this,e)).state={height:0},a}return Object(a.a)(n,[{key:"thumbnail",get:function(){var e=this.props.track.sample;if(void 0!==e)return e.getThumbnail()}},{key:"shouldComponentUpdate",value:function(e,t){return this.state.height!==t.height||(this.props.selectedTrack!==e.selectedTrack||(this.props.renders!==e.renders||this.props.track!==e.track))}},{key:"componentDidMount",value:function(){var e=this;this.timer=setInterval(function(){e.setState({height:Math.min(60+e.props.track.trackMeter.getLevel(),100)})},100)}},{key:"componentWillUnmount",value:function(){clearInterval(this.timer)}},{key:"onDragOver",value:function(e){e.preventDefault()}},{key:"onDragStart",value:function(e){this.props.onDraggingTrack(this.props.track)}},{key:"onDrop",value:function(e,t){void 0!==this.props.trackDragging&&this.props.trackDragging.group!==this.props.group&&(this.props.groups.addToGroup(this.props.trackDragging,this.props.group),this.props.onGroupsChanged())}},{key:"getNameToShow",value:function(){if(void 0!==this.props.track.sample){var e=this.props.track.sample.tags.filter(function(e){return pe.has(e)})[0];if(e)return e}return Object(le.a)(this.props.track.getName())}},{key:"render",value:function(){var e=this,t={height:this.state.height},n={},r=void 0;if(void 0===this.thumbnail||""===this.thumbnail){var a=this.props.track.sample&&void 0!==this.props.track.sample.getId()?this.props.track.sample.getId():this.props.track.getName();r=me.getColorForHash(a),n.backgroundColor=r}var c=void 0!==this.props.selectedTrack&&this.props.selectedTrack!==this.props.track.trackNumber;c&&this.props.isSelectedGroup&&(n.opacity=.5);var o=this.props.selectedTrack===this.props.track.trackNumber,s=t;s["background-color"]="hsl("+240*(fe+=5)/512+",100%,50%)";var i={};r&&(i.backgroundColor=me.brighten(r,1.2));var u=this.getNameToShow();return 3===this.props.numParts?u=u.slice(0,2):this.props.numParts>3&&(u=u.slice(0,1)),l.a.createElement("div",{onDragStart:function(t){return e.onDragStart(t)},onDragOver:function(t){return e.onDragOver(t)},onDrop:function(t){e.onDrop(t)},draggable:!0,style:n,className:o?"thumbnail-part-container selected-track":c?"thumbnail-part-container":"thumbnail-part-container selected",onClick:function(){return e.props.onClickTrack(e.props.track)}},l.a.createElement("div",{style:s,className:c?"blank-thumbnail thumbnail-part unselected":"blank-thumbnail thumbnail-part"},void 0!==this.thumbnail?l.a.createElement("img",{onError:function(){return e.setState({thumbnail:void 0})},src:this.thumbnail,className:c?"draggable droppable thumbnail-part unselected":"draggable droppable thumbnail-part"}):""),void 0===this.thumbnail?l.a.createElement("div",{style:i,className:"group-part-name"},u):"")}}]),n}(u.Component);function ve(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=Object(i.a)(e);if(t){var a=Object(i.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(s.a)(this,n)}}var he=function(e){Object(o.a)(n,e);var t=ve(n);function n(e){return Object(r.a)(this,n),t.call(this,e)}return Object(a.a)(n,[{key:"onClickTrack",value:function(e){this.props.selectedTrack===e.trackNumber&&this.props.group.tracks.length>1?this.props.onSelectTrack(void 0):this.props.onSelectTrack(e)}},{key:"render",value:function(){var e=this,t=this.props.group,n=t.tracks.length,r=B.j/n;return l.a.createElement("div",null,l.a.createElement(ue,{partWidth:r,group:t}),l.a.createElement("div",{className:"group-thumbnail"},t.tracks.map(function(n){return l.a.createElement(be,{key:"group-thumbnail-track-"+n.trackNumber,onDraggingTrack:e.props.onDraggingTrack,trackDragging:e.props.trackDragging,onGroupsChanged:e.props.onGroupsChanged,renders:e.props.renders,groups:e.props.groups,onClickTrack:function(t){return e.onClickTrack(t)},numParts:t.tracks.length,isSelectedGroup:e.props.isSelectedGroup,selectedTrack:e.props.selectedTrack,track:n,partWidth:r,group:t})})))}}]),n}(u.Component),ge=n(2645),ke=n(109),Ee=n.n(ke),Oe=n(75);function je(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=Object(i.a)(e);if(t){var a=Object(i.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(s.a)(this,n)}}var Se=function(e){Object(o.a)(n,e);var t=je(n);function n(e){var a;return Object(r.a)(this,n),(a=t.call(this,e)).state={groups:e.groups},a.state={volume:a.getVolume(),pattern:e.pattern},a}return Object(a.a)(n,[{key:"selectedTrack",get:function(){return this.props.sequencerEngine.tracks[this.props.selectedTrack]}},{key:"isSelectedGroup",value:function(){return this.props.group.tracks.indexOf(this.selectedTrack)>-1||this.props.group===this.props.selectedGroup}},{key:"getSelectedTrackInGroup",value:function(){return 1==this.props.group.tracks.length?this.props.group.tracks[0]:this.props.group.tracks.indexOf(this.selectedTrack)>-1?this.selectedTrack:void 0}},{key:"shouldComponentUpdate",value:function(e,t){return this.state.pattern!=e.pattern?(this.state.pattern=e.pattern,!0):this.props.isSelected!==e.isSelected||this.props.group!==e.group||this.props.renders!==e.renders||this.props.trackDragging!==e.trackDragging||this.props.selectedTrack!==e.selectedTrack||this.state.selectedGroup!==e.selectedGroup||e.volume!=this.getVolume()}},{key:"getVolume",value:function(){var e=this.getSelectedTrackInGroup();return 1==this.props.group.tracks.length?this.props.group.tracks[0].getVolume()-15:void 0===e?this.props.group.volume:e.getVolume()-15}},{key:"onSelectTrack",value:function(e){void 0!==e?(this.props.cursor.track=e.trackNumber,this.props.sequencerEngine.selectTrack(e.trackNumber)):this.props.setSelectedTrack(void 0),this.props.setSelectedGroup(this.props.group)}},{key:"onChangeVolume",value:function(e){var t=this.getSelectedTrackInGroup();1!=this.props.group.tracks.length&&void 0===t?(this.onSelectTrack(void 0),this.props.setSelectedGroup(this.props.group),this.props.group.setVolume(e)):(t.setVolume(e),this.onSelectTrack(t)),this.setState({volume:e})}},{key:"getTags",value:function(){var e=[],t=this.getSelectedTrackInGroup();return(e=void 0===t?[]:void 0!==t.sample?function(e){var t=[];for(var n in e){var r=e[n];for(var a in e){var c=e[a];if(c!==r&&te(new Set(r.split(" ")),new Set(c.split(" "))).size>1){t.push(r);break}}}for(var o in e=new Set(e),t)e.delete(t[o]);return Array.from(e)}(t.sample.tags):[t.getName()]).length>6&&e.splice(0,6),e}},{key:"render",value:function(){var e=this;return l.a.createElement("div",{className:this.isSelectedGroup()?"group selected with-tracks":"group with-tracks"},l.a.createElement("div",{className:"volume-slider-container"},l.a.createElement(Ee.a,{handle:"square",value:this.props.volume,change:function(t){return e.onChangeVolume(t.target.value)},step:.1,max:6,min:-40,orientation:"vertical",reversed:!0})),this.props.channelMixer.stereoConnected?"":l.a.createElement(ge.a,{channel:this.props.group}),l.a.createElement(he,{onDraggingTrack:this.props.onDraggingTrack,trackDragging:this.props.trackDragging,renders:this.props.renders,groups:this.props.groups,onGroupsChanged:this.props.onGroupsChanged,isSelectedGroup:this.isSelectedGroup(),selectedTrack:this.props.selectedTrack,onSelectTrack:function(t){return e.onSelectTrack(t)},group:this.props.group}),l.a.createElement("div",{className:"tags-container"},this.getTags().map(function(e){return l.a.createElement(Oe.a,{size:"sm",color:"dark"},e)})))}}]),n}(u.Component),ye=Object(g.b)(function(e,t){var n=void 0,r=t.sequencerEngine.tracks[e.mix.selectedTrack];1==t.group.tracks.length?n=t.group.tracks[0].trackNumber:t.group.tracks.indexOf(r)>-1&&(n=e.mix.selectedTrack);return{volume:1==t.group.tracks.length?t.group.tracks[0].getVolume():void 0===n?e.tracks.groupVolumes[t.group.groupNumber]:e.tracks.trackVolumes[n],selectedGroup:e.mix.selectedGroup,selectedTrack:e.mix.selectedTrack}},function(e){return{setSelectedTrack:function(t){return e(Object(I.Af)(t))},setSelectedGroup:function(t){return e(Object(I.hf)(t))}}})(Se);function we(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=Object(i.a)(e);if(t){var a=Object(i.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(s.a)(this,n)}}var Ce=function(e){Object(o.a)(n,e);var t=we(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(a.a)(n,[{key:"onDragOver",value:function(e){e.preventDefault()}},{key:"onDrop",value:function(e){void 0!==this.props.trackDragging&&this.props.trackDragging.group!==this.props.group&&(this.props.groups.newGroup(this.props.trackDragging),this.props.onGroupsChanged())}},{key:"render",value:function(){var e=this;return l.a.createElement("div",{className:"group"},l.a.createElement("div",{onDragOver:function(t){return e.onDragOver(t)},onDrop:function(t){e.onDrop(t)},draggable:!0,className:"new-group-box"},"NEW GROUP"))}}]),n}(u.Component);function Ne(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=Object(i.a)(e);if(t){var a=Object(i.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(s.a)(this,n)}}u.Component;function qe(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=Object(i.a)(e);if(t){var a=Object(i.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(s.a)(this,n)}}var xe=function(e){Object(o.a)(n,e);var t=qe(n);function n(e){var a;return Object(r.a)(this,n),(a=t.call(this,e)).state={minSelected:!1,maxSelected:!1,isMouseDown:!1},a}return Object(a.a)(n,[{key:"onMouseDown",value:function(){}},{key:"onMouseUp",value:function(){this.props.setParametersToRecord([])}},{key:"getEffectsTrackIf",value:function(e){var t=this.props.sequencerEngine.sends.sends;return e===B.e?this.props.selectedTrack:e==B.c&&-1==t.indexOf(this.props.selectedGroup)?this.props.selectedGroup:e==B.d&&t.indexOf(this.props.selectedGroup)>-1?this.props.selectedGroup:void 0}},{key:"getParameterLocks",value:function(){return void 0===this.props.sequencerEngine.parameterLocks[this.props.id]?[]:this.props.sequencerEngine.parameterLocks[this.props.id].parameterLocks}},{key:"onChange",value:function(e){if(this.state.minSelected)void 0!==this.state.selectedParameter&&(this.state.selectedParameter.min=this.state.selectedParameter.normalizeOriginal(e),this.state.selectedParameter.set(this.state.selectedParameter.min),this.props.setMultiParameterSliderValue(this.props.id,e));else if(this.state.maxSelected)void 0!==this.state.selectedParameter&&(this.state.selectedParameter.max=this.state.selectedParameter.normalizeOriginal(e),this.state.selectedParameter.set(this.state.selectedParameter.max),this.props.setMultiParameterSliderValue(this.props.id,e));else{var t=this.getParameterLocks().map(function(e){return e.parameter});t.forEach(function(t){return t.normalizedSet(e)}),this.props.setMultiParameterSliderValue(this.props.id,e),this.props.setParametersToRecord(t)}}},{key:"onAdd",value:function(){if(void 0!==this.props.selectedParameter){var e=void 0!==this.getEffectsTrackIf(B.c)?this.getEffectsTrackIf(B.c).groupNumber:void 0,t=void 0!==this.getEffectsTrackIf(B.e)?this.getEffectsTrackIf(B.e).trackNumber:void 0,n=void 0!==this.getEffectsTrackIf(B.d)?this.getEffectsTrackIf(B.d).sendNumber:void 0,r=this.props.selectedEffect;this.props.sequencerEngine.parameterLocks[this.props.id].addParameterLock(t,e,n,r,this.props.selectedParameter),this.setState(this.state)}}},{key:"onDeleteParameterLock",value:function(e){this.props.sequencerEngine.parameterLocks[this.props.id].deleteParameterLock(e)}},{key:"onClickParameterLock",value:function(e){if(this.state.selectedParameter===e.parameter)this.setState({selectedParameter:void 0});else{if(void 0!==e.trackNumber){var t=this.props.sequencerEngine.tracks[e.trackNumber];this.props.setSelectedTrack(t.trackNumber),this.props.setSelectedGroup(void 0)}else if(void 0!==e.groupNumber)this.props.setSelectedTrack(void 0),this.props.setSelectedGroup(this.props.sequencerEngine.groups.groups[e.groupNumber]);else if(void 0!==e.sendNumber){var n=this.props.sequencerEngine.sends.sends[e.sendNumber];this.props.setSelectedTrack(void 0),this.props.setSelectedGroup(n)}this.setState({selectedParameter:e.parameter})}}},{key:"onClickMin",value:function(){this.setState({minSelected:!this.state.minSelected,maxSelected:!1})}},{key:"onClickMax",value:function(){this.setState({maxSelected:!this.state.maxSelected,minSelected:!1})}},{key:"formatNumber",value:function(e){return e<=1?e:Math.floor(e)}},{key:"render",value:function(){var e=this;return l.a.createElement("div",{onMouseDown:function(){return e.onMouseDown()},onMouseLeave:function(){return e.onMouseUp()},onMouseUp:function(){return e.onMouseUp()},className:"multi-parameter-slider-container"},l.a.createElement("div",{className:"ranged-slider-container"},l.a.createElement("div",{onClick:function(){return e.onClickMin()},className:this.state.minSelected?"selected min-label":"min-label"},void 0!==this.state.selectedParameter?this.formatNumber(this.state.selectedParameter.min):"MIN"),l.a.createElement("div",{className:"slider-container"},l.a.createElement(Ee.a,{handle:"square",value:this.props.value,change:function(t){return e.onChange(t.target.value)},step:.01,max:1,min:0,orientation:"horizontal",reversed:!1})),l.a.createElement("div",{onClick:function(){return e.onClickMax()},className:this.state.maxSelected?"selected max-label":"max-label"},void 0!==this.state.selectedParameter?this.formatNumber(this.state.selectedParameter.max):"MAX")),l.a.createElement("div",{className:"parameters-container"},l.a.createElement("div",{className:"parameters-title"},"PARAMETERS"),l.a.createElement("div",{onClick:function(){return e.onAdd()},className:void 0!==this.props.flashing?"flashit add-parameter-button":"add-parameter-button"},"+"),l.a.createElement("div",{className:"parameters-list"},this.getParameterLocks().map(function(t){return l.a.createElement(Te,{onDelete:function(){return e.onDeleteParameterLock(t)},onClick:function(){return e.onClickParameterLock(t)},isSelected:e.state.selectedParameter===t.parameter,parameter:t.parameter})}))))}}]),n}(u.Component),Te=function(e){Object(o.a)(n,e);var t=qe(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(a.a)(n,[{key:"render",value:function(){return l.a.createElement("div",{className:this.props.isSelected?"selected parameter-lock":"parameter-lock",onClick:this.props.onClick},void 0!==this.props.parameter.effectName?l.a.createElement("div",null,this.props.parameter.effectName," - ",this.props.parameter.name,l.a.createElement("div",{className:"delete-button",onClick:this.props.onDelete},"x")):l.a.createElement("div",null,this.props.parameter.name,l.a.createElement("div",{className:"delete-button",onClick:this.props.onDelete},"x")))}}]),n}(u.Component);Object(g.b)(function(e,t){return{selectedParameter:e.mix.selectedParameter,flashing:e.mix.selectedParameterFlashing,selectedEffect:e.effects.selectedEffect,selectedTrack:e.mix.selectedTrack,selectedGroup:e.mix.selectedGroup,value:e.mix.multiParameterSliderValues[t.id]||0}},function(e){return{setSelectedTrack:function(t){return e(Object(I.Af)(t))},setSelectedGroup:function(t){return e(Object(I.hf)(t))},setParametersToRecord:function(t){return e(Object(I.ae)(t))},setMultiParameterSliderValue:function(t,n){return e(Object(I.Bd)(t,n))}}})(xe);function Me(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=Object(i.a)(e);if(t){var a=Object(i.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(s.a)(this,n)}}var Pe=function(e){Object(o.a)(n,e);var t=Me(n);function n(e){return Object(r.a)(this,n),t.call(this,e)}return Object(a.a)(n,[{key:"render",value:function(){return l.a.createElement("div",{className:"sub-sequence-chooser"})}}]),n}(u.Component);Object(g.b)(function(e,t){return{}},null)(Pe),n(719);function Re(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=Object(i.a)(e);if(t){var a=Object(i.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(s.a)(this,n)}}var De=function(e){Object(o.a)(n,e);var t=Re(n);function n(e){var a;return Object(r.a)(this,n),(a=t.call(this,e)).state={option:B.f},a.onClickOption=a.onClickOption.bind(Object(c.a)(a)),a}return Object(a.a)(n,[{key:"onClickOption",value:function(e){this.props.setMixViewMode(e)}},{key:"onClickThumbnail",value:function(){this.props.setShowLFOs(!this.props.showLFOs)}},{key:"onClickLock",value:function(){this.props.lfosTrack.togglePatternLocked()}},{key:"render",value:function(){this.props.isMixView;return l.a.createElement("div",null)}}]),n}(u.Component),Ae=(u.Component,Object(g.b)(function(e,t){return{mixViewMode:e.mix.mixViewMode,showLFOs:e.sequencer.showLFOs,patternLocked:e.tracks.lfoPatternLocks[t.sequencerEngine.currentPattern]}},function(e){return{setShowLFOs:function(t){return e(Object(I.Xf)(t))},setMixViewMode:function(t){return e(Object(I.vd)(t))}}})(De)),Ie=n(709);function ze(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=Object(i.a)(e);if(t){var a=Object(i.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(s.a)(this,n)}}var Le=function(e){Object(o.a)(n,e);var t=ze(n);function n(e){return Object(r.a)(this,n),t.call(this,e)}return Object(a.a)(n,[{key:"onClickOption",value:function(e){this.props.setEffectsPaneOption(e)}},{key:"render",value:function(){var e=this;return this.props.option==B.b?l.a.createElement("div",{className:"effects-pane-sidebar"},l.a.createElement("div",{onClick:function(){return e.onClickOption(B.a)},className:"sidebar-option"},"SHOW")):l.a.createElement("div",{className:"effects-pane-sidebar"},l.a.createElement("div",{onClick:function(){return e.onClickOption(B.b)},className:"sidebar-option"},"HIDE"),l.a.createElement("div",{onClick:function(){return e.onClickOption(B.k)},className:this.props.option==B.k?"selected sidebar-option":"sidebar-option"},"TRACK"),l.a.createElement("div",{onClick:function(){return e.onClickOption(B.a)},className:this.props.option==B.a?"selected sidebar-option":"sidebar-option"},"EFFECTS"))}}]),n}(u.Component),He=Object(g.b)(function(e,t){return{option:e.mix.effectsPaneOption}},function(e){return{setEffectsPaneOption:function(t){return e(Object(I.ec)(t))}}})(Le),Fe=n(23);function Be(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=Object(i.a)(e);if(t){var a=Object(i.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(s.a)(this,n)}}var Ue=function(e){Object(o.a)(n,e);var t=Be(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(a.a)(n,[{key:"getParameters",value:function(){if(void 0===this.props.track)return[];var e=this.props.track.trackData;return[[e.durationParameter,e.transposeParameter,e.chopParameter],[e.velocityParameter,e.attackParameter,e.releaseParameter],[e.pitchAttackParameter,e.pitchDecayParameter,e.pitchSustainParameter,e.pitchReleaseParameter]]}},{key:"render",value:function(){var e=this;return l.a.createElement("div",{className:"track-parameters"},this.getParameters().map(function(t){return l.a.createElement(Ge,{sequencerEngine:e.props.sequencerEngine,parameters:t})}))}}]),n}(u.Component),Ge=function(e){Object(o.a)(n,e);var t=Be(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(a.a)(n,[{key:"render",value:function(){var e=this;return l.a.createElement("div",{className:"parameters-box"},this.props.parameters.map(function(t){return l.a.createElement(We,{sequencerEngine:e.props.sequencerEngine,parameter:t})}))}}]),n}(u.Component),Ve=function(e){Object(o.a)(n,e);var t=Be(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(a.a)(n,[{key:"onChange",value:function(e){var t=this;this.props.setSelectedParameter(this.props.parameter),this.props.setSelectedParameterFlashing(this.props.parameter),setTimeout(function(){t.props.setSelectedParameterFlashing(void 0)},3e3)}},{key:"render",value:function(){var e=this,t=this.props.parameter.originalMax-this.props.parameter.originalMin<=20?.01:1,n=this.props.isSelected;return l.a.createElement("div",{className:n?"selected parameter":"parameter"},l.a.createElement(Fe.a,{name:this.props.parameter.name,parameter:this.props.parameter,isParameter:!0,lfoEnabled:!0,sequencerEngine:this.props.sequencerEngine,value:this.props.value,onParameterChanged:function(t){return e.onChange()},step:t,max:this.props.parameter.originalMax,min:this.props.parameter.originalMin,orientation:"horizontal",reversed:!1}))}}]),n}(u.Component),We=Object(g.b)(function(e,t){var n=t.parameter.id;return{value:e.effects.effectParameters[n],isSelected:e.mix.selectedParameter===t.parameter}},function(e){return{setSelectedParameter:function(t){return e(Object(I.pf)(t))},setSelectedParameterFlashing:function(t){return e(Object(I.qf)(t))}}})(Ve),Ze=Object(g.b)(null,null)(Ue);function Xe(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=Object(i.a)(e);if(t){var a=Object(i.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(s.a)(this,n)}}var Ke=function(e){Object(o.a)(n,e);var t=Xe(n);function n(e){var a;return Object(r.a)(this,n),(a=t.call(this,e)).state={},a}return Object(a.a)(n,[{key:"getEffectsTrack",value:function(){return void 0!==this.props.selectedGroup?this.props.selectedGroup:this.props.sequencerEngine.tracks[this.props.selectedTrack]}},{key:"getEffectsTrackIf",value:function(e){var t=this.props.sequencerEngine.sends.sends;return e===B.e?"number"===typeof this.props.selectedTrack?this.props.sequencerEngine.tracks[this.props.selectedTrack]:this.props.selectedTrack:e==B.c&&-1==t.indexOf(this.props.selectedGroup)?this.props.selectedGroup:e==B.d&&t.indexOf(this.props.selectedGroup)>-1?this.props.selectedGroup:void 0}},{key:"onEffectsChange",value:function(){var e=this.getEffectsTrack();void 0!==e&&e.updateEffects()}},{key:"render",value:function(){var e=this;return this.props.effectsPaneOption===B.k?l.a.createElement("div",{className:"effects-pane"},l.a.createElement(He,null),l.a.createElement(Ze,{sequencerEngine:this.props.sequencerEngine,track:this.props.sequencerEngine.tracks[this.props.selectedTrack]})):this.props.hide?l.a.createElement("div",{className:"effects-pane hide"},l.a.createElement(He,null)):l.a.createElement("div",{className:"effects-pane"},l.a.createElement(He,null),void 0!==this.getEffectsTrack(B.e)||void 0!==this.getEffectsTrack(B.d)||this.getEffectsTrack(B.c)?l.a.createElement(Ie.a.EffectsView,{store:this.props.sequencerEngine.store,sequencerEngine:this.props.sequencerEngine,onParameterChanged:function(t){return e.props.onParameterChanged(t)},onEffectsChange:function(){return e.onEffectsChange()},panning:0,onChangePanning:function(e){return console.log("panning changed = "+e)},sends:this.props.sequencerEngine.sends,tracks:this.props.sequencerEngine.tracks,track:this.getEffectsTrackIf(B.e),send:this.getEffectsTrackIf(B.d),group:this.getEffectsTrackIf(B.c)}):"")}}]),n}(u.Component);Object(g.b)(function(e,t){return{selectedGroup:e.mix.selectedGroup,selectedTrack:e.mix.selectedTrack,effectsPaneOption:e.mix.effectsPaneOption,currentSubSequence:e.sequencer.currentSubSequence[t.sequencerEngine.engineId]}},null)(Ke),n(67);function Ye(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=Object(i.a)(e);if(t){var a=Object(i.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(s.a)(this,n)}}var _e=function(e){Object(o.a)(n,e);var t=Ye(n);function n(e){var a;return Object(r.a)(this,n),(a=t.call(this,e)).state={},a}return Object(a.a)(n,[{key:"onSendMuteClicked",value:function(){this.props.send.mute(!this.props.send.muted),this.props.setSendMuted(this.props.send.sendNumber,this.props.send.muted),this.setState(this.state)}},{key:"render",value:function(){var e=this;return l.a.createElement("div",{className:"group-top-buttons"},l.a.createElement("div",{onClick:function(){return e.onSendMuteClicked()},className:this.props.muted?"muted group-mute-button":"group-mute-button"}))}}]),n}(u.Component),$e=Object(g.b)(function(e,t){return{muted:e.tracks.sendMutes[t.send.sendNumber]}},function(e){return{setSendMuted:function(t,n){return e(Object(I.Ef)(t,n))}}})(_e);function Je(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=Object(i.a)(e);if(t){var a=Object(i.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(s.a)(this,n)}}var Qe=function(e){Object(o.a)(n,e);var t=Je(n);function n(e){return Object(r.a)(this,n),t.call(this,e)}return Object(a.a)(n,[{key:"render",value:function(){return l.a.createElement("div",null,l.a.createElement($e,{partWidth:B.j,send:this.props.send}),l.a.createElement("div",{className:"group-thumbnail"}))}}]),n}(u.Component);function et(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=Object(i.a)(e);if(t){var a=Object(i.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(s.a)(this,n)}}var tt=function(e){Object(o.a)(n,e);var t=et(n);function n(e){return Object(r.a)(this,n),t.call(this,e)}return Object(a.a)(n,[{key:"isSelected",value:function(){return this.props.send==this.props.selectedGroup}},{key:"onChangeVolume",value:function(e){this.props.send.setVolume(e),this.props.setSelectedGroup(this.props.send),this.props.setSelectedTrack(void 0)}},{key:"render",value:function(){var e=this;return l.a.createElement("div",{className:this.isSelected()?"group selected":"group"},l.a.createElement("div",{className:"volume-slider-container"},l.a.createElement(Ee.a,{handle:"square",value:this.props.volume,change:function(t){return e.onChangeVolume(t.target.value)},step:.1,max:3,min:-40,orientation:"vertical",reversed:!0})),this.props.channelMixer.stereoConnected?"":l.a.createElement(ge.a,{channel:this.props.send}),l.a.createElement(Qe,{send:this.props.send}),l.a.createElement("div",{className:"send-name"},"SEND ",this.props.send.name))}}]),n}(u.Component),nt=(Object(g.b)(function(e,t){return{selectedGroup:e.mix.selectedGroup,volume:t.send.getVolume()}},function(e,t){return{setSelectedGroup:function(t){return e(Object(I.hf)(t))},setSelectedTrack:function(t){return e(Object(I.Af)(t))}}})(tt),n(1440));n(1513);function rt(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=Object(i.a)(e);if(t){var a=Object(i.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(s.a)(this,n)}}var at=function(e){Object(o.a)(n,e);var t=rt(n);function n(e){var a;return Object(r.a)(this,n),(a=t.call(this,e)).state={scale:1,selectedGroup:void 0,renders:0,pattern:e.sequencerEngine.currentPattern},a.sequencerEngine=e.sequencerEngine,a.onDrop=a.onDrop.bind(Object(c.a)(a)),a.ref=l.a.createRef(),a}return Object(a.a)(n,[{key:"groups",get:function(){return this.sequencerEngine.groups}},{key:"onClickPlayStop",value:function(){this.sequencerEngine.play(),this.setState(this.state)}},{key:"onParameterChanged",value:function(e){var t=this;this.props.setSelectedParameter(e),this.props.setSelectedParameterFlashing(e),setTimeout(function(){t.props.setSelectedParameterFlashing(void 0)},3e3)}},{key:"hide",get:function(){return this.props.effectsPaneOption===B.b||this.props.mixViewMode===B.g}},{key:"onDrop",value:function(e){var t=this.props.sequencerEngine.state;if(!t.sequencer.effectDragging){var n=t.mix.trackDragging;this.props.sequencerEngine.groups.newGroup(n)}}},{key:"toggleHide",value:function(){this.props.setHideMixer(!this.props.hideMixer)}},{key:"render",value:function(){var e=this;return this.props.showingPiano?(console.log("showing piano"),l.a.createElement(f.a,{sequencerEngine:this.props.sequencerEngine})):(console.log("hide mixer=",this.props.hideMixer),l.a.createElement("div",{className:"full-view"},l.a.createElement(p.a,{containerRef:this.ref}),l.a.createElement("div",{ref:this.ref,className:this.props.mixViewMode!==B.g?"mixes mix-view":"mix-view"},l.a.createElement(_.a,{condition:this.props.sequencerEngine.tracks.length>0},l.a.createElement(W,{sequencerEngine:this.props.sequencerEngine}),l.a.createElement(Ae,{isMixView:!0,sequencerEngine:this.props.sequencerEngine,lfosTrack:this.props.sequencerEngine.lfosTrack})),l.a.createElement(_.a,{condition:this.props.mixViewMode!==B.g},l.a.createElement("div",{className:"system5-modules modules"},this.props.sequencerEngine.subSequences.map(function(e){return l.a.createElement(d.a,{subSequence:e})}))),l.a.createElement("div",{onDrop:this.onDrop,className:this.hide?"channel-mixer lower":"channel-mixer"},this.props.hideMixer&&this.props.mixViewMode===B.g?"":l.a.createElement("div",{className:"channel-mixer-parts"},l.a.createElement("div",{className:"groups-container",id:"mix-scroll"},l.a.createElement(_.a,{condition:this.props.mixViewMode===B.g},l.a.createElement(w.a,{sequencerEngine:this.sequencerEngine})),l.a.createElement(_.a,{condition:this.props.mixViewMode!==B.g},l.a.createElement(nt.a,{sequencerEngine:this.props.sequencerEngine}))),l.a.createElement(y.a,{sequencerEngine:this.props.sequencerEngine})),this.props.mixViewMode===B.g&&l.a.createElement("div",{className:"mix-bottom-bar"},l.a.createElement("div",{onClick:function(){return e.toggleHide()},className:"collapse-button"},this.props.hideMixer?l.a.createElement("div",{className:"arrow-right"}):l.a.createElement("div",{className:"arrow-up"})))))))}}]),n}(u.Component);t.a=Object(g.b)(function(e,t){var n=e.arrangement.bottomMode;return{showingPiano:e.sequencer.showPianoRoll&&n===m.d,effectsPaneOption:e.mix.effectsPaneOption,currentSubSequence:e.sequencer.currentSubSequence[t.sequencerEngine.engineId],mixViewMode:B.g,hideMixer:!1}},function(e){return{setSelectedTrack:function(t){return e(Object(I.Af)(t))},setHideMixer:function(t){return e(Object(I.Bc)(t))},setSelectedGroup:function(t){return e(Object(I.hf)(t))},setSelectedParameter:function(t){return e(Object(I.pf)(t))},setSelectedParameterFlashing:function(t){return e(Object(I.qf)(t))}}})(at)},2626:function(e,t,n){"use strict";var r=n(10),a=n(8),c=n(0),o=n.n(c),s=n(6),i=n(12),u=n(228),l=function(e,t,n,r){var a=Math.sqrt(d(e,t,n,r))*window.dist,c=(Math.abs(r-t),Math.abs(n-e)),o=Math.sqrt(c);return n-e<0&&(o*=-1),c<20&&(o+=20-c),[e,t,e+window.x*o,t+a,n-window.x*o,r-a,n,r]},d=function(e,t,n,r){return Math.sqrt(Math.pow(n-e,2)+Math.pow(r-t,2))},f=Object(i.b)(function(e,t){return{dragging:e.groups.transformationEdgeDragging}},function(e){return{}})(function(e){var t=e.dragging,n=e.scrollContainer,r=e.container,a=Object(c.useState)(void 0),i=Object(s.a)(a,2),l=i[0],d=i[1];if(Object(c.useEffect)(function(){if(t){var e=t.transformation,a=t.x,c=t.y,o=e.id,s=document.getElementById("transformation-"+o);if(s){var i=s.getBoundingClientRect(),u=r.current.getBoundingClientRect(),l=(n.current.scrollTop,n.current.scrollLeft),f=n.current.offsetLeft-l;d({x1:i.left-f,y1:i.top-u.top,x2:a-3-f,y2:c-u.top-2})}}},[t]),!t||!l)return[];var f=l.x1,m=l.y1,p=l.x2,b=l.y2;return o.a.createElement(u.a,{className:"markov-edge new-edge",tension:window.tension,pointerLength:6,pointerWidth:4,points:[f,m,.75*f+.25*p,.75*m+.25*b,.25*f+.75*p,.25*m+.75*b,p,b],strokeWidth:2})}),m=Object(i.b)(function(e,t){return{trackSteps:e.tracks.trackSteps[t.track.trackNumber]}},function(e){return{}})(function(e){var t=e.transformation,n=e.container,r=e.scrollContainer,a=e.trackSteps,i=Object(c.useState)(void 0),d=Object(s.a)(i,2),f=d[0],m=d[1];if(Object(c.useEffect)(function(){setTimeout(function(){var e=t.id,a=t.whenValue.get(),c=document.getElementById("transformation-"+e),o=document.getElementById("transformation-"+a);if(c&&o){var s=c.getBoundingClientRect(),i=o.getBoundingClientRect(),u=n.current.getBoundingClientRect(),l=(r.current.scrollTop,r.current.scrollLeft),d=r.current.offsetLeft-l;m({x2:s.left+3-d,y2:s.top-u.top,x1:i.left+4-d,y1:i.top-u.top})}},100)},[m,t,a]),!f)return[];var p=f.x1,b=f.y1,v=f.x2,h=f.y2;return o.a.createElement(u.a,{className:"markov-edge",tension:window.tension,pointerLength:6,pointerWidth:4,points:l(p,b,v,h),strokeWidth:2})}),p=n(9),b=n(111);t.a=Object(i.b)(function(e,t){return{stepsGroupMode:e.groups.stepsGroupMode,trackSteps:e.tracks.trackSteps[0],isDragging:void 0!==e.groups.transformationEdgeDragging}},function(e){return{setTransformationEdgeDragging:function(t){return e(Object(p.Ah)(t))}}})(function(e){var t=e.stepsGroupMode,n=e.scrollContainer,s=e.sequencerEngine,i=e.setTransformationEdgeDragging,u=Object(c.useRef)(void 0);Object(c.useEffect)(function(){return window.addEventListener("mouseup",l),window.addEventListener("mousemove",d),function(){window.removeEventListener("mouseup",l),window.removeEventListener("mousemove",d)}},[]);var l=Object(c.useCallback)(function(e){s.state.groups.stepsGroupMode&&i(void 0)},[]),d=Object(c.useCallback)(function(e){var t=s.state.groups.transformationEdgeDragging;if(t){var n=e.pageX,r=e.pageY;i(Object(a.a)({},t,{x:n,y:r}))}},[]);if(!t)return[];var p=s.tracks.map(function(e){return e.pattern.getAllGroups().map(function(t){return t.transformations.filter(function(e){return e.whenType===b.g}).map(function(t){return{transformation:t,track:e}})}).reduce(function(e,t){return[].concat(Object(r.a)(e),Object(r.a)(t))},[])}).reduce(function(e,t){return[].concat(Object(r.a)(e),Object(r.a)(t))},[]),v={height:n.current&&n.current.scrollHeight};return n.current?o.a.createElement("svg",{style:v,ref:u,className:"group-edges"},o.a.createElement("defs",null,o.a.createElement("marker",{id:"arrowhead",markerWidth:"10",markerHeight:"8",refX:"4",refY:"2",orient:"auto"},o.a.createElement("polygon",{points:"0 0, 5 2, 0 4"}))),o.a.createElement(f,{scrollContainer:n,container:u}),p.map(function(e){var t=e.transformation,r=e.track;return o.a.createElement(m,{key:t.id,scrollContainer:n,track:r,container:u,transformation:t})})):[]})},2627:function(e,t,n){"use strict";var r=n(2),a=n.n(r),c=n(13),o=n(3),s=n(4),i=n(7),u=n(11),l=n(1),d=(n(196),n(0)),f=n.n(d),m=(n(2686),n(2706),n(45)),p=n(23),b=n(18),v=n(76),h=n(75),g=n(12),k=n(9),E=n(278);n(607);function O(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=Object(l.a)(e);if(t){var a=Object(l.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(u.a)(this,n)}}var j=function(e){Object(i.a)(n,e);var t=O(n);function n(e){var r;return Object(o.a)(this,n),(r=t.call(this,e)).state={},r.onClickDone=r.onClickDone.bind(Object(b.a)(r)),r.onClickCancel=r.onClickCancel.bind(Object(b.a)(r)),r}return Object(s.a)(n,[{key:"onClickDone",value:function(){this.props.setShowModsModal(!1)}},{key:"onClickCancel",value:function(){this.props.setShowModsModal(!1)}},{key:"render",value:function(){return f.a.createElement(v.a,{dialogClassName:"preset-modal",show:this.props.show,onHide:this.onClickCancel},f.a.createElement(v.a.Header,{closeButton:!0},f.a.createElement(v.a.Title,null,"Track Mods")),f.a.createElement(v.a.Body,null,f.a.createElement(E.a,{parameters:this.props.parameters})),f.a.createElement(v.a.Footer,null,f.a.createElement(h.b,{variant:"secondary",onClick:this.onClickDone},"Done"),f.a.createElement(h.b,{variant:"primary",onClick:this.onClickCancel},"Cancel")))}}]),n}(d.Component),S=Object(g.b)(function(e){return{show:e.sequencer.showModsModal}},function(e){return{setShowModsModal:function(t){return e(Object(k.Zf)(t))}}})(j),y=n(205),w=n.n(y),C=n(31),N=n(48),q=(n(102),n(41),n(60)),x=(n(54),n(2563),n(44)),T=n(1503),M=n(14),P=n.n(M),R=n(225),D=(n(288),n(244)),A=(n(341),n(349)),I=n(43);function z(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return L(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return L(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var c,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,c=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw c}}}}function L(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function H(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=Object(l.a)(e);if(t){var a=Object(l.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(u.a)(this,n)}}var F=function(e){Object(i.a)(n,e);var t=H(n);function n(e){var r;return Object(o.a)(this,n),(r=t.call(this,e)).state={cropping:void 0},r.state.name=e.name,r.state.videoId=e.videoId,r.state.soundId=e.soundId,r.state.waveforms=1,r.state.start=0,r.sampler=e.sampler,r}return Object(s.a)(n,[{key:"crop",value:function(e,t){var n=this,r=P.a.Master.context.sampleRate,a=Object(R.a)(this.props.sampler.baseBuffer.get(),e*r,t*r,P.a.Master.context),c=this.props.sampler.sample.ipfsHash;Object(A.a)([a.getChannelData(0),a.getChannelData(1)],r).then(function(e){return I.a.addBytesArray(e)}).then(function(e){var t=n.props.track.soundIds.indexOf(c);n.props.track.soundIds[t]=e,delete n.props.track.samplers[c],n.props.track.samplers[e]=n.props.sampler,n.props.sampler.sample.ipfsHash=e}),this.props.sampler.replaceBuffer(a),this.state.cropping?this.setState({cropping:this.state.cropping+1}):this.setState({cropping:1})}},{key:"cropSlices",value:function(){var e,t=this,n=z(this.props.sampler.slices.map(function(e){return e.buffer._buffer}).map(function(e){var n=t.props.sampler.sample.getCopy();return n.ipfsHash=D.a,n.needsSave=!0,n.audioBuffer=e,n}));try{for(n.s();!(e=n.n()).done;){var r=e.value;this.props.track.sequencerEngine.addSound(r)}}catch(a){n.e(a)}finally{n.f()}}},{key:"render",value:function(){var e=this,t=this.props.sampler.baseBuffer.get(),n=this.props.track.isFrozen?this.props.sampler.sample:this.props.track.sample;return f.a.createElement(T.a,{sample:n,cropSlices:function(){return e.cropSlices()},id:this.props.id,track:this.props.track,crop:function(t,n){return e.crop(t,n)},fullWidth:!0,selectedSlice:this.props.selectedSlice,slices:this.props.sampler.slices,height:this.props.height||this.props.bottomHeight-140,small:this.props.small,isReversed:this.props.sampler.isReversed(),sampler:this.props.sampler,div:this.props.div,decentralized:this.props.decentralized,backgroundColor:this.props.backgroundColor,soundId:this.state.cropping?this.state.cropping:n.getId(),onKeyDown:this.props.onKeyDown,onSelectSlice:this.props.onSelectSlice,width:this.props.width,onChangeReversed:this.props.onChangeReversed,xBounds:0,buffer:t},this.props.children)}}]),n}(d.Component),B=(n(63),n(33)),U=n(67);function G(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=Object(l.a)(e);if(t){var a=Object(l.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(u.a)(this,n)}}d.Component;var V=n(109),W=n.n(V),Z=(n(2631),n(2555));n(2693),n(2800);function X(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=Object(l.a)(e);if(t){var a=Object(l.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(u.a)(this,n)}}var K=new C.a,Y=function(e){Object(i.a)(n,e);var t=X(n);function n(e){var r;Object(o.a)(this,n);var a=void 0===(r=t.call(this,e)).props.showParameters||r.props.showParameters;return r.state={extracting:!1,selectedSlice:0,selectedMidiSlice:0,samplerNumber:r.props.samplerNumber||0,showParameters:a,refined:r.parametersHasDecimals(),focused:!1},r.props.track.getTrackType()===q.f&&(r.linkMidi(),document.addEventListener("keydown",function(e){return r.onKeyDown(e)})),r}return Object(s.a)(n,[{key:"componentDidUpdate",value:function(e){void 0!==this.props.selectedSlice&&this.props.selectedSlice!==e.selectedSlice&&this.setState({selectedSlice:this.props.selectedSlice})}},{key:"parametersHasDecimals",value:function(){if(this.props.track&&!this.props.track.trackData)return this.props.track.trackData.duration%1!==0||this.props.track.trackData.transpose%1!==0}},{key:"onGatedChange",value:function(e){document.activeElement.blur(),this.props.track.gated="gated"===e.target.value,this.setState(this.state)}},{key:"onChangeDuration",value:function(e){if(this.props.sequencerEngine.isRecording){var t=this.props.sequencerEngine.getCurrentStep();this.props.track.getStep(t).duration=parseFloat(e),this.props.track.trackData.duration=parseFloat(e)}else this.props.track.trackData.duration=parseFloat(e)}},{key:"onChangeTranspose",value:function(e){if(this.props.sequencerEngine.isRecording){var t=this.props.sequencerEngine.getCurrentStep();this.props.track.getStep(t).transpose=parseFloat(e),this.props.track.trackData.transpose=parseFloat(e)}else this.props.track.trackData.transpose=parseFloat(e)}},{key:"onChangeChop",value:function(e){if(this.props.sequencerEngine.isRecording){var t=this.props.sequencerEngine.getCurrentStep();this.props.track.getStep(t).duration=parseFloat(e),this.props.track.trackData.chop=parseInt(e)}else this.props.track.trackData.chop=parseInt(e)}},{key:"onChangeVelocity",value:function(e){var t=this.props.track.trackData;if(t.velocity=parseFloat(e),this.props.sequencerEngine.isRecording){var n=this.props.sequencerEngine.getCurrentStep();t=this.props.track.getStep(n)}t.velocity=parseFloat(e)}},{key:"onChangeAttack",value:function(e){var t=this.props.track.trackData;if(t.attack=parseFloat(e),this.props.sequencerEngine.isRecording){var n=this.props.sequencerEngine.getCurrentStep();t=this.props.track.getStep(n)}t.attack=parseFloat(e)}},{key:"onChangeRelease",value:function(e){var t=this.props.track.trackData;if(t.release=parseFloat(e),this.props.sequencerEngine.isRecording){var n=this.props.sequencerEngine.getCurrentStep();t=this.props.track.getStep(n)}t.release=parseFloat(e)}},{key:"onChangePitchAttack",value:function(e){var t=this.props.track.trackData;if(t.pitchAttack=parseFloat(e),this.props.sequencerEngine.isRecording){var n=this.props.sequencerEngine.getCurrentStep();t=this.props.track.getStep(n)}t.pitchAttack=parseFloat(e)}},{key:"onChangePitchDecay",value:function(e){var t=this.props.track.trackData;if(t.pitchDecay=parseFloat(e),this.props.sequencerEngine.isRecording){var n=this.props.sequencerEngine.getCurrentStep();t=this.props.track.getStep(n)}t.pitchDecay=parseFloat(e)}},{key:"onChangePitchSustain",value:function(e){var t=this.props.track.trackData;if(t.pitchSustain=parseFloat(e),this.props.sequencerEngine.isRecording){var n=this.props.sequencerEngine.getCurrentStep();t=this.props.track.getStep(n)}t.pitchSustain=parseFloat(e)}},{key:"onChangePitchRelease",value:function(e){var t=this.props.track.trackData;if(t.pitchRelease=parseFloat(e),this.props.sequencerEngine.isRecording){var n=this.props.sequencerEngine.getCurrentStep();t=this.props.track.getStep(n)}t.pitchRelease=parseFloat(e)}},{key:"onChangeOffset",value:function(e){this.props.track.getSampler().offset=e}},{key:"onSelectSlice",value:function(e){var t=this,n=this.props.sequencerEngine.state.keyboard.selectedPianoRollSteps;if(n&&n.every(function(e){return e.track===t.props.track})){var r=this.props.sequencerEngine.operationManager;n.forEach(function(n){return r.dispatch(Object(N.A)(t.props.track,n,n.sliceParameter,e))})}this.setState({selectedMidiSlice:e,selectedSlice:e}),this.props.setSelectedTrackSlice(e)}},{key:"linkMidi",value:function(){var e=this;this.props.midiEngine.addNoteOnListener(function(t,n){null==e.state.selectedMidiSlice||e.props.track.isEnabled||(e.props.keyboardEngine.midiMap(t,n,e.props.trackNumber,e.state.selectedMidiSlice),e.props.sequencerEngine.keyboardHelper.onNoteDown(n,!0,t),e.state.selectedMidiSlice=null,e.setState(e.state))})}},{key:"onKeyDown",value:function(e){var t=e.key;if("Tab"===t){return!0}null!=this.state.selectedMidiSlice&&t.match(/^[a-z]+$/)&&(this.state.focused||(this.props.keyboardEngine.hasKeyMapping(t)||this.props.keyboardEngine.map(t,this.props.trackNumber,this.state.selectedMidiSlice),this.state.selectedMidiSlice=null,this.setState(this.state)))}},{key:"onChangeRefined",value:function(e){document.activeElement.blur(),this.state.refined=!this.state.refined,this.setState(this.state)}},{key:"onChangeReversed",value:function(e){document.activeElement.blur(),this.props.track.trackData.reverse=!this.props.track.trackData.reverse,this.props.track.reverse(!this.isReversed()),this.setState(this.state)}},{key:"isReversed",value:function(){return this.props.track.isReversed()}},{key:"onFocus",value:function(){this.setState({focused:!0})}},{key:"onBlur",value:function(){this.setState({focused:!1})}},{key:"onChangeName",value:function(e){this.props.track.name=e.target.value,this.setState(this.state)}},{key:"savePreset",value:function(){this.props.sequencerEngine.saveTrackPreset(this.props.trackNumber)}},{key:"updatePreset",value:function(){this.props.sequencerEngine.updateTrackPreset(this.props.trackNumber)}},{key:"extractStems",value:function(){var e=Object(c.a)(a.a.mark(function e(){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({extracting:!0}),e.next=3,this.props.track.extractStems();case 3:this.props.setViewMode(this.props.parentView);case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"extractGroove",value:function(){var e=Object(c.a)(a.a.mark(function e(){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.props.track.extractGroove(),this.props.setViewMode(this.props.parentView);case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;if(void 0!=this.props.track&&this.props.loaded){var t=this.props.track,n="",r=void 0,a={},c=this.props.track.trackData;if(this.props.track.getSampler(this.state.samplerNumber)){void 0===this.state.selectedSlice||this.props.track.getSampler(this.state.samplerNumber).slices[this.state.selectedSlice],this.props.track.getSampler(this.state.samplerNumber).tempo;r=t.getSampler(this.state.samplerNumber);var o=this.props.track.soundIds[this.state.samplerNumber];void 0!==t.selectedRecording&&(r=t.getSelectedRecordingSampler(),o=t.getSelectedRecordingSoundId()),t.isAudioTrack&&(o=r.sample.getId()),void 0===o&&(o="unknown"),a["background-image"]="linear-gradient("+K.brighten(K.getColorForHash(o),.12)+", "+K.brighten(K.getColorForHash(o),.1)+")",a.borderColor=K.brighten(K.getColorForHash(o),.65),n=f.a.createElement(F,{bottomHeight:this.props.bottomHeight,width:this.props.width,onSoundIdChange:function(e){return[]},onClickThumbnail:function(e){return[]},onChangeReversed:function(t){return e.onChangeReversed(t)},small:this.props.small,onGetName:function(){return[]},name:this.props.track.name,track:this.props.track,sampler:r,div:this.props.div,height:this.props.height,onSelectSlice:function(t){return e.onSelectSlice(t)},onKeyDown:function(t){return e.props.onKeyDown(t)},backgroundColor:this.props.backgroundColor,selectedSlice:this.state.selectedSlice,videoId:this.props.track.videoId,soundId:o,id:this.props.id})}var s=this.state.refined?.01:1,i=this.state.refined?.01:1,u=this.state.refined?2:64,l=(this.props.track.getName(this.props.samplerNumber),{});return this.props.width&&(l.width=this.props.width+5),f.a.createElement("div",{style:l,className:"bottom-details"},f.a.createElement(S,{parameters:this.props.track.trackData.parameters}),n,f.a.createElement(m.a,{condition:!this.state.extracting},this.props.hideKeyboard?"":f.a.createElement(Z.a,{trackNumber:this.props.trackNumber,track:this.props.track,mini:!0,sequencerEngine:this.props.sequencerEngine,keyboardEngine:this.props.sequencerEngine.keyboardEngine})),f.a.createElement(m.a,{condition:this.state.extracting},f.a.createElement("div",{className:"extracting-stems"},"Extracting stems... ")),f.a.createElement(w.a,{sizeUnit:"px",size:10,color:"#123abc",loading:this.state.extracting}),this.state.showParameters?f.a.createElement("div",{style:a,onMouseOver:function(){return e.props.setContextualHelp(x.Lb)},onMouseLeave:function(){return e.props.setContextualHelp(void 0)},className:"sound-parameters sound-parameters-full panel"},f.a.createElement("form",null),f.a.createElement("form",null,f.a.createElement("div",{className:"refined-checkbox-preferences"},f.a.createElement("label",null,f.a.createElement("input",{type:"checkbox",value:"reversed",checked:this.props.track.isReversed(),onChange:function(t){return e.onChangeReversed(t.target.value)}}),"Reversed"))),f.a.createElement("div",{className:"amp-envelopes"},f.a.createElement(p.a,{effectNumber:0,sequencerEngine:this.props.sequencerEngine,lfoEnabled:!0,min:i,max:u,step:s,isParameter:!0,parameter:c.durationParameter,name:"DURATION"}),f.a.createElement(p.a,{effectNumber:0,sequencerEngine:this.props.sequencerEngine,lfoEnabled:!0,min:1,max:32,isParameter:!0,parameter:c.chopParameter,name:"CHOP"}),f.a.createElement(p.a,{min:-23,max:23,sequencerEngine:this.props.sequencerEngine,lfoEnabled:!0,isParameter:!0,parameter:c.transposeParameter,refined:this.state.refined,name:"TRANSPOSE"}),f.a.createElement(p.a,{min:0,max:1,sequencerEngine:this.props.sequencerEngine,lfoEnabled:!0,refined:this.state.refined,isParameter:!0,step:.1,parameter:c.velocityParameter,name:"VELOCITY"}),f.a.createElement(p.a,{min:0,max:2e3,step:1,sequencerEngine:this.props.sequencerEngine,lfoEnabled:!0,refined:this.state.refined,isParameter:!0,parameter:c.attackParameter,unit:"ms",name:"AMP ATTACK"}),f.a.createElement(p.a,{min:0,max:8e3,refined:this.state.refined,sequencerEngine:this.props.sequencerEngine,lfoEnabled:!0,isParameter:!0,parameter:c.releaseParameter,unit:"ms",name:"AMP RELEASE"})),f.a.createElement("div",{className:"pitch-envelopes"},f.a.createElement(p.a,{min:0,max:100,sequencerEngine:this.props.sequencerEngine,lfoEnabled:!0,refined:this.state.refined,isParameter:!0,step:.1,unit:"%",parameter:c.startParameter,name:"START"}),f.a.createElement(p.a,{min:0,max:2e3,step:1,isParameter:!0,sequencerEngine:this.props.sequencerEngine,lfoEnabled:!0,refined:this.state.refined,parameter:c.pitchAttackParameter,unit:"ms",name:"PITCH ATTACK"}),f.a.createElement(p.a,{min:.01,max:8e3,refined:this.state.refined,sequencerEngine:this.props.sequencerEngine,lfoEnabled:!0,isParameter:!0,parameter:c.pitchDecayParameter,unit:"ms",name:"PITCH DECAY"}),f.a.createElement(p.a,{min:-10,max:10,isParameter:!0,sequencerEngine:this.props.sequencerEngine,lfoEnabled:!0,refined:this.state.refined,step:.01,parameter:c.pitchSustainParameter,name:"PITCH SUSTAIN"}),f.a.createElement(p.a,{min:.01,max:8e3,refined:this.state.refined,sequencerEngine:this.props.sequencerEngine,lfoEnabled:!0,isParameter:!0,parameter:c.pitchReleaseParameter,unit:"ms",name:"PITCH RELEASE"})),f.a.createElement("form",null,f.a.createElement("div",{className:"refined-checkbox-preferences"},f.a.createElement("label",null,f.a.createElement("input",{type:"checkbox",value:"refined",checked:this.state.refined,onChange:function(t){return e.onChangeRefined(t.target.value)}}),"Refine"))),f.a.createElement("div",{onClick:function(){return e.props.setShowModsModal(!0)},className:"mods-button common-button pink-button small-button"},"MODS")):"")}return f.a.createElement("div",null)}}]),n}(d.Component),_=function(e){Object(i.a)(n,e);var t=X(n);function n(e){var r;return Object(o.a)(this,n),(r=t.call(this,e)).state={value:r.props.defaultValue},r}return Object(s.a)(n,[{key:"onChange",value:function(e){this.state.value=e,this.props.change(e),this.setState(this.state)}},{key:"render",value:function(){var e=this,t=!0===this.props.refinedMode?.01:void 0!=this.props.step?this.props.step:this.props.max>1?1:.1;return f.a.createElement("div",{className:"sound-parameter"},f.a.createElement("div",{className:"sound-parameter-name"},this.props.name,": ",this.state.value," ",void 0!==this.props.unit?this.props.unit:""),f.a.createElement(W.a,{value:this.state.value,change:function(t){return e.onChange(t.target.value)},step:t,max:this.props.max,min:this.props.min,orientation:"horizontal",reversed:!1}))}}]),n}(d.Component),$=Object(g.b)(function(e,t){var n=t.track;return{id:void 0===n?0:void 0!==n.sample&&void 0!==n.sample.getId()?n.sample.getId():n.presetName||n.getName(),selectedSlice:e.tracks.selectedTrackSlice[n.id],showingOnsets:e.waveform.showingOnsets,bottomHeight:e.arrangement.bottomHeight,loaded:n.isFrozen||n&&n.getSampler(0)&&n.getSampler(0).isLoaded(),sampler:n&&n.getSampler(0),isFrozen:n.isFrozen}},function(e,t){return{setViewMode:function(t){return e(Object(k.Mh)(t))},setShowModsModal:function(t){return e(Object(k.Zf)(t))},setContextualHelp:function(t){return e(Object(k.wb)(t))},setSelectedTrackSlice:function(n){return e(Object(k.Bf)(t.track.id,n))}}})(Y);t.a={DetailsView:$,Parameter:_}},2631:function(e,t,n){"use strict";var r=n(8),a=n(6),c=n(0),o=n.n(c),s=n(3),i=n(4),u=n(7),l=n(11),d=n(1),f=n(9),m=(n(44),n(12)),p=n(2703),b=n(31);function v(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=Object(d.a)(e);if(t){var a=Object(d.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(l.a)(this,n)}}new b.a;var h=function(e){Object(u.a)(n,e);var t=v(n);function n(e){return Object(s.a)(this,n),t.call(this,e)}return Object(i.a)(n,[{key:"mappings",get:function(){return void 0===this.props.keyboardEngine?{}:this.props.keyboardEngine.getMappings()}},{key:"onClickKey",value:function(){var e=void 0===this.props.trackNumber?this.props.selectedTrack:this.props.trackNumber;this.isSample(e)&&(this.props.keyboardEngine.hasKeyMapping(this.key)?this.props.keyboardEngine.deleteKeyMapping(this.key):this.props.keyboardEngine.map(this.key,e,this.props.selectedSlice))}},{key:"render",value:function(){var e=this,t=this.props.mini?"key mini":"key";return this.props.triggering&&(t+=" flashit"),this.props.keyMapping&&this.props.selectedTrack===this.props.keyMapping.trackNumber&&(t+=" selected-track"),this.props.pressed&&(t+=" pressed"),o.a.createElement("div",{onClick:function(){return e.onClickKey()},style:this.getStyle(),className:t},this.props.value)}}]),n}(p.a),g=Object(m.b)(function(e,t){var n=e.keyboard.keyMappings[t.keyboardKey],r=void 0===n?void 0:e.tracks.triggers[n.trackNumber],a=void 0!==r&&r[n.sliceNumber],c=void 0;if(n){var o=t.sequencerEngine.tracks[n.trackNumber];o&&(c=o.getIdentifier())}return{id:c,triggering:a,keyMapping:n,selectedTrack:e.mix.selectedTrack}},function(e,t){return{setContextualHelp:function(t){return e(Object(f.wb)(t))}}})(h),k=new b.a,E=[["Q","W","E","R","T","Y","U","I","O","P"],["A","S","D","F","G","H","J","K","L"],["Z","X","C","V","B","N","M"]];t.a=function(e){var t=Object(c.useState)({}),n=Object(a.a)(t,2),s=n[0],i=n[1];Object(c.useEffect)(function(){return window.addEventListener("keydown",l),window.addEventListener("keyup",u),function(){window.removeEventListener("keydown",l),window.removeEventListener("keyup",u)}},[i,s]);var u=Object(c.useCallback)(function(e){if(e.key&&e.key.toUpperCase){var t=Object(r.a)({},s);delete t[e.key.toUpperCase()],i(t)}},[s,i]),l=Object(c.useCallback)(function(e){if(e.key&&e.key.toUpperCase){var t=Object(r.a)({},s);t[e.key.toUpperCase()]=!0,i(t)}},[i,s]),d=function(e){return e.toLowerCase()},f=e.mini?"keyboard mini":"keyboard",m={};return e.track&&(m.borderColor=k.getColorForTrack(e.track)),o.a.createElement("div",{style:m,className:f},o.a.createElement("div",{className:"keyboard-row"},E[0].map(function(t){return o.a.createElement(g,{key:t,pressed:s[t],helper:e.helper,mini:e.mini,selectedSlice:e.selectedSlice,keyboardKey:d(t),selectedTrack:e.selectedTrack,sequencerEngine:e.sequencerEngine,trackNumber:e.trackNumber,keyboardEngine:e.keyboardEngine,value:t})})),o.a.createElement("div",{className:"keyboard-row keyboard-row-2"},E[1].map(function(t){return o.a.createElement(g,{helper:e.helper,key:t,mini:e.mini,selectedSlice:e.selectedSlice,pressed:s[t],selectedTrack:e.selectedTrack,keyboardKey:d(t),sequencerEngine:e.sequencerEngine,trackNumber:e.trackNumber,keyboardEngine:e.keyboardEngine,value:t})})),o.a.createElement("div",{className:"keyboard-row keyboard-row-3"},E[2].map(function(t){return o.a.createElement(g,{key:t,helper:e.helper,mini:e.mini,selectedSlice:e.selectedSlice,pressed:s[t],selectedTrack:e.selectedTrack,keyboardKey:d(t),sequencerEngine:e.sequencerEngine,trackNumber:e.trackNumber,keyboardEngine:e.keyboardEngine,value:t})})))}},2633:function(e,t,n){"use strict";var r=n(10),a=n(6),c=n(0),o=n.n(c),s=n(2581),i=n(2600),u=n(41),l=n.n(u),d=n(12);t.a=Object(d.b)(function(e,t){return{}},function(e){return{}})(function(e){var t=e.discogs,n=e.records,u=e.sample,d=e.showTags,f=void 0===d||d,m=Object(c.useState)([]),p=Object(a.a)(m,2),b=p[0],v=p[1],h=Object(c.useState)(n[0]),g=Object(a.a)(h,2),k=g[0],E=g[1];if(Object(c.useEffect)(function(){var e=Object(r.a)(n);e.sort(function(e,t){return e.year-t.year}),E(e[0])},[n,E]),Object(c.useEffect)(function(){f&&(u.tags=Object(r.a)(b))},[b,u]),Object(c.useEffect)(function(){k&&(u.year=k.year,u.styles=k.genre||[],u.country=k.country,u.discogsId=k.id,u.releaseName=k.title,Object(s.a)(k.thumb).then(function(e){return u.coverArtHash=e}),t.getReleaseInfo(k.id).then(function(e){u.artistName=e.artists[0].name}))},[k,u]),!k)return"";var O=n.map(function(e){return{label:e.title+"("+e.year+")",value:e}});return o.a.createElement("div",{className:"record-info"},o.a.createElement("div",{className:"meta"},o.a.createElement("img",{src:k.thumb}),o.a.createElement("div",{className:"record-meta"},o.a.createElement("div",{className:"record-title"},k.title),o.a.createElement("div",{className:"record-year"},k.year),o.a.createElement("div",{className:"record-genre"},k.genre.map(function(e){return o.a.createElement("span",null,e)})))),o.a.createElement("div",{className:"others"},o.a.createElement(l.a,{onChange:function(e){return E(e.value)},options:O,value:O.find(function(e){return e.value===k})})),f?o.a.createElement(i.a,{tags:b,setTags:v}):"")})},2639:function(e,t,n){"use strict";var r=n(0),a=n.n(r),c=n(12),o=n(2603);t.a=Object(c.b)(function(e,t){return{subSequence:t.sequencerEngine.currentSubSequence}},function(e){return{}})(function(e){var t=e.sequencerEngine,n=e.subSequence;return a.a.createElement("div",{className:"sends midi track"},a.a.createElement("div",{className:"track-container"},a.a.createElement("div",{className:"track-header"},a.a.createElement("div",{className:"track-name-view"},"Midi FX")),a.a.createElement("div",{className:"sends-container"},a.a.createElement(o.a,{sequencerEngine:t,track:n}))))})},2640:function(e,t,n){"use strict";var r=n(3),a=n(4),c=n(7),o=n(11),s=n(1),i=n(0),u=n.n(i),l=n(12),d=n(102),f=n(44),m=n(85),p=n(9);function b(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=Object(s.a)(e);if(t){var a=Object(s.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(o.a)(this,n)}}var v=["A","B","C","D","E","F","G","H","I","J","K","L","M","N"],h=function(e){Object(c.a)(n,e);var t=b(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(a.a)(n,[{key:"chooseSubSequence",value:function(e){this.props.viewMode!==d.f&&this.props.viewMode!==d.c||this.props.setViewMode(d.e),this.props.sequencerEngine.switchToSubSequence(e)}},{key:"newSubSequence",value:function(){this.props.viewMode!==d.f&&this.props.viewMode!==d.c||this.props.setViewMode(d.e),this.props.sequencerEngine.newSubSequence()}},{key:"deleteSubSequence",value:function(){window.confirm("Are you sure you want to delete this SUB SEQUENCE?")&&this.props.sequencerEngine.deleteSubSequence()}},{key:"render",value:function(){var e=this;return u.a.createElement("div",{className:"sub-sequences-container"},this.props.subSequences.filter(function(t){return!e.props.sequencerEngine.getSubSequence(t).isTrack}).map(function(t,n){return u.a.createElement(m.a,{element:f.q,key:v[n],onClick:function(){return e.chooseSubSequence(t)},className:t===e.props.currentSubSequence?"sub-sequence selected":"sub-sequence"},v[n])}),u.a.createElement(m.a,{element:f.U,onClick:function(){return e.newSubSequence()},className:"new-sub-sequence"},"+"),u.a.createElement(m.a,{element:f.s,onClick:function(){return e.deleteSubSequence()},className:"delete-sub-sequence"},"-"))}}]),n}(i.Component);t.a=Object(l.b)(function(e,t){var n=t.sequencerEngine.engineId;return{subSequences:e.sequencer.subSequences[n]||[],currentSubSequence:e.sequencer.currentSubSequence[n],viewMode:e.sequencer.viewMode}},function(e){return{setViewMode:function(t){return e(Object(p.Mh)(t))}}})(h)},2642:function(e,t,n){"use strict";var r=n(0),a=n.n(r),c=n(1378),o=n(2716),s=n(1383),i=n(255),u=n(187),l=n(214),d=n(9),f=n(298),m=n(48),p=n(256),b=n(12);t.a=Object(b.b)(function(e,t){var n=(e.tracks.trackIsEnabled[t.track.subSequence.id]||{})[t.track.id];return{name:t.track.presetName||t.track.name,enabled:void 0!==n&&n,solo:e.tracks.trackSolos[t.track.id],muted:e.tracks.trackMutes[t.track.id],planeMapping:e.effects.planeMapping,leftSidebarWidth:e.spatial.leftSidebarWidth}},function(e){return{setTrackDragging:function(t){return e(Object(d.ah)(t))},setShowEditorBottom:function(t){return e(Object(d.Qf)(t))},setSelectedZObject:function(t){return e(Object(d.Cf)(t))},setShowPadSequencer:function(t){return e(Object(d.cg)(t))}}})(function(e){var t=e.track,n=e.setShowPadSequencer,d=e.setTrackDragging,b=e.selectedZObject,v=e.setSelectedZObject,h=e.enabled,g=e.solo,k=e.muted,E=e.planeMapping,O=e.setShowEditorBottom,j=e.leftSidebarWidth,S=e.isFull,y=t.sequencerEngine,w=Object(r.useRef)();S&&(j=240);var C=Object(i.a)({ref:w,useTop:!1}),N=C.onContextMenu,q=C.dropdownPos,x=C.setDropdownPos;Object(r.useEffect)(function(){q&&t.sequencerEngine.selectTrack(t.trackNumber)},[q,t]);var T=Object(r.useCallback)(function(){O(t.sequencerEngine.state.spatial.showEditorBottom===l.b?void 0:l.b)},[t]),M=Object(r.useCallback)(function(){E&&E.randomlyMapParameters(t),t.sequencerEngine.state.spatial.showPadSequencer&&n(t.pad),y.selectTrack(t.trackNumber),v(t)},[t,E]),P=Object(u.a)(T,250,M),R=Object(r.useCallback)(function(){t.sequencerEngine.deleteTrack(t.trackNumber)},[t]),D=Object(r.useCallback)(function(){t.sequencerEngine.operationManager.dispatch(Object(m.B)(t,!k))},[k,t]),A=Object(r.useCallback)(function(){t.solo(!g)},[g,t]),I=b===t?"selected track-option":"track-option";E&&(I+=" plane-mapping");var z={};z.maxWidth=100*j/240;var L=t.presetName||t.name||t.getName();return j<70&&(I+=" minimized"),a.a.createElement("div",{ref:w,onContextMenu:N,draggable:!0,onDragOver:function(e){return e.preventDefault()},onDragStart:function(e){e.stopPropagation(),d(t)},onClick:P,className:I},a.a.createElement(s.a,{dropdownPos:q,setDropdownPos:x,track:t}),a.a.createElement("div",{style:{marginRight:15*j/240,marginLeft:5*j/240},onClick:function(){return R()},className:"delete-btn"},"x"),a.a.createElement(c.a,{track:t}),t.instrument?a.a.createElement(o.a,{track:t}):a.a.createElement(p.a,{hasInner:!0,track:t}),j>140&&a.a.createElement("div",{style:z,className:"ztrack-name"},Object(f.a)(L)),j>100&&a.a.createElement("div",{onClick:A,className:g?"solo soloed":"solo"},"S"),j>70&&a.a.createElement("div",{onClick:D,className:k?"mute muted":"mute"},"M"),a.a.createElement("div",{onClick:function(){return t.toggleEnabled()},className:h?"dot enabled track-arm":"dot track-arm"}),a.a.createElement("div",{style:{transform:"translate(".concat(j-8,"px, 0px")},className:"track-tooltip"},a.a.createElement("div",{className:"t-row"},t.instrument?a.a.createElement(o.a,{track:t}):a.a.createElement(p.a,{hasInner:!0,track:t}),a.a.createElement("div",{className:"track-number track-name"},t.trackNumber+1),a.a.createElement("div",{className:"track-name"},L)),a.a.createElement("div",{className:"t-tags"},t.sample&&t.sample.tags&&t.sample.tags.map(function(e){return a.a.createElement("span",{className:"t-tag"},e)}))))})},2643:function(e,t,n){"use strict";n.d(t,"b",function(){return o}),n.d(t,"a",function(){return i});var r=n(0),a=n.n(r),c=new(n(31).a),o=function(e,t,n,r){var c=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return a.a.createElement(s,{event:e,subSequence:t,duration:n,width:r,useTranspose:c})},s=Object(r.memo)(function(e){var t=e.event,n=e.subSequence,r=e.duration,c=e.width,o=e.useTranspose,s=void 0!==o&&o;return void 0===t.patternNumber?"":a.a.createElement("div",{className:"pattern-visualization"},n.tracks.slice(0,13).map(function(e,n){return a.a.createElement(i,{useTranspose:s,key:n,track:e,patternNumber:t.patternNumber,stepWidth:c,duration:r,step:t.step})}))}),i=Object(r.memo)(function(e){var t=e.isSelected,n=e.track,r=e.patternNumber,o=e.duration,s=e.step,i=void 0===s?0:s,u=e.stepWidth,l=e.useTranspose,d=n.patterns[r%n.patterns.length],f=i%d.length(),m=[];for(var p in d.stepBucketsMatrix){p=parseInt(p);for(var b=d.stepBucketsMatrix[p].getAllOnSteps()[0],v=0,h=p-f;h<o;h+=d.length())if(!(h<0)){var g={left:u*h,top:3*n.trackNumber,width:2*u*b.duration,backgroundColor:c.getColorForTrack(n),height:2};v>0&&(g.opacity=.3),l&&(g.top=20+.5*b.transpose),m.push(a.a.createElement("div",{key:h,style:g,className:"track-step"})),v++}}return a.a.createElement("div",{className:t?"selected track-steps":"track-steps"},m)})},2645:function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n(6),a=n(0),c=n.n(a),o=n(41),s=n.n(o);function i(e){var t=e.channel.channelMixer,n=Object(a.useState)(u(e.channel)),o=Object(r.a)(n,2),i=o[0],d=o[1],f=Object(a.useCallback)(function(n){t.switchChannelOutput(e.channel.outputNode,n.left,n.right),e.channel.outputs=[n.left,n.right],d(u(e.channel))},[e.channel,d]);return c.a.createElement("div",{className:"outputs-container"},c.a.createElement(s.a,{className:"channel-dropdown",controlClassName:"channel-control-dropdown",arrowClassName:"channel-arrow-dropdown",options:l(t),onChange:function(e){return f(e.value)},value:i,placeholder:"Rate"}))}function u(e){var t=e.outputs[0],n=e.outputs[1];return{label:void 0!==n?t+1+"/"+(n+1):t+1,value:{left:t,right:n}}}function l(e){for(var t=[],n=0;n<e.channelCount;n+=2)t.push({label:n+1+"/"+(n+2),value:{left:n,right:n+1}});for(var r=0;r<e.channelCount;r++)t.push({label:r+1,value:{left:r}});return t}},2684:function(e,t,n){"use strict";var r=n(0),a=n.n(r),c=(n(2583),n(6)),o=n(256),s=n(2781),i=n(2555),u=n(2782),l=n(2),d=n.n(l),f=n(13),m=n(10),p=n(43),b=n(708),v=n(9),h=n(12),g=n(2581),k=n(416);function E(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return O(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return O(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var c,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,c=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw c}}}}function O(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var j=Object(h.b)(function(e,t){return{guildId:e.guilds.selectedGuild?e.guilds.selectedGuild.guildId:0}},function(e){return{setUploadingFile:function(t){return e(Object(v.Gh)(t))}}})(function(e){var t=e.track,n=e.sample,o=e.setUploadingFile,s=e.guildId,i=Object(r.useState)(""),u=Object(c.a)(i,2),l=u[0],p=u[1],v=Object(r.useState)(""),h=Object(c.a)(v,2),g=h[0],O=h[1],j=Object(r.useState)(""),S=Object(c.a)(j,2),y=S[0],w=S[1],C=Object(r.useState)(void 0),N=Object(c.a)(C,2),q=N[0],x=N[1],T=Object(r.useState)(!1),M=Object(c.a)(T,2),P=M[0],R=M[1],D=Object(r.useState)(!1),A=Object(c.a)(D,2),I=A[0],z=A[1];Object(r.useEffect)(function(){n.copiedAll&&z(!0)},[n,z]),Object(r.useEffect)(function(){Object(b.d)(l,g).then(function(e){e?(O(e.releaseName),w(e.coverArtHash),x(e)):x(void 0)})},[l,g,O,w,x]);var L=Object(r.useCallback)(function(){var e="";y&&P?e=y:q&&q.coverArtHash&&(e=q.coverArtHash);var r,a=E(t.sequencerEngine.tracks);try{for(a.s();!(r=a.n()).done;){var c=r.value.sample;n.tags&&(c.tags=Object(m.a)(n.tags)),q?(window.sessionStorage.setItem("getSamplePack("+l+","+g+")",JSON.stringify(q)),q.releaseId?c.discogsId=q.releaseId:c.discogsId=Math.floor((new Date).getTime()/1e4)):c.discogsId=Math.floor((new Date).getTime()/1e4),c.releaseType="SAMPLE_PACK",c.coverArtHash=e,c.releaseName=g,c.artistName=l,c.year=0,c.styles=[],c.country="",c.copiedAll=!0}}catch(o){a.e(o)}finally{a.f()}z(!0)},[n,g,y,P,q,z]),H=Object(r.useCallback)(function(e){n.coverArtHash=e,n.releaseName=g,n.artistName=l,n.year=0,n.styles=[],n.country="",q?(window.sessionStorage.setItem("getSamplePack("+l+","+g+")",JSON.stringify(q)),q.releaseId?n.discogsId=q.releaseId:n.discogsId=Math.floor((new Date).getTime()/1e4)):n.discogsId=Math.floor((new Date).getTime()/1e4),n.releaseType="SAMPLE_PACK",o(!0),setTimeout(Object(f.a)(d.a.mark(function e(){return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.saveSample(s);case 2:o(!1);case 3:case"end":return e.stop()}},e)})),100)},[l,g,n,q,s]),F=Object(r.useCallback)(function(){o(!0),setTimeout(Object(f.a)(d.a.mark(function e(){var n,r,a;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=E(t.sequencerEngine.tracks),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=9;break}return a=r.value,e.next=7,a.sample.saveSample(s);case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),n.e(e.t0);case 14:return e.prev=14,n.f(),e.finish(14);case 17:o(!1);case 18:case"end":return e.stop()}},e,null,[[1,11,14,17]])})),100)},[t,s]),B=Object(r.useCallback)(function(e){y&&P?H(y):q&&q.coverArtHash?H(q.coverArtHash):H(void 0)},[g,l,y,n,q,s,P]);return Object(r.useEffect)(function(){x(void 0)},[x,n]),a.a.createElement("div",{className:"sample-pack-flow"},a.a.createElement("div",{className:"input-container"},a.a.createElement("div",{className:"input-type"},"Artist Name:"),a.a.createElement("input",{value:l,onChange:function(e){return p(e.target.value)},type:"text",className:"sample-pack-name-input"})),a.a.createElement("div",{className:"input-container"},a.a.createElement("div",{className:"input-type"},"Sample Pack:"),a.a.createElement("input",{value:g,onChange:function(e){return O(e.target.value)},type:"text",className:"sample-pack-name-input"})),a.a.createElement(k.a,{placeholder:"Drag cover art here",imageHash:y,setImageHash:function(e){w(e),R(!0)}}),I?"":a.a.createElement("div",{onClick:B,className:""===l?"save-button disabled":"save-button"},"Save"),I?a.a.createElement("div",{onClick:F,className:"save-button"},"Save All"):a.a.createElement("div",{onClick:L,className:"save-button"},"Copy To All Tracks"))}),S=Object(h.b)(function(e,t){return{}},function(e){return{}})(function(e){var t=e.releaseType,n=e.setReleaseType;return a.a.createElement("div",{className:"release-type-chooser"},a.a.createElement("div",{onClick:function(){return n("RECORD")},className:"RECORD"===t?"option selected":"option"},"Record"),a.a.createElement("div",{onClick:function(){return n("SAMPLE_PACK")},className:"SAMPLE_PACK"===t?"option selected":"option"},"Sample Pack"),a.a.createElement("div",{onClick:function(){return n(void 0)},className:void 0===t?"option selected":"option"},"None"))}),y=n(103),w=(n(55),n(2557)),C=(n(288),new w.a),N=function(e){var t=e.result,n=e.isSelected,r=e.onClick,c="result";return n&&(c+=" selected"),a.a.createElement("div",{onClick:function(){return r(t)},className:c},a.a.createElement("img",{src:t.thumb,className:"discogs-thumb"}),a.a.createElement("div",{className:"result-title"},t.title))},q=function(e){var t=e.indexOf(".flac");return t>-1&&(e=e.slice(0,t)),(t=e.indexOf(".wav"))>-1&&(e=e.slice(0,t)),e},x=Object(h.b)(function(e,t){return{isLoggedIn:void 0!==e.sequencer.userToken,guildId:e.guilds.selectedGuild?e.guilds.selectedGuild.guildId:0}},function(e){return{setUploadingFile:function(t){return e(Object(v.Gh)(t))},setShowLogin:function(t){return e(Object(v.Yf)(t))}}})(function(e){var t=e.sample,n=e.setUploadingFile,o=e.isLoggedIn,s=e.setShowLogin,i=e.guildId,u=Object(r.useState)([]),l=Object(c.a)(u,2),p=l[0],b=l[1],v=Object(r.useState)(""),h=Object(c.a)(v,2),k=h[0],E=h[1],O=Object(r.useState)(void 0),j=Object(c.a)(O,2),S=j[0],w=j[1],x=Object(r.useCallback)(function(e){if(e.id===S)return w(void 0),t.discogsId=void 0,t.year=void 0,t.releaseName=void 0,t.styles=[],t.country=null,t.coverArtHash=void 0,t.artistName=void 0,void(t.releaseType=void 0);w(e.id),t.discogsId=e.id,t.year=e.year,t.releaseName=e.title,t.styles=e.style||[],t.country=e.country,Object(g.a)(e.thumb).then(function(e){return t.coverArtHash=e}),C.getReleaseInfo(e.id).then(function(e){void 0!==e&&(t.artistName=e.artists[0].name,t.releaseName=e.title,t.releaseType="RECORD")}),y.a.setItem("lastDiscogs",JSON.stringify(e))},[t,w,S]),T=Object(r.useCallback)(function(){C.searchRecords(q(k)).then(function(e){return b(e)})},[k,b]);Object(r.useEffect)(function(){var e=q(t.name);E(e),C.searchRecords(q(e)).then(function(e){if(y.a.getItem("lastDiscogs")){var t=JSON.parse(y.a.getItem("lastDiscogs"));e.some(function(e){return e.id===t.id})||(e=[t].concat(Object(m.a)(e)),x(t))}b(e)})},[t,b,E,w]);var M=Object(r.useCallback)(function(){n(!0),setTimeout(Object(f.a)(d.a.mark(function e(){return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.saveSample(i);case 2:n(!1);case 3:case"end":return e.stop()}},e)})),100)},[t,i]);return o?a.a.createElement("div",null,a.a.createElement("div",{className:"input-container"},a.a.createElement("input",{value:k,onChange:function(e){return E(e.target.value)},type:"text",className:"discogs-search-input"}),a.a.createElement("div",{onClick:T,className:"search-button"},"Search")),0===p.length?a.a.createElement("div",{className:"no-results"},"No results found. Try editing the name and searching again."):"",a.a.createElement("div",{className:"results"},p.map(function(e){return a.a.createElement(N,{isSelected:e.id===S,onClick:x,result:e})})),a.a.createElement("div",{onClick:M,className:"save-sample-button"},"Save")):a.a.createElement("div",{className:"save-new-sample"},"Please ",a.a.createElement("span",{className:"login-button",onClick:function(){s(!0)}},"log in")," to save this new sound.")}),T=Object(h.b)(function(e,t){return{}},function(e){return{}})(function(e){var t=e.track,n=e.sample,o=Object(r.useState)(void 0),s=Object(c.a)(o,2),i=s[0],u=s[1];return a.a.createElement("div",{className:"save-new-sample"},a.a.createElement("div",{className:"sample-save-info"},"Match the sample to it's source"),a.a.createElement(S,{setReleaseType:u,releaseType:i}),"RECORD"===i?a.a.createElement(x,{sample:n}):"","SAMPLE_PACK"===i?a.a.createElement(j,{track:t,sample:n}):"")}),M=n(33),P=function(e){var t=e.number,n=e.rating,r=e.onClick,c=e.color,o="star";t<=n&&(o+=" starred");var s={color:c};return a.a.createElement("div",{style:s,onClick:function(){return r(t)},className:o},a.a.createElement("span",null,"\u2606"))},R=Object(h.b)(function(e,t){return{}},function(e){return{}})(function(e){var t=e.content,n=e.color,o=e.type,s=Object(r.useState)(void 0),i=Object(c.a)(s,2),u=i[0],l=i[1],d=Object(r.useCallback)(function(e){l(e),M.a.xanadu.rateSound(t,e,o)},[l,t]);return Object(r.useEffect)(function(){M.a.xanadu.getSoundRating(t,o).then(function(e){l(e)})},[l,t]),a.a.createElement("div",{className:"rating"},[0,1,2,3,4].map(function(e){return a.a.createElement(P,{color:n,onClick:d,number:e,rating:u})}))}),D=n(146),A=n(68),I=Object(h.b)(function(e,t){return{presets:e.tracks.trackBrowsedPresets[t.track.id]}},function(e,t){return{setBrowsedPresets:function(n){return e(Object(v.Yg)(t.track.id,n))}}})(function(e){var t=e.track,n=e.preset,c=e.presets,o=void 0===c?[]:c,s=(e.setBrowsedPresets,Object(r.useCallback)(function(e){t.sequencerEngine.auditionPreset(e,t.trackNumber,e.loadMods,e.loadEffects,!1)},[t])),i=Object(r.useCallback)(function(){var e=o.map(function(e){return e.contentHash}).indexOf(n.contentHash),t=o[++e];t&&s(t)},[t,o,n]),u=Object(r.useCallback)(function(){var e=o.map(function(e){return e.contentHash}).indexOf(n.contentHash),t=o[--e];t&&s(t)},[t,o,n]),l=Object(r.useCallback)(function(e){return e.contentHash===n.contentHash?"sample-option selected":"sample-option"},[n]),d=o.map(function(e){return e.contentHash}).indexOf(n.contentHash),f="next-button",m="previous-button";return d>=o.length-1&&(m+=" disabled"),d<1&&(f+=" disabled"),a.a.createElement("div",null,a.a.createElement("div",{className:"fwd-back-buttons"},a.a.createElement("div",{onClick:i,className:m}),a.a.createElement("div",{onClick:u,className:f})),a.a.createElement("div",{className:"samples-breadcrumb"},o.map(function(e,t){return a.a.createElement("div",{key:e.name+"."+t,onClick:function(){return s(e)},className:l(e)},e.name," (",e.tags&&e.tags.join(", "),")")})))}),z=n(381),L=n(715);var H=n(769),F=n(1131),B=Object(h.b)(function(e,t){return{}},function(e){return{}})(function(e){var t=e.content,n=Object(r.useState)(""),o=Object(c.a)(n,2),s=o[0],i=o[1],u=Object(r.useState)(""),l=Object(c.a)(u,2),d=l[0],f=l[1],m=Object(r.useState)(""),p=Object(c.a)(m,2),b=p[0],v=p[1];Object(r.useEffect)(function(){if(!t.isCreated())return v(""),void f("");M.a.users.getUserName(t.sampledByUser||t.user).then(function(e){return f(e)}),Object(F.a)(t.blockNumber).then(function(e){e&&v(function(e){var t=e.getFullYear(),n=(1+e.getMonth()).toString();n=n.length>1?n:"0"+n;var r=e.getDate().toString();return n+"/"+(r=r.length>1?r:"0"+r)+"/"+t}(e))})},[f,v,t.ipfsHash,t]);var h=Object(r.useCallback)(function(){t.save(s)},[t,s]),g=Object(r.useCallback)(function(e){i(e.target.value)},[i]),k=t.getContentType()===H.b?"sampled":"created",E="";t.getContentType()===H.a&&t.hasEdits&&(E=a.a.createElement("div",{className:"needs-creation"},a.a.createElement("div",{className:"info-text"},"You've edited this sound"),a.a.createElement("div",{className:"name-input-container"},a.a.createElement("input",{placeholder:"Type new name for sound",onChange:g,value:s,type:"text",className:"preset-name-input"}),a.a.createElement("div",{onClick:h,className:""===s?"preset-save-button disabled":"preset-save-button"},"Save"))));var O="";return t.isCreated()&&t.getContentType()===H.b&&(O=a.a.createElement("div",{className:"sampled-by"},a.a.createElement("span",{className:"sample-finder"},d)," ",k," this on ",a.a.createElement("span",{className:"sampled-date"},b))),a.a.createElement("div",{className:"created-by"},E,O)}),U=(n(2563),n(1525),n(31)),G=new U.a,V=Object(h.b)(function(e,t){var n=t.subTrack,r=t.track,a=(n||r).preset;return{hasEdits:void 0===a.hasEdits||a.hasEdits,name:a.name,tags:a.tags}},function(e){return{}})(function(e){var t=e.track,n=e.subTrack,r=(e.synth,e.setTagSelected),c=e.tagSelected,o=e.hasEdits,s=e.name,u=e.type,l=void 0===u?A.f:u,d=n||t,f=d.preset,m=G.getColorForTrack(d),p={backgroundColor:m};return a.a.createElement("div",{className:"sampler-browser synth-browser"},a.a.createElement("div",null,a.a.createElement("div",{style:p,className:"synth-thumbnail"}),a.a.createElement(I,{preset:f,track:n||t})),a.a.createElement("div",{className:"sample-info"},a.a.createElement("div",{className:"name-info"},a.a.createElement("div",{className:"sample-name"},s||d.presetName||d.getName()),a.a.createElement(B,{hasEdits:o,content:f}),a.a.createElement("div",{className:"blank-patch"},o||void 0!==s?"":"Blank Patch")),f.isCreated()?a.a.createElement(L.a,{tags:f.tags,tagSelected:c,setTagSelected:r,content:f}):"",!o&&s?a.a.createElement(R,{color:m,content:f.contentHash,type:D.b}):""),a.a.createElement(z.a,{type:l,track:d,tagSelected:c,content:f}),a.a.createElement(i.a,{sequencerEngine:t.sequencerEngine}))}),W=Object(h.b)(function(e,t){return{samples:e.tracks.trackBrowsedSamples[t.track.id]}},function(e,t){return{setBrowsedSamples:function(n){return e(Object(v.Zg)(t.track.id,n))}}})(function(e){var t=e.track,n=e.sample,c=e.samples,o=void 0===c?[]:c,s=(e.setBrowsedSamples,Object(r.useCallback)(function(e){t.auditionSound(e,void 0,void 0,!1)},[t])),i=Object(r.useCallback)(function(){var e=o.indexOf(n),t=o[++e];t&&s(t)},[t,o,n]),u=Object(r.useCallback)(function(){var e=o.indexOf(n),t=o[--e];t&&s(t)},[t,o,n]),l=Object(r.useCallback)(function(e){return e===n?"sample-option selected":"sample-option"},[n]),d=o.indexOf(n),f="next-button",m="previous-button";return d>=o.length-1&&(m+=" disabled"),d<1&&(f+=" disabled"),a.a.createElement("div",null,a.a.createElement("div",{className:"fwd-back-buttons"},a.a.createElement("div",{onClick:i,className:m}),a.a.createElement("div",{onClick:u,className:f})),a.a.createElement("div",{className:"samples-breadcrumb"},o.map(function(e){return a.a.createElement("div",{onClick:function(){return s(e)},className:l(e)},e.name," (",e.tags?e.tags.join(", "):"",")")})))}),Z=n(1135),X=(n(2705),n(2558)),K=n(131),Y=n(341),_=Object(h.b)(function(e,t){return{}},function(e){return{}})(function(e){var t=e.sample,n=Object(r.useCallback)(function(){t.videoId?window.open("https://youtube.com/watch?v="+t.videoId,"_blank"):t.discogsId&&window.open("https://discogs.com/release/"+t.discogsId,"_blank")},[t]);return a.a.createElement("div",{className:"go-to-source"},a.a.createElement("span",{onClick:n},"Go to source"))}),$=n(102),J=n(2627),Q=n(60),ee=n(45),te=n(1078),ne=n(39),re=n(29);function ae(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return ce(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ce(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var c,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,c=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw c}}}}function ce(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var oe=new(n(208).a),se={},ie=function(){var e=Object(f.a)(d.a.mark(function e(t){var n,r,a,c,o,s,i,u,l,f;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!((n=t.join(","))in se)){e.next=3;break}return e.abrupt("return",se[n]);case 3:return e.next=5,new ne.a(oe.contractAddress).from(re.mb).select("ipfsHash").select("videoId").whereIn("ipfsHash",t).executeQuery(!0);case 5:return r=e.sent,e.next=8,new ne.a(oe.contractAddress).from(re.p).select("sampleHash").select("coverArtHash").whereIn("sampleHash",t).executeQuery(!0);case 8:a=e.sent,c={},o=ae(r);try{for(o.s();!(s=o.n()).done;)i=s.value,c[i.ipfsHash]="https://img.youtube.com/vi/"+i.videoId+"/1.jpg"}catch(d){o.e(d)}finally{o.f()}u=ae(a);try{for(u.s();!(l=u.n()).done;)f=l.value,c[f.sampleHash]=p.a.getHashUrl(f.coverArtHash)}catch(d){u.e(d)}finally{u.f()}return se[n]=c,e.abrupt("return",c);case 16:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),ue=Object(h.b)(function(e,t){return{sampleInfo:e.audition.sampleTooltip}},function(e){return{}})(function(e){var t=e.sampleInfo;return void 0===t?a.a.createElement("div",null):a.a.createElement("div",{className:"sample-tooltip"},a.a.createElement("div",{className:"sample-name"},t.name.trim()),a.a.createElement("div",{className:"sample-tags"},t.tags.map(function(e){return a.a.createElement("div",{className:"s-tag"},e)})))}),le=n(67),de=new U.a,fe=0,me=function(e){var t=e.thumbnail,n=e.sample,o=e.sampleId,s=e.annotations,i=e.onDragStart,u=e.onMouseDown,l=e.onMouseUp,d=(e.position,e.sequencerEngine),f=e.onClickSample,m=Object(r.useState)(void 0),p=Object(c.a)(m,2),b=p[0],h=p[1],g=function(e){d.store.dispatch(Object(v.Ue)(e))};Object(r.useEffect)(function(){if(b){var e=++fe;setTimeout(function(){if(e===fe){var t=new le.a(b);t.load(!1).then(function(e){g(t)})}},100)}else g(void 0)},[b,g]);var k={borderColor:de.saturate(de.getColorForHash(o),3)};return t&&""!==t&&(k.backgroundImage='url("'+t+'")'),a.a.createElement("div",{style:{backgroundColor:de.saturate(de.getColorForHash(o),3)},draggable:!0,onDragStart:function(e){return i(o)},onDragOver:function(e){return e.stopPropagation()},className:"sample-container"},a.a.createElement("div",{onMouseDown:function(){return u(o)},onMouseOver:function(){return h(o)},onMouseLeave:function(){return h(void 0)},onMouseUp:function(){return l(o)},onClick:function(){return f(o)},className:o===n.ipfsHash?"sample-from-source selected":"sample-from-source",style:k},a.a.createElement(ee.a,{condition:s.has(o)},a.a.createElement("div",{className:"dot sample-annotation"}))))},pe=0,be=0,ve=(new U.a,new w.a,Object(h.b)(function(e,t){return{pendingTransactions:e.transactions.pendingTransactions}},function(e){return{setSampleDragging:function(t){return e(Object(v.Pe)(t))}}})(function(e){var t=e.setTagSelected,n=e.setSampleDragging,o=e.sample,s=e.track,i=e.tagSelected,u=e.audioUnit,l=e.pendingTransactions,m=Object(r.useRef)(void 0),p=Object(r.useState)(0),b=Object(c.a)(p,2),v=b[0],h=b[1],g=Object(r.useState)(!1),k=Object(c.a)(g,2),E=k[0],O=k[1],j=Object(r.useState)([]),S=Object(c.a)(j,2),y=S[0],w=S[1],C=Object(r.useState)({}),N=Object(c.a)(C,2),q=N[0],x=N[1],T=Object(r.useState)(new Set),P=Object(c.a)(T,2),R=P[0],D=P[1],A=Object(r.useCallback)(function(){var e=Object(f.a)(d.a.mark(function e(t){return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t===o.ipfsHash){e.next=2;break}return e.abrupt("return");case 2:u.playSound();case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),[o]);Object(r.useEffect)(function(){O(!1)},[O,s]);var I=Object(r.useCallback)(function(){var e=Object(f.a)(d.a.mark(function e(t){return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t===o.ipfsHash){e.next=2;break}return e.abrupt("return");case 2:u.stopSound();case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),[o]),z=Object(r.useCallback)(function(){var e=Object(f.a)(d.a.mark(function e(t){var n,r;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t!==o.ipfsHash){e.next=2;break}return e.abrupt("return");case 2:return n=++be,r=new le.a(t),e.next=6,r.load();case 6:n===be&&s.auditionSound(r);case 7:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),[s,o]);Object(r.useEffect)(function(){m.current.scrollTo(0,0),h(0)},[i,s,h]),Object(r.useEffect)(function(){i?Object(te.b)(i).then(function(e){return w(e)}):o.videoId?Object(te.d)(o.videoId).then(function(e){return w(e)}):o.discogsId?Object(te.a)(o.discogsId).then(function(e){w(e)}):Object(te.c)(o.sampledByUser,o.blockNumber).then(function(e){return w(e)})},[o,w,i,o.videoId,o.discogsId]),Object(r.useEffect)(function(){ie(y).then(function(e){return x(e)}),L()},[y,x]),Object(r.useEffect)(function(){t(void 0)},[s]),Object(r.useEffect)(function(){M.a.xanadu.getAnnotations(X.a).then(function(e){D(new Set(e.map(function(e){return e.data})))})},[D,l]),Object(r.useEffect)(function(){return m.current.addEventListener("scroll",L),function(){m.current.removeEventListener("scroll",L)}},[h,v,y]);var L=Object(r.useCallback)(function(e){var t=++pe;setTimeout(function(){if(t===pe&&m.current){var e=m.current;e.scrollTop+e.offsetHeight>=e.scrollHeight-20&&y.length>v+64&&h(v+64)}},100)},[h,y,v]),H=Object(r.useCallback)(function(e){n(e)},[]),F=E?y.slice(0,v+64):[];return a.a.createElement("div",{className:"sample-explorer"},i?a.a.createElement("div",{className:"info"},y.length,a.a.createElement("span",{onClick:function(){return O(!E)},className:E?"samples-button selected":"samples-button"},"sounds"),"with this tag"):a.a.createElement("div",{className:"info"},y.length,a.a.createElement("span",{onClick:function(){return O(!E)},className:E?"samples-button selected":"samples-button"},"sounds"),"from this source"),a.a.createElement("div",{ref:m,className:"samples-from-source"},F.map(function(e,t){return a.a.createElement(me,{thumbnail:q[e],key:"sample-"+t,onDragStart:function(t){return H(e)},onMouseDown:function(){return A(e)},position:t%6,onMouseUp:function(){return I(e)},sequencerEngine:s.sequencerEngine,annotations:R,onDragOver:function(e){return e.stopPropagation()},onClickSample:function(){return z(e)},sampleId:e,sample:o})})),a.a.createElement(ue,null))})),he=(n(2801),new U.a);Object(h.b)(function(e,t){var n=t.track;return void 0===n?{selectedInstrument:void 0,loaded:!1}:{playing:n.frozenColumns&&n.frozenColumns[0].playing,selectedInstrument:e.tracks.selectedRackSubTrack[t.track.id],loaded:e.tracks.trackIsLoading[t.track.subSequence.id]&&!e.tracks.trackIsLoading[t.track.subSequence.id][t.track.trackNumber],isFrozen:n.isFrozen}},function(e){return{}})(function(e){var t=e.bottomMode,n=e.track,l=e.sequencerEngine,d=(e.id,e.loaded,e.selectedInstrument),f=(e.isFrozen,Object(r.useState)(void 0)),m=Object(c.a)(f,2),p=m[0],b=m[1],v=Object(r.useState)(new Y.a),h=Object(c.a)(v,2),g=h[0];h[1];if(Object(r.useEffect)(function(){return function(){return g.dispose()}},[g]),void 0===n)return a.a.createElement("div",null);if(t===K.e&&(n.getTrackType()===A.i||n.isFrozen||n.getTrackType()===Q.e))return a.a.createElement(J.a.DetailsView,{showParameters:!1,hideKeyboard:!1,alreadyLoaded:!0,onGoBack:function(){return[]},keyboardEngine:l.keyboardEngine,midiEngine:l.midi,trackNumber:l.cursor.track,resolution:l.resolution,parentView:$.e,sequencerEngine:l,bpm:l.bpm,track:n});var k=void 0,E=n,O=void 0,j=void 0;if(n.getTrackType()===A.i)void 0!==(k=n.sample)&&(O=n.samplers[k.getId()]);else if(n.instrument&&n.instrument.getInstrumentType()===A.h)(O=n.selectedSampler||n.instrument.defaultSampler)&&(k=O.sample),j=n.instrument;else if(n.instrument&&n.instrument.getInstrumentType()===A.f)j=n.instrument;else if(n.instrument&&n.getTrackType()===Q.c&&n.tracks.length>0){var S=d?d.track:n.tracks[0].track;S.instrument.getInstrumentType()===A.h?void 0!==(O=S.selectedSampler||S.instrument.defaultSampler)&&(k=O.sample,E=S):S.instrument.getInstrumentType()===A.f&&(j=S.instrument,E=S)}if(j&&!E.isFrozen)return a.a.createElement(V,{type:j.getInstrumentType(),tagSelected:p,setTagSelected:b,synth:j,track:E});if(void 0===k||void 0===k.audioBuffer||n.isFrozen)return a.a.createElement("div",null);g.setBuffer(k.audioBuffer);var y=E||n,w=he.getColorForTrack(y);return a.a.createElement("div",{className:"sampler-browser"},a.a.createElement("div",null,a.a.createElement(o.a,{track:n,sample:k,onClickThumbnail:function(){return[]}}),a.a.createElement(Z.a,{audioUnit:g,sequencerEngine:l,buffer:k.audioBuffer,id:k.ipfsHash,sample:k,width:100,height:30}),a.a.createElement(W,{sample:k,track:E})),a.a.createElement("div",{className:"sample-info"},a.a.createElement("div",{className:"name-info"},a.a.createElement("div",{className:"sample-name"},(C=k.name,void 0===C?"":(C=C.trim()).length>40?C.substring(0,40)+"...":C)),k.needsSave?"Not saved yet":a.a.createElement("div",null,a.a.createElement(B,{content:k}),a.a.createElement(_,{sample:k}))),a.a.createElement(L.a,{tagSelected:p,setTagSelected:b,content:k}),a.a.createElement(R,{color:w,content:k.ipfsHash,type:D.f})),a.a.createElement("div",null,a.a.createElement(s.a,{track:n,sample:k}),a.a.createElement(u.a,{sequencerEngine:l,sample:k})),k.needsSave?a.a.createElement(T,{track:n,sample:k}):a.a.createElement(ve,{audioUnit:g,setTagSelected:b,tagSelected:p,track:E,sample:k}),a.a.createElement(i.a,{sequencerEngine:l}));var C});var ge=n(2695),ke=(n(372),n(1172),n(1164));t.a=Object(h.b)(function(e,t){t.sequencerEngine.engineId;var n=!1;e.sequencer.sidebarCollapsed?n=!1:t.sequencerEngine.tracks&&0===t.sequencerEngine.tracks.length&&(n=!0),e.sequencer.viewMode,$.e;var r=t.sequencerEngine.tracks[e.mix.selectedTrack];return r&&r.tracks&&r.tracks[0]&&(r=r.tracks[0].track),{track:r,id:void 0===r?0:void 0!==r.sample&&void 0!==r.sample.getId()?r.sample.getId():r.presetName||r.getName(),numTracks:t.sequencerEngine.tracks&&t.sequencerEngine.tracks.length,bottomHeight:e.arrangement.bottomHeight,bottomMode:e.arrangement.bottomMode,selectedRows:e.arrangement.selectedRows,selectedTrack:e.mix.selectedTrack,hide:n}},function(e){return{setArrangementBottomResizing:function(t){return e(Object(v.F)(t))}}})(function(e){var t={height:e.bottomHeight},n=(e.sequencerEngine,Object(r.useCallback)(function(){e.setArrangementBottomResizing(!1)},[e.setArrangementBottomResizing])),c="",o="";if(e.hide)return a.a.createElement("div",null);var s=void 0;return void 0!==e.selectedTrack&&e.sequencerEngine.tracks&&((s=e.sequencerEngine.tracks[e.selectedTrack])&&(o=a.a.createElement(ge.a,{track:s,sequencerEngine:e.sequencerEngine})),s&&e.bottomHeight>25&&(c=a.a.createElement(ke.a,{parentClassName:"arrangement-bottom-container",isLooping:!1,installation:!0,sequencerEngine:e.sequencerEngine,hideToolbar:!0,track:s}))),a.a.createElement("div",{onMouseUp:n,style:t,className:"arrangement-bottom-container"},o,c)})},2685:function(e,t,n){"use strict";var r=n(0),a=n.n(r),c=n(518),o=n(318),s=n(12),i=n(705),u=n(9),l=Object(s.b)(function(e,t){return{windowPosition:e.windows.windowPositions[t.zobject.window.id]}},function(e){return{setViewableZObjects:function(t){return e(Object(u.Oh)(t))}}})(function(e){var t=e.containerRef,n=e.setSize,c=e.sizeRef,s=e.setViewableZObjects,u=e.zobject,l=e.ordering,d=e.setOrdering,f=e.elements,m=e.windowPosition,p=Object(r.useRef)(),b=Object(i.a)({sequencerEngine:u.sequencerEngine,basicContainerRef:t,ref:p,ordering:l,setOrdering:d,element:u.window,setSize:n,sizeRef:c,elements:f,windowPosition:m}),v=(b.windowScale,b.setWindowScale,b.onMouseDown),h=b.onMouseUp,g=b.style,k=(b.startResizing,{});m&&(k.left=m.x,k.top=m.y);var E=Object(r.useCallback)(function(){var e=u.state.zobject.viewableZObjects;s(e.filter(function(e){return e!==u}))},[u]);return a.a.createElement("div",{className:"zobject-window",style:g,ref:p},a.a.createElement("div",{onMouseDown:v,onMouseUp:h,className:"zobject-header"},a.a.createElement("div",{onClick:E,className:"delete-btn"},"x")),a.a.createElement(o.a,{scale:1,elements:f,sequencerEngine:u.sequencerEngine,ordering:l,setOrdering:d,isStatic:!0,customMode:!1,setSize:n,sizeRef:c,containerRef:p,zobject:u}))}),d=n(8),f=n(10),m=n(6),p=n(82),b=n(2770),v=(n(2819),Object(s.b)(function(e,t){return{width:t.subpatch.zObject.width,height:t.subpatch.height,selectedZObject:e.zobject.selectedZObject}},function(e){return{}})(function(e){e.width;var t=e.subpatch,n=Object(p.a)(e,["width","subpatch"]),c=Object(r.useState)(!1),o=Object(m.a)(c,2),s=o[0],i=o[1];return console.log("sibpatch selected zobject=",n.selectedZObject),Object(r.useEffect)(function(){n.selectedZObject?(t.zObjects.includes(n.selectedZObject)||t.zMessages.includes(n.selectedZObject))&&i(!0):i(!1)},[n.selectedZObject,i,t]),a.a.createElement("div",{style:{height:t.height-65},className:s?"subpatch-sidebar opened":"subpatch-sidebar"},s?a.a.createElement(b.a,{force:!0,hideContext:!0,seauencerEngine:n.sequencerEngine}):n.selectedZObject&&n.selectedZObject.subSequence===t&&a.a.createElement("img",{className:"pushable info-icon",onClick:function(){return i(!0)},src:"/info-icon.svg"}))})),h=n(91),g=n(2778),k=Object(s.b)(function(e,t){return{selectedZObject:e.zobject.selectedZObject,zobjects:t.subpatch.zObjects,zmessages:t.subpatch.zMessages,objectDragging:e.zobject.objectDragging}},function(e){return{setSelectedZObject:function(t){return e(Object(u.Cf)(t))},setObjectDragging:function(t){return e(Object(u.Fd)(t))}}})(function(e){var t=e.setSelectedZObject,n=e.setObjectDragging,r=e.zobjects,c=e.zmessages,o=e.selectedZObject,s=e.subpatch,i=function(e){t(e)};return a.a.createElement("div",{style:{height:s.height-120,maxHeight:s.height-120},className:"object-tree"},c.map(function(e){return a.a.createElement("div",{draggable:!0,onDragStart:function(t){t.dataTransfer.setData("text/html",e.id),n(e)},onDragOver:function(e){return e.preventDefault()},key:e.id,onClick:function(){return t(e)},className:e===o?"selected zmessage":"zmessage"},a.a.createElement("img",{className:"object-icon",src:e.type===h.c?"/znumber-light.svg":"/zmessage-light.svg"})," ","string"===typeof e.storedMessage?e.storedMessage:e.type===h.c?"Number":"Message")}),r.map(function(e){return a.a.createElement(g.a,{key:e.id,zobject:e,searchTerm:"",setSelectedZObject:i,setObjectDragging:n,selectedZObject:o})}))}),E=Object(s.b)(function(e,t){return{height:t.subpatch.height}},function(e){return{}})(function(e){var t=e.subpatch,n=Object(r.useState)(!1),c=Object(m.a)(n,2),o=c[0],s=c[1],i="subpatch-left-sidebar";return o&&(i+=" opened"),a.a.createElement("div",{className:i},a.a.createElement("img",{onClick:function(){return s(!o)},src:"/tree-icon.svg",className:"pushable tree-icon"}),o&&a.a.createElement(k,{subpatch:t}))}),O=n(2598),j=n(1148),S=function(e){for(var t=[],n=e.zObject;n.subSequence&&n.subSequence.zObject;)t.push(n.subSequence),n=n.subSequence.zObject;return t},y=Object(s.b)(function(e,t){return{}},function(e){return{setViewableSubPatches:function(t){return e(Object(u.Nh)(t))},setWindowPosition:function(t,n){return e(Object(u.Th)(t,n))}}})(function(e){var t=e.subpatch,n=e.setWindowPosition,c=e.setViewableSubPatches,o=S(t),s=Object(r.useCallback)(function(e){var r=t.zObject.sequencerEngine.state;e.width=t.width,e.height=t.height;var a=r.windows.windowPositions[t.id];n(e.id,a),c([e])},[o,c,t]);return a.a.createElement("div",{className:"subpatch-breadcrumb"},o.map(function(e){return a.a.createElement("div",{className:"parent"},a.a.createElement("div",{className:"arrow-right"}),a.a.createElement("div",{onClick:function(){return s(e)},className:"parent-name"},e.zObject.args[0]))}))}),w=n(75),C=Object(s.b)(function(e,t){return{presentationMode:t.subpatch.presentationMode}},function(e){return{setFullScreenZObject:function(t){return e(Object(u.uc)(t))}}})(function(e){var t=e.setFullScreenZObject,n=e.setEditLayout,c=e.editLayout,o=e.setCustomMode,s=e.customMode,i=e.subpatch,u=e.presentationMode,l=Object(r.useState)(!1),d=Object(m.a)(l,2),f=d[0],p=d[1];Object(r.useEffect)(function(){s&&n(!!u)},[u,s]);var b=Object(r.useCallback)(function(){n(!s),i.isCustom=!s,o(!s)},[s,o,i,n]);return a.a.createElement(w.c,{className:"subpatch-menu",show:f?"true":"false",isOpen:f,toggle:function(){return p(!f)}},a.a.createElement(w.f,{size:"sm",caret:!0,color:"primary"},"Edit"),a.a.createElement(w.e,null,s&&a.a.createElement(w.d,{onClick:function(){return t(i.zObject)}},"Full Screen"),a.a.createElement(w.d,{key:"",onClick:b,size:"sm"},"Instrument Mode",s&&a.a.createElement("span",{className:"small_checkmark"},a.a.createElement("div",{className:"small_checkmark_stem"}),a.a.createElement("div",{className:"small_checkmark_kick"}))),s&&a.a.createElement(w.d,{key:"",onClick:function(){return n(!c)},size:"sm"},"Edit Layout",c&&a.a.createElement("span",{className:"small_checkmark"},a.a.createElement("div",{className:"small_checkmark_stem"}),a.a.createElement("div",{className:"small_checkmark_kick"})))))}),N=n(2644),q=n(316),x=(Object(s.b)(function(e,t){return{}},function(e){return{}})(function(e){var t=e.subpatch,n=Object(r.useState)({hex:t.fillColor||"#24273a"}),c=Object(m.a)(n,2),o=c[0],s=c[1];Object(r.useEffect)(function(){t.fillColor=o.hex,console.log("ssetting to ",o.hex)},[o]);var i=Object(r.useState)(void 0),u=Object(m.a)(i,2),l=u[0],d=u[1];return a.a.createElement("div",{className:"subpatch-colors"},a.a.createElement("div",{onClick:function(){return d(l?void 0:"fill")},style:{backgroundColor:o.hex},className:"color-btn"}),"fill"===l&&a.a.createElement(q.a,{color:o,onChange:s}))}),n(255)),T=n(1441),M=n(221),P=n(136),R=n(329),D=(n(1157),n(187)),A=Object(s.b)(function(e,t){return{presentationMode:t.subpatch.presentationMode,windowPosition:e.windows.windowPositions[t.subpatch.id],backgroundColor:e.sequencer.backgroundColor,viewableSubPatches:e.zobject.viewableSubPatches}},function(e,t){return{setWindowPosition:function(t,n){return e(Object(u.Th)(t,n))},setViewableSubPatches:function(t){return e(Object(u.Nh)(t))},setMinimizedSubPatches:function(t){return e(Object(u.od)(t))},setRecentSubPatches:function(t){return e(Object(u.Ge)(t))},setSize:function(n){return e(Object(u.yd)(t.subpatch.id,n))}}})(function(e){var t=e.sizeRef,n=e.ordering,c=e.setOrdering,o=e.elements,s=e.setSize,u=e.subpatch,l=e.subPatches,p=e.setViewableSubPatches,b=e.viewableSubPatches,h=e.setMinimizedSubPatches,g=e.setWindowPosition,k=e.containerRef,w=e.windowPosition,q=e.setRecentSubPatches,A=e.backgroundColor,I=e.presentationMode,z=Object(r.useRef)(void 0),L=Object(r.useRef)(void 0),H=Object(O.a)({elements:o,subSequence:u,presentationMode:I}).arrangeWindows,F=Object(x.a)({ref:L}),B=F.onContextMenu,U=F.dropdownPos,G=F.setDropdownPos,V=Object(r.useRef)(U),W=Object(r.useState)(u.isCustom),Z=Object(m.a)(W,2),X=Z[0],K=Z[1],Y=Object(r.useState)(!1),_=Object(m.a)(Y,2),$=_[0],J=_[1],Q=Object(i.a)({sequencerEngine:u.sequencerEngine,basicContainerRef:k,ref:z,ordering:n,setOrdering:c,element:u,setSize:s,sizeRef:t,elements:o,windowPosition:w}),ee=Q.windowScale,te=Q.setWindowScale,ne=Q.onMouseDown,re=Q.onMouseUp,ae=Q.style,ce=Q.startResizing,oe=Object(r.useRef)();!function(e){var t=e.ref,n=(e.subpatch,e.size),a=(e.setSize,Object(r.useState)(n)),c=Object(m.a)(a,2),o=c[0],s=c[1];Object(r.useEffect)(function(){return t.current.addEventListener("mousewheel",i,{passive:!1}),function(){t&&t.current&&t.current.removeEventListener("mousewheel",i,{passive:!1})}},[o,s]);var i=Object(r.useCallback)(function(e){if((new Date).getTime()-window.lastScrollTime<1e3)return!1;if(!t||!t.current)return!1;e.stopPropagation(),e.preventDefault();var r=t.current,a=r.scrollTop,c=r.scrollLeft,i=e.deltaX,u=e.deltaY,l=c+i,d=a+u;if(!n)return!1;if(!((n={width:Math.max(o.width,window.innerWidth-0),height:Math.max(o.height,window.innerHeight-0)}).width<200||n.height<200)){var f={width:i+n.width,height:u+n.height};return s(f),t.current.scrollTo(l,d),!1}},[o,s])}({subpatch:u,ref:oe,size:ee,setSize:te}),Object(r.useEffect)(function(){return z.current.addEventListener("mousewheel",se),function(){z.current&&z.current.removeEventListener("mousewheel",se)}},[]);var se=function(e){e.stopPropagation()},ie=Object(r.useCallback)(function(){var e=window.innerWidth,t=window.innerHeight;u.width+100>window.innerWidth&&u.height+100>window.innerHeight&&(e=600,t=600),u.width=e,u.height=t,te({x:e,y:t}),g(u.id,{x:0,y:0})},[u,te]),ue=Object(D.a)(ie),le=Object(r.useRef)(n);Object(r.useEffect)(function(){le.current=n},[n]),Object(r.useEffect)(function(){return function(){delete o.current[u.id],c(le.current.filter(function(e){return e!==u}))}},[]),Object(r.useEffect)(function(){U&&(V.current=U)},[U]);var de=Object(r.useCallback)(function(e,t){e.stopPropagation();var n=S(u),r=l.filter(function(e){return e!==u&&!n.includes(e)});if(!t){var a=u.sequencerEngine.state.zobject.minimizedSubPatches;h(a.filter(function(e){return e!==u}))}p(r)},[l]),fe=Object(r.useCallback)(function(e){e.stopPropagation();var t=u.sequencerEngine.state.zobject.minimizedSubPatches;h([].concat(Object(f.a)(t.filter(function(e){return e!==u})),[u])),de(e,!0)},[u]),me=(Object(r.useCallback)(function(){var e=V.current,t=e.x,n=e.y;u.createZMessage(t,n)},[u]),Object(r.useCallback)(function(){var e=V.current,t=e.x,n=e.y;u.newInlet(void 0,void 0,t,n)},[u])),pe=Object(r.useCallback)(function(){var e=V.current,t=e.x,n=e.y;u.newInstanceInlet(void 0,void 0,t,n)},[u]),be=Object(r.useCallback)(function(){var e=V.current,t=e.x,n=e.y;u.newOutlet(void 0,void 0,t,n)},[u]),ve=Object(r.useCallback)(function(){for(var e=u.sequencerEngine.state.windows.selectedElements,t=0,n=Object.keys(e);t<n.length;t++){var r=n[t],a=u.sequencerEngine.findNodeById(r);a&&a.setAttribute("Include in Presentation",!0)}},[u]),he=Object(d.a)({},ae);ee&&ee.x>0&&ee.y>0&&(he.width=ee.x,he.height=ee.y),w&&(he.top=Math.min(window.innerHeight-100,Math.max(0,w.y)),he.left=w.x);var ge=he.zIndex+1e9;he.zIndex=ge;var ke="sub-patch no-select ";X&&$&&(ke+=" editing-layout-mode"),n.indexOf(u)===n.length-1&&(ke+=" top-window"),Object(r.useEffect)(function(){if(n.indexOf(u)===n.length-1){var e=u.sequencerEngine.state.zobject.recentSubPatches,t=[u].concat(Object(f.a)(e.filter(function(e){return e!==u})));console.log("ordering changed and its at top"),console.log("setting recent=",t),q(t)}},[n,u]);var Ee=Object(r.useCallback)(function(){Object(j.a)(u.sequencerEngine,u)},[u]),Oe=Object(r.useCallback)(function(){u.deencapsulate()},[U]),je=Object(r.useCallback)(function(){u.encapsulateObjects(U.x,U.y)},[U]),Se=u.state.windows.selectedElements,ye=Object.keys(Se).filter(function(e){return Se[e]});return he.backgroundColor=A,b.length>1&&(ke+=" multi-subpatches"),a.a.createElement("div",{onMouseDown:ne,onMouseUp:re,className:ke,style:he,ref:z},a.a.createElement("div",{onMouseDown:function(e){return ce(R.b,e)},className:"top-left-edge"}),a.a.createElement("div",{onMouseDown:function(e){return ce(R.a,e)},className:"top-right-edge"}),a.a.createElement("div",{onMouseDown:function(e){return ce(R.d,e)},className:"bottom-left-edge"}),a.a.createElement("div",{onMouseDown:function(e){return ce(R.c,e)},className:"bottom-right-edge"}),a.a.createElement("div",{onClick:ue,className:"sub-patch-header"},u.zObject.args[0],a.a.createElement(y,{subpatch:u}),a.a.createElement("div",{onMouseDown:function(e){return e.stopPropagation()},onClick:fe,className:"minimize-btn"},"-"),a.a.createElement("div",{onMouseDown:function(e){return e.stopPropagation()},onClick:de,className:"delete-btn"},"x")),a.a.createElement("div",{ref:L,onContextMenu:B,onMouseDown:function(e){e.stopPropagation(),G(void 0)},className:"sub-patch-content"},a.a.createElement(M.a,{className:"midi-context",dropdownPos:U?{x:U.x,y:U.y}:void 0},ye.length>0&&a.a.createElement(P.a,{onMouseDown:je},"Encapsulate Objects"),ye.length>0&&a.a.createElement(P.a,{onMouseDown:ve},"Include in Presentation",a.a.createElement("img",{src:"/presentation-mode.svg"})),ye.length>0&&a.a.createElement(P.a,{onMouseDown:H},"Pack Objects"),a.a.createElement(P.a,{onMouseDown:Oe},"De-encapsulate entire subpatch"),a.a.createElement(P.a,{onMouseDown:me},"New Inlet"),a.a.createElement(P.a,{onMouseDown:be},"New Outlet"),a.a.createElement(P.a,{onMouseDown:Ee},"Segment All Cables"),a.a.createElement(P.a,{onMouseDown:pe},"New Instance Inlet")),a.a.createElement(N.a,{subpatch:u,subSequence:u},a.a.createElement(C,{setEditLayout:J,editLayout:$,setCustomMode:K,customMode:X,subpatch:u})),a.a.createElement("div",{className:"content-and-sidebars"},a.a.createElement(E,{sequencerEngine:u.sequencerEngine,subpatch:u}),a.a.createElement(T.a,{editLayout:$,scrollRef:oe,customMode:X,subpatch:u}),a.a.createElement(v,{sequencerEngine:u.sequencerEngine,subpatch:u}))))});function I(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return z(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return z(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var c,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,c=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw c}}}}function z(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}t.a=Object(s.b)(function(e,t){return{subPatches:e.zobject.viewableSubPatches,zobjects:e.zobject.viewableZObjects,fullScreenZObject:e.zobject.fullScreenZObject}},function(e){return{}})(function(e){var t,n=e.subPatches,o=e.zobjects,s=e.containerRef,i=e.fullScreenZObject,u=Object(r.useRef)({}),d=Object(c.a)(),f=d.sizeRef,m=d.ordering,p=d.setOrdering,b=[],v=I(n);try{for(v.s();!(t=v.n()).done;){var h=t.value.zObject;n.includes(h.subSequence)&&b.push(h.subSequence)}}catch(g){v.e(g)}finally{v.f()}return[o.map(function(e){return a.a.createElement(l,{zobject:e,elements:u,sizeRef:f,containerRef:s,setSize:function(){return 0},ordering:m,setOrdering:p})}),n.filter(function(e){return!i||i.effect!==e}).filter(function(e){return!b.includes(e)}).map(function(e){return a.a.createElement(A,{key:e.id,sizeRef:f,ordering:m,setOrdering:p,elements:u,subPatches:n,subpatch:e,containerRef:s})})]})},2686:function(e,t,n){"use strict";var r=n(20),a=n(2),c=n.n(a),o=n(13),s=n(3),i=n(4),u=n(7),l=n(11),d=n(1),f=n(0),m=n.n(f),p=n(962),b=n(6),v=n(1171),h=n(12),g=n(963),k=(new(n(31).a),function(e){var t=e.token,n="token-option";return e.isSelected&&(n+=" selected"),m.a.createElement("div",{onClick:function(){var e="/nft/"+parseInt(t.projectId)+"/"+t.tokenId;console.log("project url",e),window.location.href=e},className:n},m.a.createElement(v.a,{seedHash:t.seedHash}),m.a.createElement("div",{className:"token-id"},t.tokenId))}),E=Object(h.b)(function(e,t){return{mintedTokens:e.nft.mintedTokens}},function(e){return{}})(function(e){var t=e.mintedTokens,n=e.sequencerEngine,r=Object(f.useState)(!1),a=Object(b.a)(r,2),c=a[0],o=a[1],s=Object(f.useState)(!1),i=Object(b.a)(s,2),u=i[0],l=i[1],d=t[0],p=Object(f.useCallback)(function(){l(!0),Object(g.d)(d.projectId).then(function(e){return l(!1)})},[d,l]);if(!d)return"";var h=d.maxInvocations-t.length,E=n.tokenId;return m.a.createElement("div",{onClick:function(){return o(!c)},className:"mints-toolbar-view no-select"},m.a.createElement(v.a,{seedHash:n.seedHash,className:c?"token-icon showing":"token-icon"}),c&&m.a.createElement("div",{onClick:function(e){return e.stopPropagation()},className:"minted-menu"},m.a.createElement("div",{className:"project-info"},m.a.createElement("div",{className:"project-title"},t[0].title),m.a.createElement("div",{className:"project-id"},t[0].projectId),m.a.createElement("div",{className:"max-invocations"},"Max: ",t[0].maxInvocations)),m.a.createElement("div",{className:"minted"},t.map(function(e){return m.a.createElement(k,{isSelected:e.tokenId===E,token:e})})),m.a.createElement("div",{className:"unminted"},h," unminted tokens left",h>0&&m.a.createElement("div",{onClick:p,className:u?"mint-button minting":"mint-button"},"Mint"))))}),O=n(150),j=n(1127),S=n(1177),y=n(2553),w=n(2604),C=n(1130),N=(n(196),n(75),n(2640)),q=n(2687),x=n(9),T=n(706),M=(n(33),n(35)),P=(n(209),function e(){Object(s.a)(this,e),this.abi=[{constant:!1,inputs:[{name:"ipfsHash",type:"bytes32"}],name:"newSamplePack",outputs:[{name:"",type:"uint32"}],payable:!1,stateMutability:"nonpayable",type:"function"},{anonymous:!1,inputs:[{indexed:!0,name:"",type:"address"},{indexed:!0,name:"",type:"uint32"}],name:"NewSamplePack",type:"event"},{constant:!1,inputs:[{name:"ipfsHash",type:"bytes32"},{name:"tags",type:"bytes32[4]"}],name:"newSamplePackWithTags",outputs:[{name:"",type:"uint32"}],payable:!1,stateMutability:"nonpayable",type:"function"},{anonymous:!1,inputs:[{indexed:!0,name:"",type:"uint32"},{indexed:!0,name:"",type:"bytes32"}],name:"SamplePackTagged",type:"event"},{constant:!1,inputs:[{name:"id",type:"uint32"},{name:"tags",type:"bytes32[4]"}],name:"tagSamplePack",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{inputs:[],payable:!1,stateMutability:"nonpayable",type:"constructor"},{constant:!1,inputs:[{name:"id",type:"uint32"},{name:"ipfsHash",type:"bytes32"}],name:"updateSamplePackSamples",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"getNumberOfSamplePacks",outputs:[{name:"",type:"uint32"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"id",type:"uint32"}],name:"getSamplePackIpfsHash",outputs:[{name:"",type:"bytes32"}],payable:!1,stateMutability:"view",type:"function"}],this.contractAddress="0x1f4d647863b75171b40680f269d4c8cbf3ed50b7"}),R=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};Object(s.a)(this,e),this.samples=n,this.tags=r,this.name=t,this.sampleToSlices=a,this.timestamp=void 0,this.isArchived=!1,this.id=void 0}return Object(i.a)(e,[{key:"getJson",value:function(){return{samples:this.samples,sampleToSlices:this.sampleToSlices,name:this.name,tags:this.tags,timestamp:void 0===this.timestamp?Math.floor(Date.now()):this.timestamp,isArchived:this.isArchived,id:this.id}}},{key:"fromJson",value:function(e){return"sampleToSlices"in e&&(this.sampleToSlices=e.sampleToSlices),"name"in e&&(this.name=e.name),"samples"in e&&(this.samples=e.samples),"tags"in e&&(this.tags=e.tags),"timestamp"in e&&(this.timestamp=new Date(e.timestamp)),"isArchived"in e&&(this.isArchived=e.isArchived),"id"in e&&(this.id=e.id),this}}]),e}(),D=n(43),A=n(1066),I=n(30),z=new P,L=function(){function e(){Object(s.a)(this,e),void 0!==I.a&&I.a.eth.net.isListening()&&(this.contract=new I.a.eth.Contract(z.abi,z.contractAddress),this.ethAddress=this.contract.options.address)}return Object(i.a)(e,[{key:"updateSamplePack",value:function(e,t){var n=this;return new Promise(function(){var r=Object(o.a)(c.a.mark(function r(a,o){var s,i;return c.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,D.a.addJson(t.getJson());case 2:return s=r.sent,r.next=5,I.a.eth.getAccounts();case 5:i=r.sent,n.contract.methods.updateSamplePackSamples(e,Object(A.b)(s)).send({from:i[0]},function(e,t){e?o(e):a()});case 7:case"end":return r.stop()}},r)}));return function(e,t){return r.apply(this,arguments)}}())}},{key:"newSamplePack",value:function(e){var t=this;return new Promise(function(){var n=Object(o.a)(c.a.mark(function n(r,a){var o,s;return c.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,D.a.addJson(e.getJson());case 2:return o=n.sent,n.next=5,I.a.eth.getAccounts();case 5:s=n.sent,t.contract.methods.newSamplePack(Object(A.b)(o)).send({from:s[0]},function(e,t){e?a(e):r()});case 7:case"end":return n.stop()}},n)}));return function(e,t){return n.apply(this,arguments)}}())}},{key:"getAllSamplePacks",value:function(){var e=this;return new Promise(function(){var t=Object(o.a)(c.a.mark(function t(n,r){var a,s,i,u,l;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.contract.methods.getNumberOfSamplePacks().call();case 2:for(a=t.sent,s=[],i=function(t){s.push(new Promise(function(){var n=Object(o.a)(c.a.mark(function n(r,a){var o,s,i;return c.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.contract.methods.getSamplePackIpfsHash(t).call();case 2:return o=n.sent,n.next=5,D.a.getJson(Object(A.a)(o));case 5:s=n.sent,(i=new R).id=t,r(i.fromJson(s));case 9:case"end":return n.stop()}},n)}));return function(e,t){return n.apply(this,arguments)}}()))},u=1;u<=a;u++)i(u);return t.next=8,Promise.all(s);case 8:l=t.sent,n(l.filter(function(e){return!e.isArchived}).reverse());case 10:case"end":return t.stop()}},t)}));return function(e,n){return t.apply(this,arguments)}}())}}]),e}(),H=n(18);function F(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=Object(d.a)(e);if(t){var a=Object(d.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(l.a)(this,n)}}var B=function(e){Object(u.a)(n,e);var t=F(n);function n(e){var r;return Object(s.a)(this,n),(r=t.call(this,e)).onClickColor=r.onClickColor.bind(Object(H.a)(r)),r}return Object(i.a)(n,[{key:"onClickColor",value:function(e){console.log("pattern to edit color = "+this.props.patternToEditColor),this.props.setPatternColor(this.props.patternToEditColor,e)}},{key:"onClickDone",value:function(){this.props.setPatternToEditColor(void 0)}},{key:"render",value:function(){var e=this;return m.a.createElement("div",{className:"sub-toolbar"},m.a.createElement("div",{className:"color-picker"},m.a.createElement(U,{patternColor:this.props.patternColor,color:"white",onClickColor:this.onClickColor}),m.a.createElement(U,{patternColor:this.props.patternColor,color:"red",onClickColor:this.onClickColor}),m.a.createElement(U,{patternColor:this.props.patternColor,color:"orange",onClickColor:this.onClickColor}),m.a.createElement(U,{patternColor:this.props.patternColor,color:"yellow",onClickColor:this.onClickColor}),m.a.createElement(U,{patternColor:this.props.patternColor,color:"green",onClickColor:this.onClickColor}),m.a.createElement(U,{patternColor:this.props.patternColor,color:"blue",onClickColor:this.onClickColor}),m.a.createElement(U,{patternColor:this.props.patternColor,color:"purple",onClickColor:this.onClickColor})),m.a.createElement("div",{className:"done-button",onClick:function(){return e.onClickDone()}},"DONE"))}}]),n}(f.Component),U=function(e){Object(u.a)(n,e);var t=F(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){var e=this,t="color-option background-"+this.props.color;return this.props.patternColor===this.props.color&&(t+=" selected"),m.a.createElement("div",{onClick:function(){return e.props.onClickColor(e.props.color)},className:t})}}]),n}(f.Component),G=Object(h.b)(function(e){return{patternToEditColor:e.toolbar.patternToEditColor,patternColor:e.toolbar.patternColors[e.toolbar.patternToEditColor]}},function(e){return{setPatternToEditColor:function(t){return e(Object(x.de)(t))},setPatternColor:function(t,n){return e(Object(x.ce)(t,n))}}})(B),V=n(45),W=n(102),Z=n(1136),X=n(44),K=n(234);function Y(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=Object(d.a)(e);if(t){var a=Object(d.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(l.a)(this,n)}}var _=function(e){Object(u.a)(n,e);var t=Y(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"onClick",value:function(){this.props.connectionStatus===K.a&&this.props.sequencerEngine.clockSync.retry()}},{key:"render",value:function(){var e=this;if(this.props.connectionStatus===K.b)return m.a.createElement("div",null);var t="";t=this.props.connectionStatus===K.d?"Waiting for peer to connect":this.props.connectionStatus===K.a?"Disconnected (click to retry)":"Synced with "+this.props.connectedUserName;var n=this.props.connectionStatus===K.d?" flashit":"";return m.a.createElement("div",{onClick:function(){return e.onClick()},className:"connection-status "+this.props.connectionStatus+n},t," ",m.a.createElement("div",{className:"clock-type"},this.props.clockType))}}]),n}(f.Component),$=Object(h.b)(function(e){return{connectedUserName:e.clock.connectedUserName,connectionStatus:e.clock.connectionStatus,clockType:e.sequencer.clockType}},null)(_);n(41),n(2799);function J(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=Object(d.a)(e);if(t){var a=Object(d.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(l.a)(this,n)}}new L;var Q=function(e){Object(u.a)(n,e);var t=J(n);function n(e){var r;return Object(s.a)(this,n),(r=t.call(this,e)).state={dropdownOpen:!1},r}return Object(i.a)(n,[{key:"goToMixer",value:function(e){this.props.sequencerEngine.keyListener.lastViewMode=this.props.viewMode,this.props.setViewMode(W.b),this.props.setMixViewMode(e)}},{key:"goToArrangement",value:function(){this.props.sequencerEngine.keyListener.lastViewMode=this.props.viewMode,this.props.setViewMode(W.a)}},{key:"goToSequencer",value:function(){this.props.sequencerEngine.keyListener.lastViewMode=this.props.viewMode,this.props.setViewMode(W.e)}},{key:"goToPreferences",value:function(){this.props.setViewMode(W.d)}},{key:"goToHome",value:function(){window.location.href="/explore/"}},{key:"toggleViewDropdown",value:function(){this.props.setZIndexHack(!this.state.dropdownOpen),this.setState({dropdownOpen:!this.state.dropdownOpen})}},{key:"duplicateTrack",value:function(){this.sequencerEngine.duplicateTrack(this.props.selectedTrack)}},{key:"onSave",value:function(e,t,n){this.hideSaveModal(),this.props.sequencerEngine.save(e,t,!0,n)}},{key:"hideSaveModal",value:function(){this.props.setShowSaveModal(!1)}},{key:"save",value:function(){var e=Object(o.a)(c.a.mark(function e(){return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.props.setShowSaveModal(!0);case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"onSelectResolution",value:function(e){this.props.sequencerEngine.resolution=e,this.props.sequencerEngine.select(this.props.sequencerEngine.cursor.track,0),this.setState(this.state)}},{key:"clickPattern",value:function(e){var t=this.props.sequencerEngine.store.getState();t.keyboard.isCommandDown?this.props.setPatternToEditColor(e):(this.props.sequencerEngine.switchToPattern(e),void 0!==t.toolbar.patternToEditColor&&this.props.setPatternToEditColor(e),this.setState(this.state))}},{key:"onDragStart",value:function(e){this.props.dragPattern(e)}},{key:"onDragOver",value:function(e){e.preventDefault()}},{key:"onDrop",value:function(e){this.props.sequencerEngine.movePatternTo(this.props.patternDragging,e),this.setState(this.state)}},{key:"onPlayMixClicked",value:function(){}},{key:"onClickRecordMixButton",value:function(){}},{key:"onCompactClicked",value:function(){this.props.setCompactMode(!this.props.isCompactMode)}},{key:"onNewClicked",value:function(){window.confirm("Are you sure you want to clear this sequence (and lose any work)?")&&this.props.sequencerEngine.newSequence()}},{key:"viewMode",get:function(){return this.props.viewMode}},{key:"getView",value:function(){return this.props.viewMode===W.e?"SEQUENCER":this.props.viewMode===W.b?"MIXER":this.props.viewMode===W.d?"PREFERENCES":this.props.viewMode===W.a?"ARRANGEMENT":"VIEW"}},{key:"onStartSequenceRolling",value:function(){this.props.sequencerEngine.sequenceRolling=!0}},{key:"onStopSequenceRolling",value:function(){this.props.sequencerEngine.sequenceRolling=!1}},{key:"render",value:function(){for(var e=this,t=[],n=0;n<this.props.sequencerEngine.numberOfPatterns();n++)t.push(n);var a=-1;for(var c in this.props.sequencerEngine.tracks){var o=this.props.sequencerEngine.tracks[c].pattern.length();a<o&&(a=o)}return-1==a&&(a=32),m.a.createElement("div",{className:"top-toolbar"},m.a.createElement(q.a,{sequencerEngine:this.props.sequencerEngine,onSave:function(t,n,r){return e.onSave(t,n,r)},onHide:function(){return e.hideSaveModal()},show:this.props.showSaveModal}),m.a.createElement("div",{className:"main-toolbar"},m.a.createElement(Z.a,{sequencerEngine:this.props.sequencerEngine}),m.a.createElement(C.a,{sequencerEngine:this.props.sequencerEngine}),m.a.createElement("div",null,m.a.createElement(N.a,{sequencerEngine:this.props.sequencerEngine}),m.a.createElement(S.a,{sequencerEngine:this.props.sequencerEngine}),m.a.createElement(w.a,{sequencerEngine:this.props.sequencerEngine})),m.a.createElement(T.a,{sequencerEngine:this.props.sequencerEngine}),m.a.createElement($,{sequencerEngine:this.props.sequencerEngine}),this.props.trackRolling?m.a.createElement("div",{onMouseDown:function(){return e.onStartSequenceRolling()},onMouseUp:function(){return e.onStopSequenceRolling()},className:this.props.sequenceRolling?"roll-button rolling":"roll-button"},"ROLL ",this.props.rollResolution.toString()," "):"",this.props.midiMapMode!==O.c?m.a.createElement("div",{className:"roll-button"},this.props.midiMapMode===O.b?"MIDI MAP":"DELETE MIDI MAP"):"",m.a.createElement(V.a,{condition:this.props.viMode},m.a.createElement("div",{className:"roll-button command-button"},"COMMAND")),m.a.createElement("div",{className:"save-container"},m.a.createElement(V.a,{condition:this.props.onGoBack},m.a.createElement("div",{onClick:this.props.onGoBack,className:"go-back-button"},"BACK")),m.a.createElement(E,{sequencerEngine:this.props.sequencerEngine}),m.a.createElement("span",{onMouseOver:function(){return e.props.setContextualHelp(X.L)},onMouseLeave:function(){return e.props.setContextualHelp(void 0)}},m.a.createElement(y.a,{store:this.props.sequencerEngine.store}),m.a.createElement("img",{onClick:function(){return e.goToSequencer()},src:"/sequencer-view.svg",className:this.viewMode===W.e?"view-mode-icon selected":"view-mode-icon"}),m.a.createElement("img",Object(r.a)({onClick:function(){return e.goToMixer(p.g)},src:"/mix-view.svg",className:"view-mode-icon"},"className",this.props.mixViewMode===p.g&&this.viewMode===W.b?"view-mode-icon selected":"view-mode-icon")),m.a.createElement("img",Object(r.a)({onClick:function(){return e.goToMixer(p.i)},src:"/mix-view.svg",className:"view-mode-icon"},"className",this.props.mixViewMode===p.i&&this.viewMode===W.b?"view-mode-icon selected":"view-mode-icon")),m.a.createElement("img",{src:"/arrangement-view.svg",onClick:function(){return e.goToArrangement()},className:this.viewMode===W.a?"view-mode-icon selected":"view-mode-icon"}),m.a.createElement(j.a,{store:this.props.sequencerEngine.store})),m.a.createElement("span",{onMouseOver:function(){return e.props.setContextualHelp(X.Vb)},onMouseLeave:function(){return e.props.setContextualHelp(void 0)}}),m.a.createElement("div",{className:"light-blue-button common-button",onClick:function(){return e.props.setShowSettings(!0)}},"SETTINGS"),m.a.createElement("div",{className:"light-blue-button common-button",onClick:function(){return e.onNewClicked()}},"NEW"),m.a.createElement("div",{className:"pink-button common-button",onClick:function(){return e.save()}},"SAVE"))),m.a.createElement(V.a,{condition:void 0!==this.props.patternToEditColor},m.a.createElement(G,{sequencerEngine:this.props.sequencerEngine})))}}]),n}(f.Component);new M.a(4,!1),new M.a(4,!0),new M.a(8,!1),new M.a(8,!0),new M.a(16,!1),new M.a(16,!0),new M.a(32,!1),new M.a(32,!0);t.a=Object(h.b)(function(e){var t=e.sequencer.sequencerEngine.getSequenceId(),n=e.sequencer.isPlaying[t]||0;return{mixViewMode:e.mix.mixViewMode,midiMapMode:e.midi.midiMapMode,isCompactMode:e.sequencer.isCompactMode,resolution:e.sequencer.displayResolution,sequencerEngine:e.sequencer.sequencerEngine,detailsView:e.sequencer.detailsView,decentralized:e.sequencer.decentralized,viewMode:e.sequencer.viewMode,numberOfPatterns:e.sequencer.numberOfPatterns,samplePack:e.sequencer.samplePack,patternDragging:e.sequencer.patternDragging,isRecordingMix:e.mix.isRecordingMix,isPlayingMix:e.mix.isPlayingMix,isPlaying:n,patternToEditColor:e.toolbar.patternToEditColor,patternColors:e.toolbar.patternColors,trackRolling:e.sequencer.trackRolling,sequenceRolling:e.sequencer.sequenceRolling,viMode:e.commands.viMode,rollResolution:e.sequencer.resolution,showSaveModal:e.toolbar.showSaveModal}},function(e){return{setResolution:function(t){return e(Object(x.Ke)(t))},setViewMode:function(t){return e(Object(x.Mh)(t))},setMixViewMode:function(t){return e(Object(x.vd)(t))},setShowSettings:function(t){return e(Object(x.ng)(t))},dragPattern:function(t){return e(Object(x.i)(t))},setIsPlayingMix:function(t){return e(Object(x.Lc)(t))},setPatternToEditColor:function(t){return e(Object(x.de)(t))},setIsRecordingMix:function(t){return e(Object(x.Pc)(t))},setCompactMode:function(t){return e(Object(x.sb)(t))},setZIndexHack:function(t){return e(Object(x.Zh)(t))},setContextualHelp:function(t){return e(Object(x.wb)(t))}}})(Q)},2689:function(e,t,n){"use strict";var r=n(2),a=n.n(r),c=n(13),o=n(6),s=n(0),i=n.n(s),u=(n(372),n(1429)),l=n(31),d=n(9),f=n(44),m=n(85),p=n(298),b=n(43),v=n(1129),h=n(12),g=n(320),k=Object(h.b)(function(e,t){return{}},function(e){return{}})(function(e){var t=e.effect,n=e.sequencerEngine,r=e.matchedPresets,u=Object(s.useState)([]),l=Object(o.a)(u,2),d=l[0],f=l[1];Object(s.useEffect)(function(){r.length>0?f(r):Object(g.a)(t).then(function(e){return f(e)})},[f,t,r]);var m=Object(s.useCallback)(function(){var e=Object(c.a)(a.a.mark(function e(r,c){var o,s,i;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r.stopPropagation(),o=Object(v.a)(n,t,void 0,void 0,!0),e.next=4,b.a.getJson(c.effectHash);case 4:return s=e.sent,i=n.cursor.track,e.next=8,o.fromJson(s,n.tracks,i,!0,!1);case 8:o.track&&o.track.loadLostParameters&&o.track.loadLostParameters();case 9:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}(),[t,n]);return i.a.createElement("div",{className:"effect-presets"},d.map(function(e){return i.a.createElement("div",{onClick:function(t){return m(t,e)},className:"preset-option"},e.title.trim())}))}),E=Object(h.b)(function(e,t){return{}},function(e){return{}})(function(e){var t=e.isSelected,n=e.effect,r=e.sequencerEngine,a=e.matchedPresets,c=Object(s.useState)(0===a.length),u=Object(o.a)(c,2),l=u[0],d=u[1];return i.a.createElement("div",{className:t?"effect-option selected":"effect-option"},i.a.createElement("div",{className:"inner"},i.a.createElement("div",{onClick:function(e){e.stopPropagation(),d(!l)},className:"collapse-toggle"},i.a.createElement("div",{className:l?"arrow-right":"arrow-down"})),i.a.createElement("div",{onClick:function(){return Object(v.a)(r,n)},className:"effect-name"},Object(p.a)(n))),l?"":i.a.createElement(k,{matchedPresets:a,sequencerEngine:r,effect:n}))}),O=(Object(h.b)(function(e,t){return{}},function(e){return{}})(function(e){var t=e.effects,n=e.sequencerEngine,r=e.selectedEffect;return 0===t.length?[]:i.a.createElement("div",{className:"effect-choices"},Object.keys(t).map(function(e){return i.a.createElement(E,{key:e,isSelected:e===r,effect:e,matchedPresets:t[e],sequencerEngine:n})}))}),n(679)),j=n(1445),S=Object(h.b)(function(e,t){return{}},function(e){return{}})(function(e){return i.a.createElement("div",{className:"sidebar-options"})}),y=n(131),w=(n(1149),n(201)),C=n(763),N=Object(h.b)(function(e,t){return{}},function(e){return{}})(function(e){var t=e.searchText,n=e.sequencerEngine,r=n.auditionTrack,a=Object(s.useRef)(0),c=Object(s.useState)(r.samplesStream),u=Object(o.a)(c,2),l=(u[0],u[1]),d=Object(s.useState)(!1),f=Object(o.a)(d,2),m=f[0],p=f[1];return Object(s.useEffect)(function(){if(t){a.current++,p(!0);var e=a.current;setTimeout(function(){e===a.current&&n.searchForSounds([t],!0,r,!1,!1).then(function(e){p(!1),l(r.samplesStream.sounds)})},700)}},[l,t,p]),m?i.a.createElement(w.a,{text:"Searching...",width:230}):i.a.createElement(C.a,{track:r,sequencerEngine:n})}),q=new l.a,x=function(e){var t=e.isRainbow,n=e.i,r=e.isDark,l=e.openSelector,d=e.tag,p=e.scrollTags,b=e.tags,v=e.sequencerEngine,h=e.isSelected,g=e.setSampleTagDragging,k=Object(s.useRef)(void 0),E=Object(s.useState)(void 0),O=Object(o.a)(E,2),j=O[0],S=O[1];Object(u.a)({scrollContainer:p,trackRef:k,isSelected:h,offset:0,useClientBounds:!0});var y=Object(s.useCallback)(function(){var e=Object(c.a)(a.a.mark(function e(t){var n,r,c,o;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(S(!0),!t.metaKey){e.next=3;break}return e.abrupt("return",l(d));case 3:if("?"!==d){e.next=9;break}return n=v.ethereumCache,r=n.getAllForField("TAG",0,5e3),c=r[Math.floor(Math.random()*r.length)],v.searchForSounds([c.value]),e.abrupt("return");case 9:if(!Array.isArray(b)){e.next=15;break}return o=Math.floor(Math.random()*b.length),e.next=13,v.searchForSounds(b[o]);case 13:e.next=17;break;case 15:return e.next=17,v.searchForSounds([b]);case 17:"breaks"===b&&v.tracks[v.tracks.length-1].warp(),S(!1);case 19:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),[S,b]),w=h?"sample-chooser selected":"sample-chooser";j&&(w+=" flashit");var C={};return t&&(C.backgroundColor="hsl("+n/8*255+", 100%, 50%)"),r&&(w+=" dark"),i.a.createElement(m.a,{className:"pushable",element:f.ob,arg:d},i.a.createElement("div",{style:C,ref:k,draggable:!0,onDragOver:function(e){return e.preventDefault()},onDragStart:function(){if(Array.isArray(b)){var e=Math.floor(Math.random()*b.length);g(b[e])}else g([b])},onClick:y,className:w},i.a.createElement("div",{style:C,className:"tag-inner"},d)))};t.a=Object(h.b)(function(e,t){return{backgroundColor:e.sequencer.backgroundColor,selectedZObject:e.zobject.selectedZObject,searchText:e.selector.quickAddSearchText,track:t.sequencerEngine.getSelectedTrack(),explorerMaximized:e.selector.explorerMaximized}},function(e){return{setSearchText:function(t){return e(Object(d.Fe)(t))},setShowPianoRoll:function(t){return e(Object(d.eg)(t))},setArrangementBottomMode:function(t){return e(Object(d.E)(t))},setSampleTagDragging:function(t){return e(Object(d.Te)(t))},setSidebarSearchInput:function(t){return e(Object(d.xg)(t))},setSelectorMode:function(t){return e(Object(d.Df)(t))},setSidebarViewMode:function(t){return e(Object(d.yg)(t))},setSelectedSteps:function(t){return e(Object(d.rf)(t))},setShowPlugins:function(t){return e(Object(d.fg)(t))}}})(function(e){var t=Object(s.useRef)(void 0),n=Object(s.useState)(void 0),r=Object(o.a)(n,2),a=r[0],c=r[1],u=Object(s.useState)(void 0),l=Object(o.a)(u,2),d=l[0],p=l[1],b=Object(s.useRef)(void 0),v=Object(s.useState)(O.b),h=Object(o.a)(v,2),g=h[0],k=h[1],E=Object(s.useState)({}),w=Object(o.a)(E,2),C=w[0],T=w[1],M=Object(s.useState)(0),P=Object(o.a)(M,2),R=P[0],D=(P[1],Object(j.a)({setTags:k,setEffects:T,tags:g,effects:C,sequencerEngine:e.sequencerEngine,searchText:e.searchText,setSearchText:e.setSearchText,selectedTag:a,setSelectedTag:c,selectedEffect:d,setSelectedEffect:p,ref:t})),A=D.onChange,I=D.clear;Object(s.useEffect)(function(){I()},[e.track]),Object(s.useEffect)(function(){e.setSidebarSearchInput(t)},[]);var z=function(){e.setArrangementBottomMode(y.b),e.setShowPianoRoll(!0)},L=Object(s.useCallback)(function(){e.sequencerEngine.addAudioTrack(),e.sequencerEngine.selectTrack(e.sequencerEngine.tracks.length-1),e.sequencerEngine.tracks[e.sequencerEngine.tracks.length-1].trackIsLoading=!1},[e.sequencerEngine]),H=Object(s.useCallback)(function(){e.sequencerEngine.addMultiSynthTrack(),e.sequencerEngine.selectTrack(e.sequencerEngine.tracks.length-1),e.sequencerEngine.tracks[e.sequencerEngine.tracks.length-1].trackIsLoading=!1},[e.sequencerEngine]),F=(Object(s.useCallback)(function(){e.sequencerEngine.addInstrumentRackTrack(),e.sequencerEngine.selectTrack(e.sequencerEngine.tracks.length-1)},[e.sequencerEngine]),Object(s.useCallback)(function(){e.sequencerEngine.addSampledInstrumentTrack(),e.sequencerEngine.selectTrack(e.sequencerEngine.tracks.length-1)},[e.sequencerEngine]),Object(s.useCallback)(function(t){t&&e.setSearchText(t),e.setSelectorMode(!0),e.setSidebarViewMode("SOUNDS")},[])),B="quick-sample-chooser",U="quick-instrument-chooser";(e.explorerMaximized||e.selectedPianoRollSteps&&e.selectedPianoRollSteps.filter(function(e){return e&&e.group}).length>0)&&(B+=" hide",U+=" hide");var G=Object(s.useCallback)(function(e){"Tab"===e.key&&(e.preventDefault(),F())},[]),V=Object(s.useCallback)(function(){e.setSelectedSteps(void 0)},[]),W=!1;q.getBrightness(e.backgroundColor)<100&&(W=!0);var Z="quick-actions";e.selectedZObject||""===e.searchText||(Z+=" no-zobject"),0===e.sequencerEngine.tracks.length&&""!==e.searchText&&(Z+=" no-tracks");var X=g;e.sequencerEngine.getSelectedTrack();return e.selectedZObject&&(X={}),i.a.createElement("div",{onMouseDown:V,className:Z},i.a.createElement(S,null),i.a.createElement(m.a,{element:f.Bb,className:"search-container"},i.a.createElement("input",{ref:t,spellcheck:"false",onKeyDown:G,className:"quick-search",type:"text",value:e.searchText,placeholder:"Search sounds",onChange:A}),i.a.createElement("div",{className:"clear-btn",onClick:function(){""===e.searchText?e.hide&&e.hide():I()}},"x")),i.a.createElement("div",{ref:b,className:B},""!==e.searchText?i.a.createElement(N,{sequencerEngine:e.sequencerEngine,searchText:a}):Object.keys(X).map(function(t,n){return i.a.createElement(x,{setSampleTagDragging:e.setSampleTagDragging,isRainbow:void 0!==R&&n<R,i:n,key:t,isDark:W,scrollTags:b,showBottom:z,openSelector:F,sequencerEngine:e.sequencerEngine,isSelected:t===a,tag:t,tags:g[t]})})),!e.selectedZObject&&(!e.searchText||""===e.searchText)&&i.a.createElement("div",{className:U},i.a.createElement(m.a,{element:f.pb,arg:"Synth"},i.a.createElement("img",{onClick:H,className:"add-synth-icon pushable",src:"/synth-icon.svg"})),i.a.createElement(m.a,{element:f.pb,arg:"Synth"},i.a.createElement("img",{onClick:L,className:"live-loop-icon pushable",src:"/live-loop-icon.svg"})),i.a.createElement(m.a,{element:f.pb,arg:"Synth"},i.a.createElement("img",{onClick:function(){return e.setShowPlugins(!0)},className:"add-plugin-icon pushable",src:"/plugin-icon.svg"}))))})},2692:function(e,t,n){"use strict";var r=n(0),a=n.n(r),c=n(12),o=n(6),s=n(9),i=n(10),u=n(2),l=n.n(u),d=n(13),f=n(761),m=n(760),p=n(2571),b=0,v=Object(c.b)(function(e,t){var n=t.sequencerEngine.getSelectedTrack();return{track:n,selectedId:n&&n.sample&&n.sample.getId()}},function(e){return{setSearchText:function(t){return e(Object(s.Fe)(t))}}})(function(e){var t=e.setSearchText,n=e.track,c=e.sample,s=e.sequencerEngine,u=e.selectedId,v=Object(r.useRef)(void 0),h=Object(r.useRef)(h),g=Object(r.useState)([]),k=Object(o.a)(g,2),E=k[0],O=k[1];Object(r.useEffect)(function(){var e=void 0,t="";c.discogsId||c.videoId&&""!==c.videoId?e=c.discogsId?{releaseId:c.discogsId}:{videoId:c.videoId}:t=c.tags[0];var n=++b;Object(p.c)(50,t,c.guildId,"tag",0,!1,e).then(function(){var r=Object(d.a)(l.a.mark(function r(a){var o,s;return l.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(n===b){r.next=2;break}return r.abrupt("return");case 2:if(0!==a.length){r.next=5;break}return Object(p.c)(50,t,c.guildId,"tag",0,!1,e).then(function(){var t=Object(d.a)(l.a.mark(function t(n){var r,a;return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(0!==n.length){t.next=2;break}return t.abrupt("return");case 2:return(r=n.flatMap(function(e){return e.results.map(function(e){return e.ipfsHash})})).length>50&&(r=r.slice(0,50)),t.next=6,Object(m.a)(r,JSON.stringify(e));case 6:a=t.sent,O(a);case 8:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()),r.abrupt("return");case 5:return(o=a.flatMap(function(e){return e.results.map(function(e){return e.ipfsHash})})).length>50&&(o=o.slice(0,50)),r.next=9,Object(m.a)(o,JSON.stringify(e));case 9:s=r.sent,O(s);case 11:case"end":return r.stop()}},r)}));return function(e){return r.apply(this,arguments)}}())},[c,O]);var j=Object(r.useCallback)(function(){var e=Object(d.a)(l.a.mark(function e(r,a){var c,o;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return h.current=!0,t(""),c=n.samplesStream.tags,o=[r],a&&(o=[].concat(Object(i.a)(c),Object(i.a)(o))),e.next=7,n.sequencerEngine.searchForSounds(o,!0,n,!1);case 7:h.current=!1;case 8:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}(),[n]),S=Object(i.a)(E);S.sort(function(e,t){return e.tags[0]&&t.tags[0]&&e.tags.join(",").localeCompare(t.tags.join(","))});var y=s.state.zobject.selectedZObject?s.getSelectedTrack():s.auditionTrack;return a.a.createElement("div",{onMouseDown:function(e){return e.stopPropagation()},ref:v,className:"source-samples"},S.map(function(e){return a.a.createElement(f.a,{topOffset:150,scrollRef:v,key:e.getId(),samples:E,onClickTag:j,track:y,selected:u===e.getId(),id:e.getId(),sample:e,loadingSample:h})}))}),h=n(31),g=n(298),k=function(e){for(var t=e.parentElement,n=0;t&&++n<10;){if(t.className.includes("inner-explorer"))return t;t=t.parentElement}return t},E=Object(c.b)(function(e,t){return{}},function(e){return{}})(function(e){var t=e.setCoords,n=e.sample,c=e.coords,s=void 0===c?{x:0,y:0}:c,i=Object(r.useState)({x:0,y:0}),u=Object(o.a)(i,2),l=u[0],d=u[1],f=Object(r.useRef)(void 0);Object(r.useEffect)(function(){var e=document.getElementById("sample-option-"+n.getId());if(e){var r=e.getBoundingClientRect();t({x:r.left-400-100,y:Math.min(window.innerHeight-100-400,r.top-200)})}},[]),Object(r.useEffect)(function(){var e=document.getElementById("sample-option-"+n.getId());if(e){var t=k(e);return f.current=t,t.addEventListener("scroll",m),m(),function(){return t.removeEventListener("scroll",m)}}},[n,d]);var m=Object(r.useCallback)(function(e){var t=document.getElementById("sample-option-"+n.getId());if(t){var r=t.getBoundingClientRect(),a=f.current.getBoundingClientRect();d({x:r.left,y:Math.min(f.current.offsetHeight+a.top,Math.max(a.top,r.top))})}else d(void 0)},[n,d]);return l?a.a.createElement("svg",{className:"visual-link"},a.a.createElement("linearGradient",{id:"MyGradient"},a.a.createElement("stop",{offset:"5%",stopColor:"#80808036"}),a.a.createElement("stop",{offset:"95%",stopColor:"#80aaff36"})),a.a.createElement("polygon",{points:[s.x+400,s.y,s.x+400,s.y+400,l.x,l.y+20,l.x,l.y]})):0}),O=n(705),j=n(33),S=(n(2702),new h.a),y=Object(c.b)(function(e,t){return{sourceExploring:e.selector.sourceExploring}},function(e){return{setSourceExploring:function(t){return e(Object(s.Cg)(t))},setYearExploring:function(t){return e(Object(s.Xh)(t))}}})(function(e){var t=e.sequencerEngine,n=e.sourceExploring,c=e.setYearExploring,s=e.setSourceExploring,i=Object(r.useRef)(void 0),u=Object(r.useState)([]),l=Object(o.a)(u,2),d=l[0],f=l[1],m=Object(O.a)({ref:i}),p=m.setCoords,b=m.onMouseUp,h=m.onMouseDown,k=m.coords;if(Object(r.useEffect)(function(){n&&j.a.guildSamples.getStylesForSound(n.getId()).then(f)},[n,f]),!n)return[];var y=n.getThumbnail();return[a.a.createElement("div",{key:1,ref:i,onMouseUp:b,onMouseDown:h,style:k?{top:k.y,left:k.x}:{},className:"source-exploring no-select"},a.a.createElement("div",{onClick:function(){return s(void 0)},className:"clear-btn"},"x"),a.a.createElement("div",{className:"source-top"},y?a.a.createElement("div",{className:"cover-art",style:{backgroundImage:"url("+y+")"}}):a.a.createElement("div",{style:{backgroundColor:S.getColorForHash(n.getId())},className:"cover-art"}),a.a.createElement("div",{className:"source-info"},a.a.createElement("div",{className:"release-name"},""===n.releaseName?Object(g.a)(n.name):Object(g.a)(n.releaseName)),a.a.createElement("div",{className:"artist-name"},Object(g.a)(n.artistName)),a.a.createElement("div",{onClick:function(){return c(n.year)},className:"release-year"},0!==n.year&&n.year),a.a.createElement("div",{className:"styles"},d.map(function(e){return a.a.createElement("span",{key:e},e)})))),a.a.createElement(v,{sequencerEngine:t,sample:n})),a.a.createElement(E,{key:2,setCoords:p,coords:k,sample:n})]}),w=n(39),C=n(208),N=n(29),q=Object(c.b)(function(e,t){var n=t.sequencerEngine.getSelectedTrack();return{year:e.selector.yearExploring,selectedId:n&&n.sample&&n.sample.getId()}},function(e){return{setSourceExploring:function(t){return e(Object(s.Cg)(t))},setYearExploring:function(t){return e(Object(s.Xh)(t))}}})(function(e){var t=e.selectedId,n=e.setYearExploring,c=e.year,s=e.sequencerEngine,i=Object(r.useRef)(void 0),u=Object(r.useRef)(void 0),p=Object(r.useRef)(!1),b=Object(r.useState)([]),v=Object(o.a)(b,2),h=v[0],g=v[1],k=Object(O.a)({ref:i}),E=k.onMouseDown,S=k.onMouseUp,y=k.coords,q=k.setCoords;if(Object(r.useEffect)(function(){var e=document.getElementsByClassName("source-exploring");if(0!==e.length){var t=e[0];q({x:t.offsetLeft-450,y:t.offsetTop})}},[c,q]),Object(r.useEffect)(function(){c&&j.a.getGuildsWithAccess().then(function(e){return new w.a((new C.a).contractAddress).from(N.lb).select("ipfsHash").where("year",c).whereIn("guildId",e).executeQuery().then(function(){var e=Object(d.a)(l.a.mark(function e(t){var n,r;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=Array.from(new Set(t.map(function(e){return e.ipfsHash}))),e.next=3,Object(m.a)(n,c);case 3:r=e.sent,g(r);case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}())})},[g,c]),!c)return[];var x=s.state.zobject.selectedZObject?s.getSelectedTrack():s.auditionTrack;return a.a.createElement("div",{className:"year-exploring no-select",style:y?{left:y.x,top:y.y}:{},onMouseDown:E,onMouseUp:S,ref:i},a.a.createElement("div",{onClick:function(){return n(void 0)},className:"clear-btn"},"x"),a.a.createElement("div",{className:"year"},c,a.a.createElement("div",{className:"year-chooser"},a.a.createElement("div",{onClick:function(){return n(c+1)},className:"arrow-up"}),a.a.createElement("div",{onClick:function(){return n(c-1)},className:"arrow-down"}))),a.a.createElement("div",{onMouseDown:function(e){return e.stopPropagation()},ref:u,className:"source-samples"},h.map(function(e){return a.a.createElement(f.a,{topOffset:20,scrollRef:u,key:e.getId(),samples:h,onClickTag:function(){return[]},track:x,selected:t===e.getId(),id:e.getId(),sample:e,loadingSample:p})})))});t.a=function(e){var t=e.sequencerEngine;e.sourceExploring,e.setSourceExploring;return[a.a.createElement(y,{sequencerEngine:t}),a.a.createElement(q,{sequencerEngine:t})]}},2693:function(e,t,n){"use strict";var r=n(6),a=n(0),c=n.n(a),o=n(31),s=n(3),i=n(4),u=n(7),l=n(11),d=n(1),f=n(2703),m=n(12);function p(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=Object(d.a)(e);if(t){var a=Object(d.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(l.a)(this,n)}}new o.a;var b=function(e){Object(u.a)(n,e);var t=p(n);function n(e){return Object(s.a)(this,n),t.call(this,e)}return Object(i.a)(n,[{key:"onClickKey",value:function(){this.props.notClickable||(console.log("on click value = ",this.props.value),this.props.keyboardEngine.isMidiMapped(this.props.value)&&(console.log("it is mapped so unmapping!"),this.props.keyboardEngine.deleteMidiMapping(this.props.value)))}},{key:"render",value:function(){var e=this,t="pad";return this.props.triggering&&(t+=" flashit"),this.props.mini&&(t+=" mini"),c.a.createElement("div",{onClick:function(){return e.onClickKey()},style:this.getStyle(),className:t},this.props.value)}}]),n}(f.a),v=Object(m.b)(function(e,t){var n=e.keyboard.padMappings[t.value],r=void 0===n?void 0:e.tracks.triggers[n.trackNumber];return{triggering:void 0!==r&&r[n.sliceNumber],keyMapping:n}},null)(b),h=n(69),g=function(e){for(var t=[],n=h.a.fromString("C2").addTranspose(16*e).toString(),r=0;r<4;r++){for(var a=[],c=0;c<4;c++){a.push(n);h.a.fromString(n).getTranspose();n=h.a.fromString(n).addTranspose(1).toString()}t.push(a)}return t.reverse()},k=function(e){var t=e.octave,n=e.setOctave,r=e.sequencerEngine,a=e.keyboardEngine,o=e.isSelected,s=g(t),i="octave-pads";return o&&(i+=" selected"),c.a.createElement("div",{onClick:function(){return n(t)},className:i},s.map(function(e){return c.a.createElement("div",{className:"pads-row"},e.map(function(e){return c.a.createElement(v,{notClickable:!0,mini:!0,value:e,keyboardEngine:a,sequencerEngine:r,trackNumber:void 0})}))}))},E=Object(m.b)(function(e,t){return{}},function(e){return{}})(function(e){var t=e.sequencerEngine,n=e.keyboardEngine,r=e.octave,o=e.setOctave,s=Object(a.useRef)(void 0);Object(a.useEffect)(function(){s.current&&s.current.scroll(0,60*(4-r))},[r]);return c.a.createElement("div",{ref:s,className:"midi-pads-overview"},[4,3,2,1,0].map(function(e){return c.a.createElement(k,{setOctave:o,isSelected:r===e,octave:e,sequencerEngine:t,keyboardEngine:n})}))});n(2796),new o.a,t.a=Object(m.b)(function(e){return{lastMidiKeyMapped:e.keyboard.lastMidiKeyMapped}},null)(function(e){var t=Object(a.useState)(0),n=Object(r.a)(t,2),o=n[0],s=n[1];Object(a.useEffect)(function(){if(e.lastMidiKeyMapped){var t=(h.a.fromString(e.lastMidiKeyMapped,!1).getTranspose()+12)/16;s(Math.floor(t))}},[e.lastMidiKeyMapped,s]);var i="pads ";e.mini&&(i+=" mini");var u=g(o);return c.a.createElement("div",{className:"midi-pads-container"},c.a.createElement("div",{className:i},c.a.createElement("div",{className:"pads-row"},u[0].map(function(t){return c.a.createElement(v,{mini:e.mini,value:t,keyboardEngine:e.sequencerEngine.keyboardEngine,sequencerEngine:e.sequencerEngine,trackNumber:e.trackNumber})})),c.a.createElement("div",{className:"pads-row"},u[1].map(function(t){return c.a.createElement(v,{mini:e.mini,value:t,sequencerEngine:e.sequencerEngine,keyboardEngine:e.sequencerEngine.keyboardEngine,trackNumber:e.trackNumber})})),c.a.createElement("div",{className:"pads-row"},u[2].map(function(t){return c.a.createElement(v,{mini:e.mini,value:t,sequencerEngine:e.sequencerEngine,keyboardEngine:e.sequencerEngine.keyboardEngine,trackNumber:e.trackNumber})})),c.a.createElement("div",{className:"pads-row"},u[3].map(function(t){return c.a.createElement(v,{mini:e.mini,value:t,sequencerEngine:e.sequencerEngine,keyboardEngine:e.sequencerEngine.keyboardEngine,trackNumber:e.trackNumber})}))),c.a.createElement(E,{octave:o,setOctave:s,sequencerEngine:e.sequencerEngine,keyboardEngine:e.sequencerEngine.keyboardEngine}))})},2695:function(e,t,n){"use strict";var r=n(6),a=n(0),c=n.n(a),o=n(2707),s=n(1385),i=n(1136),u=n(9),l=n(12),d=Object(l.b)(function(e,t){return{quantized:e.sequencer.quantized}},function(e){return{setQuantized:function(t){return e(Object(u.Ee)(t))}}})(function(e){var t=e.setQuantized,n=e.quantized,r=e.track,o=e.color,s=Object(a.useCallback)(function(){r.sequencerEngine.doubleTrackLength(r.trackNumber)},[r]),u=Object(a.useCallback)(function(){r.sequencerEngine.halfTrackLength(r.trackNumber)},[r]),l=Object(a.useCallback)(function(){t(!n)},[n]),d={backgroundColor:o},f={borderColor:o};return c.a.createElement("div",{className:"step-actions"},c.a.createElement(i.a,{sequencerEngine:r.sequencerEngine}),c.a.createElement("div",{style:f,onClick:l,className:n?"quantized quantize-button":"quantize-button"},n?"Quantized":"Unquantized"),c.a.createElement("div",{style:d,onClick:s,className:"add-steps-btn"},"+"),c.a.createElement("div",{style:d,onClick:u,className:"remove-steps-btn"},"-"))}),f=n(2783),m=n(60),p=n(68),b=n(131),v=n(31),h=new v.a,g=function(e){var t=e.option,n=e.name,r=e.selectedOption,a=e.setBottomMode,o=e.track,s="mode";t===r&&(s+=" selected");var i={};return r===t&&(i.borderBottomWidth=4,i.borderBottomStyle="solid",i.borderBottomColor=h.getColorForTrack(o)),c.a.createElement("div",{style:i,onClick:function(){return a(t)},className:s},n)},k=function(e){return e.length>40?e.slice(0,40)+"...":e},E=Object(l.b)(function(e,t){return{bottomMode:e.arrangement.bottomMode,isFrozen:t.track&&t.track.isFrozen}},function(e){return{setBottomMode:function(t){return e(Object(u.E)(t))},setShowPianoRoll:function(t){return e(Object(u.eg)(t))}}})(function(e){var t=e.track,n=e.setBottomMode,o=e.bottomMode,s=e.isFrozen,i=(e.setShowPianoRoll,Object(a.useState)(!1)),u=Object(r.a)(i,2),l=u[0],d=u[1],v=t.getTrackType()===m.f||t.getTrackType()===m.e||s,E=t.getTrackType()!==m.e,O=t.getTrackType()===m.f,j=t;t.getTrackType()===m.c&&t.tracks.length>0&&(j=t.tracks[0].track),j.getTrackType()===m.b&&j.instrument&&(j.instrument.getInstrumentType()!==p.h&&j.instrument.getInstrumentType()!==p.f||(O=!0)),j.isFrozen&&(O=!1),Object(a.useEffect)(function(){s&&n(b.e)},[s]);var S={color:h.getColorForTrack(t)};return c.a.createElement("div",{onMouseLeave:function(){return d(!1)},className:"modes"},c.a.createElement("div",{onClick:function(){return d(!l)},style:S,className:l?"toolbar-track-name show":"toolbar-track-name"},k(t.presetName||t.getName()),l?c.a.createElement(f.a,{showName:!0,mode:o,sequencerEngine:t.sequencerEngine}):""),O?c.a.createElement(g,{track:t,option:b.b,selectedOption:o,name:t.getTrackType()===m.b?"Presets":"Info",setBottomMode:n}):"",v?c.a.createElement(g,{track:t,option:b.e,selectedOption:o,name:"Waveform",setBottomMode:n}):"",E?c.a.createElement(g,{track:t,option:b.d,selectedOption:o,name:"Piano",setBottomMode:n}):"")}),O=n(2708),j=(n(96),n(41),new v.a),S=300,y=50;t.a=Object(l.b)(function(e,t){if(t.track){var n=t.track;return n&&n.tracks&&n.tracks[0]&&(n=n.tracks[0].track),{id:void 0===n?0:void 0!==n.sample&&void 0!==n.sample.getId()?n.sample.getId():n.presetName||n.getName(),numEffects:t.track.effects&&t.track.effects.length,selectedDevice:e.automation.trackDevice[t.track.id],subDevice:e.automation.trackSubDevice[t.track.id],selectedParameter:e.automation.trackParameter[t.track.id],showAutomation:e.automation.show,selectedRackDevice:e.automation.trackRackDevice[t.track.id],selectedInstrument:e.tracks.selectedRackSubTrack[t.track.id],bottomMode:e.arrangement.bottomMode}}return{}},function(e,t){return{setTrackAutomationParameter:function(n){return e(Object(u.Vg)(t.track.id,n))},setShowPianoRoll:function(t){return e(Object(u.eg)(t))},setTrackAutomationDevice:function(n){return e(Object(u.Ug)(t.track.id,n))},setTrackAutomationRackDevice:function(n){return e(Object(u.Wg)(t.track.id,n))},setTrackAutomationSubDevice:function(n){return e(Object(u.Xg)(t.track.id,n))},setArrangementBottomResizing:function(t){return e(Object(u.F)(t))},setArrangementBottomHeight:function(t){return e(Object(u.D)(t))},setShowAutomation:function(t){return e(Object(u.Pf)(t))},setBottomMode:function(t){return e(Object(u.E)(t))},setBottomOffset:function(t){return e(Object(u.db)(t))}}})(function(e){var t=e.track,n=(e.selectedDevice,e.subDevice,e.selectedParameter),i=(e.selectedRackDevice,Object(O.a)(t));Object(a.useEffect)(function(){e.hideAutomation&&e.setShowAutomation(!1)},[e.hideAutomation]);var u=Object(a.useCallback)(function(t,r){if(t.stopPropagation(),e.showAutomation&&r===n)return e.setShowAutomation(!1);e.setShowAutomation(!0),e.setTrackAutomationParameter(r)},[n,e.setTrackAutomationDevice,e.setTrackAutomationRackDevice,e.showAutomation]),l=Object(a.useState)(void 0),f=Object(r.a)(l,2),m=f[0],p=f[1],v=Object(a.useCallback)(function(t){var n=document.getElementsByClassName("toolbar-resizer")[0],r=t.clientY-n.getBoundingClientRect().top;e.setBottomOffset(r),e.setArrangementBottomResizing(!0);var a=(new Date).getTime();if(void 0!==m&&a-m<=S){if(e.hide)return e.hide();e.sequencerEngine.store.getState().arrangement.bottomHeight<=y?e.setArrangementBottomHeight(b.c[b.d]):e.setShowPianoRoll(!1)}p(a)},[m,p]),h=e.showAutomation?"/automation-icon-enabled.png":"/automation-icon-disabled.png",g=(e.showAutomation,j.getColorForTrack(e.track)),k={};if(e.bottomMode!==b.d&&!e.hideAutomation)return c.a.createElement("div",{style:k,className:"automation-toolbar"},c.a.createElement("div",{className:"toolbar-container"},c.a.createElement(E,{id:e.id,track:t}),c.a.createElement("div",{onMouseDown:v,onMouseUp:function(){return e.setArrangementBottomResizing(!1)},className:"toolbar-resizer"},c.a.createElement("div",{onMouseDown:function(t){t.stopPropagation(),e.hide?e.hide():e.setShowPianoRoll(!1),e.setArrangementBottomResizing(!1)},className:"collapse-toggle bottom-shower"},c.a.createElement("div",{className:"arrow-down"})))));var w=c.a.createElement("div",{onMouseDown:function(t){t.stopPropagation(),e.hide?e.hide():e.setShowPianoRoll(!1),e.setArrangementBottomResizing(!1)},className:"bottom-shower collapse-toggle"},c.a.createElement("div",{className:"arrow-down"}));return c.a.createElement("div",{style:k,className:"automation-toolbar"},c.a.createElement("div",{className:"toolbar-container"},c.a.createElement(E,{id:e.id,track:t}),c.a.createElement("div",{onMouseDown:v,onMouseUp:function(){return e.setArrangementBottomResizing(!1)},className:"toolbar-resizer"},e.hideAutomation?"":w)),c.a.createElement("div",{className:"toolbar-container rest-toolbar"},e.hideAutomation?"":c.a.createElement(o.a,{track:t,sequencerEngine:e.sequencerEngine}),e.hideAutomation?"":c.a.createElement("img",{className:"automation-icon",src:h,onClick:function(){return e.setShowAutomation(!e.showAutomation)}}),c.a.createElement("div",{onMouseDown:v,onMouseUp:function(){return e.setArrangementBottomResizing(!1)},className:"toolbar-resizer automation-parameters"},i.map(function(t){return c.a.createElement("div",{onMouseDown:function(e){return u(e,t)},style:e.showAutomation&&n===t?{backgroundColor:g,color:"black"}:{},className:"parameter-button"},Object(s.a)(t))})),c.a.createElement(d,{color:g,track:t}),e.hideAutomation?w:""))})},2697:function(e,t,n){"use strict";var r=n(2),a=n.n(r),c=n(13),o=n(10),s=n(3),i=n(4),u=n(7),l=n(11),d=n(1),f=n(0),m=n.n(f),p=n(6),b=n(421),v=n(191),h=n(417),g=n(75),k=n(12),E=n(9),O=Object(k.b)(function(e,t){return{groupMode:e.groups.stepsGroupMode}},function(e){return{setGroupMode:function(t){return e(Object(E.Lg)(t))}}})(function(e){var t=e.selectedSteps,n=e.track,r=e.setGroupMode,a=e.groupMode,c=Object(f.useState)(!1),o=Object(p.a)(c,2),s=o[0],i=o[1],u=Object(f.useCallback)(function(){Object(v.e)(t,n)},[t]),l=Object(f.useCallback)(function(){Object(v.k)(t)},[t]),d=Object(f.useCallback)(function(){Object(b.c)(n,t)},[t]),k=Object(f.useCallback)(function(){Object(b.b)(n,t)},[t]);return t&&0!==t.length?m.a.createElement(g.c,{className:"steps-dropdown",show:s?"true":"false",isOpen:s,toggle:function(){return i(!s)}},m.a.createElement(g.f,{size:"sm",caret:!0,color:"primary"},t.length," steps"),m.a.createElement(g.e,null,m.a.createElement(g.d,{onClick:function(){return r(!a)},size:"sm"},"Groups Mode",m.a.createElement(h.a,{className:"group-checkmark",condition:a})),m.a.createElement(g.d,{onClick:u,size:"sm"},"Group Steps"),m.a.createElement(g.d,{onClick:l,size:"sm"},"Un-group Steps"),m.a.createElement(g.d,{onClick:k,size:"sm"},"Legato Steps"),m.a.createElement(g.d,{onClick:d,size:"sm"},"Roll Steps"))):[]}),j=n(2709),S=n(146),y=n(1147),w=n(85),C=n(44),N=n(109),q=n.n(N),x=(n(1496),n(48)),T=n(205),M=n.n(T);n(45),n(68);function P(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return R(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return R(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var c,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,c=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw c}}}}function R(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function D(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=Object(d.a)(e);if(t){var a=Object(d.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(l.a)(this,n)}}var A=new(n(31).a),I=function(e){Object(u.a)(n,e);var t=D(n);function n(e){var r;Object(s.a)(this,n),r=t.call(this,e);var a=e.sequencerEngine.tracks[e.selectedTrack];if(a){var c=a.trackData;r.state={selectedParameter:c.durationParameter,value:c.durationParameter.value}}else r.state={};return r.state.loading=!1,r}return Object(i.a)(n,[{key:"onMouseUp",value:function(){this.props.setParametersToRecord([])}},{key:"getTrackData",value:function(e){if(void 0!==e.sequencerEngine.tracks){var t=e.sequencerEngine.tracks[e.selectedTrack];if(void 0!==t)return t.trackData}}},{key:"track",get:function(){return this.props.sequencerEngine.tracks[this.props.selectedTrack]}},{key:"getThumbnail",value:function(){var e=void 0,t={};if(this.track.sample){if(void 0!==(e=this.track.sample.getThumbnail())&&""!==e)return m.a.createElement("img",{className:"mini-thumbnail",src:e});t.backgroundColor=A.getColorForHash(this.track.sample.getId())}else t.backgroundColor=A.getColorForHash(this.track.presetName||this.track.getName());return m.a.createElement("div",{className:"mini-thumbnail",style:t})}},{key:"shouldComponentUpdate",value:function(e){if(this.getTrackData(e)!==this.getTrackData(this.props)||e.id!==this.props.id){var t=this.state.selectedParameter,n=this.getTrackData(e);if(void 0===t&&void 0!==n&&(t=n.durationParameter),void 0===n)return!0;"Duration"===t.name?this.state.selectedParameter=n.durationParameter:"Attack"===t.name?this.state.selectedParameter=n.attackParameter:"Release"===t.name?this.state.selectedParameter=n.releaseParameter:"Transpose"===t.name?this.state.selectedParameter=n.transposeParameter:"Velocity"===t.name?this.state.selectedParameter=n.velocityParameter:this.state.selectedParameter=n.durationParameter,this.state.value=this.state.selectedParameter.value}return!0}},{key:"gangMode",get:function(){return this.props.selectedSteps&&this.props.selectedSteps.length>0}},{key:"chooseParameter",value:function(e){this.setState({selectedParameter:e,value:e.value})}},{key:"onUpdateParameter",value:function(e){var t=this;if(this.gangMode){var n,r=[],a=[],c=P(this.props.selectedSteps);try{for(c.s();!(n=c.n()).done;){var s=n.value;a.push(s),r=[].concat(Object(o.a)(r),Object(o.a)(s.parameters.filter(function(e){return e.name===t.state.selectedParameter.name})))}}catch(u){c.e(u)}finally{c.f()}var i=this.props.sequencerEngine.tracks&&this.props.sequencerEngine.tracks[this.props.selectedTrack];r.forEach(function(n,r){return t.props.sequencerEngine.operationManager.dispatch(Object(x.A)(i,a[r],n,e),!1,!0)}),i.updateSteps(),this.setState({value:e})}else this.state.selectedParameter.value=e,this.setState({value:e}),this.props.setParametersToRecord([this.state.selectedParameter])}},{key:"nextSample",value:function(){var e=Object(c.a)(a.a.mark(function e(){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({loading:!0}),e.next=3,this.track.auditionNext(!0);case 3:this.setState({loading:!1});case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"previousSample",value:function(){var e=Object(c.a)(a.a.mark(function e(){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({loading:!0}),e.next=3,this.track.auditionPrevious();case 3:this.setState({loading:!1});case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"getValue",value:function(){var e=this;if(this.gangMode&&this.props.selectedSteps[0]){var t=this.props.selectedSteps[0].parameters.find(function(t){return t.name===e.state.selectedParameter.name});return t&&null!==t.get()?t.get():this.state.selectedParameter.value}return this.state.selectedParameter.value}},{key:"render",value:function(){var e=this,t=this.props,n=t.sequencerEngine.tracks&&t.sequencerEngine.tracks[t.selectedTrack],r=this.state.selectedParameter;if(void 0===t.selectedTrack||void 0===n||void 0===r)return m.a.createElement("div",null);var a=n.trackData,c=function(e,t){return e===t.durationParameter?.01:e.min}(r,a),o=function(e,t){if(e===t.durationParameter)return 4;if(e===t.attackParameter)return 100;if(e===t.releaseParameter)return 400;return e.max}(r,a),s=(this.props.selectedSteps&&this.props.selectedSteps.length,"");n&&n.preset&&n.preset.contentHash?s=m.a.createElement(y.a,{contentHash:n.preset.contentHash,type:S.b}):n&&n.sample&&(s=m.a.createElement(y.a,{contentHash:n.sample.getId(),type:S.f}));var i=this.props.selectedSteps?Array.from(new Set(this.props.selectedSteps.map(function(e){return e&&e.group}).filter(function(e){return e}))):[];return m.a.createElement("div",{onMouseLeave:function(){return e.onMouseUp()},onMouseUp:function(){return e.onMouseUp()},className:"track-quick-view"},m.a.createElement("div",{className:"name-component"},this.getThumbnail(),m.a.createElement("div",{className:"name-label"},this.track.presetName||this.track.getName()),m.a.createElement(M.a,{sizeUnit:"px",size:10,color:"#123abc",loading:this.state.loading}),s,m.a.createElement(w.a,{className:"sample-arrows",element:C.n},m.a.createElement("i",{onClick:function(){return e.previousSample()},className:"left"}),m.a.createElement("i",{onClick:function(){return e.nextSample()},className:"right"}))),m.a.createElement("div",{className:"parameter-options"},m.a.createElement(L,{onClick:function(){return e.chooseParameter(a.durationParameter)},selected:r===a.durationParameter,isCirklonSelected:a.durationParameter.name===this.props.cirklonParameterSelected,name:"Dur."}),m.a.createElement(L,{onClick:function(){return e.chooseParameter(a.transposeParameter)},isCirklonSelected:a.transposeParameter.name===this.props.cirklonParameterSelected,selected:r===a.transposeParameter,name:"Trsp."}),m.a.createElement(L,{onClick:function(){return e.chooseParameter(a.attackParameter)},isCirklonSelected:a.attackParameter.name===this.props.cirklonParameterSelected,selected:r===a.attackParameter,name:"Atk."}),m.a.createElement(L,{onClick:function(){return e.chooseParameter(a.releaseParameter)},isCirklonSelected:a.releaseParameter.name===this.props.cirklonParameterSelected,selected:r===a.releaseParameter,name:"Rel."}),m.a.createElement(L,{onClick:function(){return e.chooseParameter(a.velocityParameter)},isCirklonSelected:a.velocityParameter.name===this.props.cirklonParameterSelected,selected:r===a.velocityParameter,name:"Vel."}),m.a.createElement(z,{value:this.getValue()})),m.a.createElement("div",{className:"track-slider-container",onMouseLeave:function(){return e.onMouseUp()}},m.a.createElement(q.a,{value:parseFloat(this.getValue()),change:function(t){return e.onUpdateParameter(t.target.value)},step:"Transpose"===r.name?1:.01,max:o,min:c,orientation:"horizontal",reversed:!1}),m.a.createElement(O,{track:n,selectedSteps:this.props.selectedSteps})),i.map(function(t){return m.a.createElement(j.a,{track:n,key:t.id,sequencerEngine:e.props.sequencerEngine,group:t})}))}}]),n}(m.a.Component);function z(e){return m.a.createElement("div",{className:"parameter-value"},e.value)}function L(e){var t="parameter-option";return e.selected&&(t+=" selected"),e.isCirklonSelected&&(t+=" cirklon-selected"),m.a.createElement("div",{onClick:e.onClick,className:t},e.name)}t.a=Object(k.b)(function(e,t){var n=t.sequencerEngine.engineId,r=e.sequencer.currentSubSequence[n],a=e.sequencer.currentPattern[r]||0,c=t.sequencerEngine.tracks&&t.sequencerEngine.tracks[e.mix.selectedTrack];return{id:void 0===c?0:c.presetName?c.presetName:void 0!==c.sample&&void 0!==c.sample.getId()?c.sample.getId():c.getName(),numTracks:t.sequencerEngine.tracks&&t.sequencerEngine.tracks.length,currentPattern:a,currentSubSequence:r,selectedTrack:e.mix.selectedTrack,selectedSteps:e.keyboard.selectedPianoRollSteps,cirklonParameterSelected:e.steps.cirklonParameterSelected,stepGroups:e.steps.stepGroups}},function(e){return{setParametersToRecord:function(t){return e(Object(E.ae)(t))}}})(I)},2702:function(e,t,n){},2703:function(e,t,n){"use strict";var r=n(3),a=n(4),c=n(7),o=n(11),s=n(1),i=n(0);function u(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=Object(s.a)(e);if(t){var a=Object(s.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(o.a)(this,n)}}var l=new(n(31).a),d=function(e){Object(c.a)(n,e);var t=u(n);function n(e){return Object(r.a)(this,n),t.call(this,e)}return Object(a.a)(n,[{key:"getTrack",value:function(e){return this.props.sequencerEngine.tracks[e]}},{key:"getSample",value:function(e){var t=this.getTrack(e);return void 0===t?void 0:t.sample}},{key:"isSample",value:function(e){return void 0!==this.getSample(e)}},{key:"key",get:function(){return this.props.value.toLowerCase()}},{key:"isThumbnail",value:function(e){return this.isSample(e)&&""!==this.getSample(e).getThumbnail()&&void 0!==this.getSample(e).getThumbnail()}},{key:"getThumbnailURL",value:function(e){return this.getSample(e).getThumbnail()}},{key:"getStyle",value:function(){var e={};if(void 0!==this.props.keyMapping){var t=this.props.keyMapping;e.borderBottomColor=l.getColor(t.sliceNumber),e.borderBottomStyle="solid",e.borderBottomWidth="3px",this.isThumbnail(t.trackNumber)?(e.backgroundImage='url("'+this.getThumbnailURL(t.trackNumber)+'")',e.backgroundPosition="center",e.backgroundSize="cover"):this.isSample(t.trackNumber)&&(e.backgroundColor=this.getSample(t.trackNumber).color),e.color="black"}return e}}]),n}(i.Component);t.a=d},2704:function(e,t,n){"use strict";n.d(t,"a",function(){return u});var r=n(2),a=n.n(r),c=n(13),o=n(39),s=n(29),i=(new(n(537).a)).contractAddress,u=function(){var e=Object(c.a)(a.a.mark(function e(t){var n,r,c;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=new o.a(i).from(s.gb).select("sequenceHash").where("sampleHash",t),e.next=3,n.executeQuery();case 3:return r=e.sent,c=r.map(function(e){return e.sequenceHash}),n=new o.a(i).from(s.wb).select("title").select("newSequence").whereIn("newSequence",c),e.next=8,n.executeQuery();case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},2706:function(e,t,n){"use strict";var r=n(3),a=n(4),c=n(7),o=n(11),s=n(1),i=n(0),u=n.n(i);function l(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=Object(s.a)(e);if(t){var a=Object(s.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(o.a)(this,n)}}var d=function(e){Object(c.a)(n,e);var t=l(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(a.a)(n,[{key:"render",value:function(){return u.a.createElement("div",{className:"details-banner"},u.a.createElement("div",{className:"banner-back-button",onClick:this.props.onClickBack},"BACK"),u.a.createElement("div",{className:"banner-heading"},this.props.headerText))}}]),n}(i.Component);t.a=d},2707:function(e,t,n){"use strict";var r=n(10),a=n(0),c=n.n(a),o=n(96),s=n(41),i=n.n(s),u=n(2708),l=n(12),d=n(60),f=n(9),m=new(n(31).a),p=function(e,t){return e&&{label:void 0===e.trackNumber||e.instrumentRack?e.instrumentRack&&!t?"Instrument":e.presetName||e.name||e.getName&&e.getName():"Track",value:e}},b=function(e){return e&&{label:e.prettyName,value:e}},v=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.parameters.filter(function(e){return t?e.mixAutomation.automations:e.automations});return n.sort(function(e,n){return t?n.mixAutomation.automations.length-e.mixAutomation.automations.length:n.automations.length-e.automations.length}),n.filter(function(e){return e.automatable&&e.uxAutomatable&&!e.isMapped&&"enabled"!==e.name&&"Configuration"!==e.name})},h=function(e,t){var n=t.liveEffects.effects.find(function(e){return e.effect===o.c});if(!n)return e;var a=[];for(var c in n.macros){var s=n.macros[c];s.subMacros.length>0&&a.push({label:s.name,value:s})}return[].concat(Object(r.a)(e),a)},g=function(e){var t=[];return e.instrument&&e.getTrackType()!==d.c&&t.push({value:e.instrument,label:e.instrument.name}),t=[{label:"None",value:null}].concat(Object(r.a)(t),Object(r.a)(e.effects.map(function(e){return p(e)})),Object(r.a)(e.midiEffects.effects.map(function(e){return p(e)})))};t.a=Object(l.b)(function(e,t){if(t.track){var n=t.track;return n&&n.tracks&&n.tracks[0]&&(n=n.tracks[0].track),{id:void 0===n?0:void 0!==n.sample&&void 0!==n.sample.getId()?n.sample.getId():n.presetName||n.getName(),numEffects:t.track.effects&&t.track.effects.length,selectedDevice:e.automation.trackDevice[t.track.id],subDevice:e.automation.trackSubDevice[t.track.id],selectedParameter:e.automation.trackParameter[t.track.id],showAutomation:e.automation.show,selectedRackDevice:e.automation.trackRackDevice[t.track.id],selectedInstrument:e.tracks.selectedRackSubTrack[t.track.id],bottomMode:e.arrangement.bottomMode}}return{}},function(e,t){return{setTrackAutomationParameter:function(n){return e(Object(f.Vg)(t.track.id,n))},setShowPianoRoll:function(t){return e(Object(f.eg)(t))},setTrackAutomationDevice:function(n){return e(Object(f.Ug)(t.track.id,n))},setTrackAutomationRackDevice:function(n){return e(Object(f.Wg)(t.track.id,n))},setTrackAutomationSubDevice:function(n){return e(Object(f.Xg)(t.track.id,n))},setArrangementBottomResizing:function(t){return e(Object(f.F)(t))},setArrangementBottomHeight:function(t){return e(Object(f.D)(t))},setShowAutomation:function(t){return e(Object(f.Pf)(t))},setBottomMode:function(t){return e(Object(f.E)(t))},setBottomOffset:function(t){return e(Object(f.db)(t))}}})(function(e){var t=e.track,n=e.selectedDevice,o=e.subDevice,s=e.selectedParameter,l=e.selectedRackDevice,f=t.getTrackType()===d.c?[]:[{value:null,label:"None"},{value:t,label:"Track"}],k=[],E=[];Object(u.a)(t),Object(a.useCallback)(function(t,n){if(t.stopPropagation(),e.showAutomation&&n===s)return e.setShowAutomation(!1);e.setShowAutomation(!0),e.setTrackAutomationParameter(n)},[s,e.setTrackAutomationDevice,e.setTrackAutomationRackDevice,e.showAutomation]);Object(a.useEffect)(function(){e.selectedInstrument&&y(e.selectedInstrument)},[e.selectedInstrument,y]),Object(a.useEffect)(function(){var t=s;t&&(t.context.subDevice?(e.setTrackAutomationDevice(t.context.instrument||t.context.effect||t.context.midiEffect),e.setTrackAutomationSubDevice(t.context.subDevice)):t.context.midiEffect||t.context.effect?e.setTrackAutomationDevice(t.context.midiEffect||t.context.effect):e.setTrackAutomationSubDevice(t.context.instrument),e.setTrackAutomationParameter(t))},[s]),t.getTrackType()===d.c&&(k=[{label:"None",value:null},{label:"Track",value:t}].concat(Object(r.a)(t.getSubDevices())),k=h(k,t)),l&&l.track&&(t=l.track),t.instrument&&t.getTrackType()!==d.c&&f.push({value:t.instrument,label:"Instrument"}),f=h(f,t),t.effects&&(f=[].concat(Object(r.a)(f),Object(r.a)(t.effects.map(function(e){return p(e)})),Object(r.a)(t.midiEffects.effects.map(function(e){return p(e)}))));var O=[];for(var j in t.effects&&n&&n.parameters&&(o&&n.getSubDevices?(void 0!==o.trackNumber&&o.instrument&&(o=o.instrument),O=v(o,e.isMix).map(function(e){return b(e)})):O=v(n,e.isMix).map(function(e){return b(e)}),n.getSubDevices&&(E=n.getSubDevices())),O){var S=O[j].value;(e.isMix?S.mixAutomation.automations:S.automations).length>0&&(O[j].className="has-automations")}var y=Object(a.useCallback)(function(t){if(console.log("on change rack device =",t),e.setTrackAutomationRackDevice(t),!t)return console.log("clearing all this shit"),e.setTrackAutomationDevice(null),e.setTrackAutomationSubDevice(null),void e.setTrackAutomationParameter(void 0);if(t.macroParameter)e.setTrackAutomationDevice(t);else{var r=g(t.track?t.track:t),a=r[0].value;if(n){var c=r.filter(function(e){return e.value}).find(function(e){return e.value.name===n.name});c&&(a=c.value)}a||(a=t),e.setTrackAutomationDevice(a);var o=v(a,e.isMix);if(s){var i=o.find(function(e){return e.name===s.name});if(i)return void e.setTrackAutomationParameter(i)}e.setTrackAutomationParameter(o[0])}},[n,s]),w=Object(a.useCallback)(function(t){if(e.setTrackAutomationDevice(t),!t)return e.setTrackAutomationDevice(null),e.setTrackAutomationSubDevice(null),void e.setTrackAutomationParameter(void 0);if(t.getSubDevices&&t.getSubDevices().length>0){var n=t.getSubDevices()[0].value;e.setTrackAutomationSubDevice(n),t=n}var r=v(t,e.isMix);if(s){var a=r.find(function(e){return e.name===s.name});if(a)return void e.setTrackAutomationParameter(a)}e.setTrackAutomationParameter(r[0])},[s,e.setTrackAutomationParameter,e.setTrackAutomationSubDevice,e.setTrackAutomationDevice]),C=Object(a.useCallback)(function(t){e.setTrackAutomationSubDevice(t);var n=v(t,e.isMix);if(s){var r=n.find(function(e){return e.name===s.name});if(r)return void e.setTrackAutomationParameter(r)}e.setTrackAutomationParameter(n[0])},[s]),N=Object(a.useCallback)(function(e){return E.find(function(t){return t.value===e})},[E]),q=(e.showAutomation,e.showAutomation?"dropdowns":"dropdowns disabled");m.getColorForTrack(e.track);return t.getTrackType()===d.c?l||(q+=" non-selected rack-dropdown"):n||(q+=" non-selected"),c.a.createElement("div",{className:q},k.length>0?c.a.createElement(i.a,{onMouseDown:function(e){return e.stopPropagation()},options:k,onChange:function(e){return y(e.value)},value:p(l,!0),placeholder:"Rack Device"}):"",l===t?"":c.a.createElement(i.a,{onMouseDown:function(e){return e.stopPropagation()},controlClassName:"device-dropdown",options:f,onChange:function(e){return w(e.value)},value:p(n),placeholder:"Device"}),l!==t&&E.length>0?c.a.createElement(i.a,{controlClassName:"sub-device-dropdown",onMouseDown:function(e){return e.stopPropagation()},options:E,onChange:function(e){return C(e.value)},value:N(o),placeholder:"Sub Device"}):"",c.a.createElement(i.a,{controlClassName:"parameter-dropdown",onMouseDown:function(e){return e.stopPropagation()},options:O,onChange:function(t){return e.setTrackAutomationParameter(t.value)},value:b(s),placeholder:"Parameter"}))})},2708:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r=function(e){var t=e.trackData?e.getAllParameters().filter(function(e){return e.automations}).filter(function(e){return e.automations.length>0}):[];return Array.from(new Set(t))}},2709:function(e,t,n){"use strict";var r=n(10),a=n(6),c=n(0),o=n.n(c),s=n(31),i=n(191),u=n(1527),l=n(12),d=(n(2802),new s.a);t.a=Object(l.b)(function(e,t){return{}},function(e){return{}})(function(e){var t=e.group,n=e.sequencerEngine,s=e.track,l=Object(c.useState)(t.transformations),f=Object(a.a)(l,2),m=f[0],p=f[1],b=Object(c.useCallback)(function(){Object(i.f)(t),p(Object(r.a)(t.transformations))},[p,t]),v={backgroundColor:d.getColorForHash(t.id)};return o.a.createElement("div",{className:"step-group-editor"},o.a.createElement("div",{className:"group-header"},o.a.createElement("div",{style:v,className:"group-thumb"}),o.a.createElement("div",{className:"group-name"},t.name),o.a.createElement("div",{onClick:b,className:"new-transform-btn"},"+")),m.map(function(e){return o.a.createElement(u.a,{key:e.id,track:s,sequencerEngine:n,transformation:e})}))})},2710:function(e,t,n){"use strict";var r=n(10),a=n(6),c=n(0),o=n.n(c),s=n(710),i=n(2571),u=n(33),l=(n(1086),n(44)),d=n(85),f=n(1131),m=n(68),p=n(9),b=n(1133),v=n(31),h=n(43),g=n(12);function k(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return E(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return E(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var c,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,c=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw c}}}}function E(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var O=new v.a;window.tran2=.6,window.tran=.3;var j=function(e){var t=e.setSourceToSearch,n=e.i,s=e.results,i=e.instrumentType,f=e.coverArtHash,p=e.videoId,b=e.tag,v=e.onClickSource,g=e.setSamplesDragging,E=Object(c.useState)(""),j=Object(a.a)(E,2),y=j[0],w=j[1];Object(c.useEffect)(function(){s[0]&&s[0].user&&u.a.users.getUserName(s[0].user).then(function(e){return w(e)})},[]);var C={},N={},q=O.saturate(O.getColorForHash(f&&""!==f?f:p),3);f?C.backgroundImage="url("+h.a.getHashUrl(f)+")":p?C.backgroundImage="url(https://img.youtube.com/vi/"+p+"/1.jpg)":i||b||(C.display="none");var x=i?O.saturate(O.getColorForHash(m.d[i]),5):b?O.saturate(O.saturate(O.getColorForHash(b),3),3):void 0;x&&(q=x);var T=f&&s[0].releaseName?s[0].artistName+"-"+s[0].releaseName:f?s[0].title:p?s[0].title:b;(""===T||T)&&(T=s[0].title);var M,P={},R=k(s.filter(function(e){return e.tags}).map(function(e){return e.tags}).reduce(function(e,t){return[].concat(Object(r.a)(e),Object(r.a)(t))},[]).filter(function(e){return b!==e&&"Resampled"!==e}));try{for(R.s();!(M=R.n()).done;){var D=M.value;P[D]=D.length}}catch(U){R.e(U)}finally{R.f()}var A=100,I=b;for(var z in P)z!==b&&P[z]<A&&(I=z,A=P[z]);var L=""!==s[0].artistName?s[0].artistName:y,H=s.find(function(e){return""!==e.releaseName}),F=void 0;H&&(T=H.releaseName,F=H.releaseId),f||p||""==f||""==p||(T=b.toUpperCase()),b=I,Math.floor(n/20),T=S(T),q=O.transparent(q,window.tran);var B=" source-container";return f&&(B+=" record"),n%3==2&&(B+=" bigger"),o.a.createElement(d.a,{arg:T,element:l.G},o.a.createElement("div",{draggable:!0,onDragStart:function(e){return g(s.map(function(e){return e.ipfsHash}))},onDragOver:function(e){return e.preventDefault()},style:{width:n%3<2?186:372},onClick:function(e){return e.stopPropagation()||v(e,{results:s,coverArtHash:f,videoId:p,tag:b})},className:B},o.a.createElement("div",{style:N,className:"book-left"},o.a.createElement("span",null,b&&""!==b?b:i&&1===s.length?s[0].title:m.d[i])),o.a.createElement("div",{className:"source-title"},T),f||p?o.a.createElement("div",{onClick:function(e){e.stopPropagation(),t(p&&""!==p?{videoId:p}:{releaseId:F})},className:"source-thumb",style:C}):o.a.createElement("div",{style:N,className:"book-right"},L)))},S=function(e){if(!e)return"";e=(e=e.trim()).replace(/[|&;$%@"<>()+,]/g,"");for(var t=0;t<e.length;t++)if(e.charCodeAt(t)>32)return e.substring(t)};t.a=Object(g.b)(function(e,t){return{}},function(e){return{setSampleTagDragging:function(t){return e(Object(p.Te)(t))},setSamplesDragging:function(t){return e(Object(p.Ve)(t))},setCurrentTagInList:function(t){return e(Object(p.Gb)(t))}}})(function(e){var t=e.results,n=e.searchTerm,r=e.onClickDay,u=e.isCurrent,m=e.onClickSource,p=e.number,v=e.filterFavorites,h=e.setCurrentTagInList,g=e.sourceToSearch,k=e.setSamplesDragging,E=e.setSourceToSearch,S=e.setSampleTagDragging,y=e.scrollRef,w=Object(c.useRef)(void 0),C=Object(c.useState)(t),N=Object(a.a)(C,2),q=N[0],x=N[1],T=q||{},M=T.tag,P=T.blockNumber,R=(T.instrumentTypes,T.discogs),D=T.youtube,A=T.unsourced,I=T.totalResults,z=Object(c.useState)(void 0),L=Object(a.a)(z,2),H=L[0],F=L[1],B=Object(c.useState)(""===M||""!==n||g),U=Object(a.a)(B,2),G=U[0],V=U[1];Object(c.useEffect)(function(){t&&x(t)},[t,x]),Object(c.useEffect)(function(){""!==n&&V(!0)},[n,V]),Object(c.useEffect)(function(){Object(f.a)(P).then(F)},[P]);var W=""!==M?M:H?Object(b.a)(H):"",Z={backgroundColor:O.transparent(O.saturate(O.getColorForHash(W),1.2),window.tran2)},X=Math.pow(I/30,.5);G||(Z.opacity=X),Object(c.useEffect)(function(){A&&V(!0)},[A,V]);var K=Object(c.useCallback)(function(){h(p),G?r(q,M):A?V(!0):Object(i.c)(50,n,0,"tag",0,v,void 0,M).then(function(e){console.log("results gotten for tag=",M),x(e[0])})},[r,t,M,G,V,x,A,q,p,v]);Object(s.a)({ref:w,scrollRef:y,isCurrent:u,expanded:G}),Object(c.useEffect)(function(){return u&&window.addEventListener("keydown",Y),function(){return u&&window.removeEventListener("keydown",Y)}},[u,r,t,M,G,V,x,A,q,p]);var Y=Object(c.useCallback)(function(e){"Enter"===e.key&&K()},[u,r,t,M,G,V,x,A,q,p]),_="day";return G&&(_+=" day toggled"),!G||R&&A&&D?(u&&(_+=" current"),o.a.createElement(d.a,{element:l.F},o.a.createElement("div",{ref:w,draggable:""!==M&&""===n,onDragStart:function(){return S(M)},onDragOver:function(e){return e.preventDefault()},style:Z,className:_,onClick:K},o.a.createElement("div",{className:"floppy-part"},o.a.createElement("div",{style:G?Z:void 0,className:"date"},""!==M?M:H?Object(b.a)(H):"")),G?o.a.createElement("div",{className:"sources"},Object.keys(R).map(function(e,t){return o.a.createElement(j,{i:t,setSourceToSearch:E,key:e,setSamplesDragging:k,onClickSource:m,coverArtHash:e,results:R[e]})}),Object.keys(D).map(function(e,t){return o.a.createElement(j,{i:t,key:e,setSamplesDragging:k,setSourceToSearch:E,onClickSource:m,videoId:e,results:D[e]})}),Object.keys(A).map(function(e,t){return o.a.createElement(j,{i:t,key:e,setSamplesDragging:k,onClickSource:m,instrumentType:A[e][0].instrumentType,tag:e,results:A[e]})})):o.a.createElement("div",{style:Z,className:"floppy-inner"})))):(console.log("RETURNNING toggled=%s",G,q,t,R,A,D),[])})},2712:function(e,t,n){"use strict";var r=n(6),a=n(0),c=n.n(a),o=n(63),s=n(12),i=function(e){var t=e.label,n=e.value,r=e.onChange;return c.a.createElement("label",null,c.a.createElement("input",{type:"checkbox",checked:n,onChange:r}),t)};t.a=Object(s.b)(function(e,t){return{}},function(e){return{}})(function(e){var t=e.znumber,n=Object(a.useState)(t.min),s=Object(r.a)(n,2),u=s[0],l=s[1],d=Object(a.useState)(t.max),f=Object(r.a)(d,2),m=f[0],p=f[1],b=Object(a.useState)(t.round),v=Object(r.a)(b,2),h=v[0],g=v[1];Object(a.useEffect)(function(){l(t.min),p(t.max),g(t.round)},[t,l,g,p]);var k=Object(a.useCallback)(function(e,n,r){var a=e.target.value,c=a;if("."===a||"-."===a)a=0;else if("-"===a)a=0;else if(""===a)a=0;else if(!Object(o.a)(a))return;n(c),t[r]=parseFloat(a)},[p,l,t]);Object(a.useEffect)(function(){g(t.round)},[g,t.round]);var E=Object(a.useCallback)(function(){t.round=!h,g(!h)},[h,g,t]);return c.a.createElement("div",{className:"z-number-inspector"},c.a.createElement("div",{className:"min-max"},"Min",c.a.createElement("input",{className:"min-max-input",value:u,onChange:function(e){return k(e,l,"min")},type:"text"})),c.a.createElement("div",{className:"min-max"},"Max",c.a.createElement("input",{className:"min-max-input",value:m,onChange:function(e){return k(e,p,"max")},type:"text"})),c.a.createElement(i,{label:"Round",value:h,onChange:E}))})},2713:function(e,t,n){"use strict";var r=n(10),a=n(2),c=n.n(a),o=n(13),s=n(3),i=n(4),u=n(7),l=n(11),d=n(1),f=n(0),m=n.n(f),p=n(55),b=n(2714),v=n(45),h=n(43),g=n(75),k=n(33),E=n(205),O=n.n(E),j=n(1353);function S(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=Object(d.a)(e);if(t){var a=Object(d.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(l.a)(this,n)}}var y=function(e){Object(u.a)(n,e);var t=S(n);function n(e){var r;return Object(s.a)(this,n),(r=t.call(this,e)).state={commentText:"",commentSent:!1,notes:[],start:0,messageSent:void 0},r.getNotes(),r.watchForNotes(),r}return Object(i.a)(n,[{key:"watchForNotes",value:function(){var e=Object(o.a)(c.a.mark(function e(){var t=this;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==this.props.sequence.id){e.next=2;break}return e.abrupt("return");case 2:k.a.messaging.watchForNewMessages(this.props.sequence.id,this.props.userId,function(e){return t.onNewNote(e)});case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"onNewNote",value:function(e){e.messageHash===this.state.messageSent&&this.setState({messageSent:void 0}),this.setState({notes:[e].concat(Object(r.a)(this.state.notes))})}},{key:"getNotes",value:function(){var e=Object(o.a)(c.a.mark(function e(){var t;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(b.a)(this.props.sequence.id);case 2:if(void 0!==(t=e.sent)){e.next=5;break}return e.abrupt("return");case 5:this.setState({notes:t});case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"sendComment",value:function(){var e=Object(o.a)(c.a.mark(function e(){var t,n,r,a,o;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.sequence.id,n=this.props.userId,r=this.state.commentText,a=j.b,e.next=6,k.a.messaging.sendMessage(n,t,a,r);case 6:o=e.sent,this.setState({commentText:"",commentSent:!0,messageSent:o});case 8:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"needsPagination",value:function(){return this.notes.length>10}},{key:"getPaginatedNotes",value:function(){return this.notes.length>this.state.start+10?this.notes.slice(this.state.start,this.state.start+10):this.notes.slice(this.state.start)}},{key:"getPagination",value:function(){return m.a.createElement("div",{className:"pagination"})}},{key:"render",value:function(){var e=this;return m.a.createElement("div",{className:"comments-container"},m.a.createElement(v.a,{condition:p.a.isLoggedIn()},m.a.createElement(g.h,{className:"tag-sound-input"},m.a.createElement(g.g,{onChange:function(t){e.state.commentText=t.target.value,e.setState(e.state)},type:"textarea",value:this.state.commentText,placeholder:"Write a note",className:"comment-input-box"}),m.a.createElement(g.i,{addonType:"append"},m.a.createElement(g.b,{size:"sm",onClick:function(){return e.sendComment()},color:"secondary"},"Send")))),m.a.createElement(O.a,{sizeUnit:"px",size:10,color:"#f92360",loading:void 0!==this.state.messageSent}),this.state.notes.map(function(e,t){return m.a.createElement(w,{odd:t%2==1,note:e})}),m.a.createElement("div",{onClick:this.props.onHide,className:"common-button hide-notes-button"},"Hide Notes"))}}]),n}(f.Component),w=function(e){Object(u.a)(n,e);var t=S(n);function n(e){var r;return Object(s.a)(this,n),(r=t.call(this,e)).state={messageText:"",fromUser:e.note.fromUser,isFavorite:!1,date:""},r.getMessage(),r}return Object(i.a)(n,[{key:"shouldComponentUpdate",value:function(e){return this.props.note!==e.note&&this.getMessage(e.note),!0}},{key:"getMessage",value:function(){var e=Object(o.a)(c.a.mark(function e(){var t,n,r,a,o,s=arguments;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:this.props.note,n=t.fromUser?t.fromUser:t.user,e.next=4,k.a.users.getUserName(n);case 4:return void 0!==(r=e.sent)&&this.setState({fromUser:r}),e.next=8,k.a.getBlockDate(t.blockNumber);case 8:if(a=e.sent,this.setState({date:void 0===a?"":a.toLocaleString()}),!t.isPrevious){e.next=15;break}return this.setState({newSequence:t.newSequence,messageText:"Made an edit ("+t.title+")"}),e.abrupt("return");case 15:if(!t.newSequence){e.next=20;break}return this.setState({newSequence:t.newSequence,messageText:"Made an edit ("+t.title+")"}),e.abrupt("return");case 20:if(!t.isFavorite){e.next=23;break}return this.setState({isFavorite:!0,messageText:"Favorited"}),e.abrupt("return");case 23:return e.next=25,h.a.getJson(t.messageHash,!0);case 25:o=e.sent,this.setState({messageText:o.content});case 27:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"onClickText",value:function(){this.state.newSequence&&window.open("/create/"+this.state.newSequence,"_blank").focus()}},{key:"onClickUser",value:function(){window.open("/user/"+this.state.fromUser,"_blank").focus()}},{key:"render",value:function(){var e=this,t="sequence-note-container";return this.props.odd&&(t+=" odd"),m.a.createElement("div",{className:t},m.a.createElement("div",{onClick:function(){return e.onClickUser()},className:"sequence-note-from"},this.state.fromUser,":"),m.a.createElement("div",{onClick:function(){return e.onClickText()},className:"sequence-note-text"},m.a.createElement(v.a,{condition:!this.state.isFavorite},this.state.messageText),m.a.createElement(v.a,{condition:this.state.isFavorite},m.a.createElement("div",{className:"heart favorited"}))),m.a.createElement("div",{className:"note-date"},this.state.date))}}]),n}(f.Component);t.a=y},2714:function(e,t,n){"use strict";n.d(t,"a",function(){return l});var r=n(2),a=n.n(r),c=n(10),o=n(8),s=n(13),i=n(33),u=n(492);function l(e){return d.apply(this,arguments)}function d(){return(d=Object(s.a)(a.a.mark(function e(t){var n,r,s,l,d,f,m=arguments;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=!(m.length>1&&void 0!==m[1])||m[1],void 0!==t){e.next=3;break}return e.abrupt("return",void 0);case 3:return e.next=5,i.a.messaging.getMessages(t);case 5:return r=e.sent,e.next=8,i.a.tokenizedSequences.getNextSequences(t);case 8:return s=e.sent,l=[],e.next=12,u.a.getFavorites(t);case 12:return d=(d=e.sent).map(function(e){return Object(o.a)({},e,{isFavorite:!0})}),(f=n?[].concat(Object(c.a)(s),l,Object(c.a)(d),Object(c.a)(r)):[].concat(Object(c.a)(r),Object(c.a)(d))).sort(function(e,t){return t.blockNumber-e.blockNumber}),e.abrupt("return",f);case 17:case"end":return e.stop()}},e)}))).apply(this,arguments)}},2715:function(e,t,n){"use strict";var r=n(2),a=n.n(r),c=n(13),o=n(3),s=n(4),i=n(7),u=n(11),l=n(1),d=n(0),f=n.n(d),m=n(12),p=n(33),b=n(2785);n(2806);function v(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=Object(l.a)(e);if(t){var a=Object(l.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(u.a)(this,n)}}var h=function(e){Object(i.a)(n,e);var t=v(n);function n(e){var r;return Object(o.a)(this,n),(r=t.call(this,e)).state={},r.loadFolders(),r}return Object(s.a)(n,[{key:"loadFolders",value:function(){var e=Object(c.a)(a.a.mark(function e(){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(p.a.folders.isLoaded){e.next=4;break}return e.next=3,p.a.folders.loadFolders();case 3:this.setState(this.state);case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"selectedFolder",get:function(){return this.props.sequencerEngine.state.presets.selectedFolder}},{key:"onKeyUp",value:function(e){return console.log("on key up = "+e.key),e.stopPropagation(),"Delete"===e.key&&this.selectedFolder.delete(),!1}},{key:"render",value:function(){var e=this,t=p.a.folders.root.subFolders;return t.sort(function(e,t){return void 0===e.name||void 0===t.name?0:e.name.localeCompare(t.name)}),f.a.createElement("div",{className:"folders-container"},t.map(function(t,n){return f.a.createElement(b.a,{key:t.name+"-",onFoldersUpdated:function(){return e.setState(e.state)},onChooseItem:e.props.onChooseItem,onChooseFolder:e.props.onChooseFolder,onTestItem:e.props.onTestItem,showItems:e.props.showItems,folder:t})}))}}]),n}(d.Component);t.a=Object(m.b)(function(e){return{}},null)(h)},2716:function(e,t,n){"use strict";var r=n(0),a=n.n(r),c=n(12),o=n(9);n(2809);t.a=Object(c.b)(function(e,t){return{}},function(e){return{setTrackDragging:function(t){return e(Object(o.ah)(t))}}})(function(e){var t=e.track,n={backgroundColor:t.color};return a.a.createElement("div",{draggable:!0,onDragStart:function(){return Object(o.ah)(t)},onDragOver:function(e){return e.preventDefault()},className:"youtube-info synth-info"},a.a.createElement("div",{className:"synth-thumbnail sound-thumbnail"},a.a.createElement("div",{style:n,className:"white-key"}),a.a.createElement("div",{style:n,className:"white-key"}),a.a.createElement("div",{style:n,className:"white-key"}),a.a.createElement("div",{className:"black-key key-1"}),a.a.createElement("div",{className:"black-key key-2"})))})},2717:function(e,t,n){"use strict";var r=n(0),a=n.n(r),c=n(44),o=n(85),s=n(9),i=n(12),u=n(106),l=n(177);t.a=Object(i.b)(function(e,t){var n=t.sequencerEngine&&t.sequencerEngine.getSelectedTrack();return{id:n&&(n.presetName||n.sample&&n.sample.getId()),streamSize:t.zobject&&t.zobject.samplesStream&&t.zobject.samplesStream.length}},function(e){return{setSelectedZObject:function(t){return e(Object(s.Cf)(t))}}})(function(e){e.streamSize;var t=e.sequencerEngine,n=e.zobject,s=e.options,i=e.setOption,d=e.option,f=e.showSave,m=void 0!==f&&f,p=e.setSelectedZObject;Object(r.useEffect)(function(){s.includes(d)||i(s[0])},[s,i,d]);var b=n&&n.getObjectType&&n.getObjectType()===u.c?"Sounds":"Presets",v=t&&t.getSelectedTrack();return a.a.createElement("div",{className:"sidebar-navigator"},a.a.createElement(o.a,{style:{backgroundColor:v&&v.color},element:c.J,onClick:function(){n&&n.getObjectType()===u.a?p(t.getSelectedTrack()):p(void 0)},className:"back-arrow-container pushable"},a.a.createElement("div",{className:"arrow-left"})),s.map(function(e){return a.a.createElement("div",{onClick:function(){return i(e)},className:e===d?"selected option "+e+"-option":"option "+e+"-option"},"Audition"===e?b:e)}),m&&a.a.createElement("img",{className:"save-preset-icon",onClick:function(){return Object(l.j)(n)},src:"/save-preset-floppy.svg"}))})},2769:function(e,t,n){"use strict";var r=n(3),a=n(4),c=n(18),o=n(7),s=n(11),i=n(1),u=n(0),l=n.n(u),d=n(1178),f=n(2697),m=n(2689),p=n(9),b=n(12),v=n(76),h=Object(b.b)(function(e,t){return{show:e.arrangement.showSearcher}},function(e){return{setShow:function(t){return e(Object(p.Nf)(t))}}})(function(e){var t=e.show,n=e.sequencerEngine,r=e.setShow;return t?l.a.createElement(v.a,{dialogClassName:"searcher-modal",show:t,onHide:function(){return r(!1)}},l.a.createElement(m.a,{hide:function(){return r(!1)},sequencerEngine:n}),l.a.createElement("div",{className:"modal-row"},l.a.createElement(f.a,{sequencerEngine:n}),l.a.createElement(d.a,{sequencerEngine:n}))):[]}),g=n(131),k=n(49),E=n(974),O=n(642),j=n(241),S=n(513),y=n(8),w=n(6),C=n(10),N=n(2643),q=n(31),x=n(45),T=new q.a,M=Object(u.memo)(function(e){var t=Object(u.useRef)(t),n=Object(u.useState)(!0),r=Object(w.a)(n,2),a=r[0];r[1];!function(e){var t=e.horizontalScroll,n=e.ref,r=e.isSelected;Object(u.useEffect)(function(){if(r&&t&&n&&t.current&&n.current){var e=t.current.scrollLeft,a=e+t.current.offsetWidth,c=n.current.offsetLeft,o=(c+(c+n.current.offsetWidth))/2;(o<e||o>a)&&t.current.scrollTo(c-150,0)}},[r,n,t])}({horizontalScroll:e.arrangementContainer,ref:t,isSelected:e.isSelected});var c=Object(u.useCallback)(function(t){(e.type!==k.k||e.event.value)&&(t.preventDefault(),t.stopPropagation(),e.onRightMouseDown())},[e.type,e.event,e.onRightMouseDown]),o=Object(u.useCallback)(function(t){(e.type!==k.k||e.event.value)&&(t.preventDefault(),t.stopPropagation(),e.onLeftMouseDown())},[e.type,e.event,e.onLeftMouseDown]),s=Object(u.useCallback)(function(t){(e.type!==k.k||e.event.value)&&(t.stopPropagation(),e.onSelect(t))},[e.type,e.event]),i="";e.type===k.i?i=e.value+1:e.type===k.k&&(i=e.value+" ");var d=Object(u.useCallback)(function(t){return e.type===k.k&&(e.event.value||(t.opacity=.001)),t},[e.type,e.event]),f=!1;f=!(e.type===k.k&&!e.event.value);var m,p={},b=void 0===e.duration?64:e.duration;if(e.isRoll){var v=e.event.resolution;m=void 0===v?T.getColor(13):T.getColor(v.resolution)}else{var h=e.subSequence.id.slice?e.subSequence.id.slice(0,10):"s"+e.subSequence.id;m=T.getColorForHash(h),isNaN(e.value)||(p.backgroundSize=4*(e.value+1)+"px 50px")}var g={};p=Object(y.a)({},p,{width:Object(S.a)(b,e.resolution,e.xScale)-2,backgroundColor:T.saturate(m,3)}),g=d(g);var E=e.isSelected?"pattern selected":"pattern";e.isLast&&(E+=" last"),g.width=Object(S.a)(b,e.resolution,e.xScale);var O={width:p.width,maxWidth:e.maxWidth||p.width};return e.isSelected&&m&&(g.border="solid 1px "+T.brighten(m,1.5),O.backgroundColor=T.brighten(m,.4)),e.smallPattern&&(E+=" small-pattern"),0===b?[]:l.a.createElement("div",{ref:t,className:E,onMouseUp:e.onMouseUp,style:g},l.a.createElement("div",{style:p,onMouseDown:s,className:"pattern-top"},l.a.createElement(x.a,{condition:f},l.a.createElement("div",{onMouseDown:o,onMouseUp:e.onMouseUp,className:"left-edge"})),l.a.createElement("div",{className:"pattern-number"},i),l.a.createElement(x.a,{condition:f},l.a.createElement("div",{onMouseDown:c,onMouseUp:e.onMouseUp,className:"right-edge"}))),e.smallPattern?"":l.a.createElement("div",{style:O,className:"pattern-rest"},a?Object(N.b)(e.event,e.subSequence,b,Object(S.a)(1,e.resolution,e.xScale)):"",l.a.createElement("div",{className:"center"})))}),P=Object(b.b)(function(e,t){var n=e.arrangement.selectedEvents;return{isSelected:void 0!==n&&void 0!==n[t.event.id],duration:t.event.duration,value:t.event.value,xScale:e.arrangement.xScale}},null)(M);var R=Object(b.b)(function(e,t){return{duration:t.event.duration,subEventsLength:t.event.subEvents.length,xScale:e.arrangement.xScale}},null)(function(e){var t=e.event;if(!t.value){var n={width:Object(S.a)(e.duration,e.resolution,e.xScale),opacity:.001};return l.a.createElement("div",{className:"empty-roll-event",style:n},l.a.createElement("div",{style:n}))}t.step;var r=t.duration,a=Object(S.a)(r,e.resolution,e.xScale),c={width:a},o=e.event.getSubEvents();return l.a.createElement("div",{style:c,className:"roll-event step-"+e.event.step},o.map(function(t,n){return l.a.createElement(P,{subSequence:k.g,maxWidth:a,key:t.id,eventKey:"roll-"+Math.pow(t.value+4,8),type:k.k,isRoll:!0,resolution:e.resolution,isLast:n===o.length-1,isFirst:0===n,onDragStart:function(e){return[]},onSelect:function(n){e.onSelect(e.event,t,n)},onMouseUp:function(n){return e.onMouseUp(t)},onRightMouseUp:function(n){return e.onRightMouseUp(e.event,t)},onRightMouseDown:function(n){return e.onRightMouseDown(e.event,t)},onLeftMouseUp:function(n){return e.onLeftMouseUp(e.event,t)},onLeftMouseDown:function(n){return e.onLeftMouseDown(e.event,t)},mixSession:e.mixSession,sequencerEngine:e.sequencerEngine,event:t})}))}),D=n(1172),A=n(2695),I=n(1164),z=Object(b.b)(function(e,t){var n=t.sequencerEngine.currentSubSequence;return{selectedEvents:e.arrangement.selectedEvents,currentSubSequence:t.sequencerEngine.currentSubSequence,selectedTrack:t.sequencerEngine.tracks[e.mix.selectedTrack],bottomHeight:e.arrangement.bottomHeight,patternSelected:e.arrangement.patternSelected,showTracks:e.arrangement.showTracks[n.id],bottomMode:e.arrangement.bottomMode}},function(e){return{setPatternSelected:function(t){return e(Object(p.N)(t))},setBottomMode:function(t){return e(Object(p.E)(t))}}})(function(e){var t=e.setPatternSelected,n=e.patternSelected,r=e.sequencerEngine,a=e.bottomHeight,c=(e.selectedEvents,e.selectedTrack),o=e.showTracks,s=e.bottomMode,i=(e.currentSubSequence,e.setBottomMode),d={height:a};if(Object(u.useEffect)(function(){n&&c&&c.updateSteps()},[n,c]),Object(u.useEffect)(function(){return function(){return t(void 0)}},[]),!n&&s!==g.a||!o)return[];var f="",m="",p=void 0;if(void 0!==c){if((p=c)&&(f=l.a.createElement(A.a,{hideAutomation:!0,hide:function(){t(void 0),i(g.d)},track:p,sequencerEngine:r})),s===g.a)m=Object(D.a)(p);else if(a>25){var b=p.patterns[n.patternNumber];m=l.a.createElement(I.a,{parentClassName:"arrangement-bottom-container",isLooping:!1,pattern:b,scale:.5,installation:!0,sequencerEngine:r,hideToolbar:!0,track:p})}}else d.height=0;return l.a.createElement("div",{style:d,className:"arrangement-bottom-container"},f,m)}),L=300,H=50;Object(b.b)(null,function(e){return{setArrangementBottomResizing:function(t){return e(Object(p.F)(t))},setArrangementBottomHeight:function(t){return e(Object(p.D)(t))}}})(function(e){var t=Object(u.useState)(void 0),n=Object(w.a)(t,2),r=n[0],a=n[1],c=Object(u.useCallback)(function(t){e.setArrangementBottomResizing(!0);var n=(new Date).getTime();void 0!==r&&n-r<=L&&(e.sequencerEngine.store.getState().arrangement.bottomHeight<=H?e.setArrangementBottomHeight(g.c[g.d]):e.setArrangementBottomHeight(0)),a(n)},[r,a]);return l.a.createElement("div",{onMouseDown:c,className:"arrangement-resizing-edge"})});var F=n(33),B=n(2715),U=n(2785);function G(e){var t=e.root,n=Object(u.useState)(t.subFolders),r=Object(w.a)(n,2),a=r[0],c=r[1];Object(u.useEffect)(function(){e.root.isLoaded||e.root.load().then(function(){return c(Object(C.a)(e.root.subFolders))})},[e.root]);var o=function(t){console.log("choose item ",t);var n=t.fromData;e.sequencerEngine.loadSampleFromSequence(t.getId(),n)},s=function(e){console.log("choose folder ",e)},i=function(e){},d=Object(C.a)(a);return d.length>500&&(d=a.slice(0,500)),l.a.createElement("div",{className:"folders-container xanadu-folders"},d.map(function(e){return l.a.createElement(U.a,{key:e.name,onFoldersUpdated:function(){return[]},onChooseItem:o,onChooseFolder:s,onTestItem:i,showItems:!0,folder:e})}))}var V=30,W="PRESETS",Z="SEQUENCES";Object(b.b)(function(e,t){return{mode:e.arrangement.browserMode}},null)(function(e){var t=Object(u.useState)(!1),n=Object(w.a)(t,2),r=n[0],a=n[1],c=Object(u.useState)(""),o=Object(w.a)(c,2),s=(o[0],o[1]),i=Object(u.useState)(W),d=Object(w.a)(i,2),f=d[0],m=d[1],p=Object(u.useCallback)(function(){a(!r)},[a,r]),b={};return r&&(b.minWidth=V,b.width=V),Object(u.useCallback)(function(e){s(e.target.value)},[s]),Object(u.useCallback)(function(e){m(e)},[m]),l.a.createElement("div",{style:b,className:"side-browser-container"},l.a.createElement("div",{className:"sidebar-header"},l.a.createElement("div",{onClick:function(){return p()},className:"collapse-toggle"},r?l.a.createElement("div",{className:"arrow-down"}):l.a.createElement("div",{className:"arrow-right"}))),l.a.createElement(x.a,{condition:!r},l.a.createElement(x.a,{condition:f===W},l.a.createElement("div",{className:"preset-folders"},l.a.createElement(B.a,{sequencerEngine:e.sequencerEngine,onTestItem:function(e){return[]},onChooseFolder:function(e){return[]},onChooseItem:function(t){return function(t){e.sequencerEngine.loadPresetAsSubSequence(t)}(t)},showItems:!0}))),l.a.createElement(x.a,{condition:f===Z},l.a.createElement("div",{className:"preset-folders"},l.a.createElement(G,{sequencerEngine:e.sequencerEngine,root:F.a.xanadu.linkFolder})))))});var X=n(1415);function K(e,t){var n=e.key;n>0&&n<=9&&function(e,t){if(t.rolling)return;if(function(e){return function(e){return e.state.arrangement.selectedRows}(e).indexOf(k.g.id)>-1}(t)){var n=Y(t,k.g.id);for(var r in n){var a=n[r];t.mix.dispatch(Object(j.g)(a,X.a[e]))}return}for(var c in t.subSequences){var o=t.subSequences[c],s=Y(t,o.id);for(var i in s){var u=s[i];t.mix.dispatch(Object(j.f)(u,e-1)),_(t).arrangement.patternSelected&&t.dispatch(Object(p.N)(u))}t.dispatch(Object(p.Ze)(Object(y.a)({},s)))}}(parseInt(n),t)}function Y(e,t){return e.state.arrangement.selectedEvents||[]}var _=function(e){return e.state},$=n(447);function J(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16;return!(arguments.length>2&&void 0!==arguments[2])||arguments[2]?t*Math.round(e/t):t*Math.floor(e/t)}var Q=n(446),ee="RIGHT",te="LEFT";function ne(e){return{marginLeft:Object(S.a)(e.selectionStart,e.resolution,e.xScale),width:Object(S.a)(e.selectionEnd-e.selectionStart,e.resolution,e.xScale)}}var re=Object(b.b)(function(e){var t=e.arrangement.selection;return{selectionStart:void 0!==t?t.start:void 0,selectionEnd:void 0!==t?t.end:void 0,loopSelected:e.arrangement.loopSelected,resolution:Q.a,xScale:e.arrangement.xScale}},function(e){return{setArrangementRowSelections:function(t){return e(Object(p.P)(t))},setArrangementSelection:function(t,n){return e(Object(p.R)(t,n))},setArrangementLoopSelected:function(t){return e(Object(p.H)(t))}}})(function(e){var t=Object(u.useState)(!1),n=Object(w.a)(t,2),r=n[0],a=n[1],c=Object(u.useState)(void 0),o=Object(w.a)(c,2),s=o[0],i=o[1],d=Object(u.useState)(void 0),f=Object(w.a)(d,2),m=f[0],p=f[1],b=Object(u.useState)(!1),v=Object(w.a)(b,2),h=v[0],g=v[1],E=Object(u.useCallback)(function(t){t.stopPropagation(),a(!0),g(!1);var n=Object($.a)(j(t),e.resolution,void 0,e.xScale)-e.selectionStart;i(n)},[a,g,r,e.selectionStart,e.resolution,i,e.xScale]),O=Object(u.useCallback)(function(t){h||(e.setArrangementLoopSelected(!e.loopSelected),e.loopSelected?C():N(e.selectionStart,e.selectionEnd))},[h,e.loopSelected]),j=Object(u.useCallback)(function(t){return e.arrangementContainer?e.arrangementContainer.scrollLeft+t.pageX:t.pageX},[e.arrangementContainer]),S=Object(u.useCallback)(function(e){a(!1),i(void 0),p(void 0),g(!1)},[a,i,g]),y=Object(u.useCallback)(function(t){if(r){var n=Object($.a)(j(t),e.resolution,void 0,e.xScale)-s;if(n<0)return;var a=n+(e.selectionEnd-e.selectionStart),c=J(n),o=J(a);e.setArrangementSelection(c,o),e.loopSelected&&N(c,o),g(!0)}else if(m===te){var i=J(Object($.a)(j(t),e.resolution,void 0,e.xScale));if(i>=e.selectionEnd)return;e.setArrangementSelection(i,e.selectionEnd),e.loopSelected&&N(i,e.selectionEnd),g(!0)}else if(m===ee){var u=J(Object($.a)(j(t),e.resolution,void 0,e.xScale));if(u<=e.selectionStart)return;e.setArrangementSelection(e.selectionStart,u),g(!0),e.loopSelected&&N(e.selectionStart,u)}},[e.selectionStart,g,e.selectionEnd,r,e.loopSelected,e.xScale,e.resolution,s,m]),C=function(){e.setArrangementRowSelections({})},N=function(t,n){var r={start:t,end:n},a={};for(var c in a[k.g.id]=r,e.sequencerEngine.subSequences)a[e.sequencerEngine.subSequences[c].id]=r;e.setArrangementRowSelections(a)},q=Object(u.useCallback)(function(e,t){p(t)},[p]),x=e.loopSelected?"selection looping":"selection";return l.a.createElement("div",{onMouseUp:S,onMouseMove:y,className:"selection-container"},l.a.createElement("div",null,l.a.createElement("div",{style:ne(e),className:x},l.a.createElement("div",{onMouseDown:function(e){return q(e,te)},className:"triangle-right"}),l.a.createElement("div",{onMouseDown:E,onMouseUp:O,className:"middle"}),l.a.createElement("div",{onMouseDown:function(e){return q(e,ee)},className:"triangle-left"}))))}),ae=n(382),ce=Object(ae.a)([function(e,t){return t.subSequence.id},function(e,t){return e.arrangement.selectedRows}],function(e,t){return t.indexOf(e)>-1});var oe=Object(b.b)(function(e,t){return{mouseX:e.arrangement.mouseX,cursorStep:e.arrangement.cursorStep,resolution:Q.a,isSelected:t.isSelected||ce(e,t),xScale:e.arrangement.xScale}},null)(function(e){var t={left:Object(S.a)(e.cursorStep,e.resolution,e.xScale)};return e.offset&&(t.left+=e.offset),e.isSelected||(t.display="none"),Object(u.useEffect)(function(){e.sequencerEngine&&(e.sequencerEngine.playing||void 0===e.cursorStep||e.sequencerEngine.seekToTrackStep(e.cursorStep))},[e.sequencerEngine,e.cursorStep]),l.a.createElement("div",{className:"flashit mouse-helper",style:t})}),se=n(2),ie=n.n(se),ue=n(13),le=(n(90),function(e){var t=e.showBottom,n=e.bottomHeight,r=e.showTracks,a=e.isBottom,c=e.scrollContainer,o=e.stickyContainer,s=Object(u.useState)({top:0}),i=Object(w.a)(s,2),l=i[0],d=i[1];Object(u.useRef)(0);Object(u.useEffect)(function(){m()},[t,c,o,r,n]),Object(u.useEffect)(function(){if(c)return c.current.addEventListener("mousewheel",f),c.current.addEventListener("scroll",m),function(){c.current&&(c.current.removeEventListener("scroll",m),c.current.removeEventListener("mousewheel",f))}},[o,c,d,a]);var f=Object(u.useCallback)(function(e){return Math.abs(e.deltaX)>Math.abs(e.deltaY)||(e.preventDefault(),c.current.scrollTo(0,c.current.scrollTop+e.deltaY),!1)},[]),m=Object(u.useCallback)(function(){var e=Object(ue.a)(ie.a.mark(function e(t){var n,r,s,i,u;return ie.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(c&&c.current&&o&&o.current){e.next=2;break}return e.abrupt("return");case 2:n=c.current.scrollTop,r=c.current.offsetHeight,s=n+r,i=o.current.offsetHeight,u=a?s-i-10:n,o.current.style.top=u+"px";case 8:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),[d,o,c,a]);return{sticky:l}}),de=n(1138),fe=function(e){var t=e.xScale,n=e.setArrangementXScale,r=e.arrangementContainer,a=e.x,c=e.cursorStep,o=e.resolution;if(!(t<.1||t>5)){var s=Object(S.a)(c,o,t)-a+140;n(t),r.current.scrollTo(s,0)}},me=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=70+70*(1+e.subSequences.length);for(var r in t){if(t[r])n+=85*e.getSubSequence(r).tracks.length}return n},pe=n(1170);function be(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=Object(i.a)(e);if(t){var a=Object(i.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(s.a)(this,n)}}var ve=Object(u.memo)(function(e){var t=Object(u.useCallback)(function(){for(var t=e.totalLength,n=[],r=0;r<t;r++)n.push({step:16*r,duration:32});return n},[e.totalLength]),n=Object(de.a)({ref:e.arrangementContainer,xScale:e.xScale,resolution:e.resolution,events:t(),sequencerEngine:e.sequencerEngine,eventsLength:e.totalLength}).visibleView,r=t().slice(n.start,n.end),a=Object(S.a)(16,e.resolution,e.xScale);return[l.a.createElement("div",{className:"bar-filler",style:{minWidth:n.preWidth}}),r.map(function(t,n){var r=t.step;t.value;return l.a.createElement(he,{xScale:e.xScale,height:e.height,key:r/16,barWidth:a,selectionStart:e.selectionStart,selectionEnd:e.selectionEnd,constantHeight:e.constantHeight,sequencerEngine:e.sequencerEngine,resolution:e.resolution,number:r/16})})]}),he=function(e){Object(o.a)(n,e);var t=be(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(a.a)(n,[{key:"render",value:function(){var e=this.props.number*(8/this.props.resolution),t={minWidth:this.props.barWidth},n={};this.props.xScale<=.8&&(n.opacity=.5),n.height=this.props.height;var r={height:n.height};this.props.xScale<=.5&&this.props.number%4!==0&&(r.opacity=.4);var a="beat";return this.props.xScale<=.5&&(a+=" hidden"),l.a.createElement("div",{style:t,className:"bar"},l.a.createElement(x.a,{condition:this.props.xScale>.6||e%4===0},l.a.createElement("span",{className:"beat-number"},1+e)),l.a.createElement("div",{style:r,className:"first-beat"}),l.a.createElement("div",{style:n,className:a}),l.a.createElement("div",{style:n,className:a}),l.a.createElement("div",{style:n,className:a}))}}]),n}(u.PureComponent),ge=Object(b.b)(function(e,t){var n=t.sequencerEngine.currentSubSequence;return{numSubSequences:t.sequencerEngine.subSequences.length,xScale:e.arrangement.xScale,totalLength:e.arrangement.totalLength,showTracks:e.arrangement.showTracks,bottomHeight:e.arrangement.bottomHeight,showBottom:e.arrangement.patternSelected&&e.arrangement.showTracks[n.id]}},function(e,t){return{setArrangementXScale:function(t){return e(Object(p.S)(t))},setArrangementMouseX:function(t){return e(Object(p.K)(t))},setArrangementCursorStep:function(t){return e(Object(p.G)(t))}}})(function(e){var t=Object(u.useRef)(void 0),n=(le({showTracks:e.showTracks,stickyContainer:t,scrollContainer:e.yScrollContainer,isBottom:e.isBottom,bottomHeight:e.bottomHeight,showBottom:e.showBottom}).sticky,Object(u.useRef)(void 0)),r=Object(u.useRef)(void 0),a=Object(u.useRef)(void 0),c=Object(u.useRef)(void 0),o=Object(u.useRef)(void 0),s=Object(u.useCallback)(function(t){n.current=!0,r.current=t.pageY,a.current=t.pageY,c.current=t.pageX,o.current=setInterval(function(){var t=a.current-r.current,n=e.sequencerEngine.state.arrangement.xScale,o=n+t/50;o=Math.max(.1,o),(o=Math.min(5,o))!==n&&(Object(S.a)(16*e.totalLength,e.resolution,o)<window.innerWidth-140||fe({xScale:o,setArrangementXScale:e.setArrangementXScale,cursorStep:d(),resolution:e.resolution,x:c.current,arrangementContainer:e.arrangementContainer}))},100)},[e.resolution,e.totalLength]),i=function(e){clearInterval(o.current),n.current=!1,r.current=void 0},d=function(){return e.sequencerEngine.state.arrangement.cursorStep},f="time-row";e.constantHeight&&(f+=" bottom");return l.a.createElement("div",{ref:t,style:{},className:f},l.a.createElement("div",{className:"time-top-background"}),l.a.createElement("div",{className:"time-full-background"}),l.a.createElement("div",{onMouseLeave:i,onMouseMove:function(e){n.current&&(a.current=e.pageY)},onMouseDown:s,onMouseUp:i,className:"inner-time-row"},l.a.createElement(oe,{sequencerEngine:e.sequencerEngine,offset:-5,isSelected:!0}),l.a.createElement(ve,e)),e.children)});function ke(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=Object(i.a)(e);if(t){var a=Object(i.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(s.a)(this,n)}}var Ee=function(e){Object(o.a)(n,e);var t=ke(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(a.a)(n,[{key:"numberOfBars",get:function(){return 100}},{key:"render",value:function(){var e=this,t=new Array(this.numberOfBars);t.fill(0);var n=Object(S.a)(1,this.props.resolution,this.props.xScale);return l.a.createElement("div",{className:"time-background"},t.map(function(t,r){return l.a.createElement(Oe,{barWidth:n,selectionStart:e.props.selectionStart,selectionEnd:e.props.selectionEnd,resolution:e.props.resolution,number:r})}))}}]),n}(u.Component),Oe=function(e){Object(o.a)(n,e);var t=ke(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(a.a)(n,[{key:"render",value:function(){this.props.number,this.props.resolution;var e={width:this.props.barWidth};return l.a.createElement("div",{style:e,className:"bar"},l.a.createElement("div",{className:"beat"}),l.a.createElement("div",{className:"beat"}),l.a.createElement("div",{className:"beat"}),l.a.createElement("div",{className:"last-beat"}))}}]),n}(u.Component);Object(b.b)(function(e,t){return{xScale:e.arrangement.xScale}},function(e,t){t.subSequence.id;return{setArrangementXScale:function(t){return e(Object(p.S)(t))}}})(Ee);function je(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=Object(i.a)(e);if(t){var a=Object(i.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(s.a)(this,n)}}var Se=function(e){Object(o.a)(n,e);var t=je(n);function n(e){var a;return Object(r.a)(this,n),(a=t.call(this,e)).unlockedScroll=!1,a.unlockScroll=a.unlockScroll.bind(Object(c.a)(a)),a}return Object(a.a)(n,[{key:"unlockScroll",value:function(){this.unlockedScroll=!0}},{key:"componentDidMount",value:function(){window.addEventListener("mousewheel",this.unlockScroll),this.arrangementContainer=document.getElementsByClassName("arrangement-container")[0]}},{key:"componentWillUnmount",value:function(){window.removeEventListener("mousewheel",this.unlockScroll)}},{key:"getX",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,t=e.sequencerEngine.state.arrangement.cursorStep,n=e.isPlaying?e.step:t;return Object(S.a)(n,e.resolution,e.xScale)}},{key:"componentDidUpdate",value:function(e){e.isPlaying!==this.props.isPlaying&&e.isPlaying&&(this.unlockedScroll=!1);var t=this.arrangementContainer?this.arrangementContainer.scrollLeft:0;if(e.step!==this.props.step){var n=this.getX();if(!this.props.isPlaying&&(n>window.innerWidth-400||n<t));else if(n>window.innerWidth-400||n<t||!this.props.resolution.equals(this.props.resolution)){if(!this.unlockedScroll)return}}return!0}},{key:"render",value:function(){var e={left:this.getX()};return this.props.isPlaying||(e.display="none"),l.a.createElement("div",{style:e,className:"clock-ticker"})}}]),n}(u.Component),ye=Object(b.b)(function(e,t){var n=t.sequencerEngine.getSequenceId(),r=e.sequencer.isPlaying[n]||0;return{step:r?t.sequencerEngine.trackStep:0,cursorStep:e.arrangement.cursorStep,mouseDownX:e.arrangement.mouseDownX,resolution:Q.a,isRecordingMix:e.mix.isRecordingMix,isPlaying:r,xScale:e.arrangement.xScale}},null)(Se);var we=Object(b.b)(function(e,t){var n=e.arrangement.rowSelections[t.id];return{start:void 0===n?0:n.start,end:void 0===n?0:n.end,resolution:Q.a,xScale:e.arrangement.xScale}},null)(function(e){var t={left:Object(S.a)(e.start,e.resolution,e.xScale),width:Object(S.a)(e.end-e.start,e.resolution,e.xScale)};return l.a.createElement("div",{style:t,className:"row-selection"})}),Ce=function(e){var t=e.scrollContainer,n=e.id,r=e.sequencerEngine,a=e.xScale,c=e.resolution,o=e.setArrangementRowSelections,s=Object(u.useRef)(!1),i=function(){return t.current.scrollLeft},l=Object(u.useCallback)(function(e){var t=Object($.a)(e.pageX+i(),c,void 0,a);s.current=!0;var r={};r[n]={start:t,end:t},o(r)},[c,a,n]),d=Object(u.useCallback)(function(e){s.current=!1},[]);return{onRowSelectionMove:Object(u.useCallback)(function(e){var t=Object($.a)(e.pageX+i(),c,void 0,a);if(t-=t%(32/c.resolution),s.current){var u=r.state.arrangement.rowSelections[n];if(void 0!==u){u.end=t;var l={};l[n]=u,o(l)}}},[a,n,c]),onRowSelectionUp:d,onRowSelectionDown:l}},Ne=n(1160),qe=new q.a,xe=Object(u.memo)(function(e){var t=Object(u.useRef)(0),n=(e.pattern.length(e.resolution),{backgroundColor:qe.getColorForTrack(e.track)}),r={width:Object(S.a)(e.duration||64,e.resolution,e.xScale)},a="track-pattern";if(n.width-=1,0===e.event.duration)return"";var c=Object(u.useCallback)(function(n){n.stopPropagation(),e.track.sequencerEngine.selectTrack(e.track.trackNumber);var r=(new Date).getTime();r-t.current<=250&&(e.isSelected?e.setPatternSelected(void 0):(e.setBottomMode(g.d),e.setPatternSelected(e.event))),t.current=r},[e.isSelected,e.event]);e.isSelected&&(a+=" selected",r.backgroundColor=qe.brighten(n.backgroundColor,.1),r.borderColor=n.backgroundColor,r.backgroundColor=qe.brighten(n.backgroundColor,1.2));var o=Object(u.useCallback)(function(t){t.stopPropagation(),e.setCursorStep(void 0)},[]),s=e.event.duration||64;return l.a.createElement("div",{style:r,className:a},l.a.createElement("div",{onMouseDown:o,onClick:c,style:n,className:"track-pattern-header"},e.isFrozen?"Frozen":""),Object(N.b)(e.event,{tracks:[e.track]},s,Object(S.a)(1,e.resolution,e.xScale),!0))}),Te=Object(b.b)(function(e,t){var n=e.arrangement.patternSelected===t.event&&e.mix.selectedTrack===t.track.trackNumber;return{isSelected:n,steps:n?e.tracks.trackSteps[t.track.trackNumber]:void 0}},function(e){return{setPatternSelected:function(t){return e(Object(p.N)(t))},setCursorStep:function(t){return e(Object(p.G)(t))},setBottomMode:function(t){return e(Object(p.E)(t))}}})(xe),Me=Object(b.b)(function(e,t){var n=e.arrangement.mixEvents[t.subSequence.id],r=void 0!==n?n[k.i]:void 0;return{events:r,eventsLength:void 0===r?0:r.length,patternDragging:e.sequencer.patternDragging,resolution:Q.a,automationTypeToShow:e.arrangement.automationTypeToShow[t.subSequence.id],xScale:e.arrangement.xScale,selectedEvents:e.arrangement.selectedEvents,isFrozen:t.track.isFrozen}},function(e){return{}})(function(e){e.wrapperRef;var t=e.events,n=void 0===t?[]:t,r=e.track,a=(e.subSequence,e.xScale),c=e.resolution,o=e.selectedEvents,s=e.isFrozen;if(!o||0===Object.keys(o).length||void 0===o[Object.keys(o)[0]].patternNumber)return[];var i=o[Object.keys(o)[0]];if(!n.includes(i))return[];var u=Object(S.a)(i.step,c,a);return l.a.createElement("div",{className:"track-patterns"},l.a.createElement("div",{className:"pattern-filler",style:{width:u}}),[i].map(function(e){return l.a.createElement(Te,{isFrozen:s,key:e.id,pattern:r.patterns[e.value%r.patterns.length],xScale:a,resolution:c,duration:e.duration,track:r,event:e})}))}),Pe=n(1436),Re=(n(104),Object(b.b)(function(e,t){var n=e.mix.selectedTrack===t.track.trackNumber,r=t.track.sequencerEngine.currentSubSequence;return{xScale:e.arrangement.xScale,isSelectedTrack:n&&t.track.subSequence===r,resolution:Q.a,patternSelected:e.arrangement.patternSelected,bottomMode:e.arrangement.bottomMode}},function(e){return{setArrangementRowSelections:function(t){return e(Object(p.P)(t))},setAutomationPointsSelected:function(t,n){return e(Object(p.Y)(t,n))},setPatternSelected:function(t){return e(Object(p.N)(t))},setSelectedEvents:function(t){return e(Object(p.Ze)(t))},setCursorStep:function(t){return e(Object(p.G)(t))}}})(function(e){var t=e.setPatternSelected,n=e.width,r=e.xScale,a=e.style,c=e.track,o=e.wrapperRef,s=e.isSelectedTrack,i=e.subSequence,d=e.yScrollContainer,f=e.resolution,m=e.setArrangementRowSelections,p=e.setAutomationPointsSelected,b=e.setSelectedEvents,v=e.setCursorStep,h=e.bottomMode,g=e.patternSelected,O=Object(u.useRef)(void 0),j=Object(u.useRef)(0),S=Object(u.useCallback)(function(){c.sequencerEngine.selectTrack(c.trackNumber);var e=(new Date).getTime();if(e-j.current<=200){var n=c.sequencerEngine.state.arrangement.cursorStep,r=c.subSequence.mix.getEvent(k.i,n),a={};a[r.id]=r,b(a),t(r),v(r.step)}j.current=e},[c]),y=Ce({id:c.id,sequencerEngine:c.sequencerEngine,xScale:r,resolution:f,setArrangementRowSelections:m,scrollContainer:o}),w=y.onRowSelectionUp,C=y.onRowSelectionDown,N=y.onRowSelectionMove;!function(e){var t=e.verticalScroll,n=e.ref,r=e.isSelected;e.patternSelected,e.bottomMode,Object(u.useEffect)(function(){if(r&&t&&n&&t.current&&n.current){var e=t.current.scrollTop,a=e+t.current.offsetHeight,c=n.current.offsetTop,o=c+n.current.offsetHeight;(c<e||o>a)&&t.current.scrollTo(0,c-150)}},[r,n,t])}({verticalScroll:d,ref:O,isSelected:s,patternSelected:g,bottomMode:h});var q=Object(u.useCallback)(function(e){w();var t=c.sequencerEngine,n=t.state.arrangement.rowSelections[c.id];if(Object(E.g)(t,c.id)&&n){var r=Object(E.d)(t,n,c.id);p(c.id,r)}},[c]);return l.a.createElement("div",{ref:O,onMouseDown:C,onMouseMove:N,onMouseUp:q,onClick:S,style:a,className:s?"selected track-time-line":"track-time-line"},l.a.createElement(we,{id:c.id}),s?l.a.createElement(oe,{subSequence:c.subSequence,isSelected:!0}):"",l.a.createElement(Me,{wrapperRef:o,track:c,subSequence:i}),l.a.createElement(Pe.a,{xScale:r/2.88,wrapperRef:o,left:140,track:c,isMix:!0,height:62,width:n}))})),De=Object(b.b)(function(e,t){return{show:e.arrangement.showTracks[t.subSequence.id],numTracks:t.subSequence.tracks&&t.subSequence.tracks.length}},function(e){return{}})(function(e){var t=e.yScrollContainer,n=e.wrapperRef,r=e.subSequence,a=e.style,c=e.show,o=e.width;return c?l.a.createElement("div",{className:"sub-sequence-tracks"},r.tracks.map(function(e){return l.a.createElement(Re,{yScrollContainer:t,subSequence:r,width:o,wrapperRef:n,style:a,track:e})})):""});function Ae(){return document.getElementsByClassName("arrangement-container")[0].scrollLeft}var Ie=new q.a;var ze=Object(b.b)(function(e,t){var n=e.tracks.trackPatternSteps[t.track.subSequence.id]||{},r=e.arrangement.selectedEvents,a=void 0!==r&&r[k.a]===t.pattern,c=e.arrangement.patternStartSteps[t.track.subSequence.id];return{isSelected:a,resolution:Q.a,steps:n[t.patternNumber],xScale:e.arrangement.xScale,startStep:c?c[t.pattern.id]:0}},function(e){return{setSelectedEvents:function(t){return e(Object(p.Ze)(t))},setArrangementMode:function(t){return e(Object(p.E)(t))},setPatternDragging:function(t,n){return e(Object(p.L)(t,n))},setPatternResizing:function(t,n){return e(Object(p.M)(t,n))},setArrangementMouseX:function(t){return e(Object(p.K)(t))},setArrangementCursorStep:function(t){return e(Object(p.G)(t))}}})(function(e){var t=e.pattern.length(e.resolution),n=void 0===e.steps?[]:e.steps.map(function(e,t){return{stepNumber:t,on:e}}).filter(function(e){return e.on}),r=Object(u.useCallback)(function(t){t.stopPropagation();var n=Object(S.a)(e.startStep,e.resolution,e.xScale),r=t.pageX+Ae()-n-Q.b;e.setPatternDragging(e.pattern,r);var a={};a[k.a]=e.pattern,e.setSelectedEvents(a),e.track.switchToPattern(e.patternNumber),e.track.updateSteps(!0),e.sequencerEngine.state.arrangement.bottomMode!==g.d&&e.isSelected&&e.setArrangementMode(g.d),e.setArrangementMouseX(void 0),e.setArrangementCursorStep(void 0)},[e.setArrangementMode,e.startStep,e.patternNumber,e.setPatternDragging,e.isSelected,e.pattern,e.xScale]),a=Object(u.useCallback)(function(t){t.stopPropagation(),e.setPatternDragging(void 0),e.setPatternResizing(void 0)},[e.setPatternDragging],e.setPatternResizing),c=Object(u.useCallback)(function(t,n){t.stopPropagation(),e.setPatternResizing(e.pattern,n)},[e.setPatternResizing,e.pattern]),o={backgroundColor:Ie.getColorForHash(e.track.presetName||e.track.getName())};o.width=Object(S.a)(e.pattern.length(),e.resolution,e.xScale);var s={width:o.width,left:Object(S.a)(e.startStep,e.resolution,e.xScale)};return s.border="1px solid "+Ie.brighten(o.backgroundColor,.3),e.isSelected&&(s.border="1px solid "+o.backgroundColor,s.backgroundColor=Ie.brighten(o.backgroundColor,.3),s.opacity=.7),o.width-=1,l.a.createElement("div",{onMouseUp:function(){return e.setPatternDragging(void 0)},style:s,className:"mini-piano-roll-wrapper"},l.a.createElement("div",{onMouseDown:r,onMouseUp:a,style:o,className:"mini-piano-roll-header"},l.a.createElement("div",{onMouseDown:function(e){return c(e,Q.c)},className:"left-edge"}),l.a.createElement("div",{className:"middle"}),l.a.createElement("div",{onMouseDown:function(e){return c(e,Q.d)},className:"right-edge"})),l.a.createElement("div",{className:"mini-piano-roll steps-map"},n.map(function(n,r){return l.a.createElement(Ne.a,{pattern:e.pattern,width:t*Object(S.a)(2,e.resolution,e.xScale),height:60,key:"mini-step-"+r+"-"+n.stepNumber,trackColor:"#00ff14",length:t,track:e.track,stepNumber:n.stepNumber,resolution:e.resolution,stepData:n.step})})))});new q.a;var Le=Object(b.b)(function(e,t){return{numPatterns:t.track.patterns.length}},function(e){return{setArrangementMode:function(t){return e(Object(p.E)(t))}}})(function(e){var t=Object(u.useCallback)(function(t){if(e.sequencerEngine.state.arrangement.patternDragging){t.stopPropagation();var n=e.sequencerEngine.state.arrangement.patternDragging,r=n.patternDragging,a=n.offsetX,c=t.pageX+Ae()-a,o=Object($.a)(c,e.resolution,void 0,e.xScale);Object(O.a)(void 0,Object(j.j)(e.track,r,o))}},[e.xScale]);return l.a.createElement("div",{onMouseMove:t},e.track.patterns.filter(function(e,t){return t>=1}).map(function(t,n){return l.a.createElement(ze,{key:"pattern-"+t.id,sequencerEngine:e.sequencerEngine,pattern:t,track:e.track,patternNumber:n+1})}))}),He=42,Fe=42;function Be(e,t){return(arguments.length>2&&void 0!==arguments[2]?arguments[2]:1)*(t.resolution/8)*100*e/32}function Ue(e){return He-e*Fe}function Ge(e){return Math.max(0,Math.min(1,(He-e)/Fe))}var Ve=n(57),We=Object(u.memo)(function(e){var t=e.onMouseDown,n=e.highlightPoint,r=e.unhighlightPoint,a=e.onMouseUp,c=e.step,o=e.resolution,s=e.xScale,i=e.volume,u=e.isHighlighted;return l.a.createElement("circle",{onMouseDown:t,onMouseOver:n,onMouseLeave:r,onMouseUp:a,cx:Be(c,o,s),cy:Ue(i),r:2,fill:u?"blue":"black",stroke:u?"blue":"red",strokeWidth:2})}),Ze=Object(b.b)(function(e,t){return{step:t.event.step,volume:t.event.volume,resolution:Q.a,xScale:e.arrangement.xScale}},null)(We);function Xe(e){return void 0===e.guidePoint?l.a.createElement(Ve.g,{x:0,y:0,width:0,height:0}):l.a.createElement("circle",{onMouseLeave:e.onMouseLeave,onMouseDown:e.onClick,cx:Be(e.guidePoint.step,e.resolution,e.xScale),cy:Ue(e.guidePoint.value),r:2,fill:"blue",stroke:"blue",strokeWidth:2})}var Ke=n(646);var Ye=Object(b.b)(function(e,t){var n=e.arrangement.mixEvents[t.subSequence.id],r=void 0!==n?n[t.eventType]:void 0,a=e.mix.subSequenceFades[t.subSequence.id];return{events:r,volume:e.mix.isPlayingMix?void 0:void 0===a?1:a,resolution:Q.a,xScale:e.arrangement.xScale}},function(e){return{setArrangementMouseX:function(t){return e(Object(p.K)(t))},clearSelection:function(){return e(Object(p.P)({}))},setArrangementCursorStep:function(t){return e(Object(p.G)(t))}}})(function(e){var t=Object(u.useRef)(void 0),n=Object(u.useState)(void 0),r=Object(w.a)(n,2),a=r[0],c=r[1],o=Object(u.useState)(void 0),s=Object(w.a)(o,2),i=s[0],d=s[1],f=Object(u.useState)(void 0),m=Object(w.a)(f,2),p=m[0],b=m[1],v=Object(u.useState)(!1),h=Object(w.a)(v,2),g=h[0],k=h[1],E=function(e){var n=t.current.getBoundingClientRect();return{x:e.clientX-n.left,y:e.clientY-n.top}},O=function(t){t.stopPropagation();var n=e.sequencerEngine.store.getState(),r=E(t),a=r.x,o=r.y,s=Object($.a)(a,e.resolution,0,n.arrangement.xScale);if(!isNaN(s)){var i=Ge(o),u=new Ke.a(e.subSequence,i);u.step=s,e.subSequence.mix.insertEvent(u,1),c(void 0),d(u),k(!0),e.clearSelection()}},j=Object(u.useCallback)(function(t){if(void 0!==i){var n=E(t),r=n.x,a=n.y,o=e.sequencerEngine.store.getState(),s=Object($.a)(r,e.resolution,0,o.arrangement.xScale),u=Ge(a);i.step=s,i.value=u,e.subSequence.volumeAutomationMix.updateRedux(e.subSequence,e.sequencerEngine),c(void 0),k(!0),e.setArrangementMouseX(void 0),e.setArrangementCursorStep(void 0),e.clearSelection()}},[i,e.events,e.resolution]),S=Object(u.useCallback)(function(t){var n=E(t),r=n.x,a=n.y,o=e.sequencerEngine.store.getState(),s=Object($.a)(r,e.resolution,0,o.arrangement.xScale),i=Ge(a);c({step:s,value:i})},[c,e.resolution]),y=Object(u.useCallback)(function(e){b(e),c(void 0)},[c,b]),C=Object(u.useCallback)(function(e){d(void 0),b(void 0),c(void 0),k(!1)},[d,b,c]),N=Object(u.useCallback)(function(t){g||e.subSequence.volumeAutomationMix.deleteEvent(t),C()},[g]),q=e.events||[],x=Be(e.subSequence.mix.length+1e3,e.resolution,e.xScale),T=function(){var t=e.events||[],n=[];for(var r in(0===t.length||t[0].step>1)&&(n=[{x:0,y:Ue(function(){var t=e.sequencerEngine.store.getState().mix.subSequenceFades[e.subSequence.id];return void 0===t?1:t}())}]),t)n.push({x:Be(t[r].step,e.resolution,e.xScale),y:Ue(t[r].volume)});var a=n[n.length-1];return n.push({x:a.x+1e3,y:a.y}),n}();return l.a.createElement("div",{className:"linear-automation-container"},l.a.createElement("svg",{ref:t,width:x,height:He,onMouseLeave:C,onMouseMove:j,onMouseUp:C},l.a.createElement("path",{onMouseMove:function(e){return S(e)},onMouseOver:function(e){return S(e)},onMouseDown:function(e){return O(e)},alpha:0,fill:"transparent",opacity:0,strokeWidth:16,d:"M 0 0 L "+T.slice(1).map(function(e){return e.x+" "+e.y}).join(" "),stroke:"black"}),l.a.createElement("path",{onMouseMove:function(e){return S(e)},onMouseOver:function(e){return S(e)},onMouseDown:function(e){return O(e)},closed:!1,fill:"transparent",strokeWidth:2,d:"M 0 0 L "+T.slice(1).map(function(e){return e.x+" "+e.y}).join(" "),stroke:"red"}),l.a.createElement(Xe,{resolution:e.resolution,onMouseLeave:function(){return c(void 0)},xScale:e.xScale,guidePoint:a,onClick:O}),q.map(function(e,t){return l.a.createElement(Ze,{key:"automation-"+e.id,highlightPoint:function(){return y(e)},unhighlightPoint:function(){return b(void 0)},isHighlighted:e===p||e===i,onMouseDown:function(){return d(e)},onMouseUp:function(){return N(e)},event:e})})))}),_e=n(1431),$e=n(2707),Je=(n(778),new q.a),Qe=Object(b.b)(function(e,t){var n=e.mix.selectedTrack===t.track.trackNumber,r=t.track.sequencerEngine.currentSubSequence,a=t.track,c=a;return a&&a.tracks&&a.tracks[0]&&(c=a.tracks[0].track),{id:c.presetName?c.presetName:void 0!==c.sample&&void 0!==c.sample.getId()?c.sample.getId():c.getName(),isSelectedTrack:n&&t.track.subSequence===r,solod:t.track.getSolo(),muted:t.track.muted,enabled:t.track.isEnabled}},function(e){return{setPatternSelected:function(t){return e(Object(p.N)(t))},setBottomMode:function(t){return e(Object(p.E)(t))}}})(function(e){e.setPatternSelected;var t=e.track,n=e.isSelectedTrack,r=e.enabled,a=e.muted,c=e.solod,o=e.setBottomMode,s=Object(u.useRef)(0),i=t.presetName||t.getName();!t.presetName&&t.sample&&(i=t.sample.name);var d=Je.getColorForTrack(t),f={};n&&(f.backgroundColor=d);var m=Object(u.useCallback)(function(e){e.stopPropagation(),t.sequencerEngine.selectTrack(t.trackNumber);var n=(new Date).getTime();n-s.current<200&&o(g.a),s.current=n},[t]),p=Object(u.useCallback)(function(){t.mute(!a)},[a,t]),b=Object(u.useCallback)(function(){t.solo(!c)},[c,t]),v=Object(u.useCallback)(function(){t.setIsEnabled(!r)},[r,t]);return l.a.createElement("div",{onClick:m,style:{borderRightColor:d},className:"track-side-panel"},l.a.createElement("div",{style:f,className:"track-name"},i.trim()),l.a.createElement($e.a,{isMix:!0,sequencerEngine:t.sequencerEngine,track:t}),l.a.createElement("div",{className:"track-controls"},l.a.createElement(_e.a,{track:t,sequencerEngine:t.sequencerEngine}),l.a.createElement("div",{onClick:p,className:a?"muted mute-btn":"mute-btn"},t.trackNumber+1),l.a.createElement("div",{onClick:b,className:c?"solod solo-btn":"solo-btn"},"s"),l.a.createElement("div",{onClick:v,className:r?"enabled enable-btn":"enable-btn"})))}),et=Object(b.b)(function(e,t){return{}},function(e){return{setShowAutomation:function(t){return e(Object(p.Pf)(t))}}})(function(e){var t=e.style,n=e.subSequence;e.setShowAutomation;return t={backgroundColor:t.backgroundColor},l.a.createElement("div",{style:t,className:"tracks-side-panel"},n.tracks.map(function(e){return l.a.createElement(Qe,{key:e.id,track:e})}))}),tt=Object(b.b)(function(e,t){return{show:e.arrangement.showTracks[t.subSequence.id],patternSelected:e.arrangement.patternSelected}},function(e,t){return{setShowArrangementTracks:function(n){return e(Object(p.Of)(t.subSequence.id,n))},setPatternSelected:function(t){return e(Object(p.N)(t))}}})(function(e){var t=e.patternSelected,n=e.setPatternSelected,r=e.subSequence,a=e.show,c=e.setShowArrangementTracks,o=Object(u.useCallback)(function(){a&&t&&t.subSequence===r&&n(void 0),c(!a)},[t,a,r]);return l.a.createElement("div",{onClick:o,className:"tracks-show-button"},a?l.a.createElement("div",{className:"arrow-down"}):l.a.createElement("div",{className:"arrow-right"}))}),nt=(n(299),n(41)),rt=n.n(nt);var at=[{value:k.i,label:"Pattern"},{value:k.l,label:"Volume"}];function ct(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k.i;return at.find(function(t){return t.value===e})}Object(b.b)(function(e,t){return{automationTypeToShow:e.arrangement.automationTypeToShow[t.subSequence.id]}},null)(function(e){return l.a.createElement(rt.a,{className:"automation-type-dropdown",controlClassName:"automation-type-control-dropdown",arrowClassName:"automation-type-arrow-dropdown",options:at,onChange:function(t){return n=t.value,void e.subSequence.setAutomationToShow(n);var n},value:ct(e.automationTypeToShow),placeholder:"Rate"})}),n(109),n(786);var ot=new q.a,st=["A","B","C","D","E","F","G","H"],it=18;var ut=Object(b.b)(function(e,t){var n=e.mix.subSequenceFades[t.subSequence.id],r=(e.tracks.trackIsEnabled[t.subSequence.id]||{})[0];return{isSelected:ce(e,t),volume:void 0===n?1:n,muted:e.mix.subSequenceMuted[t.subSequence.id],isEnabled:void 0!==r&&r,showTracks:e.arrangement.showTracks[t.subSequence.id],numTracks:t.subSequence.tracks&&t.subSequence.tracks.length}},function(e,t){t.subSequence.id;return{setSelectedRows:function(t){return e(Object(p.Q)(t))},setArrangementMode:function(t){return e(Object(p.E)(t))},clearSelectedArrangementEvents:function(){return e(Object(p.Ze)(void 0))}}})(function(e){var t=function(e){e.stopPropagation()},n="pattern-info sub-sequence";e.isSelected&&(n+=" selected");var r=1===e.subSequence.tracks.length?e.subSequence.tracks[0].presetName||e.subSequence.tracks[0].getName():st[e.i];void 0!==r&&r.length>=it&&(r=r.substring(0,it));var a=e.subSequence.isTrack?"sub-sequence-name is-track":"sub-sequence-name",c={};if(e.subSequence.isTrack&&e.isSelected){var o=e.subSequence.tracks[0],s=o.presetName||o.getName();c={backgroundColor:ot.getColorForHash(s)}}var i="string"===typeof e.subSequence.id?e.subSequence.id.slice(0,10):"s"+e.subSequence.id,u=ot.saturate(ot.getColorForHash(i),3),d={borderRightColor:u,backgroundColor:u};return l.a.createElement("div",null,l.a.createElement("div",{onMouseDown:function(e){return e.stopPropagation()},onMouseUp:function(e){return e.stopPropagation()},onClick:function(t){t.stopPropagation(),e.setSelectedRows([e.subSequence.id]),e.sequencerEngine.switchToSubSequence(e.subSequence.id,!1)},onMouseMove:t,style:d,onDragStart:t,className:n},l.a.createElement("div",{style:c,className:a},r),l.a.createElement("div",{className:"panel-rest"},l.a.createElement("div",{className:"track-controls-container"},l.a.createElement(x.a,{condition:e.subSequence.isTrack},l.a.createElement("div",{onClick:function(){e.subSequence.tracks[0].toggleEnabled()},className:e.isEnabled?"midi-recording-button on":"midi-recording-button off"},l.a.createElement("span",{className:"black plain-dot"}))),l.a.createElement(tt,{subSequence:e.subSequence})))),e.showTracks?l.a.createElement(et,{style:d,subSequence:e.subSequence}):"")}),lt=(n(1426),n(262)),dt=n(213),ft=32;function mt(e){return e.getState().arrangement.cursorStep}var pt=Object(b.b)(function(e,t){var n=e.arrangement.mixEvents[t.subSequence.id],r=void 0!==n?n[k.i]:void 0;return{eventsLength:void 0===r?0:r.length,patternDragging:e.sequencer.patternDragging,resolution:Q.a,automationTypeToShow:e.arrangement.automationTypeToShow[t.subSequence.id],isSelected:ce(e,t),xScale:e.arrangement.xScale}},function(e,t){t.subSequence.id;return{dragPattern:function(t){return e(Object(p.i)(t))},setSelectedRows:function(t){return e(Object(p.Q)(t))},setPatternSelected:function(t){return e(Object(p.N)(t))},setSelectedEvents:function(t){return e(Object(p.Ze)(t))},setArrangementRowSelections:function(t){return e(Object(p.P)(t))},setArrangementMouseX:function(t){return e(Object(p.K)(t))},setArrangementCursorStep:function(t){return e(Object(p.G)(t))}}})(function(e){var t=function(){return e.sequencerEngine.store.getState()},n=function(){var n=t().arrangement.mixEvents[e.subSequence.id];return void 0!==n&&n[k.i]||[]},r=Object(de.a)({ref:e.wrapperRef,resolution:e.resolution,xScale:e.xScale,events:n(),sequencerEngine:e.sequencerEngine,eventsLength:e.eventsLength}).visibleView,a=Ce({id:e.subSequence.id,sequencerEngine:e.sequencerEngine,xScale:e.xScale,resolution:e.resolution,setArrangementRowSelections:e.setArrangementRowSelections,scrollContainer:e.wrapperRef}),c=a.onRowSelectionUp,o=a.onRowSelectionDown,s=a.onRowSelectionMove,i=Object(u.useRef)(void 0),d=Object(u.useRef)(!1),f=Object(u.useRef)(0),m=Object(u.useRef)(void 0),b=Object(u.useRef)(void 0),v=function(){return e.wrapperRef.current.scrollLeft},h=e.subSequence.mix,g=Object(u.useCallback)(function(t,n){if(t.stopPropagation(),0!==n.patternNumber){var r=Object($.a)(t.pageX+v(),e.resolution,void 0,e.xScale);i.current=n,f.current=r-n.step}},[e.resolution,e.xScale]),E=function(e,t){d.current=e,b.current=t},S=Object(u.useCallback)(function(t){d.current=void 0,b.current=void 0,e.onMouseUp()},[e.onMouseUp]),w=Object(u.useCallback)(function(t){var n=Object($.a)(t.pageX+v(),e.resolution,void 0,e.xScale);n-=n%(32/e.resolution.resolution);var r=Math.floor(n);if(d.current){if(d.current.step,d.current.duration,b.current===Q.d){var a=h.getNextEvent(d.current);if(a){var c=h.getNextEvent(a);c?r<c.step&&d.current.step<r&&(a.step=r,h.updateAllTypeRedux()):d.current.step<r&&(a.step=r,h.updateAllTypeRedux())}}else{var o=h.getPreviousEvent(d.current),i=h.getNextEvent(d.current);(void 0===o||r>o.step)&&(void 0===i||r<i.step)&&(d.current.step=r,h.updateAllTypeRedux())}e.isSelected||R()}else if(M()){var u=M(),l=u.pattern,f=u.direction;Object(O.a)(Object(j.n)(l,f,r))}else s(t,e.resolution,e.xScale)},[e.resolution,e.xScale,e.isSelected]),N=function(){d.current=void 0},q=Object(u.useCallback)(function(t){var n=Object($.a)(t.pageX+v(),e.resolution,void 0,e.xScale);if(n=J(n,e.resolution),void 0!==e.patternDragging){var r=new dt.a(e.patternDragging);n-=n%(32/e.resolution.resolution),r.step=n,h.insertEvent(r,32),e.dragPattern(void 0)}else if(void 0!==i.current){var a=i.current;h.deleteEvent(a),n-=f.current,n-=n%(32/e.resolution.resolution),a.step=n,h.insertEvent(a,a.duration),i.current=void 0}},[e.resolution,e.patternDragging]),x=function(e){return void 0!==T()&&void 0!==T()[e.id]},T=function(){return t().arrangement.selectedEvents},M=function(){return t().arrangement.patternResizing},R=function(){e.setSelectedRows([e.subSequence.id]),e.sequencerEngine.switchToSubSequence(e.subSequence.id,!1)},D=Object(u.useCallback)(function(e){o(e),R()},[e.resolution,e.xScale]),A="";if(e.subSequence.isTrack)A=l.a.createElement(Le,{track:e.subSequence.tracks[0],xScale:e.xScale,resolution:e.resolution,sequencerEngine:e.sequencerEngine,subSequence:e.subSequence});else{var I=n()||[],z=!1;e.automationTypeToShow===k.l&&(z=!0);var L=[];void 0!==r.start&&(L=I.slice(r.start,r.end+1)),A=[l.a.createElement("div",{className:"pattern-filler",style:{width:r.preWidth}})].concat(Object(C.a)(L.map(function(r,a){return l.a.createElement(P,{i:a,smallPattern:z,key:r.id,type:k.i,resolution:e.resolution,subSequence:e.subSequence,isLast:a===n.length-1,isFirst:0===a,onDragStart:function(e){return g(e,r)},onSelect:function(){return function(n){console.log("on select");var r=Object(y.a)({},T())||{};if(e.setArrangementCursorStep(n.step),e.setArrangementMouseX(void 0),x(n))return delete r[n.id],e.setSelectedEvents(T),void e.setArrangementRowSelections({});e.setArrangementRowSelections({}),t().arrangement.patternSelected&&e.setPatternSelected(n),(r={})[n.id]=n,e.setSelectedEvents(r)}(r)},onRightMouseDown:function(e){return E(r,Q.d)},onMouseUp:S,xScale:e.xScale,onMouseLeave:N,onLeftMouseDown:function(e){return E(r,Q.c)},sequencerEngine:e.sequencerEngine,event:r,arrangementContainer:e.wrapperRef})})))}var H="";void 0!==e.automationTypeToShow&&e.automationTypeToShow!==k.i&&(H=l.a.createElement(Ye,{eventType:e.automationTypeToShow,sequencerEngine:e.sequencerEngine,subSequence:e.subSequence}));var F="pattern-row";e.isSelected&&(F+=" selected");e.automationTypeToShow===k.l&&(F+=" automation");var B={width:e.width};return F+=" "+e.subSequence.id,l.a.createElement("div",{className:"sub-sequence-arrangement-container"},l.a.createElement("div",{style:B,onClick:R,onDrop:q,onDragOver:function(e){e.preventDefault()},onMouseDown:D,onMouseUp:function(){var t=(new Date).getTime();m.current&&t-m.current<=200&&function(e,t){t.getState().sequencer.displayResolution;var n=mt(t),r=new dt.a(0);r.step=n,e.dispatch(Object(j.h)(r,ft)),t.dispatch(Object(p.Ze)([r])),e.sequencerEngine.dispatch(Object(p.Tg)(Object(pe.a)(e.sequencerEngine)))}(h,e.sequencerEngine.store),m.current=t,c()},onMouseMove:w,onMouseLeave:N,className:F},l.a.createElement(we,{id:e.subSequence.id}),l.a.createElement(oe,{subSequence:e.subSequence}),l.a.createElement("div",{className:"patterns-arrangement-container"},A),H),l.a.createElement(De,{width:e.width,yScrollContainer:e.yScrollContainer,wrapperRef:e.wrapperRef,style:B,subSequence:e.subSequence}))}),bt=n(75);function vt(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return ht(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ht(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var c,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,c=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw c}}}}function ht(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var gt=Object(b.b)(function(e,t){return{}},function(e){return{}})(function(e){var t=Object(u.useRef)(void 0),n=le({scrollContainer:e.scrollContainer,stickyContainer:t}).sticky,r=n||{},a=Object(u.useState)(!1),c=Object(w.a)(a,2),o=c[0],s=c[1];return l.a.createElement("div",{style:r,ref:t,className:"side-panel-toolbar"},l.a.createElement(bt.c,{className:"view-dropdown",show:o?"true":"false",isOpen:o,toggle:function(){return s(!o)}},l.a.createElement(bt.f,{size:"sm",caret:!0,color:"primary"},l.a.createElement("img",{className:"actions-btn",src:"/automation-icon-disabled.png"})),l.a.createElement(bt.e,null,l.a.createElement(bt.d,{onClick:function(){e.sequencerEngine.mix.clear(),e.sequencerEngine.subSequences.forEach(function(e){return e.mix.clear()});var t,n=vt(e.sequencerEngine.subSequences);try{for(n.s();!(t=n.n()).done;){var r,a=vt(t.value.tracks);try{for(a.s();!(r=a.n()).done;)r.value.getAllParameters().filter(function(e){return e.mixAutomation&&e.mixAutomation.automations.length>0}).forEach(function(e){return e.mixAutomation.deleteAutomations()})}catch(c){a.e(c)}finally{a.f()}}}catch(c){n.e(c)}finally{n.f()}},size:"sm"},"New Mix"))))});var kt=Object(b.b)(function(e,t){var n=t.sequencerEngine.engineId;return{isRollSelected:ce(e,t),subSequences:e.sequencer.subSequences[n]}},null)(function(e){var t="pattern-info";return e.isRollSelected&&(t+=" selected"),l.a.createElement("div",{className:"side-panel-container"},l.a.createElement(gt,{scrollContainer:e.scrollContainer,sequencerEngine:e.sequencerEngine}),e.sequencerEngine.subSequences.filter(function(e){return!e.isTrack}).map(function(t,n){return l.a.createElement(ut,{i:n,sequencerEngine:e.sequencerEngine,subSequence:t})}),e.sequencerEngine.subSequences.filter(function(e){return e.isTrack}).map(function(t,n){return l.a.createElement(ut,{i:n,sequencerEngine:e.sequencerEngine,subSequence:t})}),l.a.createElement("div",{className:t},l.a.createElement("div",{className:"roll sub-sequence-name"},"ROLL")))});var Et=Object(b.b)(function(e){var t=e.arrangement.selection;return{selectionStart:void 0!==t?t.start:void 0,selectionEnd:void 0!==t?t.end:void 0,loopSelected:e.arrangement.loopSelected,resolution:Q.a,xScale:e.arrangement.xScale}},function(e){return{setArrangementRowSelections:function(t){return e(Object(p.P)(t))},setArrangementSelection:function(t,n){return e(Object(p.R)(t,n))},setArrangementLoopSelected:function(t){return e(Object(p.H)(t))}}})(function(e){if(void 0===e.selectionStart)return"";var t={left:Object(S.a)(e.selectionStart,e.resolution,e.xScale),width:Object(S.a)(e.selectionEnd-e.selectionStart,e.resolution,e.xScale)},n="absolute-selection";return e.loopSelected&&(n+=" looping"),l.a.createElement("div",{className:n,style:t})}),Ot=n(20),jt=Object(b.b)(function(e,t){var n=e.arrangement.mixEvents[k.g.id],r=n?n[k.k]:[];return{isSelected:ce(e,t),numEvents:void 0===r?0:r.length,resolution:Q.a,xScale:e.arrangement.xScale}},function(e,t){return{setSelectedRows:function(t){return e(Object(p.Q)(t))},setSelectedEvents:function(t){return e(Object(p.Ze)(t))},setArrangementRowSelections:function(t){return e(Object(p.P)(t))},setArrangementMode:function(t){return e(Object(p.E)(t))}}})(function(e){var t=function(){return e.sequencerEngine.store.getState()},n=function(){var e=t().arrangement.mixEvents[k.g.id];return e&&e[k.k]||[]},r=Object(de.a)({ref:e.wrapperRef,resolution:e.resolution,xScale:e.xScale,events:n(),sequencerEngine:e.sequencerEngine,widthExtension:250}).visibleView,a=Object(u.useRef)(!1),c=Object(u.useRef)(void 0),o=Object(u.useRef)(void 0),s=Object(u.useRef)(void 0),i=Object(u.useRef)(void 0),d=Object(u.useRef)(void 0),f=Object(u.useRef)(void 0),m=function(e){return void 0!==b()&&void 0!==b()[e.id]},b=function(){return t().arrangement.selectedEvents},v=function(){return t().arrangement.xScale},h=e.sequencerEngine.mix,g=function(t){if(void 0===t){var n=(new Date).getTime();void 0!==c.current&&n-c.current<250&&function(e,t){var n=t.getState(),r=n.sequencer.displayResolution,a=mt(t),c=new lt.a(!0,r);c.step=a;var o=64,s=n.arrangement.xScale;s<.8?o*=2:s<.4&&(o*=4),e.dispatch(Object(j.i)(c,o/r.resolution)),t.dispatch(Object(p.Ze)([c.initialSubEvent]))}(h,e.sequencerEngine.store),c.current=n}o.current=void 0,s.current=void 0,a.current=!1,i.current=void 0,d.current=void 0},E=function(){return e.wrapperRef.current.scrollLeft},O=Object(u.useCallback)(function(t){var n=t.pageX+E();return Object($.a)(n,e.resolution,void 0,v())},[e.resolution]),S=Object(u.useCallback)(function(n){if(o.current||i.current||a.current){var r=n.pageX+E(),c=Object($.a)(r,e.resolution,void 0,v()),u=c;if(c-=c%(32/e.resolution.resolution),i.current){var l=J(u-d.current,64/e.resolution.resolution);h.dispatch(Object(j.k)(i.current,l))}else if(o.current){var m=c-(s.current.step+s.current.duration);"RIGHT"===f.current?C(c,o.current,s.current)&&N(c,o.current,s.current)?h.resizeSequenceRoll(o.current,s.current,"RIGHT",Math.floor(m)):(o.current=void 0,s.current=void 0):y(c,o.current)&&w(c,o.current,s.current)?h.resizeSequenceRoll(o.current,s.current,"LEFT",Math.floor(c)):(o.current=void 0,s.current=void 0)}else if(a.current){var p=t().arrangement.rowSelections[k.g.id];if(void 0!==p){p.end=c;var b={};b[k.g.id]=p,e.setArrangementRowSelections(b)}}}},[]),y=function(e,t){var n=h.getPreviousEvent(t),r=h.getNextEvent(t);return(void 0===n||e>n.step)&&(void 0===r||e<r.step)},w=function(e,t,n){var r=t.getPreviousSubEvent(n),a=t.getNextSubEvent(n);return(void 0===r||e>r.step)&&(void 0===a||e<a.step)},C=function(e,t,n){var r=h.getNextEvent(t);if(h.getPreviousEvent(t),r){var a=h.getNextEvent(r);if(void 0===a||e<a.step)return!0}return!1},N=function(e,t,n){if(e<n.step)return!1;var r=t.getNextSubEvent(n);if(t.getPreviousSubEvent(n),void 0===r)return!0;var a=t.getNextSubEvent(r);return void 0===a||e<a.step},q=function(e,t,n){o.current=e,s.current=t,f.current=n},x=(t(),n()),T=[];void 0!==r.start&&(T=x.slice(r.start,r.end+1));var M="pattern-row rolls-row";e.isSelected&&(M+=" selected");var P={width:e.width};return l.a.createElement("div",{style:P,onClick:function(){e.setSelectedRows([k.g.id]),e.setArrangementMode(void 0)},onMouseMove:S,onMouseDown:function(t){var n=O(t);a.current=!0;var r={};r[k.g.id]={start:n,end:n},e.setArrangementRowSelections(r)},onMouseUp:function(e){return g(void 0)},onMouseLeave:g,className:M},l.a.createElement(we,{id:k.g.id}),l.a.createElement(oe,{subSequence:k.g}),l.a.createElement("div",{className:"pattern-filler",style:{width:r.preWidth}}),T.filter(function(e){return void 0!==e}).map(function(t,n){var r;return l.a.createElement(R,(r={key:t.id,type:k.k,mixSession:e.mixSession,resolution:e.resolution,isLast:n===x.length-1,isFirst:0===n,onDragStart:function(e){},onSelect:function(t,n,r){return function(t,n,r){if(m(n))e.setSelectedEvents(void 0);else{e.setArrangementRowSelections({});var a={};a[n.id]=n,e.setSelectedEvents(a)}d.current=O(r)-t.step,i.current=t}(t,n,r)},onMouseUp:function(e){return g(t)},onRightMouseUp:function(e,t){return g(e)},onRightMouseDown:function(e,t){return q(e,t,"RIGHT")},onLeftMouseUp:function(e,t){return g(e)},onLeftMouseDown:function(e,t){return q(e,t,"LEFT")}},Object(Ot.a)(r,"mixSession",e.mixSession),Object(Ot.a)(r,"sequencerEngine",e.sequencerEngine),Object(Ot.a)(r,"event",t),r))}))}),St=Object(u.memo)(function(e){var t=e.showTracks,n=e.onMouseDown,r=e.onMouseUp,a=e.onMouseMove,c=e.sequencerEngine,o=e.resolution,s=e.arrangementContainer,i=e.mixSession,d=e.totalLength,f=e.xScale,m=e.setArrangementXScale,p=e.yScrollContainer,b=Object(u.useRef)(void 0),v=Object(u.useRef)(0),h=Object(u.useRef)(0),g={height:me(c,t)},E=Object(S.a)(16*d,o,f);Object(u.useEffect)(function(){return b.current.addEventListener("mousewheel",O,{passive:!1}),function(){return b.current?b.current.removeEventListener("mousewheel",O):0}},[f,o,d]);var O=Object(u.useCallback)(function(e){if(e.ctrlKey){e.preventDefault(),e.stopPropagation();var t=f-.01*e.deltaY;if(Object(S.a)(16*d,o,t)<window.innerWidth-140)return;fe({x:v.current,setArrangementXScale:m,arrangementContainer:b,cursorStep:h.current,resolution:o,xScale:t})}else{var n=Object(S.a)(1,o,f),r=(e.clientX-140+b.current.scrollLeft)/n;v.current=e.clientX,h.current=r}},[f,o,d]);return l.a.createElement("div",{ref:b,style:g,className:"arrangement-container",onMouseDown:function(e){return n(e)},onMouseLeave:function(){return r()},onMouseMove:function(e){var t=Object(S.a)(1,o,f),n=(e.clientX-140+b.current.scrollLeft)/t;v.current=e.clientX,h.current=n,a(e)},onMouseUp:function(e){return r(e)}},l.a.createElement("div",{className:"viewport-wrapper"},l.a.createElement(ye,{sequencerEngine:c}),l.a.createElement(ge,{height:g.height,arrangementContainer:b,yScrollContainer:p,sequencerEngine:c,selectionStart:void 0,selectionEnd:void 0,resolution:o},l.a.createElement(re,{arrangementContainer:s,sequencerEngine:c})),l.a.createElement(Et,{arrangementContainer:s,sequencerEngine:c}),l.a.createElement("div",{className:"sub-sequence-container"},c.subSequences.filter(function(e){return!e.isTrack}).map(function(e,t){return l.a.createElement(pt,{key:"sub-arrangement-"+e.id+"-"+t,i:t,wrapperRef:b,width:E,sequencerEngine:c,yScrollContainer:p,onMouseUp:function(e){return r(e)},subSequence:e})}),c.subSequences.filter(function(e){return e.isTrack}).map(function(e,t){return l.a.createElement(pt,{key:"sub-arrangement-"+e.id,wrapperRef:b,width:E,yScrollContainer:p,sequencerEngine:c,onMouseUp:function(e){return r(e)},subSequence:e})})),l.a.createElement(jt,{width:E,mixSession:i,wrapperRef:b,subSequence:k.g,sequencerEngine:c}),l.a.createElement(ge,{sequencerEngine:c,constantHeight:!0,yScrollContainer:p,arrangementContainer:b,isBottom:!0,selectionStart:void 0,selectionEnd:void 0,resolution:o}),l.a.createElement("div",{className:"arrangement-rest"})))}),yt=Object(b.b)(function(e,t){return{showTracks:e.arrangement.showTracks,totalLength:e.arrangement.totalLength,xScale:e.arrangement.xScale,numTracks:t.sequencerEngine.tracks&&t.sequencerEngine.tracks.length}},function(e,t){return{setArrangementXScale:function(t){return e(Object(p.S)(t))}}})(St);n(79),n(2825);function wt(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=Object(i.a)(e);if(t){var a=Object(i.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(s.a)(this,n)}}var Ct=function(e){Object(o.a)(n,e);var t=wt(n);function n(e){var a;return Object(r.a)(this,n),(a=t.call(this,e)).state={arrangementContainer:void 0},window.brightness=120,a.idToEvent={},a.onKeyDown=a.onKeyDown.bind(Object(c.a)(a)),a.savedArrangementContainer=void 0,a.copyRing={},a.ref=l.a.createRef(void 0),a}return Object(a.a)(n,[{key:"componentDidMount",value:function(){window.addEventListener("keydown",this.onKeyDown),this.props.sequencerEngine.resolution=Q.a,this.updateTrackSteps()}},{key:"updateTrackSteps",value:function(){this.props.sequencerEngine.subSequences.filter(function(e){return e.isTrack}).forEach(function(e){return e.tracks[0].updateSteps()})}},{key:"componentWillUnmount",value:function(){this.props.sequencerEngine.resolution=Q.a,window.removeEventListener("keydown",this.onKeyDown)}},{key:"arrangementContainer",get:function(){return this.savedArrangementContainer?this.savedArrangementContainer:(this.savedArrangementContainer=document.getElementsByClassName("arrangement-container")[0],this.setState({arrangementContainer:this.savedArrangementContainer}),this.savedArrangementContainer)}},{key:"onKeyDown",value:function(e,t){K(e,this.props.sequencerEngine),"c"===e.key&&(e.metaKey||e.ctrlKey)&&this.copy(),"v"===e.key&&(e.metaKey||e.ctrlKey)&&this.paste(),"d"===e.key&&(e.metaKey||e.ctrlKey)&&(e.stopPropagation(),this.duplicate()),"e"===e.key&&(e.ctrlKey||e.metaKey)&&(e.preventDefault(),e.stopPropagation(),this.splitPattern())}},{key:"onLeftMouseDown",value:function(e,t){this.resizing=e,this.resizingSubEvent=e,this.direction="LEFT"}},{key:"onRightMouseDown",value:function(e,t){this.resizing=e,this.resizingSubEvent=e,this.direction="RIGHT"}},{key:"onMouseLeave",value:function(){this.props.setArrangementMouseX(void 0),this.props.setArrangementCursorStep(void 0),this.resizing=void 0}},{key:"xScale",get:function(){return this.getState().xScale}},{key:"onMouseDown",value:function(e){var t=void 0===e||this.resizing?void 0:e.pageX+this.arrangementContainer.scrollLeft;this.props.setMouseDownX(e.pageX);var n=J(Object($.a)(t,this.props.resolution,void 0,this.props.xScale),16/this.props.resolution*4,!1);void 0!==n&&(this.props.setArrangementCursorStep(n),this.props.setArrangementMouseX(t))}},{key:"onMouseUp",value:function(e){this.selecting&&this.updateSelectedPatterns();var t=void 0===e||this.resizing?void 0:e.pageX+this.arrangementContainer.scrollLeft,n=J(Object($.a)(t,this.props.resolution,void 0,this.props.xScale),16/this.props.resolution*4,!1);if(void 0!==(t=Q.b+Object(S.a)(n,this.props.resolution,this.xScale))&&n===this.cursorStep&&e.pageY>38&&e.pageY<65){this.props.sequencerEngine.playing;var r=this.getQuantizedStepFromPosition(t);this.props.sequencerEngine.seekToTrackStep(r)}this.resizing=void 0,this.resizingSubEvent=void 0,this.selecting=!1,this.props.setArrangementPatternDragging(void 0)}},{key:"getQuantizedStepFromPosition",value:function(e){var t=Object($.a)(e,this.props.resolution,this.props.xScale);return t-=t%(32/this.props.resolution.resolution)}},{key:"onMouseMove",value:function(e){if(this.resizing){e.pageX,this.arrangementContainer.scrollLeft;var t=Object($.a)(e.pageX+this.arrangementContainer.scrollLeft,this.props.resolution);t-=t%(32/this.props.resolution.resolution);var n=this.resizingSubEvent?t-(this.resizingSubEvent.step+this.resizingSubEvent.duration):t-(this.resizing.step+this.resizing.duration);this.resizing.getType()===k.i?"RIGHT"===this.direction?this.mixSession.resizeEvent(this.resizing,Math.floor(n)):(this.resizing.step=Math.floor(t),this.mixSession.updateAllTypeRedux()):this.resizing.getType()===k.k&&("RIGHT"===this.direction?this.mixSession.resizeSequenceRoll(this.resizing,this.resizingSubEvent,"RIGHT",Math.floor(n)):this.mixSession.resizeSequenceRoll(this.resizing,this.resizingSubEvent,"LEFT",Math.floor(t)))}}},{key:"updateAllTypeRedux",value:function(){this.mixSession.updateAllTypeRedux()}},{key:"getState",value:function(){return this.props.sequencerEngine.store.getState().arrangement}},{key:"getSelectionStart",value:function(){return void 0===this.getState().selection?void 0:this.getState().selection.start}},{key:"getSelectionEnd",value:function(){return void 0===this.getState().selection?void 0:this.getState().selection.end}},{key:"cursorStep",get:function(){return this.getState().cursorStep}},{key:"updateSelectedPatterns",value:function(){var e=this.getSelectionStart(),t=this.getSelectionEnd(),n=[];for(var r in this.props.patternSwitchEvents){var a=this.props.patternSwitchEvents[r];a.step>=e&&a.step+a.duration<=t&&n.push(a)}}},{key:"isSelectedEvent",value:function(e,t){return!1}},{key:"copy",value:function(){this.copyRing=Object(E.a)(this.getState())}},{key:"duplicate",value:function(){Object(E.c)(this.props.sequencerEngine)}},{key:"paste",value:function(){Object(E.f)(this.props.sequencerEngine,this.copyRing)}},{key:"splitPattern",value:function(){var e=this.cursorStep;for(var t in this.selectedRows){var n=this.selectedRows[t],r=this.props.sequencerEngine.getSubSequence(n);if(r.isTrack){var a=r.tracks[0].patterns.find(function(t){return t.overlapsStep(e)});if(void 0!==a)return Object(O.a)(void 0,Object(j.o)(a.track,a,e)),void this.onMouseLeave()}}}},{key:"getMix",value:function(e){return e===k.g.id?this.props.sequencerEngine.mix:this.props.sequencerEngine.getSubSequence(e).mix}},{key:"getSelectedEvents",value:function(){return this.getState().selectedEvents}},{key:"getRowSelections",value:function(){return this.getState().rowSelections}},{key:"selectedRows",get:function(){return this.getState().selectedRows}},{key:"mixSession",get:function(){return this.props.sequencerEngine.mix}},{key:"mix",get:function(){return this.props.sequencerEngine.mixSession.mix}},{key:"bottomBarWidth",get:function(){return 225}},{key:"onMouseMoveResize",value:function(e){}},{key:"onGlobalMouseUp",value:function(){this.props.setArrangementBottomResizing(!1),this.props.setArrangementPatternResizing(void 0)}},{key:"render",value:function(){var e=this,t={};return this.props.showBottom&&(t.height=window.innerHeight-this.props.bottomHeight-17),l.a.createElement("div",{onMouseUp:function(t){return e.onGlobalMouseUp()},onMouseMove:function(t){return e.onMouseMoveResize(t)},className:"arrangement-view"},l.a.createElement(h,{sequencerEngine:this.props.sequencerEngine}),l.a.createElement("div",{className:"arrangement-column"},l.a.createElement("div",{ref:this.ref,style:t,className:"full-arrangement-container"},l.a.createElement(kt,{scrollContainer:this.ref,updateAllTypeRedux:function(){return e.updateAllTypeRedux()},subSequence:k.g,sequencerEngine:this.props.sequencerEngine}),l.a.createElement(yt,{yScrollContainer:this.ref,onMouseDown:function(t){return e.onMouseDown(t)},onMouseLeave:function(){return e.onMouseLeave()},onMouseMove:function(t){return e.onMouseMove(t)},mixSession:this.mixSession,arrangementContainer:this.state.arrangementContainer,resolution:this.props.resolution,onDragStart:function(t,n){return e.onDragPatternEvent(t,n)},onSelect:function(e,t){return[]},onMouseUp:function(t,n){return e.onMouseUp(t,n)},onRightMouseDown:function(t,n){return e.onRightMouseDown(t,n)},onLeftMouseDown:function(t,n){return e.onLeftMouseDown(t,n)},sequencerEngine:this.props.sequencerEngine}))),l.a.createElement(z,{sequencerEngine:this.props.sequencerEngine}))}}]),n}(u.Component);t.a=Object(b.b)(function(e,t){var n=t.sequencerEngine.engineId,r=t.sequencerEngine.currentSubSequence;return{resolution:Q.a,xScale:e.arrangement.xScale,subSequences:e.sequencer.subSequences[n]||[],bottomHeight:e.arrangement.bottomHeight,showBottom:e.arrangement.patternSelected&&e.arrangement.showTracks[r.id]||e.arrangement.bottomMode===g.a}},function(e){return{playMix:function(){return e(Object(p.Lc)(!0))},setArrangementMouseX:function(t){return e(Object(p.K)(t))},setMouseDownX:function(t){return e(Object(p.J)(t))},setSelectedRows:function(t){return e(Object(p.Q)(t))},clearSelectedArrangementEvents:function(){return e(Object(p.Ze)(void 0))},setArrangementBottomResizing:function(t){return e(Object(p.F)(t))},setArrangementBottomHeight:function(t){return e(Object(p.D)(t))},setArrangementCursorStep:function(t){return e(Object(p.G)(t))},setArrangementPatternDragging:function(t){return e(Object(p.L)(t))},setArrangementPatternResizing:function(t){return e(Object(p.M)(t))}}})(Ct)},2770:function(e,t,n){"use strict";var r=n(0),a=n.n(r),c=n(12),o=(Object(c.b)(function(e,t){var n=t.sequencerEngine;if(!n)return{};var r=n.getSelectedTrack();return{track:r,color:r&&(r.presetName||r.sample&&r.sample.getId())}},function(e){return{}})(function(e){var t=e.sequencerEngine,n=e.setSelectedZObject;if(!t)return"";var r=t.getSelectedTrack();return r?a.a.createElement("div",{onClick:function(){return n(r)},style:{backgroundColor:r.color},className:"track-shortcut"}):""}),n(2555)),s=(n(2639),n(6)),i=n(341),u=n(14),l=n.n(u),d=n(9),f=(n(2807),n(31)),m=new f.a,p=Object(c.b)(function(e,t){return{recentlyAddedSounds:e.samples.recentlyAddedSounds}},function(e){return{setSampleDragging:function(t){return e(Object(d.Pe)(t))}}})(function(e){var t=e.recentlyAddedSounds,n=e.setSampleDragging,c=Object(r.useRef)(new i.a(l.a.Master.context)),o=Object(r.useState)(void 0),u=Object(s.a)(o,2),d=u[0],f=u[1],p=Object(r.useCallback)(function(e){c.current.setBuffer(e.audioBuffer),c.current.playSound(0),f(t.indexOf(e))},[t,f]);return 0===t.length?"":a.a.createElement("div",{className:"recently-added-sounds"},t.map(function(e,t){return a.a.createElement("div",{draggable:!0,onDragOver:function(e){return e.preventDefault()},onDragStart:function(){return n(e)},onClick:function(t){return p(e)},className:t===d?"recent-sound selected":"recent-sound"},a.a.createElement("div",{style:{backgroundColor:m.getColorForHash(e.ipfsHash)},className:"recent-thumb"}),a.a.createElement("div",{className:"recent-name"},e.name))}))}),b=(n(1108),n(10)),v=n(43),h=n(33),g=(Object(c.b)(function(e,t){return{}},function(e){return{setPluginsLoaded:function(t){return e(Object(d.ue)(t))},setShowPlugins:function(t){return e(Object(d.fg)(t))}}})(function(e){var t=e.setShowPlugins,n=e.sequencerEngine,c=e.plugin,o=e.setPluginsLoaded,i=Object(r.useState)(""),u=Object(s.a)(i,2),l=u[0],d=u[1],f=Object(r.useState)(void 0),m=Object(s.a)(f,2),p=m[0],g=m[1],k=Object(r.useState)(""),E=Object(s.a)(k,2),O=E[0],j=E[1];Object(r.useEffect)(function(){v.a.getJson(c.versions[0].pluginMetadataURI).then(function(e){d(e.description),g(e.image)}),h.a.users.getUserName(c.creator).then(j)},[j,c,d,g]);var S=Object(r.useCallback)(function(){v.a.getJson(c.versions[0].pluginContentHash).then(function(e){var r=n.currentSubSequence.createZObject(5,5,"subpatch");r.hide(),r.loadPresetJson(e,!1,!0,!0),r.plugin=c;var a=n.state.plugins.pluginsLoaded||[];o([].concat(Object(b.a)(a),[r])),t(!1)})},[c]);return a.a.createElement("div",{className:"plugin-option"},a.a.createElement("div",{className:"plugin-name"},p&&a.a.createElement("img",{src:p}),a.a.createElement("div",{className:"name-and-author"},a.a.createElement("div",{className:"name-text"},c.name),a.a.createElement("div",{className:"creator-text"},O))),a.a.createElement("div",{className:"plugin-description"},l),a.a.createElement("div",{onClick:S,className:"load-button pushable"},"Load Plugin"))}),n(266)),k=Object(c.b)(function(e,t){return{}},function(e){return{}})(function(e){var t=e.hide,n=e.sequencerEngine;return a.a.createElement("div",{className:"plugins-list"},Object.keys(g.d).map(function(e){return a.a.createElement("div",{onClick:function(){n.addRNBOTrack(e),t()},className:"plugin-option cursor-pointer"},e)}))}),E=(n(2808),Object(c.b)(function(e,t){return{}},function(e){return{setShowPlugins:function(t){return e(Object(d.fg)(t))}}})(function(e){var t=e.sequencerEngine,n=e.setShowPlugins;return a.a.createElement("div",{className:"plugins-viewer"},a.a.createElement("div",{className:"plugins-header"},a.a.createElement("div",{onClick:function(){return n(!1)},className:"back-arrow-container pushable"},a.a.createElement("div",{className:"arrow-left"})),a.a.createElement("img",{className:"plugins-icon",src:"/plugin-icon.svg"}),a.a.createElement("div",{className:"header-text"},"Plugins")),a.a.createElement(k,{hide:function(){return n(!1)},sequencerEngine:t}))})),O=n(1528),j=n(60),S=n(2709),y=function(e){return Math.round(100*e)/100},w=Object(c.b)(function(e,t){var n=t.track.sequencerEngine.isRecording;return{isRecording:n,lastPlayedStepData:t.track.lastPlayedStepData,trackStep:n?t.track.sequencerEngine.trackStep:0}},function(e){return{setParametersToRecord:function(t){return e(Object(d.ae)(t))},setStepParameterSelected:function(t){return e(Object(d.Jg)(t))}}})(function(e){var t=e.setStepParameterSelected,n=e.lastPlayedStepData,c=e.isRecording,o=e.trackStep,i=e.track,u=e.parameters,l=e.rounded,d=void 0!==l&&l,f=e.setParametersToRecord,m=e.isSelected,p=Object(r.useRef)(void 0),b=Object(r.useState)(!1),v=Object(s.a)(b,2),h=v[0],g=v[1],k=Object(r.useCallback)(function(e){return e?null===e.get()?i.trackData[e.name.toLowerCase()+"Parameter"].get():e.get():0},[i]),E=Object(r.useState)(k(u[0],i)),O=Object(s.a)(E,2),j=O[0],S=O[1],w=Object(r.useState)(!1),C=Object(s.a)(w,2),N=C[0],q=C[1];Object(r.useEffect)(function(){return window.addEventListener("mouseup",T),window.addEventListener("mousemove",x),function(){window.removeEventListener("mouseup",T),window.removeEventListener("mousemove",x)}},[u,q,N,S,m]),Object(r.useEffect)(function(){S(k(u[0]),i)},[k(u[0],i),S,i]);var x=Object(r.useCallback)(function(e){if(N){var t=N.y,n=N.number,r=t-e.pageY,a=Math.pow(r/t,2);r<0&&(a*=-1);var c=u[0],o=c.max,s=c.min;"Duration"===c.name?(o=2,s=.01):"Velocity"===c.name&&(s=.001);var l=a*(o-(s+.001))+n;l=Math.max(s,Math.min(o,l)),d&&(l=Math.round(l)),l!==k(c,i)&&(u.forEach(function(e){return e.set(l)}),S(l)),f(u)}},[u,c,q,N,S,i]),T=Object(r.useCallback)(function(e){N&&q(!1),f([])},[q,N]),M="track-parameter";return m&&(M+=" selected"),a.a.createElement("div",{onMouseOver:function(){return g(!0)},onMouseLeave:function(){return g(!1)},className:M},(h||N)&&c&&a.a.createElement("div",{className:"recording-indicator"},a.a.createElement("div",{style:{width:o%i.pattern.length()*110/i.pattern.length()+"px"},className:N?"recording-progress editing":"recording-progress"})),a.a.createElement("div",{ref:p,onMouseDown:function(e){q({number:k(u[0],i),y:e.pageY}),t(u[0].name)},className:"param-name"},u[0]?u[0].name:""),a.a.createElement("div",{onMouseDown:function(e){q({number:k(u[0],i),y:e.pageY}),t(u[0].name)},className:"param-value"},h&&c&&!N&&n&&u[0]?y(n[u[0].name.toLowerCase()+"Parameter"].get()):y(j)))}),C=n(762),N=new f.a,q=["transpose","duration","velocity","attack","release"],x=Object(c.b)(function(e,t){return{isFrozen:t.track.isFrozen,selectedSteps:e.keyboard.selectedPianoRollSteps,stepParameterSelected:e.cirklon.stepParameterSelected}},function(e){return{}})(function(e){var t=e.track,n=e.isFrozen,r=e.selectedSteps,c=e.stepParameterSelected;if(t.isAudioTrack)return"";if(n)return a.a.createElement("div",null,a.a.createElement(C.a,{track:t,trackColor:N.getColorForTrack(t),isTrackFrozen:!0}),t.getTrackType()===j.e&&a.a.createElement("div",{className:"freeze-history"},a.a.createElement(O.a,{track:t})));var o=r?Array.from(new Set(r.map(function(e){return e&&e.group}).filter(function(e){return e}))):[];return a.a.createElement("div",{className:"track-parameters"},q.map(function(e){return a.a.createElement(w,{isSelected:c&&e===c.toLowerCase(),rounded:"transpose"===e,track:t,parameters:r&&r.length>0?r.filter(function(e){return e}).map(function(t){return t[e+"Parameter"]}):t&&t.trackData?[t.trackData[e+"Parameter"]]:[]})}),r&&r.length>0&&a.a.createElement("div",{className:"steps-indicator"},a.a.createElement("div",{className:"selected-type"},"Steps"),a.a.createElement("div",{className:"selected-length"},r.length)),o.map(function(e){return a.a.createElement(S.a,{track:t,key:e.id,sequencerEngine:t.sequencerEngine,group:e})}))}),T=n(2642),M=n(146),P=n(2716),R=n(1147),D=(n(85),n(44)),A=n(298),I=n(177),z=n(256),L=new f.a,H=Object(c.b)(function(e,t){return{id:t.track.id,name:t.track.presetName||t.track.name,isFrozen:t.track.isFrozen}},function(e){return{setContextualHelp:function(t,n){return e(Object(d.wb)(t,n))},setSelectedZObject:function(t){return e(Object(d.Cf)(t))}}})(function(e){var t=e.track,n=e.isFrozen,r=e.setContextualHelp,c=e.setSelectedZObject;n||L.getColorForTrack(t);var o="track-information";return t.sample||(o+=" no-sampler-track"),t.getTrackType()===j.a&&(o+=" audio-track"),a.a.createElement("div",{className:o},a.a.createElement("div",{className:"track-information-inner"},a.a.createElement("div",{className:"thumb-and-browse"},a.a.createElement("div",{onMouseOver:function(){return r(D.k)},onMouseLeave:function(){return r(void 0)},onClick:function(e){e.stopPropagation(),t.auditionPrevious()},className:"arrow-up"}),t.instrument?a.a.createElement(P.a,{track:t}):a.a.createElement(z.a,{onClickThumbnail:function(){return c(t)},hasInner:!0,track:t}),a.a.createElement("div",{onMouseOver:function(){return r(D.j)},onMouseLeave:function(){return r(void 0)},onClick:function(e){e.stopPropagation(),t.auditionNext()},className:"arrow-down"})),a.a.createElement("div",{className:"name-and-tags"},a.a.createElement("div",{className:t.sample&&t.sample.tags?"track-name":"track-name instrument-name"},Object(A.a)(t.name||t.presetName||t.getName())),a.a.createElement("div",{className:"track-tags"},t.sample&&t.sample.tags&&t.sample.tags.map(function(e){return a.a.createElement("div",{className:"track-tag"},e)}))),t.sample?a.a.createElement(R.a,{type:M.f,contentHash:t.sample.getId()}):t.preset&&a.a.createElement(R.a,{type:M.b,contentHash:t.preset.contentHash})),a.a.createElement(T.a,{isFull:!0,track:t}))}),F=n(609),B=n(2627),U=Object(c.b)(function(e,t){return{}},function(e){return{}})(function(e){var t=e.track,n=e.containerRef,c=Object(r.useRef)();return"MIDI"!==t.getTrackType()&&!t.instrument||t.isFrozen?a.a.createElement("div",{className:"sampler-wrapper"},a.a.createElement("div",{ref:c,className:"waveform-inner"},a.a.createElement(B.a.DetailsView,{width:window.innerWidth-480-60,backgroundColor:"transparent",div:c,small:!1,showParameters:!1,hideKeyboard:!0,alreadyLoaded:!0,onGoBack:function(){return[]},keyboardEngine:t.sequencerEngine.keyboardEngine,midiEngine:t.sequencerEngine.midi,trackNumber:t.trackNumber,resolution:t.sequencerEngine.resolution,height:180,sequencerEngine:t.sequencerEngine,bpm:t.sequencerEngine.bpm,track:t}))):a.a.createElement("div",{className:"instrument-wrapper"},Object(F.a)(t,n))}),G=n(106),V=n(516),W=(n(2810),Object(c.b)(function(e,t){t.zobject.presentationMode;return{locked:t.zobject.locked,name:t.zobject.name}},function(e){return{}})(function(e){var t=e.zobject,n=(e.coords,e.locked),r="comment"===t.name?"/zcomment-light.svg":"/zobject-light.svg";return t.plugin&&(r="/plugin-icon.svg"),a.a.createElement("div",{className:"zobject-information object-information"},a.a.createElement("img",{className:"zobject-information-icon",src:r}),a.a.createElement("div",{className:"object-name"},t.plugin?t.plugin.name:t.name),a.a.createElement(V.a,{patternLocked:n,toggleLock:function(){return t.lock=!n}}))})),Z=n(91),X=Object(c.b)(function(e,t){var n=t.zmessage.presentationMode;return{type:t.zmessage.type,coords:n&&e.windows.presentationWindowPositions[t.zmessage.id]||e.windows.windowPositions[t.zmessage.id]}},function(e){return{}})(function(e){e.zmessage;var t=e.type,n=e.coords,r="",c="";switch(t){case Z.a:r="/zbutton-light.svg",c="Bang";break;case Z.c:r="/znumber-light.svg",c="Number";break;default:r="/zmessage-light.svg",c="Message"}return a.a.createElement("div",{className:"object-information zmessage-information"},a.a.createElement("img",{src:r}),a.a.createElement("div",{className:"object-name"},c,n&&a.a.createElement("div",{className:"coords"},n.x,", ",n.y)))}),K=Object(c.b)(function(e,t){return{}},function(e){return{}})(function(e){return a.a.createElement("div",{className:"pad-information"},a.a.createElement("div",{className:"pad-title"},a.a.createElement("img",{src:"/zpad-light.svg"}),"Pad"))}),Y=n(713),_=n(80),$=Object(c.b)(function(e,t){return{_locked:t.effect.locked}},function(e){return{}})(function(e){var t=e.effect,n=e._locked,c=Object(Y.a)(t),o=Object(r.useState)(n),i=Object(s.a)(o,2),u=i[0],l=i[1],d=Object(r.useCallback)(function(){t.lock=!u,l(!u)},[t,u,l]);return Object(r.useEffect)(function(){l(n)},[n,l]),a.a.createElement("div",{className:"effect-information object-information"},a.a.createElement("div",{className:"effect-thumbnail"},t.getEffectType()===_.a?"Audio FX":t.getEffectType()===_.c?"MIDI FX":"Live FX"),a.a.createElement("div",{className:"effect-name"},t.name),a.a.createElement("img",{onClick:d,src:u?"/closed-padlock.png":"/opened-padlock.png",className:"effect-lock"}),c&&a.a.createElement(z.a,{hasInner:!0,track:c}))}),J=Object(c.b)(function(e,t){return{}},function(e){return{}})(function(e){var t=e.object;return t&&t.getObjectType?(t.pluginViewerFor&&(t=t.pluginViewerFor),t.getObjectType()===G.c?a.a.createElement(H,{track:t}):t.getObjectType()===G.b?a.a.createElement(K,{pad:t}):t.getObjectType()===G.e?a.a.createElement(W,{zobject:t}):t.getObjectType()===G.d?a.a.createElement(X,{zmessage:t}):t.getObjectType()===G.a?a.a.createElement($,{effect:t}):a.a.createElement("div",null)):""}),Q=n(2603),ee=n(2597),te=(n(2811),Object(c.b)(function(e,t){return{}},function(e){return{}})(function(e){return a.a.createElement("div",{className:"sidebar-sends"},a.a.createElement("div",{className:"label"},"Sends"),a.a.createElement(ee.a,{sequencerEngine:e.sequencerEngine}),a.a.createElement("div",{className:"label"},"Midi Effects"),a.a.createElement("div",{className:"sends midi track"},a.a.createElement("div",{className:"track-container"},a.a.createElement("div",{className:"sends-container"},a.a.createElement("div",{className:"send"},a.a.createElement(Q.a,{track:e.sequencerEngine.currentSubSequence,sequencerEngine:e.sequencerEngine}))))))})),ne=n(2689),re=n(8),ae=n(16),ce=(n(2812),Object(c.b)(function(e,t){return{}},function(e){return{}})(function(e){var t=e.zobject,n=Object(ae.a)(t.name);if(!n.operationDocs)return"";var r=n.operationDocs();return a.a.createElement("div",{className:"zobject-operations"},a.a.createElement("div",{className:"label"},"Operations"),r.map(function(e){return a.a.createElement("div",{className:"operation-type"},a.a.createElement("div",{className:"name-and-description"},a.a.createElement("div",{className:"operation-name"},e),a.a.createElement("div",{className:"operation-description"},n.operationDocs(e).description)),a.a.createElement("div",{className:"operation-args"},Object.keys(n.operationDocs(e).params).map(function(t){return a.a.createElement("div",{className:"operation-param"},a.a.createElement("div",{className:"dot"}),a.a.createElement("div",{className:"param-name"},t),a.a.createElement("div",{className:"param-description"},n.operationDocs(e).params[t]))})))}))})),oe=(n(2813),Object(c.b)(function(e,t){return{}},function(e){return{}})(function(e){var t=e.zobject,n=Object(r.useState)(t.args[0]),c=Object(s.a)(n,2),o=c[0],i=c[1];Object(r.useEffect)(function(){i(t.args[0])},[t]);var u=Object(r.useCallback)(function(e){var n=e.target.value.replaceAll(" ","-");t.text="subpatch "+n,i(n)},[t,i]);return a.a.createElement("div",{className:"subpatch-tools"},a.a.createElement("div",{className:"label"},"Name"),a.a.createElement("input",{value:o,onChange:u,type:"text",className:"subpatch-name-input"}))})),se=(Object(c.b)(function(e,t){return{}},function(e){return{}})(function(e){var t=e.actions,n=e.zobject;return a.a.createElement("div",{className:"zobject-actions"},a.a.createElement("div",{className:"label"},"Actions"),t.map(function(e){return a.a.createElement("div",{onClick:function(t){return n.executeAction(e)},className:"action-option"},a.a.createElement("div",{className:"pushable dot"}),e)}))}),n(63)),ie=n(383),ue=n(316),le=function(e){var t=e.zobject,n=e.setShowingColor,c=e.showingColor,o=e.i,i=e.focus,u=e.setFocus,l=e.skey,d=e.value,f=e.setStyle,m=e.style,p=Object(r.useRef)(void 0),b=Object(r.useState)(-2*Math.abs(parseFloat(d))),v=Object(s.a)(b,2),h=v[0],g=v[1],k=Object(r.useState)(4*Math.abs(parseFloat(d))),E=Object(s.a)(k,2),O=E[0],j=E[1];Object(r.useEffect)(function(){o===i&&setTimeout(function(){p.current.focus()},10)},[o,i]);var S=Object(r.useCallback)(function(e){var t=e.target.value,n=Object(re.a)({},m);delete n[l],n[t]=d,n[""]="",f(n)},[m,f,l,d]),y=Array.isArray(d),w=Object(r.useCallback)(function(e,n){var r=e.target.value;Object(se.a)(r)&&(r=parseFloat(r));var a=Object(re.a)({},m);a[l]=y?r.split(","):r,f(Object(re.a)({},a)),t.setAttribute(l,y?r.split(","):r),0===r&&(r=1),n&&(g(-2*Math.abs(parseFloat(r))),j(2*Math.abs(parseFloat(r))))},[m,f,l,j,g,O,h,y]);if(""===l)return"";var C="";return C="boolean"===typeof d?a.a.createElement("input",{className:"boolean-checkbox",type:"checkbox",onChange:function(e){return w({target:{value:!d}})},checked:d}):Object(se.a)(d)?a.a.createElement("div",{className:"number-and-input"},a.a.createElement(ie.a,{hideNumber:!0,isAttribute:!0,znumber:{round:d>8,attributes:{},max:O,min:h},onChange:function(e){return w({target:{value:e}})},number:d}),a.a.createElement("input",{className:"style-value-input",value:d,type:"text",onChange:function(e){return w(e,!0)}})):a.a.createElement("input",{className:"style-value-input",value:Array.isArray(d)?d.join(","):d,type:"text",onChange:w}),a.a.createElement("div",{className:"styler"},"Include in Presentation"===l?a.a.createElement("div",{className:"icon-wrapper"},"Include in ",a.a.createElement("img",{className:"presentation-icon",src:"/presentation-mode.svg"})):a.a.createElement("input",{readOnly:!0,onFocus:function(){return u(o)},ref:p,value:l,type:"text",onChange:S}),a.a.createElement("div",{className:"style-divider"},":"),l&&l.includes("color")||d&&d.startsWith&&d.startsWith("#")?a.a.createElement("div",{onClick:function(){return n(!c)},style:{backgroundColor:d},className:"zcolor-btn"},c&&a.a.createElement("div",{style:{cursor:"unset"},onClick:function(e){return e.stopPropagation()}},a.a.createElement(ue.a,{onChange:function(e){return w({target:{value:e.hex}})},color:{hex:d}}))):"",C)},de=Object(c.b)(function(e,t){return{}},function(e){return{setObjectStyling:function(t,n){return e(Object(d.Gd)(t,n))}}})(function(e){var t=e.zobject,n=e.setObjectStyling,c=Object(r.useState)(t.attributes||{"":""}),o=Object(s.a)(c,2),i=o[0],u=o[1],l=Object(r.useRef)(t),d=Object(r.useState)(void 0),f=Object(s.a)(d,2),m=f[0],p=f[1];Object(r.useEffect)(function(){l.current=t},[t]),Object(r.useEffect)(function(){u(t.attributes||{"":""})},[t,u]),Object(r.useEffect)(function(){l.current.attributes=Object(re.a)({},i),t.sequencerEngine.isLoading||n(l.current.id,Object(re.a)({},i))},[i]);var b=Object(r.useState)(void 0),v=Object(s.a)(b,2),h=v[0],g=v[1];return a.a.createElement("div",{className:"attributes-inspector"},a.a.createElement("div",{className:"label"},"Attributes"),Object.keys(i).filter(function(e){return""!==e}).map(function(e,n){return a.a.createElement(le,{showingColor:h===n,key:n,skey:e,style:i,zobject:t,setShowingColor:function(e){return g(!1===e?void 0:n)},setFocus:p,i:n,focus:m,value:i[e],setStyle:u})}))}),fe=n(417),me=(n(260),Object(c.b)(function(e,t){return{}},function(e){return{setSelectedZObject:function(t){return e(Object(d.Cf)(t))}}})(function(e){var t=e.zobject,n=e.connects,c=e.setSelectedZObject,o=Object(r.useState)(void 0),i=Object(s.a)(o,2),u=(i[0],i[1]),l=Object(r.useCallback)(function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Input",r=arguments.length>2?arguments[2]:void 0,a=t.subSequence.zObjects.find(function(t){return t.name===e});a||(a="pad"===e?0===t.subSequence.pads.length?t.subSequence.createPad():t.subSequence.pads[0]:t.subSequence.createZObject(void 0,void 0,e));var o=t;r&&r in t.outlets||(o=r&&t.effect&&r in t.effect.outlets?t.effect:t.effect&&Object.keys(t.effect.outlets)[0]?t.effect:t);var s=a;a.effect&&n in a.effect.inlets&&(a=a.effect),a.connectInlet(n,o,r||Object.keys(t.outlets)[0]||t.effect&&Object.keys(t.effect.outlets)[0]),u(e),c(s)},[t,n,u]);Array.isArray(n)||(n=[n]);var d=Object(r.useCallback)(function(e,n,r){var a=Object(re.a)({},t.outlets,t.effect?t.effect.outlets:{}),c=r?a[r]:a[Object.keys(a)[0]];if(c)return c.connections.some(function(t){return t.destNode.name===e||"pad"===e&&t.destNode.isPad})},[t]);return a.a.createElement("div",{className:"object-connector"},a.a.createElement("div",{className:"connect-help"},"Commonly connects with"),n.map(function(e){return a.a.createElement("div",{onClick:function(){return l(e.object,e.inlet,e.outlet)},className:d(e.object,e.inlet,e.outlet)?"connect-option connected ":"connect-option"},a.a.createElement("img",{className:"connects-with-icon",src:"/connects-with-icon.svg"}),a.a.createElement("div",{className:"object-type"},e.object),a.a.createElement("div",{className:"inlet-type"},e.inlet),a.a.createElement(fe.a,{className:"guilds-checkmark",condition:d(e.object,e.inlet,e.outlet)}))}))})),pe=Object(c.b)(function(e,t){return{name:t.zobject.name,inputText:e.spatial.zobjectInputText}},function(e){return{}})(function(e){var t=e.zobject;e.name,e.inputText;t.pluginViewerFor&&(t=t.pluginViewerFor);var n=Object(r.useState)(),c=Object(s.a)(n,2),o=(c[0],c[1]),i=Object(r.useCallback)(function(e){t.text=e,o(e)},[t,o]),u=(Object(r.useCallback)(function(){t.bang()},[t]),Object(r.useCallback)(function(e,n){var r=t.subSequence.createZMessage(void 0,void 0,void 0,void 0,void 0,e+" "+n.map(function(e){return 0}).join(" "));t.connectInlet("Input",r,Object.keys(r.outlets)[0])},[t]));if(!t.name||""===t.name){var l=Object(ae.a)(1);return Object.keys(l).sort().map(function(e){return a.a.createElement("div",{className:"zobject-tag multi-object"},a.a.createElement("div",{className:"tag-name"},e),a.a.createElement("div",{className:"tag-options"},l[e].sort().map(function(e){return a.a.createElement("div",{onClick:function(){return i(e)},className:"tag-option"},a.a.createElement("div",{className:"operation"},e),a.a.createElement("div",{className:"description"},Object(ae.a)(e).description))})))})}var d=Object(ae.a)(t.name);if(d){var f=d.tags;Array.isArray(f)?f=f[0]:f||(f="Object"),t.plugin&&(f="Plugin");var m=Object(re.a)({},d.params);Array.isArray(d.inlets)&&(m={},d.inlets.forEach(function(e){return m[e]=d.params[e]||""}));var p=Object(re.a)({},d.operations);return Object.keys(t.actions),a.a.createElement("div",{className:"zobject-tag single-object"},a.a.createElement("div",{className:"tag-name"},f),a.a.createElement("div",{className:"tag-options"},a.a.createElement("div",{className:"tag-option"},a.a.createElement("div",{className:"operation"},t.plugin?t.plugin.name:t.name),a.a.createElement("div",{className:"description"},t.plugin?"":d.description),a.a.createElement("div",{className:"args"},Object.keys(m).map(function(e){return a.a.createElement("div",{className:"param"},a.a.createElement("img",{className:"operation-icon",src:"/operation-icon.svg"}),a.a.createElement("div",{className:"param-name"},e),a.a.createElement("div",{className:"param-description"},m[e]))})))),!t.plugin&&"subpatch"===t.name&&a.a.createElement(oe,{zobject:t}),p&&Object.keys(p).length>0&&a.a.createElement("div",{className:"tag-name"},"Operations",a.a.createElement("div",{className:"operation-help-text"},"(via left-inlet)")),Object.keys(p).length>0&&a.a.createElement("div",{className:"tag-options"},a.a.createElement("div",{className:"tag-option"},a.a.createElement("div",{className:"operations"},Object.keys(p).filter(function(e){return e[e]&&e[e].parameters}).map(function(e){return a.a.createElement("div",{className:"operation-option"},a.a.createElement("img",{className:"operation-icon",src:"/operation-icon.svg"}),a.a.createElement("div",{className:"operation-and-description"},a.a.createElement("div",{className:"operation"},a.a.createElement("div",{onClick:function(){return u(e,p[e].parameters)},className:"operation-btn"},e),p[e].parameters.map(function(e){return a.a.createElement("span",{className:"operation-arg"},e)})),a.a.createElement("div",{className:"description"},p[e].description)))})))),d.connects&&a.a.createElement(me,{zobject:t,connects:d.connects}),a.a.createElement(de,{zobject:t}),a.a.createElement(ce,{zobject:t}))}return a.a.createElement("div",null)}),be=n(1139),ve=(Object(c.b)(function(e,t){return{}},function(e){return{}})(function(e){var t=e.pad;return a.a.createElement(be.a,{hasMidi:!1,needsLabel:!0,showEffect:!0,track:t})}),n(82)),he=Object(c.b)(function(e,t){return{trackStep:t.sequencerEngine.trackStep}},function(e){return{}})(function(e){var t=e.trackStep,n=(e.stepWidth,e.length),r=t%n*100/n;return a.a.createElement("div",{style:{width:r+"%"},className:"play-tick"})}),ge=n(2643);function ke(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return Ee(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ee(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var c,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,c=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw c}}}}function Ee(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Oe=Object(c.b)(function(e,t){var n,r={selectedTrack:e.mix.selectedTrack},a=ke(t.pad.tracks);try{for(a.s();!(n=a.n()).done;){var c=n.value;c&&(r[c.trackNumber]=e.tracks.trackSteps[c.id])}}catch(o){a.e(o)}finally{a.f()}return r},function(e){return{setShowPadSequencer:function(t){return e(Object(d.cg)(t))}}})(function(e){e.container;var t=e.pad,n=e.selectedTrack,r=e.setShowPadSequencer,c=e.trackToShow,o=Object(ve.a)(e,["container","pad","selectedTrack","setShowPadSequencer","trackToShow"]),s=t.patternLength,i=t.tracks.filter(function(e){return e})[0],u=i&&i.currentPattern;s==-1/0&&(s=32);var l=o.width?o.width:c?700:210;return a.a.createElement("div",{onClick:function(){return r(t)},style:{width:l},className:"visualizer"},a.a.createElement(he,{sequencerEngine:t.sequencerEngine,length:s,stepWidth:250/s}),t.tracks.filter(function(e){return e}).map(function(e){return a.a.createElement(ge.a,{key:e.id,steps:o[e.trackNumber],isSelected:n===e.trackNumber,stepWidth:l/s,patternNumber:u,duration:s,track:e})}))}),je=(n(2814),Object(c.b)(function(e,t){return{}},function(e){return{}})(function(e){var t=e.pad;return a.a.createElement("div",{className:"tools-sidebar PAD"},a.a.createElement(Oe,{width:240,pad:t}))})),Se=n(152),ye=["A","B","C","D"],we=Object(c.b)(function(e,t){return{}},function(e){return{}})(function(e){var t=e.track,n=t.sequencerEngine.sends.sends;return a.a.createElement("div",{className:"track-quick-sends"},a.a.createElement("div",{className:"label"},"Sends"),a.a.createElement("div",{className:"send-knobs"},t.sendNodeVolumeParameters.filter(function(e,t){return n[t]&&!n[t].pad}).map(function(e,n){return a.a.createElement("div",{className:"send-knob"},a.a.createElement(Se.a,{sequencerEngine:t.sequencerEngine,min:-40,parameter:e}),a.a.createElement("div",{className:"send-name"},ye[n]))})))}),Ce=n(1179),Ne=Object(c.b)(function(e,t){return{}},function(e){return{}})(function(e){var t=e.track;return a.a.createElement("div",{className:"track-quick-envelopes"},a.a.createElement("div",{className:"label"},"Envelopes"),a.a.createElement(Ce.a,{track:t}))}),qe=Object(c.b)(function(e,t){return{bpm:t.track.sequencerEngine.bpm,warpLength:t.warp?t.warp.warpLength:1,warpFactor:t.warp?t.warp.warpFactor:2}},function(e){return{}})(function(e){e.track;var t=e.warp,n=e.bpm,c=e.warpLength,o=e.warpFactor,i=Math.round(n/c*10)/10,u=Object(r.useCallback)(function(e){var r=n/e;t.warpLengthParameter.set(r,!1)},[t,n]),l=Object(r.useCallback)(function(){t.warpFactorParameter.set(2*o,!1)},[o,t]),d=Object(r.useCallback)(function(){t.warpFactorParameter.set(o/2,!1)},[o,t]),f=function(e){var t=e.min,n=e.max,a=e.setValue,c=e.value,o=Object(r.useState)(!1),i=Object(s.a)(o,2),u=i[0],l=i[1];Object(r.useEffect)(function(){return window.addEventListener("mousemove",d),window.addEventListener("mouseup",f),function(){window.removeEventListener("mousemove",d),window.removeEventListener("mouseup",f)}},[u,t,n,a,c]);var d=Object(r.useCallback)(function(e){if(u){console.log("editing");var r=u.y,o=u.number,s=r-e.pageY,i=Math.pow(s/r,2);s<0&&(i*=-1);var l=i*(n-(t+.001))+o;console.log("Number = ",l),(l=Math.max(t,Math.min(n,l)))!==c&&a(l)}},[t,u,n,c,a]),f=Object(r.useCallback)(function(){l(!1)},[l]),m=Object(r.useCallback)(function(e){l({number:c,y:e.pageY})},[l,c]);return{editing:u,onMouseDown:m}}({min:45,max:200,setValue:u,value:i}),m=f.onMouseDown,p=f.editing;return[a.a.createElement("div",{onMouseDown:m,className:p?"warp-knob editing":"warp-knob"},a.a.createElement("span",{className:"warp-tempo"},i)," bpm"),a.a.createElement("div",{className:"warp-factor"},a.a.createElement("div",{onClick:d,className:"arrow-up"}),a.a.createElement("div",{className:"factor-value"},2/o,"x"),a.a.createElement("div",{onClick:l,className:"arrow-down"}))]}),xe=n(641),Te=(n(2815),function(e){return e.midiEffects.effects.find(function(e){return"Warp"===e.name})}),Me=Object(c.b)(function(e,t){var n=t.track.subSequence.id,r=!1;void 0!==t.track&&(r=((e.tracks.trackPatternLocks[t.track.subSequence.id]||{})[t.track.trackNumber]||{})[t.track.currentPattern]||!1);return{locked:r,isFrozen:t.track.isFrozen,planar:e.effects.planar[t.track.id],show:e.spatial.showTrackInstrument,midiEffects:t.track.midiEffects.effects.length,isWarped:e.tracks.trackWarps[n]&&e.tracks.trackWarps[n][t.track.trackNumber]}},function(e,t){return{setPulledEffects:function(t){return e(Object(d.De)(t))},setShow:function(t){return e(Object(d.sg)(t))},clearSelectedEffect:function(n){return e(Object(d.lf)(t.track.subSequence.id,t.track.id,void 0,n,void 0))}}})(function(e){var t=e.isFrozen,n=e.locked,c=e.track,o=e.isWarped,s=e.show,i=e.setShow,u=e.clearSelectedEffect,l=e.setPulledEffects,d=e.planar,f=Object(r.useRef)(),m=(Object(r.useRef)(),Object(r.useCallback)(function(){i(!s)},[s,i]));Object(r.useEffect)(function(){s&&(u(_.a),u(_.c))},[s]);Object(r.useCallback)(function(){var e=c.state.effects.pulledEffects||[];l([].concat(Object(b.a)(e),[d]))},[c,d]);return a.a.createElement("div",{ref:f,className:"quick-instrument"},a.a.createElement("div",{className:"label"},"Instrument"),a.a.createElement(V.a,{patternLocked:n,toggleLock:function(){return c.togglePatternLock()}}),!t&&a.a.createElement("div",{onClick:function(){return t?c.unfreeze():Object(I.e)(c)},className:t?"flex pushable freeze-btn frozen":"flex pushable freeze-btn"},a.a.createElement("img",{className:"mt-1 freeze-icon",src:"/freeze-icon.svg"})," ",t?"Unfreeze":"Freeze"),a.a.createElement("div",{className:"instrument-items"},a.a.createElement("div",{onClick:m,className:s?"pushable instrument-button show":"pushable instrument-button"},c.instrument?c.getName():"Sampler"),c.sample&&a.a.createElement(xe.a,{track:c}),o&&a.a.createElement(qe,{warp:Te(c),track:c})))}),Pe=(Object(c.b)(function(e,t){return{effects:t.track&&t.track.effects?t.track.effects.length:0}},function(e){return{}})(function(e){var t=e.track;return t&&t.effects&&a.a.createElement(be.a,{hasMidi:!0,needsLabel:!0,showEffect:!0,track:t})}),n(2816),n(23)),Re=n(132),De=n(1496),Ae=Object(c.b)(function(e,t){return{}},function(e){return{}})(function(e){var t=e.track,n=Object(r.useState)(!1),c=Object(s.a)(n,2),o=c[0],i=c[1];return a.a.createElement("div",{className:"sidebar-section"},a.a.createElement("div",{onClick:function(){return i(!0)},className:o?"label show-aux showing":"label show-aux"},"Aux",a.a.createElement("div",{className:"plus-minus"},o&&a.a.createElement("div",{onClick:function(e){e.stopPropagation(),i(!1)},className:"plus minus"},"-"),a.a.createElement("div",{className:"plus"},"+"))),o&&a.a.createElement("div",null,a.a.createElement("div",{className:"label"},"Chokes"),a.a.createElement(De.a,{sequencerEngine:t.sequencerEngine,track:t}),a.a.createElement(Re.a,{name:"Skip Module Midi",parameter:t.skipMidiMasterParameter}),t.getTrackType()===j.f&&a.a.createElement("div",{onClick:function(){return Object(I.g)(t)},className:"convert-to-rack pushable"},"Convert to Sampled Instrument"),t.getTrackType()===j.f&&t.getSamplers()[0]&&t.getSamplers()[0].detuneParameter&&a.a.createElement(Pe.a,{parameter:t.getSamplers()[0].detuneParameter,name:"Detune",min:-1e3,max:1e3,step:.1,lfoEnabled:!0,sequencerEngine:t.sequencerEngine})))}),Ie=new f.a,ze=(Object(c.b)(function(e,t){return{isFrozen:t.track.isFrozen}},function(e){return{}})(function(e){var t=e.isFrozen,n=e.track;return a.a.createElement("div",{className:"sidebar-section"},a.a.createElement("div",{className:"label"},"Freeze"),t?a.a.createElement(C.a,{track:n,trackColor:Ie.getColorForTrack(n),isTrackFrozen:!0}):a.a.createElement("div",{onClick:function(){return Object(I.e)(n)},className:"freeze-button"},"Freeze Track"))}),n(1180)),Le=Object(c.b)(function(e,t){return{id:t.track.id,name:t.track.name}},function(e){return{}})(function(e){var t=e.track;return a.a.createElement("div",{className:"sidebar-tools TRACK"},a.a.createElement(x,{track:t}),a.a.createElement(Me,{track:t}),a.a.createElement(Ne,{track:t}),a.a.createElement(we,{track:t}),a.a.createElement(Ae,{track:t}),a.a.createElement(de,{zobject:t}))}),He=n(2712),Fe=(n(2817),Object(c.b)(function(e,t){return{}},function(e){return{}})(function(e){var t=e.zmessage,n=[];return t.type===Z.c&&n.push(a.a.createElement(He.a,{key:1,znumber:t})),n.push(a.a.createElement(de,{zobject:t})),n})),Be=n(1377),Ue=(n(2818),Object(c.b)(function(e,t){return{}},function(e){return{}})(function(e){var t=e.effect,n="";switch(t.name){case"Plane Parameters":n=a.a.createElement(Be.a,{effect:t})}return a.a.createElement("div",{className:"effect-tools"},t.documentation&&a.a.createElement("div",{className:"effect-documentation"},t.documentation),n)})),Ge=Object(c.b)(function(e,t){return{}},function(e){return{}})(function(e){var t=e.object,n=(e.sequencerEngine,"");if(!t.getObjectType)return"";switch(t.getObjectType()){case G.c:n=a.a.createElement(Le,{track:t});break;case G.b:n=a.a.createElement(je,{pad:t});break;case G.d:n=a.a.createElement(Fe,{zmessage:t});break;case G.e:n=a.a.createElement(pe,{zobject:t});break;case G.a:n=a.a.createElement(Ue,{effect:t})}return a.a.createElement("div",{className:"tools-sidebar"},n)}),Ve=(n(1500),n(770)),We=n(1181),Ze=n(381),Xe=(n(763),n(1523),Object(c.b)(function(e,t){return{namme:t.object.name,preset:t.object.preset&&t.object.preset.contentHash}},function(e){return{}})(function(e){var t=e.object,n=e.sequencerEngine;if(t.getObjectType()===G.c){if(t.getTrackType()===j.a)return"";var r=t,c=r.instrument?r.instrument.getInstrumentType():r.getTrackType();return a.a.createElement(Ze.a,{isPianoRoll:!1,initialSize:18,track:t,content:t.preset,searchText:"",type:c})}if(t.getObjectType()===G.b)return a.a.createElement(We.a,{pad:t});if(t.getObjectType()===G.e)return a.a.createElement(Ze.a,{initialSize:18,zobject:t,content:t.preset,searchText:"",type:t.getInstrumentType()});if(t.getObjectType()===G.a){var o=Object(Y.a)(t);if(o)return a.a.createElement(Ve.a,{sequencerEngine:n,trackNumber:o.trackNumber,hide:function(){return 0},effect:t})}return a.a.createElement("div",null)})),Ke=n(2717);n(1524),t.a=Object(c.b)(function(e,t){return{selectedZObject:e.zobject.selectedZObject,show:t.force||e.spatial.sidebarsShowing,selectedSteps:e.keyboard.selectedPianoRollSteps,showTrackInstrument:e.spatial.showTrackInstrument,secondaryZObject:e.zobject.secondaryZObject,option:e.audition.rightSidebarOption,showPlugins:e.plugins.showPlugins,selectedTrack:t.sequencerEngine&&t.sequencerEngine.getSelectedTrack()}},function(e){return{setOption:function(t){return e(Object(d.Le)(t))},setSelectedZObject:function(t){return e(Object(d.Cf)(t))},setShowTrackInstrument:function(t){return e(Object(d.sg)(t))}}})(function(e){var t=e.setSelectedZObject,n=e.setShowTrackInstrument,c=e.secondaryZObject,s=e.show,i=e.sequencerEngine,u=(e.position,e.selectedZObject),l=e.selectedTrack,d=e.selectedSteps,f=e.setOption,m=e.option,b=e.showPlugins,v=e.showTrackInstrument,h=e.hideContext,g=Object(r.useRef)();Object(r.useEffect)(function(){d&&d.length>0&&f("Tools")},[f,d]),Object(r.useEffect)(function(){u&&u.isFrozen&&f("Tools"),u&&u.getObjectType()===G.a&&f("Presets")},[f,u]),Object(r.useEffect)(function(){u||n(void 0)},[u]),Object(r.useEffect)(function(){return window.addEventListener("keydown",k),function(){return window.removeEventListener("keydown",k)}},[f,m]);var k=Object(r.useCallback)(function(e){"INPUT"!==e.target.tagName&&"TEXTAREA"!==e.target.tagName&&"Tab"===e.key&&e.shiftKey&&f("Tools"===m?"Audition":"Tools")},[f,m]);if(!s)return"";var O=u?"right sidebar "+m:"right sidebar";return b?a.a.createElement("div",{ref:g,className:O},a.a.createElement(E,{sequencerEngine:i})):[v&&u&&u.getObjectType()===G.c&&a.a.createElement(U,{track:u}),a.a.createElement("div",{ref:g,className:O},u&&a.a.createElement(Ke.a,{zobject:u,sequencerEngine:i,setSelectedZObject:t,showSave:"Presets"===m,option:m,setOption:f,options:u&&u.isFrozen?["Tools"]:u.getTrackType&&"SAMPLER"===u.getTrackType()?["Tools","Audition"]:["Tools","Presets"]}),u&&a.a.createElement(J,{object:u}),i&&!u&&a.a.createElement(ne.a,{sequencerEngine:i}),u&&"Tools"===m?a.a.createElement(Ge,{object:u,sequencerEngine:i}):u&&"Audition"===m?a.a.createElement(ze.a,{object:u,sequencerEngine:i}):u&&a.a.createElement(Xe,{object:u,sequencerEngine:i}),a.a.createElement("div",{onClick:function(){return t(l)},className:"mini-track-information"},i&&!u&&l&&a.a.createElement(H,{track:l})),i&&!u&&a.a.createElement(p,{sequencerEngine:i}),i&&!u&&i.tracks&&i.tracks.length>0&&a.a.createElement(te,{sequencerEngine:i}),c&&a.a.createElement(J,{object:c}),c&&"Tools"===m?a.a.createElement(Ge,{object:c,sequencerEngine:i}):"",!h&&a.a.createElement(o.a,{sequencerEngine:i}))]})},2771:function(e,t,n){"use strict";var r=n(8),a=n(2),c=n.n(a),o=n(13),s=n(10),i=n(3),u=n(4),l=n(18),d=n(7),f=n(11),m=n(1),p=n(0),b=n.n(p),v=n(9),h=n(1178),g=n(2783),k=n(1437),E=n(2697),O=n(2689),j=n(12),S=n(44),y=n(372);function w(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=Object(m.a)(e);if(t){var a=Object(m.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(f.a)(this,n)}}var C=function(e){Object(d.a)(n,e);var t=w(n);function n(e){var r;return Object(i.a)(this,n),(r=t.call(this,e)).onClickOption=r.onClickOption.bind(Object(l.a)(r)),r.clear=r.clear.bind(Object(l.a)(r)),r}return Object(u.a)(n,[{key:"clear",value:function(){this.props.setSelectorMode(!1),this.props.setSidebarViewMode(y.g)}},{key:"onClickOption",value:function(e){this.clear(),e===y.g&&this.props.setSelectorMode(!0),this.props.setSidebarViewMode(e)}},{key:"getSelectedOption",value:function(){return this.props.sidebarViewMode}},{key:"render",value:function(){var e=this,t=this.getSelectedOption();return b.a.createElement("div",{className:"option-tabs"},b.a.createElement(N,{onMouseOver:function(){return e.props.setContextualHelp(S.g)},onMouseLeave:function(){return e.props.setContextualHelp(void 0)},onClear:this.clear,onClick:this.onClickOption,hideUnderline:this.props.hideUnderline,option:y.g,selectedOption:t===y.g&&this.props.showSelectorMode?y.g:void 0,name:"SOUNDS"}),b.a.createElement(N,{onMouseOver:function(){return e.props.setContextualHelp(S.d)},onMouseLeave:function(){return e.props.setContextualHelp(void 0)},onClear:this.clear,onClick:this.onClickOption,hideUnderline:this.props.hideUnderline,option:y.b,selectedOption:t,name:"INSTRUMENTS"}),b.a.createElement(N,{onMouseOver:function(){return e.props.setContextualHelp(S.f)},onMouseLeave:function(){return e.props.setContextualHelp(void 0)},onClear:this.clear,onClick:this.onClickOption,hideUnderline:this.props.hideUnderline,option:y.f,selectedOption:t,name:"PROJECTS"}),b.a.createElement(N,{onMouseOver:function(){return e.props.setContextualHelp(S.f)},onMouseLeave:function(){return e.props.setContextualHelp(void 0)},onClear:this.clear,onClick:this.onClickOption,hideUnderline:this.props.hideUnderline,option:y.d,selectedOption:t,name:"PACKS"}))}}]),n}(p.Component),N=function(e){Object(d.a)(n,e);var t=w(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"isSelected",value:function(){return this.props.selectedOption===this.props.option}},{key:"onClick",value:function(){this.isSelected()?this.props.onClear():this.props.onClick(this.props.option)}},{key:"render",value:function(){var e=this;return b.a.createElement("div",{onMouseOver:this.props.onMouseOver,onMouseLeave:this.props.onMouseLeave,onClick:function(){return e.onClick()},className:this.isSelected()?"option-tab selected":"option-tab"},this.props.name,this.isSelected()&&!this.props.hideUnderline?b.a.createElement("div",{className:"option-tab-underline"}):"")}}]),n}(p.Component),q=Object(j.b)(function(e){return{showSelectorMode:e.sequencer.showSelectorMode,sidebarViewMode:e.sequencer.sidebarViewMode}},function(e){return{setSelectorMode:function(t){return e(Object(v.Df)(t))},setSidebarViewMode:function(t){return e(Object(v.yg)(t))},setContextualHelp:function(t){return e(Object(v.wb)(t))}}})(C),x=n(2773),T=n(76),M=n(75),P=n(41),R=n.n(P);function D(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=Object(m.a)(e);if(t){var a=Object(m.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(f.a)(this,n)}}var A=function(e){Object(d.a)(n,e);var t=D(n);function n(e){var r;return Object(i.a)(this,n),(r=t.call(this,e)).state={sharingMode:!1,usersInGuilds:[],usersToShare:[],shareToAll:!1},r}return Object(u.a)(n,[{key:"onClickShare",value:function(){var e=Object(o.a)(c.a.mark(function e(){return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.setState({sharingMode:!0});case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"executeShare",value:function(){if(this.state.shareToAll)this.props.ethereum.guilds.sharePresetWithAllGuilds(this.props.preset.id);else for(var e in this.state.usersToShare){var t=this.state.usersToShare[e].userId,n=this.props.preset.id;this.props.presets.sharePreset(n,t)}this.clear(),this.props.onClose()}},{key:"clear",value:function(){this.setState({sharingMode:!1,usersToShare:[],usersInGuilds:[],shareToAll:!1})}},{key:"onSelectUser",value:function(e){this.setState({usersToShare:this.state.usersToShare.concat([e])})}},{key:"getUserOptions",value:function(){var e=[];for(var t in this.state.usersInGuilds){var n=this.state.usersInGuilds[t];e.push({label:n.userName,value:n})}return e}},{key:"onClickNo",value:function(){this.clear(),this.props.onClose()}},{key:"onShareToAllCheckbox",value:function(e){this.setState({shareToAll:!this.state.shareToAll})}},{key:"render",value:function(){var e=this,t=void 0!==this.props.preset?this.props.preset.name:"";return this.state.sharingMode?b.a.createElement(T.a,{dialogClassName:"preset-modal",show:this.props.show,onHide:this.props.onClose},b.a.createElement(T.a.Header,{closeButton:!0},b.a.createElement(T.a.Title,null,t)),b.a.createElement(T.a.Body,null,b.a.createElement(R.a,{className:"",options:this.getUserOptions(),onChange:function(t){return e.onSelectUser(t.value)},value:void 0,placeholder:"Share with users"}),this.state.usersToShare.map(function(e){return b.a.createElement(M.a,null,e.userName)}),b.a.createElement("form",null,b.a.createElement("div",{className:"refined-checkbox-preferences"},b.a.createElement("label",null,b.a.createElement("input",{type:"checkbox",value:"share",checked:this.state.shareToAll,onChange:function(t){return e.onShareToAllCheckbox(t.target.value)}}),"Share with all guild members")))),b.a.createElement(T.a.Footer,null,b.a.createElement(M.b,{variant:"secondary",onClick:function(){return e.executeShare()}},"Yes"),b.a.createElement(M.b,{variant:"primary",onClick:function(){return e.onClickNo()}},"No"))):b.a.createElement(T.a,{dialogClassName:"preset-modal",show:this.props.show,onHide:this.props.onClose},b.a.createElement(T.a.Header,{closeButton:!0},b.a.createElement(T.a.Title,null,t)),b.a.createElement(T.a.Body,null,"Do you want to replace this project's LFOs with this preset's LFOs?"),b.a.createElement(T.a.Footer,null,b.a.createElement(M.b,{variant:"secondary",onClick:this.props.onClickYes},"Yes"),b.a.createElement(M.b,{variant:"primary",onClick:this.props.onClickNo},"No"),b.a.createElement(M.b,{variant:"primary",onClick:function(){return e.onClickShare()}},"Share")))}}]),n}(p.Component),I=n(68);n(519);function z(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=Object(m.a)(e);if(t){var a=Object(m.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(f.a)(this,n)}}var L=function(e){Object(d.a)(n,e);var t=z(n);function n(e){return Object(i.a)(this,n),t.call(this,e)}return Object(u.a)(n,[{key:"onClickSynth",value:function(){this.props.sequencerEngine.addInstrumentTrack()}},{key:"onClickMultiSynth",value:function(){this.props.sequencerEngine.addMultiSynthTrack()}},{key:"onClickMultiSampler",value:function(){this.props.sequencerEngine.addSampledInstrumentTrack()}},{key:"onClickMetalSynth",value:function(){this.props.sequencerEngine.addMetalSynthTrack()}},{key:"onClickFMSynth",value:function(){this.props.sequencerEngine.addFMSynthTrack()}},{key:"onClickZ4Track",value:function(){this.props.sequencerEngine.addZ4Track()}},{key:"onClickExternalInstrument",value:function(){this.props.sequencerEngine.addMidiTrack()}},{key:"onClickInstrumentRack",value:function(){this.props.sequencerEngine.addInstrumentRackTrack()}},{key:"onDragStart",value:function(e){void 0!==e&&this.props.setInstrumentTypeDragging(e)}},{key:"render",value:function(){var e=this;return b.a.createElement("div",{className:"instruments-view"},b.a.createElement(H,{type:I.h,onDragStart:function(t){return e.onDragStart(t)},onMouseOver:function(){return e.props.setContextualHelp(S.c)},onMouseLeave:function(){return e.props.setContextualHelp(void 0)},onClick:function(){return e.onClickMultiSampler()},name:"Sampled Instrument"}),b.a.createElement(H,{onDragStart:function(t){return e.onDragStart(t)},type:I.f,onMouseOver:function(){return e.props.setContextualHelp(S.e)},onMouseLeave:function(){return e.props.setContextualHelp(void 0)},onClick:function(){return e.onClickMultiSynth()},name:"Synth"}),b.a.createElement(H,{onDragStart:function(t){return e.onDragStart(t)},onMouseOver:function(){return e.props.setContextualHelp(S.b)},onClick:function(){return e.onClickExternalInstrument()},onMouseLeave:function(){return e.props.setContextualHelp(void 0)},name:"External Instrument"}),b.a.createElement(H,{onDragStart:function(t){return e.onDragStart(t)},onMouseOver:function(){return e.props.setContextualHelp(S.b)},onClick:function(){return e.onClickInstrumentRack()},onMouseLeave:function(){return e.props.setContextualHelp(void 0)},name:"Instrument Rack"}))}}]),n}(p.Component),H=function(e){Object(d.a)(n,e);var t=z(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){var e=this;return b.a.createElement("div",{draggable:!0,onDragOver:function(e){return e.preventDefault()},onDragStart:function(){return e.props.onDragStart(e.props.type)},onMouseOver:this.props.onMouseOver,onMouseLeave:this.props.onMouseLeave,className:"instrument-option"},b.a.createElement("span",{onClick:this.props.onClick,className:"instrument-option-name"},this.props.name))}}]),n}(p.Component),F=Object(j.b)(null,function(e){return{setContextualHelp:function(t){return e(Object(v.wb)(t))},setInstrumentTypeDragging:function(t){return e(Object(v.Fc)(t))}}})(L),B=n(2775),U=n(102),G=n(1181),V=n(2712),W=n(91),Z=n(381),X=Object(j.b)(function(e,t){return{searchText:e.selector.quickAddSearchText,preset:t.zobject&&t.zobject.preset,name:t.zobject&&t.zobject.name}},function(e){return{setTrackPresetSaving:function(t){return e(Object(v.nh)(t))}}})(function(e){var t=e.zobject,n=e.setTrackPresetSaving,r=e.searchText,a=Object(p.useCallback)(function(){n(t)},[t]),c=t.numInlets,o=t.numOutlets;return t.effect&&(c+=t.effect.numInlets,o+=t.effect.numOutlets),b.a.createElement("div",{className:"zobject-sidebar"},t.type===W.c&&b.a.createElement("div",{className:"z-object-inspector"},b.a.createElement("div",{className:"z-object-name"},b.a.createElement("div",{className:"z-object-thumb"}),b.a.createElement("span",{className:"z-name"},"Number")),b.a.createElement(V.a,{znumber:t})),t.function&&b.a.createElement("div",{className:"z-object-inspector"},b.a.createElement("div",{className:"z-object-name"},b.a.createElement("div",{className:"z-object-thumb"}),b.a.createElement("span",{className:"z-name"},t.name)),b.a.createElement("div",{className:"z-object-info"},"Inlets: ",c),b.a.createElement("div",{className:"z-object-info"},"Outlets: ",o),b.a.createElement("img",{onClick:a,src:"/floppy-disk.svg",className:"save-preset-disk"})),t.isPad&&b.a.createElement(G.a,{pad:t}),!t.isPad&&t.type!==W.c&&b.a.createElement(Z.a,{initialSize:18,zobject:t,content:t.preset,searchText:r,type:t.getInstrumentType()}))}),K=n(45),Y=n(2713),_=n(33);function $(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=Object(m.a)(e);if(t){var a=Object(m.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(f.a)(this,n)}}var J=function(e){Object(d.a)(n,e);var t=$(n);function n(e){var r;return Object(i.a)(this,n),(r=t.call(this,e)).state={},r.getUserId(),r}return Object(u.a)(n,[{key:"getUserId",value:function(){var e=Object(o.a)(c.a.mark(function e(){return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=this,e.next=3,_.a.getUser();case 3:e.t1=e.sent,e.t2={userId:e.t1},e.t0.setState.call(e.t0,e.t2);case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){if(void 0===this.state.userId)return b.a.createElement("div",null);var e={id:this.props.sequencerEngine.getSequenceId()};return b.a.createElement("div",null,b.a.createElement(Y.a,{userId:this.state.userId,sequence:e}))}}]),n}(p.Component),Q=(n(2631),n(2693),n(2555),n(2715),n(6)),ee=n(785),te=0,ne=Object(j.b)(function(e,t){return{}},function(e){return{}})(function(e){var t=e.onChange,n=Object(p.useState)(""),r=Object(Q.a)(n,2),a=r[0],c=r[1],o=Object(p.useCallback)(function(e){var n=e.target.value;c(n);var r=++te;setTimeout(function(){r===te&&t(n)},250)},[c,t]),s=Object(p.useCallback)(function(){c(""),t("")},[t,c]);return b.a.createElement("div",{className:"pack-search-container"},b.a.createElement("input",{placeholder:"Type to search",onChange:o,type:"text",className:"pack-search",value:a}),b.a.createElement("div",{onClick:s,className:"clear-btn"},"x"))}),re=n(550),ae=n(710),ce=(n(1161),n(31)),oe=n(43),se=n(243),ie=n(205),ue=n.n(ie),le=n(1117),de=n(67);function fe(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return me(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return me(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var c,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,c=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw c}}}}function me(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var pe=Object(j.b)(function(e,t){var n=e.sequencer.sequencerEngine.getSelectedTrack(),r=e.packs.packSelected===t.pack;return{isEditing:e.packs.packToEdit&&e.packs.packToEdit.packHash===t.pack.packHash,currentPreset:n&&n.preset,isSelected:r,currentSoundInList:r?e.selector.currentSoundInList:void 0}},function(e){return{setPackToEdit:function(t){return e(Object(v.Ld)(t))},setPackSelected:function(t){return e(Object(v.Kd)(t))},setSamplesDragging:function(t){return e(Object(v.Ve)(t))},setCurrentSoundInList:function(t){return e(Object(v.Eb)(t))}}})(function(e){var t=e.sequencerEngine,n=e.pack,a=e.setSamplesDragging,c=e.setPackSelected,o=e.json,s=e.style,i=e.setPackToEdit,u=e.isEditing,l=e.userName,d=e.isSelected,f=e.currentPreset,m=e.currentSoundInList,v=e.setCurrentSoundInList,h=e.scrollRef,g=Object(p.useRef)(void 0),k=Object(p.useState)(void 0),E=Object(Q.a)(k,2),O=E[0],j=E[1],S=Object(p.useState)(void 0),y=Object(Q.a)(S,2),w=y[0],C=y[1];Object(ae.a)({ref:g,scrollRef:h,isCurrent:d,topOffset:120});var N=Object(p.useCallback)(function(){t.currentSubSequence.loadPackAsPads(o.pad,o.fx)},[o]),q=Object(p.useCallback)(function(){i(Object(r.a)({},o,n,{samples:O,presets:w}))},[o,w,O,n]);Object(p.useEffect)(function(){if(o){var e,t=[],r=[],a=fe(o.samples);try{for(a.s();!(e=a.n()).done;){var c=e.value;if(!(n.matchingContent&&n.matchingContent.length>0)||n.matchingContent.includes(c)){var s=new de.a(c);r.push(s.load()),t.push(s)}}}catch(u){a.e(u)}finally{a.f()}if(Promise.all(r).then(function(e){return j(t)}),o.presets){var i=o.presets;n.matchingContent&&n.matchingContent.length>0&&(i=i.filter(function(e){return n.matchingContent.includes(e)})),Object(se.b)(i).then(C)}}},[o,n]);var x="showing pack-option ";u&&(x+=" editing"),d&&(x+=" selected"),Object(p.useEffect)(function(){c(n)},[]);var T=f&&f.contentHash;return b.a.createElement("div",{ref:g,onDragStart:function(){return a(O)},onMouseDown:function(){return c(n)},draggable:!0,style:s,className:x},b.a.createElement("div",{className:"floppy-top"},b.a.createElement("div",{style:s,className:"floppy-title"},n.title)),b.a.createElement("div",{onClick:q,className:"pack-edit-btn"},"..."),b.a.createElement("div",{className:"floppy-sticker"},o.type===re.a?b.a.createElement("div",{onClick:N,className:"load-pack"},"Load as Pads"):"",O?O.map(function(e,t){return b.a.createElement(le.a,{setIsCurrent:function(){return v(t)},isCurrent:m%O.length===t,isEditing:!1,sample:e})}):b.a.createElement(ue.a,{sizeUnit:"px",size:10,color:"#123abc"}),w?w.map(function(e){return b.a.createElement(le.a,{isCurrent:e.contentHash===T,isEditing:!1,preset:e})}):""),o&&""!==o.description?b.a.createElement("div",{className:"floppy-sticker"},o.description):"",b.a.createElement("div",{className:"pack-author"},l))}),be=new ce.a,ve=Object(j.b)(function(e,t){return{isSelected:e.packs.packSelected===t.pack}},function(e){return{}})(function(e){var t=e.pack,n=e.isSelected,r=e.scrollRef,a=e.sequencerEngine,c=Object(p.useRef)(void 0),o=Object(p.useState)(""),s=Object(Q.a)(o,2),i=s[0],u=s[1],l=Object(p.useState)(void 0),d=Object(Q.a)(l,2),f=d[0],m=d[1],v=Object(p.useState)(!1),h=Object(Q.a)(v,2),g=h[0],k=h[1];Object(ae.a)({scrollRef:r,ref:c,isCurrent:n,topOffset:100}),Object(p.useEffect)(function(){_.a.users.getUserName(t.user).then(u),oe.a.getJson(t.packHash).then(m)},[]);var E={backgroundColor:be.getColorForHash(t.title)};Object(p.useEffect)(function(){return n?window.addEventListener("keydown",O):window.removeEventListener("keydown",O),function(){return window.removeEventListener("keydown",O)}},[k,n,g]);var O=Object(p.useCallback)(function(e){"Enter"===e.key&&!g&&n&&k(!0)},[n,g,k]);return Object(p.useEffect)(function(){t.matchingContent?k(!0):k(!1)},[t,k]),g?b.a.createElement(pe,{sequencerEngine:a,scrollRef:r,style:E,pack:t,json:f,userName:i}):b.a.createElement("div",{ref:c,style:E,onClick:function(){return k(!0)},className:n?"pack-option selected":"pack-option"},b.a.createElement("div",{className:"floppy-top"},b.a.createElement("div",{style:E,className:"pack-title"},i)),b.a.createElement("div",{className:"floppy-sticker"},b.a.createElement("div",{className:"pack-description"},t.title)))}),he=n(301),ge=Object(j.b)(function(e,t){return{showPianoRoll:e.sequencer.showPianoRoll,bottomHeight:e.arrangement.bottomHeight,packSelected:e.packs.packSelected}},function(e){return{setPackSelected:function(t){return e(Object(v.Kd)(t))},setCurrentSoundInList:function(t){return e(Object(v.Eb)(t))}}})(function(e){var t=e.sequencerEngine,n=e.setCurrentSoundInList,r=e.setPackSelected,a=e.packSelected,c=e.showPianoRoll,o=e.bottomHeight,s=Object(p.useState)(""),i=Object(Q.a)(s,2),u=i[0],l=i[1],d=Object(p.useState)([]),f=Object(Q.a)(d,2),m=f[0],v=f[1],h=Object(p.useState)(void 0),g=Object(Q.a)(h,2),k=g[0],E=g[1],O=Object(p.useRef)(void 0);Object(p.useEffect)(function(){""!==u?Object(ee.a)(u).then(function(e){E(e)}):E(void 0)},[u,E,m]),Object(p.useEffect)(function(){Object(he.a)().then(function(e){v(e)})},[]),Object(p.useEffect)(function(){return function(){return r(void 0)}},[]);var j={maxHeight:window.innerHeight-293};c&&(j.maxHeight-=o-130),Object(p.useEffect)(function(){return window.addEventListener("keydown",S),function(){return window.removeEventListener("keydown",S)}},[a,m]);var S=Object(p.useCallback)(function(e){var t=k||m;if("ArrowLeft"===e.key){var c=t.indexOf(a);r(t[Math.max(0,c-1)]),n(0)}else if("ArrowRight"===e.key){var o=t.indexOf(a);r(t[Math.min(t.length-1,o+1)]),n(0)}},[a,m,k]);return b.a.createElement("div",{className:"packs-selector no-select"},b.a.createElement(ne,{onChange:l}),b.a.createElement("div",{style:j,ref:O,className:"packs-grid"},(k||m).map(function(e){return b.a.createElement(ve,{sequencerEngine:t,key:e.packHash,scrollRef:O,pack:e})})))}),ke=(Object(j.b)(function(e,t){return{}},function(e){return{}})(function(e){var t=e.setNewPack,n=Object(p.useState)(""),r=Object(Q.a)(n,2),a=r[0],c=r[1],o=Object(p.useCallback)(function(e){t(!1)},[a,t]);return b.a.createElement("div",{className:"new-pack-flow"},b.a.createElement("div",{className:"name-container"},b.a.createElement("input",{value:a,onChange:function(e){return c(e.target.value)},placeholder:"Type name"})),b.a.createElement("div",{className:"drop-content-here"},"Drop samples and presets here"),b.a.createElement("div",{onClick:o,className:"save-pack-btn"},"Save"))}),n(1501),Object(j.b)(function(e,t){return{}},function(e){return{setCreatingNewPack:function(t){return e(Object(v.yb)(t))}}})(function(e){var t=e.setCreatingNewPack,n=e.sequencerEngine;return b.a.createElement("div",{className:"packs-component"},b.a.createElement("div",{onClick:function(){return t(!0)},className:"new-pack-btn"},"Create a New Pack"),b.a.createElement(ge,{sequencerEngine:n}))}));n(1150);function Ee(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=Object(m.a)(e);if(t){var a=Object(m.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(f.a)(this,n)}}var Oe=_.a.presets;window.topOffset=0,window.bottomOffset=-400;var je=function(e){Object(d.a)(n,e);var t=Ee(n);function n(e){var r;return Object(i.a)(this,n),(r=t.call(this,e)).state={dropdownOpen:!1,showPresetModal:!1},r.onClosePresetModal=r.onClosePresetModal.bind(Object(l.a)(r)),r.loadWithLFOs=r.loadWithLFOs.bind(Object(l.a)(r)),r.loadWithoutLFOs=r.loadWithoutLFOs.bind(Object(l.a)(r)),r}return Object(u.a)(n,[{key:"showMidiPads",get:function(){return void 0!==this.props.padMappings&&Object.keys(this.props.padMappings).length>0}},{key:"onDrop",value:function(){var e=this.props.sequencerEngine.state,t=e.sequencer.effectDragging||e.effects.midiEffectDragging;if(t){var n=[].concat(Object(s.a)(e.effects.pulledEffects),[t.effect]);this.props.setPulledEffects(n),this.props.setMidiEffectDragging(void 0),this.props.setEffectDragging(void 0)}this.props.setPresetDragging(void 0),this.props.setSampleDragging(void 0),this.props.setInstrumentTypeDragging(void 0),this.props.setSampleTagDragging(void 0)}},{key:"toggleDropdown",value:function(){this.setState({dropdownOpen:!this.state.dropdownOpen})}},{key:"sequencerEngine",get:function(){return this.props.sequencerEngine}},{key:"addSound",value:function(){var e=Object(o.a)(c.a.mark(function e(t,n,r,a,o){var s;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.sequencerEngine.tracks.length,n&&this.sequencerEngine.tracks.length>0?(s=null==this.sequencerEngine.cursor.track?0:this.sequencerEngine.cursor.track,this.sequencerEngine.addSound(t,s,void 0,o)):this.sequencerEngine.addSound(t,void 0,r,o);case 2:case"end":return e.stop()}},e,this)}));return function(t,n,r,a,c){return e.apply(this,arguments)}}()},{key:"auditionSound",value:function(e){var t=null==this.sequencerEngine.cursor.track?0:this.sequencerEngine.cursor.track;this.sequencerEngine.auditionSound(e,t),this.props.setSampleAuditioning(e)}},{key:"showSoundsSelectorView",value:function(){this.props.setSelectorMode(!0),this.props.setSidebarViewMode(y.g)}},{key:"isShowingSoundsPane",value:function(){return!this.props.sidebarCollapsed&&(this.props.showSelectorMode||this.props.sidebarViewMode!==y.g)}},{key:"showSequences",value:function(){this.props.setSidebarViewMode(y.f)}},{key:"showExternal",value:function(){this.props.setSidebarViewMode(y.a)}},{key:"showPresets",value:function(){this.props.setSidebarViewMode(y.e)}},{key:"onClickInstrumentsButton",value:function(){this.props.setSidebarViewMode(y.b)}},{key:"onClickAddAudioTrackButton",value:function(){this.sequencerEngine.addAudioTrack(),this.setState(this.state)}},{key:"toggleCollapse",value:function(){this.props.setSidebarCollapsed(!this.props.sidebarCollapsed)}},{key:"onChooseItem",value:function(e){this.setState({showPresetModal:!0,presetToLoad:e})}},{key:"onChooseFolder",value:function(e){this.setState({showPresetModal:!0,folderToLoad:e})}},{key:"onClosePresetModal",value:function(){this.setState({showPresetModal:!1})}},{key:"loadWithLFOs",value:function(){var e=this;this.setState({showPresetModal:!1}),this.state.presetToLoad?this.props.sequencerEngine.loadPreset(this.state.presetToLoad,!0):this.state.folderToLoad.getAllItems().forEach(function(t){return e.props.sequencerEngine.loadPreset(t,!0)})}},{key:"loadWithoutLFOs",value:function(){var e=this;this.setState({showPresetModal:!1}),this.state.presetToLoad?this.props.sequencerEngine.loadPreset(this.state.presetToLoad,!1):this.state.folderToLoad.getAllItems().forEach(function(t){return e.props.sequencerEngine.loadPreset(t,!1)})}},{key:"selectedEffect",get:function(){if(void 0!==this.props.sequencerEngine.store.getState().effects.selectedEffect)return this.props.sequencerEngine.selectedEffect}},{key:"cursor",get:function(){return this.props.sequencerEngine.cursor}},{key:"selectedTrack",get:function(){return this.props.sequencerEngine.tracks[this.cursor.track]}},{key:"render",value:function(){var e=this,t=this.props.viewMode!==U.e&&this.props.viewMode!==U.b,n="";this.props.sidebarViewMode===y.g&&this.props.showSelectorMode&&(n=b.a.createElement(x.a,{ethereumSearcher:this.props.ethereumSearcher,sequencerEngine:this.sequencerEngine,onAudition:function(t){return e.auditionSound(t)},onAddSound:function(t,n,r,a,c){return e.addSound(t,n,r,a,c)}})),this.props.sidebarViewMode===y.d&&(n=b.a.createElement(ke,{sequencerEngine:this.sequencerEngine}));var a="";this.props.sidebarViewMode===y.b&&(a=b.a.createElement(F,{sequencerEngine:this.sequencerEngine}));var c="";this.props.sidebarViewMode===y.f&&(c=b.a.createElement(k.a,{sequencerEngine:this.sequencerEngine}));var o="";this.props.sidebarViewMode===y.e&&(o=b.a.createElement(B.a,{sequencerEngine:this.sequencerEngine}));var s="";this.props.sidebarViewMode===y.c&&(s=b.a.createElement(J,{sequencerEngine:this.sequencerEngine}));Math.ceil((window.innerHeight-300)/400),this.isShowingSoundsPane()&&window.topOffset,this.isShowingSoundsPane()&&window.bottomOffset;this.props.hidePresets&&300;this.props.zIndexHack;var i=this.props.sidebarCollapsed?"sounds-pane collapsed":this.isShowingSoundsPane()?"sounds-pane":"hide sounds-pane";this.isShowingSoundsPane()&&this.props.hidePresets&&(this.props.viewMode,U.e),this.props.showPianoRoll,this.props.disableStickiness;var u={height:window.innerHeight-147};this.props.showPianoRoll&&(u.height-=this.props.bottomHeight-80),this.props.viewMode===U.b&&(u.height=window.innerHeight-65);var l=this.props.selectedZObject||this.props.viewableSubPatches&&this.props.viewableSubPatches[0]&&this.props.viewableSubPatches[0].zObject,d=b.a.createElement("div",{style:Object(r.a)({},u,{height:u.height-20}),className:"sidebar-content"},a,o,c,n,s,b.a.createElement(K.a,{condition:!this.isShowingSoundsPane()},b.a.createElement(q,null),b.a.createElement(O.a,{selectedZObject:void 0,sequencerEngine:this.sequencerEngine}),l?b.a.createElement(X,{zobject:l}):b.a.createElement("div",{className:"overviews"},b.a.createElement("div",{className:"overview-left"},this.props.explorerMaximized||this.props.searchText&&""!==this.props.searchText?"":b.a.createElement(E.a,{installation:this.props.hidePresets,sequencerEngine:this.sequencerEngine}),b.a.createElement(h.a,{sequencerEngine:this.sequencerEngine})),this.props.explorerMaximized||this.props.searchText&&""!==this.props.searchText?"":b.a.createElement(g.a,{sequencerEngine:this.sequencerEngine})),b.a.createElement(A,{ethereum:_.a,presets:Oe,preset:this.state.presetToLoad,show:this.state.showPresetModal,onClose:this.onClosePresetModal,onClickYes:this.loadWithLFOs,onClickNo:this.loadWithoutLFOs}))),f=b.a.createElement("div",{onDrop:function(){return e.onDrop()},className:"sidebar-container no-select"},b.a.createElement("div",{style:u,className:i},b.a.createElement("div",{className:"sidebar-header"},b.a.createElement("div",{onClick:function(){return e.toggleCollapse()},className:"collapse-toggle"},this.props.sidebarCollapsed?b.a.createElement("div",{className:"arrow-down"}):b.a.createElement("div",{className:"arrow-right"}))),b.a.createElement(K.a,{condition:!this.props.sidebarCollapsed},b.a.createElement(K.a,{condition:this.isShowingSoundsPane()},b.a.createElement("div",{className:"sound-toolbar"},b.a.createElement(q,null))),d)));if(this.props.showingContextMenu&&" showing-context-menu",t)return"";this.props.sidebarCollapsed||this.isShowingSoundsPane();return b.a.createElement("div",null,f)}}]),n}(p.Component);t.a=Object(j.b)(function(e,t){return{viewMode:e.sequencer.viewMode,showSelectorMode:e.sequencer.showSelectorMode,sidebarCollapsed:e.selector.sidebarCollapsed,sidebarViewMode:e.sequencer.sidebarViewMode,isTrackFocused:void 0!==e.sequencer.trackFocused,showPresets:e.sequencer.showPresets,zIndexHack:e.sequencer.zIndexHack,selectedTrack:e.mix.selectedTrack,padMappings:e.keyboard.padMappings,showPianoRoll:e.sequencer.showPianoRoll,selectedEffect:e.effects.selectedEffect,isShowingEffects:e.tracks.showTrackEffects[e.mix.selectedTrack],isMacroMapping:e.effects.isMacroMapping,bottomHeight:e.arrangement.bottomHeight,searchText:e.selector.quickAddSearchText,explorerMaximized:e.selector.explorerMaximized,showingContextMenu:e.effects.showingContextMenu,viewableSubPatches:e.zobject.viewableSubPatches}},function(e){return{setSamplePack:function(t){return e(Object(v.Re)(t))},addSamplePack:function(t){return e(Object(v.a)(t))},setSelectorMode:function(t){return e(Object(v.Df)(t))},setSidebarViewMode:function(t){return e(Object(v.yg)(t))},setSidebarCollapsed:function(t){return e(Object(v.wg)(t))},setSampleAuditioning:function(t){return e(Object(v.Ne)(t))},setContextualHelp:function(t){return e(Object(v.wb)(t))},setInstrumentTypeDragging:function(t){return e(Object(v.Fc)(t))},setPresetDragging:function(t){return e(Object(v.ye)(t))},setSampleDragging:function(t){return e(Object(v.Pe)(t))},setSampleTagDragging:function(t){return e(Object(v.Te)(t))},setPulledEffects:function(t){return e(Object(v.De)(t))},setEffectDragging:function(t){return e(Object(v.h)(t))},setMidiEffectDragging:function(t){return e(Object(v.md)(t))}}})(je)},2772:function(e,t,n){"use strict";var r=n(8),a=n(0),c=n.n(a),o=(n(1169),function(e,t){e.group!==t&&e.sequencerEngine.groups.addToGroup(e,t)}),s=n(10),i=n(6),u=n(9),l=function(e){var t=e.trackOrGroup,n=Object(a.useState)(t.effects),r=Object(i.a)(n,2),c=r[0],o=r[1];return{onDeleteEffect:Object(a.useCallback)(function(e){o(Object(s.a)(t.effects));var n=t.subSequence;t.sequencerEngine.dispatch(Object(u.lf)(n.id,t.id,void 0,"AUDIO_FX",void 0))},[t,o]),effects:c}},d=n(400),f=n(1139),m=n(2645),p=n(2),b=n.n(p),v=n(13),h=n(781),g=n(780),k=n(90),E=n(294);function O(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return j(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return j(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var c,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,c=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw c}}}}function j(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var S=function(e){for(var t=e.tracks[0].patterns.length,n=[],r=0;r<t;r++)e.switchToPattern(r),n.push(e.length);return n},y=function(){var e=Object(v.a)(b.a.mark(function e(t){var n,r,a,c,o,s,i,l,d,f,m;return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(n=t.sequencerEngine).store.dispatch(Object(u.gd)("Freezing track's patterns")),e.next=4,Object(k.a)(100);case 4:return t.sequencerEngine.stop(),r=t.tracks[0].patterns.length,a=S(n),n.switchToPattern(0),e.next=10,Object(E.b)(t.sequencerEngine,t);case 10:return c=e.sent,e.next=13,Object(h.a)(t.sequencerEngine,c,r,t.tracks);case 13:o=e.sent,s=w(t),i=s.frozenGroup,l=s.frozenTracks,n.deleteGroup(t),d=n.addMultiFreezeTrack(),f=d.patterns.length;case 18:if(!(f<r)){e.next=24;break}return e.next=21,d.newPattern(!0);case 21:f++,e.next=18;break;case 24:for(d.freeze(o,!0),d.frozenGroup=i,d.frozenTracks=l,m=0;m<r;m++)n.switchToPattern(m),d.currentPattern=m,d.pattern.changeLength(a[m]),d.frozenColumns[0].playing=m;n.switchToPattern(0),n.switchToPattern(n.currentPattern),n.groups.groups.forEach(function(e){return e.updateRedux()}),n.store.dispatch(Object(u.gd)(void 0));case 32:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),w=function(e){var t,n=e.getJson(),r=[],a=O(e.tracks);try{for(a.s();!(t=a.n()).done;){var c=t.value;r.push(Object(g.a)(c))}}catch(o){a.e(o)}finally{a.f()}return{frozenGroup:n,frozenTracks:r}},C=n(12),N=n(75),q=Object(C.b)(function(e,t){return{}},function(e){return{}})(function(e){var t=e.group,n=Object(a.useState)(!1),r=Object(i.a)(n,2),o=r[0],s=r[1],u=Object(a.useCallback)(function(){y(t)},[t]);return c.a.createElement("div",{className:"group-actions"},c.a.createElement(N.c,{className:"view-dropdown",show:o?"true":"false",isOpen:o,toggle:function(){return s(!o)}},c.a.createElement(N.f,{size:"sm",caret:!0,color:"primary"},c.a.createElement("img",{className:"group-actions-icon",src:"/automation-icon-disabled.png"})),c.a.createElement(N.e,null,c.a.createElement(N.d,{onClick:u,key:"",size:"sm"},"Freeze Group"))))}),x=n(31),T=n(779),M=n(109),P=n.n(M);function R(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-60;return(e-t)/((arguments.length>2&&void 0!==arguments[2]?arguments[2]:2)-t)}var D=Object(C.b)(function(e,t){return{}},function(e){return{setParameterSliderDown:function(t){return e(Object(u.Yd)(t))}}})(function(e){var t=e.track,n=e.volume,r=e.setVolume,o=e.setParameterSliderDown,s=Object(a.useCallback)(function(){if(o(void 0),t){var e=t.volumeParameter;e&&(e.automation.smoothen(),e.mixAutomation.smoothen())}},[t]),i=Object(a.useCallback)(function(e){var t=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-60,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2,r=(arguments.length>3&&arguments[3],Math.pow(e,.5));return t+(n-t)*r}(e);r(t)},[r,t]);return c.a.createElement("div",{onMouseDown:function(){return o(t&&t.volumeParameter)},onMouseUp:s,className:"mix-volume-slider"},c.a.createElement(P.a,{handle:"square",value:Math.pow(R(n),2),change:function(e){return i(e.target.value)},step:.01,max:1,min:0,orientation:"vertical",reversed:!0}),t?c.a.createElement(T.a,{meter:t.trackMeter}):"")}),A=new x.a,I=Object(C.b)(function(e,t){return{volume:e.tracks.groupVolumes[t.group.groupNumber],isCollapsed:e.mix.groupCollapsed[t.group.subSequence.id]&&e.mix.groupCollapsed[t.group.subSequence.id][t.group.groupNumber],selectedTrack:e.mix.selectedTrack,selectedGroup:e.mix.selectedGroup,selectedEffect:void 0!==t.group&&e.mix.selectedTrackEffects[t.group.subSequence.id]&&e.mix.selectedTrackEffects[t.group.subSequence.id][t.group.id]}},function(e,t){return{setGroupCollapsed:function(n){return e(Object(u.vc)(t.group.subSequence.id,t.group.groupNumber,n))}}})(function(e){var t=e.group,n=e.volume,r=e.isCollapsed,o=e.setGroupCollapsed,s=(e.selectedTrack,e.selectedGroup),i=e.selectedEffect,u=t.groupNumber,p=l({trackOrGroup:t}),b=p.onDeleteEffect,v=p.effects,h=A.getColorForTrack(t.tracks[0]),g=Object(a.useCallback)(function(e){t.setVolume(e)},[t]),k={},E={};s===t.groupNumber?(E.backgroundColor=h,E.color="black",k.borderStyle="solid",k.borderColor=h):(k.borderColor=h,k.backgroundColor="unset",k.backgroundImage="unset",k.borderStyle="solid",E.color="white");var O="group-volume-control";return i&&(O+=" showing"),c.a.createElement("div",{style:k,className:O},c.a.createElement("div",{style:E,className:"group-info"},c.a.createElement("div",{className:"group-name"},"Group ",u+1),c.a.createElement("div",{onClick:function(){return o(!r)},className:"collapse-toggle"},r?c.a.createElement("div",{className:"arrow-down"}):c.a.createElement("div",{className:"arrow-right"}))),i?c.a.createElement(d.a,{onDeleteEffect:b,sequencerEngine:t.sequencerEngine,group:t,compact:!0,effect:i,send:void 0}):c.a.createElement(D,{volume:n,setVolume:g}),c.a.createElement(q,{group:t}),t.sequencerEngine.channelMixer.stereoConnected?"":c.a.createElement(m.a,{channel:t}),c.a.createElement(f.a,{effects:v,track:t}))}),z=n(297),L=n(1522),H=(n(1447),n(943)),F=Object(C.b)(function(e,t){return{panning:e.tracks.trackPannings[t.track.id]||0}},function(e){return{}})(function(e){var t=e.track,n=e.panning,r=e.scrollContainer,o=Object(a.useCallback)(function(e){document.activeElement.blur(),t.setPanning(e)},[t]);return c.a.createElement("div",{className:"pan-knob"},c.a.createElement(H.b,{scrollContainer:r,size:30,angleOffset:220,angleRange:280,value:n,initialValue:n,step:.01,min:-1,max:1,onChange:o},c.a.createElement(H.a,{arcWidth:2,color:"#6c757a",background:"#6c757a"}),c.a.createElement(H.c,{width:2,height:10,radius:4,type:"rect",color:"white"})))}),B=n(152),U=n(787),G=["A","B","C","D","E"],V=Object(C.b)(function(e,t){return{}},function(e){return{}})(function(e){var t=e.track,n=(e.isSelected,Object(a.useRef)(void 0));Object(a.useEffect)(function(){var e=document.getElementById("mix-scroll");n.current=e},[]);Object(a.useCallback)(function(){},[]),Object(a.useCallback)(function(){},[]);return c.a.createElement("div",{className:"track-controls"},n?c.a.createElement(F,{scrollContainer:n,track:t}):"",c.a.createElement("div",{className:"sends-label"},"Sends"),c.a.createElement("div",{className:"send-knobs"},t.sendNodeVolumeParameters.map(function(e,r){return c.a.createElement("div",{style:{marginTop:r%2===1?10:0},className:"send-knob"},n?c.a.createElement(B.a,{sequencerEngine:t.sequencerEngine,scrollContainer:n,min:-40,parameter:e}):"",c.a.createElement("div",{className:"send-name"},G[r]))})),c.a.createElement(U.a,{className:"mix-output-type",track:t}))}),W=(n(971),n(60),n(68),n(755)),Z=new x.a,X=function(e){return void 0===e?"":(e.length>30&&(e=e.slice(0,30)+"..."),e)},K=Object(C.b)(function(e,t){var n=t.track;n&&n.tracks&&n.tracks[0]&&(n=n.tracks[0].track);var r=n&&n.subSequence.id;return{id:void 0===n?0:void 0!==n.sample&&void 0!==n.sample.getId()?n.sample.getId():n.presetName||n.getName(),volume:t.track.volumeParameter.get(),muted:e.tracks.trackMutes[t.track.trackNumber],isSelected:e.mix.selectedTrack===t.track.trackNumber&&void 0===e.mix.selectedGroup,trackDragging:e.mix.trackDragging,selectedEffect:void 0!==n&&e.mix.selectedTrackEffects[r]&&e.mix.selectedTrackEffects[r][n.id],selectedMidiEffect:void 0!==n&&e.mix.selectedTrackMidiEffects[r]&&e.mix.selectedTrackMidiEffects[r][n.id]}},function(e){return{setSelectedGroup:function(t){return e(Object(u.hf)(t))},setMixTrackDragging:function(t){return e(Object(u.ud)(t))}}})(function(e){var t=e.track,n=(e.group,e.volume),r=e.muted,s=e.isAlone,i=e.isSelected,u=e.setSelectedGroup,m=e.setMixTrackDragging,p=e.trackDragging,b=e.selectedEffect,v=e.selectedMidiEffect,h=t.sample&&t.sample.getThumbnail(),g=Z.getColorForTrack(t),k={backgroundColor:g};h&&(k.backgroundImage="url("+h+")");var E=l({trackOrGroup:t}),O=E.onDeleteEffect,j=E.effects,S=s?"group-track alone":"group-track",y={};i&&(S+=" selected",y.boxShadow="0px 0px 2px 2px "+g);var w="track-thumbnail";r&&(w+=" muted");var C=Object(a.useCallback)(function(){t.mute(!r)},[r,t]),N=Object(a.useCallback)(function(e){e.stopPropagation(),u(void 0),t.sequencerEngine.selectTrack(t.trackNumber)},[t]),q=Object(a.useCallback)(function(e){e.stopPropagation(),t!==p&&o(p,t.group)},[t,p]),x=Object(W.a)(t);return(b||v)&&(S+=" showing-effects"),c.a.createElement("div",{onDrop:q,draggable:!0,onDragStart:function(){return m(t)},style:y,onDragOver:function(e){return e.preventDefault()},onMouseDown:N,className:S},c.a.createElement("div",{style:i?{backgroundColor:g}:{},className:"track-info"},t.trackNumber+1," ",X(t.presetName||t.getName()||"Track")),b?c.a.createElement(d.a,{sequencerEngine:t.sequencerEngine,onDeleteEffect:O,track:t,compact:!0,effect:b,send:void 0}):v?c.a.createElement(z.a,{sequencerEngine:t.sequencerEngine,effect:v,track:t,compact:!0}):c.a.createElement("div",null,c.a.createElement(D,{track:t,volume:n,setVolume:function(e){return t.setVolume(e)}}),c.a.createElement("div",{onClick:C,style:k,className:w},void 0===h?x:""),c.a.createElement(L.a,{color:g,track:t}),c.a.createElement(V,{isSelected:i,track:t})),c.a.createElement(f.a,{effects:j,track:t}))}),Y=new x.a,_=Object(C.b)(function(e,t){return{isCollapsed:e.mix.groupCollapsed[t.group.subSequence.id]&&e.mix.groupCollapsed[t.group.subSequence.id][t.group.groupNumber],isSelectedGroup:e.mix.selectedGroup===t.group.groupNumber,trackDragging:e.mix.trackDragging,groupTracks:e.tracks.groupTracks[t.group.id]}},function(e){return{setSelectedGroup:function(t){return e(Object(u.hf)(t))}}})(function(e){var t=e.group,n=e.isCollapsed,r=e.setSelectedGroup,s=e.isSelectedGroup,i=e.trackDragging,u=(e.groupTracks,t.tracks),l="group-container",d=Y.getColorForTrack(t.tracks[0]),f={backgroundColor:d},m={};s&&(l+=" selected",m.boxShadow="0px 0px 2px 2px "+d);var p=Object(a.useCallback)(function(e){e.stopPropagation(),i&&o(i,t)},[i,t]),b=Object(a.useCallback)(function(){r(t.groupNumber)},[t,r]);return c.a.createElement("div",{onDrop:p,onMouseDown:b,style:m,className:l},c.a.createElement("div",{style:f,className:"group-top"}),c.a.createElement("div",{className:"group-inner"},c.a.createElement(I,{group:t}),c.a.createElement("div",{className:"tracks-and-tracker"},c.a.createElement("div",{className:"group-tracks"},n?"":u.map(function(e){return c.a.createElement(K,{track:e})})))))});n(2823),t.a=Object(C.b)(function(e,t){return Object(r.a)({},e.tracks.groupTracks,{currentSubSequence:e.sequencer.currentSubSequence[t.sequencerEngine.engineId]})},function(e){return{}})(function(e){var t=e.sequencerEngine,n=(e.currentSubSequence,t.groups.groups);return c.a.createElement("div",{className:"groups-component"},n.map(function(e){return c.a.createElement(_,{key:e.id,group:e})}))})},2773:function(e,t,n){"use strict";var r=n(6),a=n(0),c=n.n(a),o=n(9),s=n(67),i=n(43),u=n(31),l=n(2),d=n.n(l),f=n(13),m=n(8),p=n(2633),b=n(12),v=new(n(2557).a),h=Object(b.b)(function(e,t){return{}},function(e){return{}})(function(e){var t=e.sample,n=e.setIsSourcing,o=e.guildId,s=Object(a.useState)([]),i=Object(r.a)(s,2),u=i[0],l=i[1];Object(a.useEffect)(function(){v.searchRecords(t.name.replace(".wav","").replace(".flac","")).then(function(e){l(e)})},[t,l,n]);var d=Object(a.useCallback)(function(){t.saveSample(o),n(!1)},[t,n,o]);return c.a.createElement("div",{className:"source-finder"},u.length>0?c.a.createElement(p.a,{showTags:!1,sample:t,discogs:v,records:u}):"No records found",c.a.createElement("div",{className:"btns"},u.length>0?c.a.createElement("div",{onClick:d,className:"save-btn"},"Save Changes"):"",c.a.createElement("div",{className:"cancel-btn",onClick:function(){return n(!1)}},"Cancel")))}),g=n(298),k=n(783),E=(n(417),n(146)),O=n(784),j=n(715),S=(n(1077),n(301),n(710)),y=n(33),w=n(44),C=n(85),N=n(205),q=n.n(N),x=n(90),T=n(2704),M=function(e){var t=e.number,n=e.rating,r=e.onClick,a=e.color,o="star";t<=n&&(o+=" starred");var s={color:a};return c.a.createElement("div",{style:s,onClick:function(){return r(t)},className:o},c.a.createElement("span",null,"\u2606"))},P=(Object(b.b)(function(e,t){return{}},function(e){return{}})(function(e){var t=e.content,n=e.color,o=e.loadedRating,s=Object(a.useState)(o),i=Object(r.a)(s,2),u=i[0],l=i[1],d=Object(a.useCallback)(function(e){l(e),y.a.xanadu.rateSound(t,e,E.f)},[l,t]),f={};return 0===u&&(f.opacity=.2),c.a.createElement("div",{style:f,className:"rating"},[0,1,2,3,4].map(function(e){return c.a.createElement(M,{color:n,onClick:d,number:e,rating:u})}))}),n(14)),R=n.n(P),D=n(341),A=n(1135),I=(n(2782),n(372)),z=new u.a,L=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:30;return e.length>t?e.slice(0,t-8)+"..."+e.slice(e.length-8):e},H=Object(b.b)(null,function(e){return{setSampleDragging:function(t){return e(Object(o.Pe)(t))},setSearchText:function(t){return e(Object(o.Fe)(t))},setSidebarViewMode:function(t){return e(Object(o.yg)(t))},setExpandedProject:function(t){return e(Object(o.hc)(t))},setCurrentSoundInList:function(t){return e(Object(o.Eb)(t))},setCreatingNewPack:function(t){return e(Object(o.yb)(t))}}})(function(e){var t=e.isCurrent,n=e.isNext,o=e.setCurrentSoundInList,i=e.setPackToSearch,u=e.number,l=e.setExpandedProject,p=e.setSidebarViewMode,b=e.result,v=e.scrollRef,N=e.sequencerEngine,M=e.setSampleDragging,P=e.source,H=e.setSearchText,F=e.autoLoad,B=void 0!==F&&F,U=(e.setCreatingNewPack,Object(a.useRef)(!1)),G=Object(a.useRef)(!1),V=Object(a.useRef)(!1),W=Object(a.useRef)(!1),Z=Object(a.useRef)(void 0),X=Object(a.useState)(void 0),K=Object(r.a)(X,2),Y=(K[0],K[1],Object(a.useState)(void 0)),_=Object(r.a)(Y,2),$=_[0],J=_[1],Q=Object(a.useRef)(!1),ee=Object(a.useRef)(!1),te=Object(a.useState)(!1),ne=Object(r.a)(te,2),re=ne[0],ae=ne[1],ce=Object(a.useState)(void 0),oe=Object(r.a)(ce,2),se=oe[0],ie=oe[1],ue=Object(a.useState)(!1),le=Object(r.a)(ue,2),de=(le[0],le[1]),fe=Object(a.useState)(void 0),me=Object(r.a)(fe,2),pe=me[0],be=me[1],ve=Object(a.useState)(!1),he=Object(r.a)(ve,2),ge=he[0],ke=he[1],Ee=Object(a.useState)([]),Oe=Object(r.a)(Ee,2),je=Oe[0],Se=Oe[1],ye=Object(a.useState)(void 0),we=Object(r.a)(ye,2),Ce=we[0],Ne=we[1],qe=Object(a.useState)(void 0),xe=Object(r.a)(qe,2),Te=xe[0],Me=xe[1],Pe=Object(O.a)({type:E.f,contentHash:pe&&pe.getId()}),Re=Pe.toggleFavorite,De=Pe.isFavorited,Ae=Object(a.useState)(void 0),Ie=Object(r.a)(Ae,2),ze=Ie[0],Le=Ie[1];Object(a.useEffect)(function(){b.guildId&&y.a.guilds.getGuildName(b.guildId).then(Le)},[b]);var He=Object(a.useRef)(void 0),Fe=pe&&pe.tags&&pe.tags.indexOf("Resampled")>-1,Be=Fe&&je.length>0?je[je.length-1].newSequence:P;Be&&z.getColorForHash(Be);Object(a.useEffect)(function(){n&&Ve()},[n]),Object(a.useEffect)(function(){t?(Q.current=!1,$?He.current.playSound(0):(de(!0),W.current?G.current=!0:Ve(!0))):(Q.current=!0,He.current&&He.current.stopSound(),Me(!1))},[t,J,pe,Me]),Object(S.a)({ref:Z,scrollRef:v,isCurrent:t}),Object(a.useEffect)(function(){return t?window.addEventListener("keydown",Ue):window.removeEventListener("keydown",Ue),function(){return window.removeEventListener("keydown",Ue)}},[Te,Me,t,pe,ge,N,Ce,ke]);var Ue=Object(a.useCallback)(function(e){if("Enter"!==e.key||V.current)if("Backspace"===e.key){if(Te)return;He.current&&He.current.stopSound()}else"t"===e.key&&(e.ctrlKey||e.metaKey)?Me(!Te):"f"===e.key&&(e.ctrlKey||e.metaKey)&&Re(e);else{if(Te)return;V.current=!0;var t=N.getSelectedTrack();t&&(e.ctrlKey||e.metaKey)?t.useNewSound(pe):Ge(!0),He.current&&He.current.stopSound()}},[Te,Me,t,pe,ge,N,Ce,ke]);Object(a.useEffect)(function(){B&&pe&&(Ve(),ke(!0))},[pe,B,J,ke]),Object(a.useEffect)(function(){var e=new s.a(b.ipfsHash);e.load(!1).then(function(){return be(e)})},[b,be,He]),Object(a.useEffect)(function(){Object(T.a)(b.ipfsHash).then(Se)},[Se,b]),Object(a.useEffect)(function(){return function(){He.current&&He.current.dispose(),pe&&pe.dispose(),ee.current=!0}},[]);var Ge=Object(a.useCallback)(function(e,t){t&&t.ctrlKey||(e?N.addSound(pe,void 0,Ce&&[Ce]):(ke(!0),W.current?He.current&&He.current.playSound(0,2):Ve(!0)))},[pe,ge,N,Ce,ke]),Ve=Object(a.useCallback)(function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];!pe||pe.audioBuffer||W.current||(W.current=!0,pe.fetchAudio().then(function(t){if(!ee.current){var n=new D.a(R.a.context);W.current=!1,n.setBuffer(t.audioBuffer),He.current=n,(e||G.current)&&(Q.current||n.playSound(0)),J(!0)}}))},[J,pe]),We=Object(a.useCallback)(Object(f.a)(d.a.mark(function e(){return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return U.current=!0,e.next=3,Object(x.a)(750);case 3:if(U.current){e.next=5;break}return e.abrupt("return");case 5:Ve();case 6:case"end":return e.stop()}},e)})),[pe,ge,J]),Ze=(Object(a.useCallback)(function(){},[pe]),Object(a.useCallback)(function(e){e.stopPropagation();var t=e.clientX-Z.current.getBoundingClientRect().left,n=e.clientY-Z.current.getBoundingClientRect().top;t>160&&(t-=200),ie({x:t,y:n}),e.preventDefault()},[ie])),Xe=Object(a.useCallback)(function(e){o(u)},[u]),Ke="sample-option";return t&&(Ke+=" current"),c.a.createElement("div",{ref:Z,onContextMenu:Ze,onMouseDown:Xe,onMouseOver:We,draggable:!0,onDragOver:function(e){return e.preventDefault()},onDragStart:function(e){He.current&&He.current.stopSound(),Q.current=!0,M(pe)},onMouseLeave:function(){return U.current=!1},className:Ke},c.a.createElement(k.a,{dropdownPos:se,setDropdownPos:ie,setIsTagging:Me,setIsSourcing:ae,isUnsourced:!0,content:pe,setPackToSearch:i,contentHash:pe&&pe.getId()}),c.a.createElement("div",{className:"sample-option-inner"},c.a.createElement("div",{className:"wave-and-name"},c.a.createElement("div",{className:"name-and-tags"},De?c.a.createElement("div",{className:"heart favorited"}):"",c.a.createElement("div",{onClick:function(e){return Ge(void 0,e)},className:"sample-name"},L(Object(g.a)(b.title))),ze?c.a.createElement("div",{className:"guild-name"},ze):"",c.a.createElement(q.a,{sizeUnit:"px",style:{margin:0,lineHeight:"12px"},size:6,color:"white",loading:W.current}),c.a.createElement("div",{className:"pack-indicators"},pe&&pe.packs&&pe.packs.map(function(e){return c.a.createElement("div",{style:{backgroundColor:z.getColorForHash(e)},className:"pack-thumb"})})),je[0]?c.a.createElement("div",{onClick:function(){return e=je[0],l(Object(m.a)({},e,{edits:[]})),void p(I.f);var e},className:"projects-used"},c.a.createElement("span",null,je.length)):"",c.a.createElement("div",{style:Fe&&0!==je.length?{}:{maxWidth:200},className:"sample-tags"},!Te&&pe&&pe.tags&&pe.tags.map(function(e){return c.a.createElement(C.a,{key:e,element:w.H,arg:e},c.a.createElement("div",{style:{borderColor:z.getColorForHash(e),color:z.getColorForHash(e)},onClick:function(t){t.stopPropagation(),H(e)},className:"tag-option"},L(e,20)))}),pe&&pe.year?c.a.createElement("div",{className:"sample-year"},pe.year):"")),ge?c.a.createElement("div",{className:"waveform-and-rating"},$?c.a.createElement(C.a,{element:w.Ab},c.a.createElement(A.a,{selections:[],onChooseSlice:Ne,buffer:He.current.buffer,height:40,width:340,audioUnit:He.current,sample:pe,id:pe.ipfsHash,sequencerEngine:N})):""):"",Te?c.a.createElement(j.a,{content:pe}):"",re?c.a.createElement(h,{setIsSourcing:ae,sample:pe,guildId:b.guildId}):"")))}),F=n(402),B=new u.a,U=Object(b.b)(function(e,t){return{showPianoRoll:e.sequencer.showPianoRoll,bottomHeight:e.arrangement.bottomHeight,currentSoundInList:e.selector.currentSoundInList}},function(e){return{setCurrentSoundInList:function(t){return e(Object(o.Eb)(t))},setShowingSoundList:function(t){return e(Object(o.vg)(t))}}})(function(e){var t=e.setCurrentSoundInList,n=e.setShowingSoundList,o=e.source,s=e.resultsCounter,u=void 0===s?0:s,l=e.sequencerEngine,d=e.odd,f=e.alone,m=e.resultsSize,p=(e.i,e.showPianoRoll),b=e.scrollRef,v=e.bottomHeight,h=e.isPack,g=e.packToSearch,k=e.isUnsourced,E=e.setSearchTerm,O=e.currentSoundInList,j=e.sourceToSearch,S=e.loadEverything,y=e.setPackToSearch,w=o.coverArtHash,C=o.results,N=o.videoId,q=o.tag,x=Object(a.useState)([]),T=Object(r.a)(x,2),M=(T[0],T[1],Object(a.useState)(f||S)),P=Object(r.a)(M,2),R=P[0],D=P[1],A=Object(a.useRef)(void 0),I=Object(F.a)(A,9,f,void 0,void 0,void 0,j).size;Object(a.useEffect)(function(){},[I]),Object(a.useEffect)(function(){return n(!0),function(){t(void 0),n(!1)}},[]);var z={};!j&&w?z.backgroundImage="url("+i.a.getHashUrl(w)+")":!j&&N?z.backgroundImage="url(https://img.youtube.com/vi/"+N+"/1.jpg)":q&&(z.backgroundColor=B.getColorForHash(q));var L="source-results-thumb";q&&(L+=" unsourced");var U="source-results";d&&(U+=" odd"),f&&(U+=" alone");var G={};f&&(G.height=window.innerHeight-233),p&&(G.height-=v-130);var V=C[0].releaseName,W=C[0].artistName;return c.a.createElement("div",{style:G,ref:A,className:U},c.a.createElement("div",{onClick:function(){return D(!0)},className:L,style:z},c.a.createElement("span",null,q)),c.a.createElement("div",{className:"sample-options"},!j&&V?c.a.createElement("div",{className:"release-name"},W," - ",V):"",C.slice(0,void 0!==m?m:I).map(function(e,t){return c.a.createElement(H,{isUnsourced:k,setPackToSearch:y,scrollRef:b,isCurrent:(!g||h)&&u+t===O,isNext:u+t===O+1,number:u+t,setSearchTerm:E,autoLoad:R,source:w||N||q,sequencerEngine:l,key:t,result:e})})))}),G=n(2781),V=Object(b.b)(function(e,t){return{}},function(e){return{}})(function(e){var t=e.source,n=e.sequencerEngine;return c.a.createElement("div",null,c.a.createElement("div",{className:"unsourced-header"},"Edit Source Information"),c.a.createElement(G.a,{show:!0,samples:t.results}),c.a.createElement(U,{alone:!0,sequencerEngine:n,source:t}))}),W=n(1185),Z=n(10),X=n(1131),K=(n(1133),Object(b.b)(function(e,t){return{showPianoRoll:e.sequencer.showPianoRoll,bottomHeight:e.arrangement.bottomHeight,currentSoundInList:e.selector.currentSoundInList}},function(e){return{}})(function(e){var t=e.setPackToSearch,n=e.day,o=e.sequencerEngine,s=(e.showPianoRoll,e.bottomHeight,e.currentSoundInList),i=n.discogs,u=n.blockNumber,l=n.youtube,d=n.unsourced,f=Object(a.useState)(void 0),m=Object(r.a)(f,2),p=(m[0],m[1]);Object(a.useEffect)(function(){Object(X.a)(u).then(p)},[u]);var b=Object(a.useRef)(void 0),v=Object(F.a)(b,window.innerHeight/770*30,!0,void 0,void 0,void 0,void 0,s).size,h=[];for(var g in d)h=[].concat(Object(Z.a)(h),Object(Z.a)(d[g]));var k=0,E=0,O=[];for(var j in i){var S=v-E;S>0&&(O.push(c.a.createElement(U,{odd:++k%2===0,key:k,resultsCounter:E,setPackToSearch:t,scrollRef:b,resultsSize:S,sequencerEngine:o,source:{results:i[j],coverArtHash:j}})),E+=Math.min(S,i[j].length))}for(var y in l){var w=v-E;w>0&&(O.push(c.a.createElement(U,{odd:++k%2===0,key:k,scrollRef:b,setPackToSearch:t,resultsCounter:E,resultsSize:w,sequencerEngine:o,source:{results:l[y],videoId:y}})),E+=Math.min(w,l[y].length))}for(var C in d){var N=v-E;N>0&&(O.push(c.a.createElement(U,{odd:++k%2===0,key:k,setPackToSearch:t,scrollRef:b,resultsSize:N,isUnsourced:!0,resultsCounter:E,sequencerEngine:o,source:{results:d[C],tag:C}})),E+=Math.min(N,d[C].length))}var q={height:window.innerHeight-222};return c.a.createElement("div",{style:q,ref:b,className:"day-results"},c.a.createElement("div",{className:"date"},O))})),Y=n(467);function _(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return $(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return $(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var c,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,c=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw c}}}}function $(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var J=new u.a,Q=Object(b.b)(function(e,t){return{showPianoRoll:e.sequencer.showPianoRoll,bottomHeight:e.arrangement.bottomHeight}},function(e){return{}})(function(e){e.showPianoRoll,e.bottomHeight;var t,n=e.results,r=e.isPack,o=e.sequencerEngine,s=(e.searchTerm,e.setSearchTerm),i=e.sourceToSearch,u=e.packToSearch,l=e.setPackToSearch,d=e.loadEverything,f=e.scrollRef,m=Object(a.useRef)(void 0),p=[],b=Object(F.a)(f,30,!0).size,v=0,h=0,g=[],k=_(n);try{for(k.s();!(t=k.n()).done;){var E=t.value,O=E.discogs,j=(E.date,E.youtube),S=E.unsourced,y=[];for(var w in S)y=[].concat(Object(Z.a)(y),Object(Z.a)(S[w]));for(var C in O){var N=b-h;N>0&&(p.push(c.a.createElement(U,{resultsCounter:h,packToSearch:u,isPack:r,loadEverything:d,scrollRef:f,sourceToSearch:i,odd:++v%2===0,setPackToSearch:l,setSearchTerm:s,key:v,resultsSize:N,sequencerEngine:o,source:{results:O[C],coverArtHash:C}})),h+=Math.min(N,O[C].length)),g=[].concat(Object(Z.a)(g),Object(Z.a)(O[C]))}for(var q in j){var x=b-h;x>0&&(p.push(c.a.createElement(U,{odd:++v%2===0,scrollRef:f,resultsCounter:h,setPackToSearch:l,packToSearch:u,isPack:r,loadEverything:d,key:v,sourceToSearch:i,resultsSize:x,setSearchTerm:s,sequencerEngine:o,source:{results:j[q],videoId:q}})),h+=Math.min(x,j[q].length)),g=[].concat(Object(Z.a)(g),Object(Z.a)(j[q]))}for(var T in S){var M=b-h;M>0&&(p.push(c.a.createElement(U,{odd:++v%2===0,scrollRef:f,setPackToSearch:l,loadEverything:d,key:v,packToSearch:u,isPack:r,resultsCounter:h,setSearchTerm:s,resultsSize:M,sourceToSearch:i,sequencerEngine:o,source:{results:S[T],tag:T}})),h+=Math.min(M,S[T].length)),g=[].concat(Object(Z.a)(g),Object(Z.a)(S[T]))}}}catch(A){k.e(A)}finally{k.f()}var P=g[0]&&g[0].releaseName,R=g[0]&&g[0].artistName,D="list-results";return(r||i&&P)&&(D+=" showing-source"),c.a.createElement("div",{ref:m,className:D},i&&P?c.a.createElement("div",{className:"source-release-name"},R," - ",P):"",r?c.a.createElement("div",{className:"source-release-name"},c.a.createElement("div",{style:{backgroundColor:J.getColorForHash(u.title)},className:"pack-thumb"}),u.title):"",p)}),ee=n(201),te=n(2710),ne=n(2571),re=Object(b.b)(function(e,t){return{showPianoRoll:e.sequencer.showPianoRoll,currentTagInList:e.selector.currentTagInList,bottomHeight:e.arrangement.bottomHeight}},function(e){return{setCurrentTagInList:function(t){return e(Object(o.Gb)(t))}}})(function(e){var t=e.children,n=e.sequencerEngine,o=e.onClickSource,s=e.onClickDay,i=e.searchTerm,u=e.displayOption,l=e.showPianoRoll,d=e.setPackToSearch,f=e.packToSearch,m=e.bottomHeight,p=e.guildId,b=e.groupBy,v=e.resultsElement,h=e.setCurrentTagInList,g=e.currentTagInList,k=e.filterFavorites,E=e.setSourceToSearch,O=Object(a.useState)([]),j=Object(r.a)(O,2),S=j[0],y=j[1],w=Object(a.useState)(0),C=Object(r.a)(w,2),N=C[0],q=C[1],x=Object(a.useRef)(""),T=Object(a.useState)(!1),M=Object(r.a)(T,2),P=M[0],R=M[1],D=Object(a.useRef)(void 0),A=b?window.innerHeight/500*50:15,I=Object(F.a)(D,""!==i?Math.round(window.innerHeight/500*10):Math.round(A),!0,i,b,void 0,g),z=I.size,L=I.scrollPosition;Object(a.useEffect)(function(){!v&&D.current&&D.current.scrollTo(0,L.current)},[v]),Object(a.useEffect)(function(){var e=i+p+b+N+k;if(e!==x.current){0===N&&R(!0),x.current=e;var t=b?window.innerHeight/500*50:15;Object(ne.c)(t,i,p,b,N,k).then(function(e){0==Math.floor(N)?(y(e),h(0)):Math.floor(N)>0&&e.length>0&&y([].concat(Object(Z.a)(S),Object(Z.a)(e))),R(!1)})}},[y,n,R,N,S,k,i]),Object(a.useEffect)(function(){q(0),y([])},[p,b,i,q,y]),Object(a.useEffect)(function(){var e=A;q(Math.max(0,z-e))},[z,q]);var H={height:window.innerHeight-223};l&&(H.height-=m-150);var B=void 0;if(u===Y.c){if(P)return c.a.createElement(ee.a,{text:"Searching sounds"});B=c.a.createElement(Q,{setPackToSearch:d,packToSearch:f,scrollRef:D,searchTerm:i,results:S,sequencerEngine:n})}return c.a.createElement("div",null,v?c.a.createElement("div",null,t,v):"",c.a.createElement("div",{style:H,ref:D,id:"sound-grid",className:v?"hide sound-grid no-select":"no-select sound-grid"},t,P||0!==S.length?"":c.a.createElement("div",{className:"no-results"},"No Results Found"),P?c.a.createElement(ee.a,{text:"Searching sounds"}):B||S.slice(0,z).map(function(e,t){return c.a.createElement(te.a,{key:"day-"+t,filterFavorites:k,setPackToSearch:d,scrollRef:D,number:t,isCurrent:!f&&g===t,onClickSource:o,searchTerm:i,setSourceToSearch:E,groupBy:b,onClickDay:s,results:e})})))}),ae=(n(2641),n(2711),n(2804),n(2805),Object(b.b)(function(e,t){return{showPianoRoll:e.sequencer.showPianoRoll,bottomHeight:e.arrangement.bottomHeight,guildId:e.guilds.selectedGuild?e.guilds.selectedGuild.guildId:0}},function(e){return{}})(function(e){var t=e.showPianoRoll,n=e.bottomHeight,o=e.sourceToSearch,s=e.setPackToSearch,i=e.sequencerEngine,u=e.guildId,l=Object(a.useRef)(void 0),d=Object(a.useState)([]),f=Object(r.a)(d,2),m=f[0],p=f[1];Object(a.useEffect)(function(){Object(ne.c)(50,"",u,Y.d,0,!1,o).then(function(e){e.length>0?p(e):setTimeout(function(){Object(ne.c)(50,"",u,Y.d,0,!1,o).then(p)},500)})},[o,p]);var b={height:window.innerHeight-263};return t&&(b.height-=n-150),c.a.createElement("div",{ref:l,style:b,className:"source-to-search-results"},c.a.createElement(Q,{setPackToSearch:s,scrollRef:l,sourceToSearch:o,size:1e3,searchTerm:"",results:m,sequencerEngine:i}))})),ce=Object(b.b)(function(e,t){return{showPianoRoll:e.sequencer.showPianoRoll,bottomHeight:e.arrangement.bottomHeight,guildId:e.guilds.selectedGuild?e.guilds.selectedGuild.guildId:0}},function(e){return{}})(function(e){var t=e.showPianoRoll,n=e.bottomHeight,o=e.packToSearch,s=e.sequencerEngine,i=e.setPackToSearch,u=e.guildId,l=Object(a.useRef)(void 0),d=Object(a.useState)([]),f=Object(r.a)(d,2),m=f[0],p=f[1];Object(a.useEffect)(function(){Object(ne.c)(50,"",u,Y.d,0,!1,void 0,void 0,o).then(function(e){e.length>0?p(e):setTimeout(function(){Object(ne.c)(50,"",u,Y.d,0,!1,void 0,void 0,o).then(p)},500)})},[o,p]);var b={height:window.innerHeight-263};return t&&(b.height-=n-150),c.a.createElement("div",{ref:l,style:b,className:"source-to-search-results"},c.a.createElement(Q,{setPackToSearch:i,scrollRef:l,packToSearch:o,isPack:!0,size:1e3,searchTerm:"",results:m,sequencerEngine:s}))});t.a=Object(b.b)(function(e,t){return{guildId:e.guilds.selectedGuild?e.guilds.selectedGuild.guildId:0}},function(e){return{setSearchText:function(t){return e(Object(o.Fe)(t))}}})(function(e){var t=e.defaultGroupBy,n=void 0===t?Y.d:t,o=e.sequencerEngine,s=e.guildId,i=e.quickAddSearchText,u=e.setSearchText,l=Object(a.useState)({}),d=Object(r.a)(l,2),f=(d[0],d[1],Object(a.useState)((new Date).getMonth())),m=Object(r.a)(f,2),p=(m[0],m[1],Object(a.useState)(void 0)),b=Object(r.a)(p,2),v=b[0],h=b[1],g=Object(a.useState)(Y.b),k=Object(r.a)(g,2),E=k[0],O=k[1],j=Object(a.useState)(n),S=Object(r.a)(j,2),y=S[0],w=S[1],C=Object(a.useState)(void 0),N=Object(r.a)(C,2),q=N[0],x=N[1],T=Object(a.useState)(void 0),M=Object(r.a)(T,2),P=M[0],R=M[1],D=Object(a.useState)(void 0),A=Object(r.a)(D,2),I=A[0],z=A[1],L=Object(a.useState)(i),H=Object(r.a)(L,2),F=H[0],B=H[1],G=Object(a.useState)(!1),Z=Object(r.a)(G,2),X=Z[0],_=Z[1],$=Object(a.useState)(void 0),J=Object(r.a)($,2),Q=J[0],ee=J[1];Object(a.useEffect)(function(){return window.addEventListener("keydown",te),function(){return window.removeEventListener("keydown",te)}},[h,x,ee,R,O,E]);var te=Object(a.useCallback)(function(e){"ArrowLeft"===e.key?le():e.key},[h,x,ee,R,O,E]);Object(a.useEffect)(function(){R(void 0),z(void 0)},[F,w,R,z]),Object(a.useEffect)(function(){""!==F||X||O(Y.b)},[F,X,O]);var ne=Object(a.useCallback)(function(e,t){if(e.metaKey)return h(void 0),void ee(t);h(void 0),x(t)},[h,x]),oe=Object(a.useCallback)(function(e,t){x(void 0),h(e)},[B,x,h,y]),se=void 0,ie="",ue=!1,le=Object(a.useCallback)(function(){h(void 0),x(void 0),ee(void 0),R(void 0),z(void 0)},[h,x,ee,R,z]);(v||q||Q||P||I)&&(ue=!0,ie=c.a.createElement("div",{onClick:le,className:"selector-back-button"}),se=Q?c.a.createElement(V,{sequencerEngine:o,source:Q}):P?c.a.createElement(ae,{setPackToSearch:z,sourceToSearch:P,sequencerEngine:o}):I?c.a.createElement(ce,{setPackToSearch:z,packToSearch:I,sequencerEngine:o}):q?c.a.createElement(U,{setPackToSearch:z,alone:!0,sequencerEngine:o,source:q}):c.a.createElement(K,{setPackToSearch:z,sequencerEngine:o,day:v})),Object(a.useEffect)(function(){B(i),x(void 0),h(void 0)},[i,B,O,x,h]),Object(a.useEffect)(function(){h(void 0),x(void 0)},[E]);var de=Object(a.useCallback)(function(e){h(void 0),x(void 0),R(void 0),B(e),u(e)},[B,h,x,R]);return Object(a.useEffect)(function(){de(i)},[s,B,h,x,R]),c.a.createElement("div",{className:ue?"new-selector has-back":"new-selector"},c.a.createElement("div",{className:"selector-inner"},c.a.createElement(re,{groupBy:y,setPackToSearch:z,packToSearch:I,displayOption:E,searchTerm:F,filterFavorites:X,setSourceToSearch:R,onClickSource:ne,onClickDay:oe,guildId:s,resultsElement:se,sequencerEngine:o},c.a.createElement(W.a,{sourceToSearch:P,setDisplayOption:O,displayOption:E,groupBy:y,setGroupBy:w,onChange:de,setFilterFavorites:_,filterFavorites:X},c.a.createElement("div",{className:"search-and-back"},ie)))))})},2775:function(e,t,n){"use strict";var r=n(6),a=n(0),c=n.n(a),o=n(9),s=n(12),i=n(68),u=new(n(31).a),l=Object(s.b)(function(e,t){return{}},function(e){return{setPresetDragging:function(t){return e(Object(o.ye)(t))},setLoadingText:function(t){return e(Object(o.gd)(t))}}})(function(e){var t=e.sequencerEngine,n=e.preset,r=e.setPresetDragging,a=e.setLoadingText,o={backgroundColor:u.getColorForHash(i.d[n.instrumentType])};return c.a.createElement("div",{draggable:!0,onDragOver:function(e){return e.preventDefault()},onDragStart:function(){return r(n)},className:"sample-option"},c.a.createElement("div",{onClick:function(){a("Loading Preset ("+n.title+")"),t.loadPreset(n,!0).then(function(e){return a(void 0)})},className:"dot",style:o}),c.a.createElement("div",{className:"wave-and-name"},c.a.createElement("div",{className:"name-and-tags"},c.a.createElement("div",{className:"sample-name"},n.title),c.a.createElement("div",{style:o,className:"instrument-type"},i.d[n.instrumentType]),n.tags.map(function(e){return c.a.createElement("div",{className:"tag-option"},e)})),c.a.createElement("div",{className:"waveform-and-rating"})))}),d=Object(s.b)(function(e,t){return{}},function(e){return{}})(function(e){var t=e.source,n=e.sequencerEngine;e.odd,e.alone,e.resultsSize,e.i,e.showPianoRoll,e.bottomHeight;return c.a.createElement("div",{className:"source-results"},c.a.createElement("div",{className:"sample-options preset-options"},t.results.map(function(e){return c.a.createElement(l,{sequencerEngine:n,preset:e})})))}),f=n(10),m=n(1131),p=n(1133),b=n(402),v=Object(s.b)(function(e,t){return{showPianoRoll:e.sequencer.showPianoRoll,bottomHeight:e.arrangement.bottomHeight}},function(e){return{}})(function(e){var t=e.day,n=e.sequencerEngine,o=(e.showPianoRoll,e.bottomHeight,Object(a.useRef)(void 0)),s=t.unsourced,i=t.blockNumber,u=Object(b.a)(o,24,!0).size,l=Object(a.useState)(void 0),v=Object(r.a)(l,2),h=v[0],g=v[1];Object(a.useEffect)(function(){Object(m.a)(i).then(g)},[i]);var k=[];for(var E in s)k=[].concat(Object(f.a)(k),Object(f.a)(s[E]));var O={height:window.innerHeight-212},j=0,S=[],y=u-0;return y>0&&k.length>0&&S.push(c.a.createElement(d,{odd:++j%2===0,key:j,resultsSize:y,sequencerEngine:n,source:{results:k,tag:"Unsourced"}})),c.a.createElement("div",{style:O,ref:o,className:"day-results"},c.a.createElement("div",{className:"date"},c.a.createElement("div",{className:"day-date"},h?Object(p.a)(h):""),S))}),h=n(2710),g=n(201),k=0,E=Object(s.b)(function(e,t){return{showPianoRoll:e.sequencer.showPianoRoll,bottomHeight:e.arrangement.bottomHeight}},function(e){return{}})(function(e){var t=e.onClickSource,n=e.searchTerm,o=e.onClickDay,s=e.getContent,i=(e.searchTerms,e.showPianoRoll),u=e.bottomHeight,l=Object(a.useState)([]),d=Object(r.a)(l,2),f=d[0],m=d[1],p=Object(a.useState)(!1),v=Object(r.a)(p,2),E=v[0],O=v[1],j=Object(a.useRef)(void 0),S=Object(b.a)(j,30,!0).size;Object(a.useEffect)(function(){var e=++k;O(!0),s(n).then(function(t){e===k&&(m(t),O(!1))})},[n,m,O]);var y={height:window.innerHeight-233};return i&&(y.height-=u-150),c.a.createElement("div",{ref:j,style:y,className:"sound-grid"},E?c.a.createElement(g.a,{text:"Searching"}):f.slice(0,S).map(function(e,n){return c.a.createElement(h.a,{key:"day-"+n,onClickSource:t,onClickDay:o,results:e})}))}),O=n(1185),j=n(8),S=n(2),y=n.n(S),w=n(13),C=n(412),N=n(2571),q=n(821),x=n(39),T=n(29);n(30);function M(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return P(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return P(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var c,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,c=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw c}}}}function P(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var R=new C.a,D=function(){var e=Object(w.a)(y.a.mark(function e(t){var n,r,a,c,o,s,i,u;return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=new x.a(R.contractAddress).from(T.H).select("user").select("encryptedName").select("contentHash").select("encryptedContentKey").select("publicKey").select("guildId").where("guildId",0),e.t0=q.a,e.next=4,n.executeQuery();case 4:return e.t1=e.sent,e.next=7,(0,e.t0)(e.t1,0);case 7:return r=e.sent,a=r.map(function(e){return e.contentHash}),e.next=11,A(a);case 11:return c=e.sent,e.next=14,I(a);case 14:return o=e.sent,s=z(r,c,o),i=Object(N.b)(L(t,s)),u=Object(N.d)(i,t),e.next=20,Object(N.a)(u);case 20:return e.abrupt("return",e.sent);case 21:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),A=function(){var e=Object(w.a)(y.a.mark(function e(t){var n,r,a,c,o,s,i;return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=new x.a(R.contractAddress).from(T.U).select("contentHash").select("tag").whereIn("contentHash",t),e.next=3,n.executeQuery();case 3:r=e.sent,a={},c=M(r);try{for(c.s();!(o=c.n()).done;)(s=o.value).contentHash in a||(a[s.contentHash]=[]),a[s.contentHash].push(s.tag)}catch(u){c.e(u)}finally{c.f()}for(i in a)a[i]=Array.from(new Set(a[i]));return e.abrupt("return",a);case 9:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),I=function(){var e=Object(w.a)(y.a.mark(function e(t){var n;return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=new x.a(R.contractAddress).from(T.S).select("contentHash").select("instrumentType").whereIn("contentHash",t),e.next=3,n.executeQuery();case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),z=function(e,t,n){var r,a={},c=M(e);try{for(c.s();!(r=c.n()).done;){var o=r.value;a[o.contentHash]=Object(j.a)({},o,{tags:t[o.contentHash]||[]})}}catch(p){c.e(p)}finally{c.f()}var s,i=M(n);try{for(i.s();!(s=i.n()).done;){var u=s.value;a[u.contentHash]=Object(j.a)({},a[u.contentHash],u)}}catch(p){i.e(p)}finally{i.f()}var l,d=[],f=M(e);try{for(f.s();!(l=f.n()).done;){var m=l.value;d.push(a[m.contentHash])}}catch(p){f.e(p)}finally{f.f()}return d},L=function(e,t){return""===e?t:(e=e.toLowerCase(),t.filter(function(t){return t.tags.some(function(t){return t.toLowerCase().includes(e)})||t.title.toLowerCase().includes(e)}))};t.a=Object(s.b)(function(e,t){return{}},function(e){return{}})(function(e){var t=e.sequencerEngine,n=Object(a.useState)(void 0),o=Object(r.a)(n,2),s=o[0],i=o[1],u=Object(a.useState)(void 0),l=Object(r.a)(u,2),f=l[0],m=l[1],p=Object(a.useState)(""),b=Object(r.a)(p,2),h=b[0],g=b[1],k=Object(a.useState)(!0),j=Object(r.a)(k,2),S=j[0],y=j[1],w=Object(a.useState)(!0),C=Object(r.a)(w,2),N=C[0],q=C[1],x="",T="";(s||f)&&(x=c.a.createElement("div",{onClick:function(){i(void 0),m(void 0)},className:"selector-back-button"}),T=f?c.a.createElement(d,{alone:!0,sequencerEngine:t,source:f}):c.a.createElement(v,{sequencerEngine:t,day:s}),T=[c.a.createElement("div",{className:"results-toolbar"},c.a.createElement("div",{className:"settings-info"},"Load preset with"),c.a.createElement("div",{onClick:function(){return y(!S)},className:S?"preset-setting selected":"preset-setting"},"FX"),c.a.createElement("div",{onClick:function(){return q(!N)},className:N?"preset-setting selected":"preset-setting"},"Mods")),T]);var M=Object(a.useCallback)(function(e){i(void 0),m(void 0),g(e)},[g]),P=Object(a.useCallback)(function(e){i(void 0),m(e)},[i,m]),R=Object(a.useCallback)(function(e){m(void 0),i(e)},[m,i]);return c.a.createElement("div",{className:"new-selector presets"},c.a.createElement("div",{className:"search-and-back"},x," ",c.a.createElement(O.a,{onChange:M})),T||c.a.createElement("div",{className:"selector-inner"},c.a.createElement(E,{onClickSource:P,onClickDay:R,getContent:D,searchTerm:h,sequencerEngine:t})))})},2777:function(e,t,n){"use strict";var r=n(20),a=n(0),c=n.n(a),o=n(1408),s=n(1407),i=n(9),u=n(502),l=function(e,t,n,r,c){Object(a.useEffect)(function(){setTimeout(function(){!function(){var t=r.current,a=Object(u.c)(e),o=a.minTop,s=a.minLeft,l=Object(u.b)(e),d=l.maxTop,f=l.maxLeft;if(o-=100,s-=100,n){var m=n.state.spatial,p=m.edgesSize,b=m.edgesPadding,v={width:f-s,height:d-o};v.width===p.width&&v.height===p.height||n.dispatch(Object(i.Ub)(v.width+300,v.height+300)),b.x===s&&b.y===o||n.dispatch(Object(i.Tb)(s,o))}if(f<t.width||d<t.height){if(!(f>t.width||d>t.height))return;var h={width:Math.max(t.width,f),height:Math.max(t.height,d)};r.current=h,c(h)}}()},300)},[])},d=(n(1148),n(187)),f=(n(2685),n(91)),m=n(318),p=n(796),b=n(6),v=n(12);window.scr=45;var h=Object(v.b)(function(e,t){return{size:e.windows.moduleSizes[t.subSequence.id],mainScrollRef:e.spatial.mainScrollRef,sidebarsShowing:e.spatial.sidebarsShowing,showingSubpatch:e.zobject.viewableSubPatches.length>0,editorPadding:e.spatial.editorPadding,edgesPadding:e.spatial.edgesPadding,edgesSize:e.spatial.edgesSize,showPadSequencer:e.spatial.showPadSequencer,uxLocked:e.zobject.uxLocked}},function(e,t){return{setEditorPadding:function(t,n){return e(Object(i.Vb)(t,n))},setSize:function(n){return e(Object(i.yd)(t.subSequence.id,n))}}})(function(e){var t=e.editorRef,n=e.setEditorPadding,r=e.uxLocked,c=e.edgesPadding,o=e.editorPadding,s=e.showingSubpatch,i=e.sidebarsShowing,u=e.mainScrollRef,l=e.size,d=e.setSize,f=e.sizeRef,m=e.containerRef,p=e.isExplore,v=e.collapsed,h=e.showPadSequencer,g=e.edgesRef,k=e.edgesSize,E=Object(a.useState)(l),O=Object(b.a)(E,2),j=O[0],S=O[1],y=Object(a.useRef)(void 0),w=Object(a.useRef)(void 0),C=Object(a.useRef)(void 0),N=Object(a.useRef)(void 0);Object(a.useEffect)(function(){t.current&&(h?(t.current.style.paddingTop="0px",t.current.style.paddingLeft="0px"):(t.current.style.paddingTop=o.y+"px",t.current.style.paddingLeft=o.x+"px"))},[h,o]),Object(a.useEffect)(function(){g.current&&(g.current.style.width=k.width+"px",g.current.style.height=k.height+"px",g.current.style.minWidth=k.width+"px",g.current.style.minHeight=k.height+"px",g.current.style.left=c.x,g.current.style.top=c.y)},[c,k]),Object(a.useEffect)(function(){S(l)},[l,S]),Object(a.useEffect)(function(){return u&&u.current?(u.current.addEventListener("mousewheel",x,{passive:!1}),u.current.addEventListener("mousemove",q),function(){u&&u.current&&(u.current.removeEventListener("mousewheel",x,{passive:!1}),u.current.removeEventListener("mousemove",q))}):function(){return 0}},[d,r,o,s,u,i,j,S]);var q=function(e){N.current?(N.current.x=e.clientX,N.current.y=e.clientY):N.current={x:e.clientX,y:e.clientY}},x=Object(a.useCallback)(function(e){if(window.killScrolling||r)e.preventDefault();else{if(!u||!u.current)return!1;if(e.preventDefault(),T(e)){var t=u.current,a=t.scrollTop,c=t.scrollLeft,s=e.deltaX,d=e.deltaY,p=c+s,b=a+d,v=i?480:0,h=i?45:0,g=j?j.width:400,k=j?j.height:400;if(!((l={width:Math.max(g,window.innerWidth-v),height:Math.max(k,window.innerHeight-h)}).width<200||l.height<200)){var E={width:s+l.width,height:d+l.height};if(p<0||b<0){var O=o.x-s,y=o.y-d;u.current.style.paddingLeft=O+"px",u.current.style.paddingTop=y+"px",n(O,y)}return m.current.style.width=E.width+window.scr+"px",m.current.style.height=E.height+window.scr+"px",S(E),f.current=E,window.mainScrollRef=u.current,u.current.scrollTo(p,b),window.lastScrollTime=(new Date).getTime(),!1}}}},[o,r,j,S,s,i,u]),T=Object(a.useCallback)(function(e){var t=e.deltaX,n=e.deltaY,r=(e.wheelDeltaX,e.wheelDeltaY);if(Math.max(Math.abs(t),Math.abs(n))<20&&Math.abs(r)>110){var a=window._scale||1,c=1;if(c=r>0?a*r/117:Math.abs(a/(r/117)),window._scale=Math.max(.3,Math.min(1,c)),!y.current||(new Date).getTime()-y.current>500){var o=m.current.getBoundingClientRect(),s=u.current,i=s.scrollLeft,l=s.scrollTop;w.current={x:(N.current.x-o.left)/a,y:(N.current.y-o.top)/a},C.current={x:i/a,y:l/a}}w.current.x,w.current.y,C.current.x,C.current.y;window._scale,window._scale,y.current=(new Date).getTime(),1===window._scale?m.current.style.transform="none":m.current.style.transform="scale("+window._scale+")";var d=u.current;return d.scrollLeft,d.scrollTop,!1}return!0},[u]);return Object(a.useEffect)(function(){p||v?m.current.style={}:j&&(m.current.style.width=j.width+window.scr+"px",m.current.style.height=j.height+window.scr+"px")},[v,p,j]),""}),g=n(10),k=(n(2776),n(1141)),E=n(2718),O=n(2720),j=n(223),S=n(1146),y=(n(1145),n(2721)),w=(n(1165),n(2784)),C=(n(2722),n(2602),n(518)),N=(n(2598),n(105),n(255),n(221),n(136),n(2582)),q=(n(2723),Object(a.memo)(function(e){var t=e.dropdownPosRef,n=e.isExplore,u=(e.isLoading,e.presentationMode),b=e.doneLoading,v=e.innerRef,q=e.children,x=e.edgesRef,T=e.setSelection,M=e.setScale,P=e.setSize,R=(e.showEffects,e.pulledEffects,e.setPulledEffects,e.setSelectedPulledElements,e.toggled,e.setSelectedTrack,e.subSequence),D=e.collapsed,A=e.zobjects,I=(e.setSelectedZObject,e.selection,e.scale),z=e.elements,L=e.editorRef,H=Object(C.a)({ref:v}),F=H.sizeRef,B=H.ordering,U=H.setOrdering;l(z,0,R.sequencerEngine,F,P);var G=Object(j.a)({containerRef:v,scale:I}).getXY,V=(Object(S.a)({elements:z}).getSelection,Object(a.useCallback)(function(e){var t=G(e),n=t.x,r=t.y;e.stopPropagation(),e.preventDefault(),R.createZObject(n,r)},[R])),W=Object(d.a)(V),Z=R.tracks,X=void 0===Z?[]:Z;X=X.filter(function(e){return n||void 0===e.pad});var K=function(e){var t=e.subSequence,n=e.dropdownPosRef,r=Object(a.useCallback)(function(e,r,a){e||r||(e=n.current.x,r=n.current.y),t.createZObject(e,r,a)},[t]),c=Object(a.useCallback)(function(e,r){e||r||(e=n.current.x,r=n.current.y),t.createZMessage(e,r)},[t]),o=Object(a.useCallback)(function(e,r){e||r||(e=n.current.x,r=n.current.y),t.createZMessage(e,r,f.c)},[t]),s=Object(a.useCallback)(function(e,r){e||r||(e=n.current.x,r=n.current.y),t.createZMessage(e,r,f.a)},[t]),i=Object(a.useCallback)(function(e,r){e||r||(e=n.current.x,r=n.current.y),t.createZObject(e,r,"toggle")},[t]);return{createPad:Object(a.useCallback)(function(e,r){var a=t.createPad();e||r||(e=n.current.x,r=n.current.y),a.x=e,a.y=r,a.zObject.windowPosition={x:e,y:r},console.log("create pad called=",e,r,a)},[t]),createToggle:i,createZMessage:c,createZNumber:o,createZObject:r,createButton:s}}({subSequence:R,dropdownPosRef:t}),Y=K.createToggle,_=K.createPad,$=K.createZObject,J=K.createZMessage,Q=K.createButton,ee=K.createZNumber,te=function(e){var t=e.subSequence,n=e.setSelection,r=e.getXY,c=e.createToggle,o=e.createSequencer,s=e.createPad,u=e.createZObject,l=e.createZMessage,d=e.createZNumber,f=e.createButton;return Object(a.useCallback)(function(e){var a=r(e),m=a.x,p=a.y,b=t.sequencerEngine,v=b.state,h=(v.tracks.trackDragging,v.zobject.zobjectTypeDragging);if(h){switch(h){case"zobject":u(m,p);break;case"zmessage":l(m,p);break;case"zpad":s(m,p);break;case"zbutton":f(m,p);break;case"ztoggle":c(m,p);break;case"znumber":d(m,p);break;case"sequencer":o(m,p);break;case"zcomment":u(m,p,"comment");break;default:var k=h.split(" "),E=parseInt(k[1]),O=b.state.effects.pulledEffects,j=void 0;if("MODULE_ENVELOPE"===k[0]){var S=t.envelopes.find(function(e){return e.number===E});console.log("envelope =",S),j={type:"MODULE_ENVELOPE",id:S.id,subType:S.number,instrument:S}}else{var y=t.lfos.find(function(e){return e.lfo.number===E});j={type:"LFO",id:y.id,effect:y,instrument:y}}b.dispatch(Object(i.Th)(j.id,{x:m,y:p})),b.dispatch(Object(i.De)([].concat(Object(g.a)(O),[j])))}b.dispatch(Object(i.ki)(void 0)),n&&n(void 0)}},[t])}({subSequence:R,createToggle:Y,createPad:_,createZObject:$,createZMessage:J,createButton:Q,createZNumber:ee,getXY:G,setSelection:T});if(Object(a.useEffect)(function(){return L.current?L.current.addEventListener("drop",te):v.current.addEventListener("drop",te),function(){L.current?L.current.removeEventListener("drop",te):v.current&&v.current.removeEventListener("drop",te)}},[]),!R||!R.tracks||!b)return[];A||(A=R.zObjects);var ne=c.a.createElement("div",null,c.a.createElement(N.a,{scale:I,sizeRef:F,setSize:P,ordering:B,setOrdering:U,playhead:!0,elements:z,containerRef:v,noWrapper:!0,sequencerEngine:R.sequencerEngine,subSequence:R}),c.a.createElement(s.a,{subSequence:R}),c.a.createElement(o.a,{subSequence:R}),!n&&A.map(function(e){return c.a.createElement(m.a,{key:e.id,scale:I,sequencerEngine:R.sequencerEngine,ordering:B,setOrdering:U,setSize:P,sizeRef:F,elements:z,containerRef:v,zobject:e})}),!n&&R.zMessages.map(function(e){return c.a.createElement(p.a,{key:e.id,scale:I,sequencerEngine:R.sequencerEngine,ordering:B,setOrdering:U,setSize:P,sizeRef:F,elements:z,containerRef:v,zmessage:e})}),!n&&R.tracks.map(function(e){return c.a.createElement(E.a,{scale:I,ordering:B,setOrdering:U,setSize:P,sizeRef:F,elements:z,containerRef:v,track:e})}),!n&&R.zObjects.filter(function(e){return"pad"===e.name}).filter(function(e){return e.effect.pad}).map(function(e){return e.effect.pad}).filter(function(e){return e.effectRack}).map(function(e){return c.a.createElement(y.a,{scale:I,ordering:B,setOrdering:U,setSize:P,sizeRef:F,elements:z,containerRef:v,pad:e})}),!n&&R.sequencers.map(function(e){return c.a.createElement(w.a,{ordering:B,setOrdering:U,scrollContainer:v,scale:I,setSize:P,sizeRef:F,elements:z,sequencer:e})})),re=D?"grids collapsed":"grids not-collapsed";return u&&(re+=" presentation-mode"),c.a.createElement("div",{onClick:x&&x.current?function(){return 0}:W,className:re},c.a.createElement(O.a,{subSequence:R}),c.a.createElement(h,Object(r.a)({scale:I,setScale:M,edgesRef:x,subSequence:R,editorRef:L,setSize:P,sizeRef:F,isExplore:n,collapsed:D,containerRef:v},"subSequence",R)),c.a.createElement("div",{ref:v,style:{width:"1400px",height:"1400px"},className:"grids-inner"},q,D?c.a.createElement(k.a,{subSequence:R}):ne))}));t.a=Object(v.b)(function(e,t){return{presentationMode:t.subSequence.presentationMode,doneLoading:e.sequencer.completelyDoneLoading,pulledEffects:e.effects.pulledEffects,pulledSequencers:e.pads.sequencers,numTracks:t.subSequence.tracks&&t.subSequence.tracks.length,collapsed:e.pads.modulesCollapsed[t.subSequence.id],zobjects:t.subSequence.zObjects,zmessages:t.subSequence.zMessages}},function(e,t){return{setPulledEffects:function(t){return e(Object(i.De)(t))},setSelectedPulledElements:function(t){return e(Object(i.uf)(t))},setSelectedZObject:function(t){return e(Object(i.Cf)(t))},setSize:function(n){return e(Object(i.yd)(t.subSequence.id,n))}}})(q)},2778:function(e,t,n){"use strict";var r=n(6),a=n(0),c=n.n(a),o=n(260),s=n(9),i=n(255),u=n(10),l=(n(474),n(1063)),d=n(420),f=n(221),m=n(136),p=n(12),b=Object(p.b)(function(e,t){return{}},function(e,t){return{setFullScreenZObject:function(t){return e(Object(s.uc)(t))},setWindowPosition:function(n){return e(Object(s.Th)(t.zobject.window.id,n))},setViewableZObjects:function(t){return e(Object(s.Oh)(t))}}})(function(e){var t=e.setViewableZObjects,n=e.dropdownPos,r=e.zobject,o=e.setDropdownPos,s=e.setFullScreenZObject,i=e.setWindowPosition,p=(Object(l.a)({zobject:r,setDropdownPos:o}).mintToHic,Object(d.d)({zobject:r,setDropdownPos:o}).mintToZora),b=Object(a.useCallback)(function(){r.duplicate(),o(void 0)},[o]),v=Object(a.useCallback)(function(){s(r),o(void 0)},[o]),h=Object(a.useCallback)(function(){var e=r.state.zobject.viewableZObjects;i({x:100,y:100}),t([].concat(Object(u.a)(e),[r]))},[r,t]),g=Object(a.useCallback)(function(){r.delete()},[r]);return c.a.createElement(f.a,{dropdownPos:n,setDropdownPos:o},c.a.createElement(m.a,{onMouseDown:v},"Fullscreen"),c.a.createElement(m.a,{onMouseDown:h},"Open as Window"),c.a.createElement(m.a,{onMouseDown:b},"Duplicate ",c.a.createElement("div",{className:"key-shortcut"},"\u2318D")),c.a.createElement("div",{className:"divider"}),c.a.createElement(m.a,{onMouseDown:p},"Export as NFT"),c.a.createElement(m.a,{onMouseDown:g},"Delete"))}),v=Object(p.b)(function(e,t){var n=t.zobject.id;return{hidden:e.spatial.hiddenObjects[n],locked:e.spatial.lockedObjects[n]}},function(e){return{setUXLockObject:function(t,n){return e(Object(s.Dh)(t,n))},setUXHideObject:function(t,n){return e(Object(s.Ch)(t,n))}}})(function(e){var t=e.setObjectDragging,n=e.hidden,r=e.locked,o=e.setUXLockObject,s=e.setUXHideObject,u=e.className,l=e.setShow,d=e.setSelectedZObject,f=e.show,m=e.zobject,p=Object(a.useRef)(),v=Object(i.a)({ref:p,useTop:!1}),h=v.onContextMenu,g=v.dropdownPos,k=v.setDropdownPos;return Object(a.useEffect)(function(){g&&d(m)},[g,m]),g&&(u+=" showing-context-menu"),c.a.createElement("div",{ref:p,onDragLeave:function(e){return e.preventDefault()},draggable:!0,onDragStart:function(e){e.dataTransfer.effectAllowed="copy",e.dataTransfer.setData("text/html",m.id),t(m)},onDragOver:function(e){return e.preventDefault()},onContextMenu:h,className:u},g&&c.a.createElement(b,{dropdownPos:g,setDropdownPos:k,zobject:m}),c.a.createElement("div",{onClick:function(){return l(!f)},className:"arrow-container"},c.a.createElement("div",{className:f?"arrow-down":"arrow-right"})),c.a.createElement("img",{className:"object-icon",src:"/zobject-light.svg"}),c.a.createElement("div",{onClick:function(){return d(m)},className:"zobject-name"},c.a.createElement("span",{className:"object-name"},m.name),c.a.createElement("span",{className:"object-arg"},"string"===typeof m.args[0]&&m.args[0])),c.a.createElement("img",{onClick:function(){return s(m.id,!n)},className:n?"hidden eye":"eye",src:n?"/eyeball-hidden.svg":"/eyeball.svg"}),c.a.createElement("img",{onClick:function(){return o(m.id,!r)},className:"lock-ux-btn",src:r?"/zlock-locked-light.svg":"/zlock-unlocked-light.svg"}))});t.a=function e(t){var n=t.setObjectDragging,s=t.setSelectedZObject,i=t.selectedZObject,u=t.zobject,l=t.searchTerm,d=Object(a.useRef)(),f=Object(a.useState)(!1),m=Object(r.a)(f,2),p=m[0],b=(m[1],Object(a.useState)(!1)),h=Object(r.a)(b,2),g=h[0],k=h[1],E="zobject-option";if(u===i&&(E+=" selected"),u.effect&&u.effect.zObjects&&(E+=" nested"),Object(a.useEffect)(function(){k(""!==l)},[l,k]),""!==l)if(l=l.toLowerCase(),u.effect&&u.effect.zObjects){if(u._text.toLowerCase().includes(l))l="";else if(!Object(o.a)(u.effect).some(function(e){return"string"===typeof e._text&&e._text.toLowerCase().includes(l)}))return""}else if("string"!==typeof u._text||!u._text.toLowerCase().includes(l))return"";var O=Object(a.useCallback)(function(){if(d.current.setAttribute("drop-active",0),u.effect&&u.effect.zObjects){var e=u.state.zobject.objectDragging;u.effect.moveObjectInto(e)}},[u]),j="zobject";return p&&(j+=" drop-active"),c.a.createElement("div",{ref:d,onDragEnter:function(e){e.preventDefault(),u.effect&&u.effect.zObjects&&d.current.setAttribute("drop-active",1)},onDragOver:function(e){return function(){e.preventDefault()}},onDrop:O,onDragLeave:function(e){console.log("on drag leave"),d.current.setAttribute("drop-active",0)},className:j},c.a.createElement(v,{setObjectDragging:n,className:E,setShow:k,show:g,zobject:u,setSelectedZObject:s}),g&&u.effect&&u.effect.zObjects&&c.a.createElement("div",{onDragLeave:function(e){return e.preventDefault()},className:"nested-inner"},u.effect.zObjects.map(function(t){return c.a.createElement(e,{setObjectDragging:n,key:t.id,zobject:t,searchTerm:l,setSelectedZObject:s,selectedZObject:i})})))}},2781:function(e,t,n){"use strict";var r=n(6),a=n(0),c=n.n(a),o=[{value:"TWITTER",label:"Twitter"},{value:"STORE",label:"Store"},{value:"WEBSITE",label:"Website"},{value:"BANDCAMP",label:"Bandcamp"},{value:"FREE_SOUND",label:"Freesound.org"}],s=n(12),i=n(708),u=n(41),l=n.n(u),d=0;t.a=Object(s.b)(function(e,t){return{}},function(e){return{}})(function(e){var t=e.sample,n=e.samples,s=void 0===n?[t]:n,u=e.show,f=void 0!==u&&u;t=s[0];var m=Object(a.useState)(void 0),p=Object(r.a)(m,2),b=p[0],v=p[1],h=Object(a.useState)(!1),g=Object(r.a)(h,2),k=g[0],E=g[1],O=Object(a.useState)(void 0),j=Object(r.a)(O,2),S=j[0],y=j[1],w=Object(a.useState)(f),C=Object(r.a)(w,2),N=C[0],q=C[1],x=Object(a.useState)("STORE"),T=Object(r.a)(x,2),M=T[0],P=T[1],R=Object(a.useState)(""),D=Object(r.a)(R,2),A=D[0],I=D[1],z=Object(a.useState)(""),L=Object(r.a)(z,2),H=L[0],F=L[1];Object(a.useEffect)(function(){E(!0),Object(i.a)(t.ipfsHash).then(function(e){v(e),e?Object(i.b)(e).then(function(e){return y(e)}):y(void 0)})},[t,v,y,E]);var B=Object(a.useCallback)(function(){s.forEach(function(e){return Object(i.g)(A,e.ipfsHash)}),k||Object(i.e)(A,M,H),y({artistName:A,link:H,linkType:M}),v(A),q(!1),E(!0)},[A,E,H,M,y,q,s,k]),U=Object(a.useCallback)(function(e){E(!1);var t=e.target.value,n=++d;setTimeout(function(){n===d&&Object(i.b)(t).then(function(e){y(e),e&&(P(e.linkType),F(e.link),E(!0))})},150),I(t)},[I,F,E,P]);return N?c.a.createElement("div",{className:"artist-flow show"},c.a.createElement("input",{className:"artist-flow-input",placeholder:"Artist Name",value:A,type:"text",onChange:U}),c.a.createElement(l.a,{options:o,onChange:function(e){return P(e.value)},value:o.find(function(e){return e.value===M}),placeholder:"Website Type"}),c.a.createElement("input",{className:"artist-flow-input",placeholder:"Website",value:H,type:"text",onChange:function(e){return F(e.target.value)}}),c.a.createElement("div",{onClick:B,className:"artist-save-button"},"Save")):b?c.a.createElement("div",{className:"artist-flow"},b?c.a.createElement("div",{className:"artist-name"},b):c.a.createElement("div",{onClick:function(){return q(!0)},className:"match-artist-button"},"Match Sample To Artist"),S?c.a.createElement("a",{target:"_blank",href:S.link},S.link):""):c.a.createElement("div",null)})},2782:function(e,t,n){"use strict";var r=n(6),a=n(0),c=n.n(a),o=n(2),s=n.n(o),i=n(13),u=n(43),l=n(61);function d(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return f(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return f(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var c,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,c=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw c}}}}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var m=function(){var e=Object(i.a)(s.a.mark(function e(t,n,r,a){var c,o,i,l;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.a.getJson(r.newSequence);case 2:if(c=e.sent,o=p(c,n.ipfsHash),i=o.subSequence,l=o.trackNumber,console.log("loadSampleFromProject got sub=%s track=%s",i,l),-1!==i&&-1!==l){e.next=7;break}return e.abrupt("return");case 7:return e.abrupt("return",b(t,c,i,l,a));case 8:case"end":return e.stop()}},e)}));return function(t,n,r,a){return e.apply(this,arguments)}}(),p=function(e,t){var n,r=d(e.subSequences);try{for(r.s();!(n=r.n()).done;){var a=n.value;for(var c in a.tracksData){var o=a.tracksData[c];if("SAMPLER"===o.type){if(Object.keys(o.samplers).indexOf(t)>-1)return{subSequence:a.id,trackNumber:c}}else if("INSTRUMENT_RACK"===o.type){var s,i=d(a.tracksData[c].tracks);try{var u=function(){var e=s.value.track.instrument.samplers;if(Object.keys(e).find(function(n){return e[n].sampleId===t}))return{v:{subSequence:a.id,trackNumber:c}}};for(i.s();!(s=i.n()).done;){var l=u();if("object"===typeof l)return l.v}}catch(f){i.e(f)}finally{i.f()}}}}}catch(f){r.e(f)}finally{r.f()}return{subSequenceId:-1,trackNumber:-1}},b=function(e,t,n,r,a){var c=(n=t.subSequences.find(function(e){return e.id===n})).tracks[r];if(void 0===a)for(var o in a=0,c)for(var s=c[o],i=s.size,u=0;u<i;u++){var f=s[u];for(var m in f)if(f[m].on){a=parseInt(o);break}}var p=c[a],b=e.getSelectedTrack(),v=b.patterns[b.currentPattern],h=p.size;v.changeLength(h,!1),v.clear();for(var g=0;g<h;g++)if(g in p){var k=v.stepBuckets[g];f=p[g];for(var E in f){var O=k.steps[E]||new l.a;O.track=b,O.stepNumber=g,O.simpleLoad(f[E],b.effects,b,b.midiEffects.effects),k.steps[E]=O}}v.loadStepBuckets(void 0,!0),b.updateSteps();var j=n.tracksData[r];if(b.fromJson(j),"SAMPLER"===j.type&&"SAMPLER"===b.getTrackType()){var S=b.getSamplers()[0];for(var y in j.samplers){var w=j.samplers[y].slices;S.slice(0,w[0].startTime,w[0].endTime);var C,N=d(w=w.slice(1));try{for(N.s();!(C=N.n()).done;){var q=C.value;S.newSlice(q.startTime,q.endTime)}}catch(T){N.e(T)}finally{N.f()}}}else"INSTRUMENT_RACK"===j.type&&b.getTrackType();var x=n.tracksMidiEffects[r];return b.midiEffects.effects=[],b.midiEffects.fromJson(x),c.length},v=n(2704),h=n(12);t.a=Object(h.b)(function(e,t){return{}},function(e){return{}})(function(e){var t=e.sample,n=e.sequencerEngine,o=e.initialShow,s=void 0!==o&&o,i=Object(a.useState)([]),u=Object(r.a)(i,2),l=u[0],d=u[1],f=Object(a.useState)(s),p=Object(r.a)(f,2),b=p[0],h=p[1],g=Object(a.useState)(void 0),k=Object(r.a)(g,2),E=k[0],O=k[1],j=Object(a.useState)(0),S=Object(r.a)(j,2),y=S[0],w=S[1],C=Object(a.useState)(0),N=Object(r.a)(C,2),q=N[0],x=N[1];Object(a.useEffect)(function(){Object(v.a)(t.ipfsHash).then(d)},[d,t]);var T=Object(a.useCallback)(function(e,r,a){e.stopPropagation(),O(r),m(n,t,r,a).then(w),x(a||0)},[O,t,w,x]);return c.a.createElement("div",{className:"projects-used-in"},s?"":c.a.createElement("div",{className:"info"},"Used in ",l.length," ",c.a.createElement("span",{onClick:function(){return h(!b)},className:b?"projects-btn showing":"projects-btn"},"projects")),b?c.a.createElement("div",{className:"project-list"},l.map(function(e){return c.a.createElement("div",{onClick:function(t){return T(t,e)},className:e===E?"selected project-option":"project-option"},e.title,E===e?c.a.createElement("div",{className:"patterns-chooser"},c.a.createElement("div",{className:"pattern-label"},"Pattern:"),Array(y).fill(0).map(function(t,n){return c.a.createElement("div",{onClick:function(t){return T(t,e,n)},className:q===n?"pattern-btn selected":"pattern-btn"},n+1)})):"")})):"")})},2783:function(e,t,n){"use strict";var r=n(0),a=n.n(r),c=n(1428),o=n(44),s=n(85),i=n(256),u=n(12),l=n(9),d=Object(u.b)(function(e,t){var n=(e.tracks.trackIsEnabled[t.track.subSequence.id]||{})[t.track.id];return{isEnabled:void 0!==n&&n,isSelectedTrack:e.mix.selectedTrack===t.track.trackNumber,isFrozen:t.track.isFrozen}},function(e,t){return{setShowEffects:function(n){return e(Object(l.qg)(t.track.trackNumber,n))},setShowPianoRoll:function(t){return e(Object(l.eg)(t))},setShowParams:function(n){return e(Object(l.lb)(t.track.id,n))},setArrangementBottomMode:function(t){return e(Object(l.E)(t))}}})(function(e){var t=e.track,n=e.isEnabled,u=e.isFrozen,l=e.isSelectedTrack,d=e.setArrangementBottomMode,f=e.setShowPianoRoll,m=e.setShowEffects,p=e.showName,b=e.setShowParams,v=e.mode,h="track-overview";l&&(h+=" selected");var g=Object(c.a)({track:t,isSelectedTrack:l,sequencerEngine:t.sequencerEngine,setArrangementBottomMode:d,setShowPianoRoll:f,mode:v}).toggleWaveform,k=Object(r.useCallback)(function(){t.sequencerEngine.state.keyboard.isMouseDown&&t.toggleEnabled()},[t]);return a.a.createElement("div",{className:h},a.a.createElement("div",{className:"track-number"},t.trackNumber+1),a.a.createElement(i.a,{showPresetName:p,onClickThumbnail:function(){m(!1),b(!1),t.sequencerEngine.selectTrack(t.trackNumber),g()},track:t}),u?"":a.a.createElement(s.a,{element:o.Nb},a.a.createElement("div",{onMouseOver:k,onMouseDown:function(){return t.toggleEnabled()},className:n?"dot enabled":"dot"})))});t.a=Object(u.b)(function(e,t){return{tracks:t.sequencerEngine.tracks,numTracks:t.sequencerEngine.tracks&&t.sequencerEngine.tracks.length}},function(e){return{mouseDown:function(t){return e(Object(l.n)(t))}}})(function(e){var t=e.sequencerEngine,n=e.mouseDown,r=e.mode,c=e.showName,o=t.tracks;return o&&0!==o.length?a.a.createElement("div",{onClick:function(e){return e.stopPropagation()},onMouseDown:function(){return n(!0)},onMouseUp:function(){return n(!1)},onMouseLeave:function(){return n(!1)},className:"tracks-overview"},o.map(function(e){return a.a.createElement(d,{showName:c,key:e.id,mode:r,track:e})})):a.a.createElement("div",null)})},2785:function(e,t,n){"use strict";var r=n(10),a=n(2),c=n.n(a),o=n(13),s=n(3),i=n(4),u=n(7),l=n(11),d=n(1),f=n(0),m=n.n(f),p=(n(33),n(12)),b=n(205),v=n.n(b),h=n(9);function g(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=Object(d.a)(e);if(t){var a=Object(d.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(l.a)(this,n)}}var k=function(e){Object(u.a)(n,e);var t=g(n);function n(e){return Object(s.a)(this,n),t.call(this,e)}return Object(i.a)(n,[{key:"onClick",value:function(){var e=(new Date).getTime();void 0!==this.lastDate&&e-this.lastDate<500&&this.props.onChooseItem(this.props.item),this.lastDate=e,this.props.setSelectedPreset(this.props.item)}},{key:"onDragOver",value:function(e){e.preventDefault()}},{key:"onDragStart",value:function(e){this.props.setPresetDragging(this.props.item)}},{key:"name",get:function(){return this.props.item.name.length>40?this.props.item.name.slice(0,40)+"...":this.props.item.name}},{key:"render",value:function(){var e=this,t={paddingLeft:17*this.props.depth},n=this.props.selectedPreset===this.props.item?"folder-item selected":"folder-item";return m.a.createElement("div",{draggable:!0,onDragStart:function(t){return e.onDragStart()},onDragOver:function(t){return e.onDragOver(t)},onClick:function(){return e.onClick()},className:n,style:t},m.a.createElement("div",{onClick:function(){return e.props.onTestItem(e.props.item)},className:"item-icon"}),this.name)}}]),n}(f.Component),E=Object(p.b)(function(e){return{selectedPreset:e.presets.selectedPreset}},function(e){return{setSelectedPreset:function(t){return e(Object(h.tf)(t))},setPresetDragging:function(t){return e(Object(h.ye)(t))}}})(k),O=(n(75),n(45));function j(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=Object(d.a)(e);if(t){var a=Object(d.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(l.a)(this,n)}}var S=function(e){Object(u.a)(n,e);var t=j(n);function n(e){var r;return Object(s.a)(this,n),(r=t.call(this,e)).state={collapsed:!0,nameValue:"",hovering:!1,loading:!1},r}return Object(i.a)(n,[{key:"onClickCollapsed",value:function(){var e=Object(o.a)(c.a.mark(function e(t,n){return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.stopPropagation(),n){e.next=7;break}if(!this.props.folder.isDynamic()||this.props.folder.isLoaded){e.next=7;break}return this.setState({loading:!0}),e.next=6,this.props.folder.load();case 6:this.setState({loading:!1});case 7:this.setState({collapsed:n}),this.onClickName();case 9:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"getArrow",value:function(){var e=this;return this.state.collapsed?m.a.createElement("div",{onClick:function(t){return e.onClickCollapsed(t,!1)},className:"collapse-button"},m.a.createElement("div",{className:"arrow-right"})):m.a.createElement("div",{onClick:function(t){return e.onClickCollapsed(t,!0)},className:"collapse-button"},m.a.createElement("div",{className:"arrow-down",onClick:function(t){return e.onClickCollapsed(t,!0)}}))}},{key:"onDrop",value:function(e){e.stopPropagation(),this.setState({hovering:!1});var t=this.props.folderDragging,n=this.props.presetDragging;if(void 0!==t){if(this.props.setFolderDragging(void 0),this.props.folder===t)return;t.delete(),this.props.folder.addFolder(t)}else void 0!==n&&(n.parent.deleteItem(n),this.props.setPresetDragging(void 0),this.props.folder.addItem(n));this.props.onFoldersUpdated(),this.props.setHasChangesToFolders(!0)}},{key:"onClickName",value:function(){var e=(new Date).getTime();void 0!==this.lastDate&&e-this.lastDate<200&&this.props.onChooseFolder(this.props.folder),this.lastDate=e,this.props.selectedFolder===this.props.folder?this.props.setSelectedFolder(void 0):this.props.setSelectedFolder(this.props.folder)}},{key:"onInputType",value:function(e){this.setState({nameValue:e})}},{key:"onKeyDown",value:function(e){"Enter"===e.key&&(this.props.folder.name=this.state.nameValue,this.setState(this.state))}},{key:"getNameComponent",value:function(){var e=this,t=this.props.selectedFolder===this.props.folder&&this.props.folder.name?"folder-name selected":"folder-name";return this.state.hovering&&(t+=" hover"),m.a.createElement("div",{draggable:!0,onDragOver:function(t){return e.onDragOver(t)},onDragStart:function(t){return e.onDragStart(t)},onDragLeave:function(t){return e.onDragLeave(t)},className:t},this.getArrow(),m.a.createElement(O.a,{condition:this.props.folder.name},m.a.createElement("div",{className:"name-label",onClick:function(){return e.onClickName()}},this.props.folder.name)),m.a.createElement(O.a,{condition:void 0===this.props.folder.name},m.a.createElement("input",{value:this.state.nameValue,onChange:function(t){return e.onInputType(t.target.value)},onKeyDown:function(t){return e.onKeyDown(t)},ref:function(t){e.input=t},placeholder:"Type name of folder",className:"tag-input"})))}},{key:"onDragOver",value:function(e){e.preventDefault(),this.setState({hovering:!0})}},{key:"onDragLeave",value:function(e){this.setState({hovering:!1})}},{key:"onDragStart",value:function(e){this.props.setFolderDragging(this.props.folder)}},{key:"render",value:function(){var e=this,t=Object(r.a)(this.props.folder.subFolders);t.sort(function(e,t){return void 0===e.name||void 0===t.name?0:e.name.localeCompare(t.name)});var a=Object(r.a)(this.props.folder.items).filter(function(e){return void 0!==e.name});a.sort(function(e,t){return e.name.localeCompare(t.name)});var c=this.props.folder.depth<=1?0:1,o={paddingLeft:17*c};return 0===c&&(c=1),m.a.createElement("div",{onDrop:function(t){return e.onDrop(t)},className:"folder",style:o},this.getNameComponent(),m.a.createElement(O.a,{condition:!this.state.collapsed},t.map(function(t){return m.a.createElement(n,Object.assign({key:t.name},e.props,{folder:t}))})),m.a.createElement(v.a,{loading:this.state.loading,sizeUnit:"px",size:10,color:"#123abc"}),m.a.createElement(O.a,{condition:this.props.showItems&&!this.state.collapsed},a.map(function(t){return m.a.createElement(E,{key:t.name,onChooseItem:e.props.onChooseItem,onTestItem:e.props.onTestItem,depth:c,item:t})})))}}]),n}(f.Component);t.a=Object(p.b)(function(e){return{selectedFolder:e.presets.selectedFolder,folderDragging:e.presets.folderDragging,presetDragging:e.presets.presetDragging,name:void 0!==e.presets.selectedFolder?e.presets.selectedFolder.name:void 0}},function(e){return{setSelectedFolder:function(t){return e(Object(h.ff)(t))},setFolderDragging:function(t){return e(Object(h.qc)(t))},setPresetDragging:function(t){return e(Object(h.ye)(t))},setHasChangesToFolders:function(t){return e(Object(h.zc)(t))}}})(S)},2796:function(e,t,n){},2797:function(e,t,n){},2799:function(e,t,n){},2800:function(e,t,n){},2801:function(e,t,n){},2802:function(e,t,n){},2804:function(e,t,n){},2805:function(e,t,n){},2806:function(e,t,n){},2807:function(e,t,n){},2808:function(e,t,n){},2809:function(e,t,n){},2810:function(e,t,n){},2811:function(e,t,n){},2812:function(e,t,n){},2813:function(e,t,n){},2814:function(e,t,n){},2815:function(e,t,n){},2816:function(e,t,n){},2817:function(e,t,n){},2818:function(e,t,n){},2819:function(e,t,n){},2822:function(e,t,n){},2823:function(e,t,n){},2825:function(e,t,n){}}]);